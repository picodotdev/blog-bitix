<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title type="text">Blog Bitix</title>
    <subtitle type="text">Blog sobre al lenguaje de programación Java y la distribución GNU/Linux que uso habitualmente, Arch Linux, lo que aprendo sobre el software libre, la programación web y otros temas relacionados con la tecnología y la informática. El contenido puede contener trazas de asuntos fuera de tema.</subtitle>
    <link rel="self" href="https://picodotdev.github.io/blog-bitix/index.xml"/>
    <link href="https://picodotdev.github.io/blog-bitix/" />
    <id>https://picodotdev.github.io/blog-bitix/en/posts/</id>
    <updated>2020-11-01T18:00:00+01:00</updated>
    <author><name>picodotdev</name></author>
    <generator>Hugo</generator>
    <icon>https://picodotdev.github.io/blog-bitix/assets/favicon.ico</icon>
    <logo>https://picodotdev.github.io/blog-bitix/assets/images/blog-bitix.svg</logo>
    <rights>https://creativecommons.org/licenses/by-sa/4.0/</rights>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2017/07/4-ways-to-make-a-for-loop-in-java/</id>
        <title>4 ways to make a for loop in Java</title>
        <updated>2020-11-01T18:00:00+01:00</updated>
        <published>2020-11-01T18:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2017/07/4-ways-to-make-a-for-loop-in-java/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>The usual way in Java to do a loop is with a <em>for</em> or <em>while</em> statement but with the addition of iterators in Java 5 it is not necessary to have a variable to keep the index of the loop. Since Java 8, <em>streams</em> have been added that offer other new ways of iterating over the elements of a collection, in the latter case with techniques of functional languages.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/java.svg" width="200" height="366" alt="Java" title="Java"  class=""></p>
</div>
<p>Until Java 5 to make a loop from 0 to N elements you had to use a variable to keep a counter, do a comparison to check if the limit had been reached and increase the variable in the next execution. The code was quite verbose and since loops are a basic construction of any programming language it is used many times in any algorithm.</p>
<p>Some of these examples of loops are usable from Java 5, in more recent versions many other new features have been added such as <a href="https://picodotdev.github.io/blog-bitix/2014/03/novedades-y-nuevas-caracteristicas-de-java-8/"><em>lambdas</em>, <em>streams</em>, methods in interfaces and new API for dates</a> in Java 8, <a href="https://picodotdev.github.io/blog-bitix/2017/09/novedades-y-nuevas-caracteristicas-de-java-9-los-modulos/">the modularity, improved <em>try-with-resource</em>, jlink or a new publishing model</a> in Java 9, <a href="https://picodotdev.github.io/blog-bitix/2018/03/novedades-de-java-10/">type inference for local variables</a> in Java 10, <a href="https://picodotdev.github.io/blog-bitix/2018/09/novedades-y-nuevas-caracteristicas-de-java-11/">an HTTP client</a> in Java 11 and other <a href="https://picodotdev.github.io/blog-bitix/series/java-platform/">novelties in the Java language and platform</a>.</p>
<p>Loops are one of <a href="https://picodotdev.github.io/blog-bitix/2020/06/las-sentencias-de-control-de-flujo-en-java-if-switch-for-while-do-while-try-catch-break-continue-e-invocacion/">Java&rsquo;s basic flow control structures and statement types</a> that allow repeating the execution of a block of statements as long as the repetition condition expression is met, in each iteration of the loop the condition expression is evaluated and when it is not fulfilled, it continues with the next sentence of the program.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Article content</h2><toc></toc></div>
<h3 id="for-loop">for loop</h3>
<p>Before Java 5, a <em>for</em> loop from 0 to 5 and a collection was done in the following way, maintaining a variable normally named <em>i</em> that acts as a counter and <em>j</em> if the <em>for</em> loop is nested in another. In addition to the counter variable, it requires setting the condition that allows to exit the loop when the end of the iteration is reached, the condition is very important not to create an infinite loop.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>For.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">Collection</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">Iterable</span> <span class="n">it</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="na">iterable</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">hasNext</span><span class="o">())</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">it</span><span class="o">.</span><span class="na">next</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Iterator.java</span>
    </div>
</div>
<h3 id="foreach-loop">foreach loop</h3>
<p>In Java 5 the <em>for</em> loop was significantly enriched, the <em>foreach</em> loop is an improved <em>for</em> loop with which you can loop through a collection and any object that implements the <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html">Iterable</a> interface. This loop has the advantage that there is no need to maintain a variable that acts as a counter, nor does it require establishing a condition to check if the end of the iteration has been reached, this avoids the possibility of creating an infinite loop. With the <em>foreach</em> loop a <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html">Collection</a> is traversed as follows.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">:</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">))</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Foreach.java</span>
    </div>
</div>
<h3 id="loop-with-iterable">Loop with Iterable</h3>
<p>But the <em>forearch</em> is for collections if you want to make a loop of a fixed number of iterations as in the first case, from 0 to 5, knowing that to use the <em>foreach</em> it is enough that we indicate an object that implements the interface <em>Iterable</em> we can use the following expression and its implementation that has the advantage of not having to include the initial value of the counter, the condition expression and the increment or decrement of the variable. The <em>Counter</em> class implements the <em>Iterable</em> interface and returns an <em>Iterator</em> on the values ​​of the indicated range.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">:</span> <span class="k">new</span> <span class="n">Counter</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">5</span><span class="o">))</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>CounterIterable.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.javaforeach</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.Iterator</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Counter</span> <span class="kd">implements</span> <span class="n">Iterable</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kt">int</span> <span class="n">start</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kt">int</span> <span class="n">end</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="nf">Counter</span><span class="o">(</span><span class="kt">int</span> <span class="n">start</span><span class="o">,</span> <span class="kt">int</span> <span class="n">end</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">this</span><span class="o">.</span><span class="na">start</span> <span class="o">=</span> <span class="n">start</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">this</span><span class="o">.</span><span class="na">end</span> <span class="o">=</span> <span class="n">end</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">iterator</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="k">new</span> <span class="n">Iterator</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">start</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">hasNext</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">end</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="n">Integer</span> <span class="nf">next</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">i</span><span class="o">++;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kt">void</span> <span class="nf">remove</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">throw</span> <span class="k">new</span> <span class="n">UnsupportedOperationException</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">};</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Counter.java</span>
    </div>
</div>
<h3 id="loop-with-streams">Loop with streams</h3>
<p>In Java 8 with the introduction of <a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html">Stream</a> and <a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html">IntStream</a> we can use the <a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#range-int-int-">range</a> and <a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#rangeClosed-int-int-">rangeClosed</a> to get a <em>Stream</em> of integers and make a loop with a behavior similar to the previous ones.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">IntStream</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">5</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span> <span class="n">i</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">});</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Stream.java</span>
    </div>
</div>
<p>The Java 8 <em>Stream</em> are fine to simplify some complex operations but for a simple <em>for</em> loop it has its drawbacks such as significantly obfuscating the <em>stacktrace</em> in case of an exception. Any option can be used, but the first with the traditional <em>for</em> loop is the least recommended, having at our disposal the <em>Counter</em> class with Java 5 or the <em>Stream</em> and <em>lambdas</em> with Java 8.</p>
<h3 id="example-with-the-different-types-of-loop">Example with the different types of loop</h3>
<p>The following program shows the four options, its output on the console would be the following:</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span><span class="lnt">43&#10;</span><span class="lnt">44&#10;</span><span class="lnt">45&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.javaforeach</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.stream.IntStream</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;for i&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;foreach&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">:</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">))</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;for counter&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">:</span> <span class="k">new</span> <span class="n">Counter</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">5</span><span class="o">))</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;stream foreach&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">IntStream</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">5</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="n">i</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">});</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Sentencia break&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">break</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Sentencia continue&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="o">;</span> <span class="o">++</span><span class="n">i</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">continue</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main.java</span>
    </div>
</div>
<p>For any of the ways of doing the <em>for</em> loop the behavior is the same, iterate a finite number of times or over the elements of a collection. Choosing which one to use among the different types of loops depends on the case and personal preferences but also considering the readability and expressiveness of the source code.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">$ ./gradlew run&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&gt; Task :run&#10;</span></span><span class="line"><span class="cl">for i&#10;</span></span><span class="line"><span class="cl">0&#10;</span></span><span class="line"><span class="cl">1&#10;</span></span><span class="line"><span class="cl">2&#10;</span></span><span class="line"><span class="cl">3&#10;</span></span><span class="line"><span class="cl">4&#10;</span></span><span class="line"><span class="cl">foreach&#10;</span></span><span class="line"><span class="cl">0&#10;</span></span><span class="line"><span class="cl">1&#10;</span></span><span class="line"><span class="cl">2&#10;</span></span><span class="line"><span class="cl">3&#10;</span></span><span class="line"><span class="cl">4&#10;</span></span><span class="line"><span class="cl">for counter&#10;</span></span><span class="line"><span class="cl">0&#10;</span></span><span class="line"><span class="cl">1&#10;</span></span><span class="line"><span class="cl">2&#10;</span></span><span class="line"><span class="cl">3&#10;</span></span><span class="line"><span class="cl">4&#10;</span></span><span class="line"><span class="cl">stream foreach&#10;</span></span><span class="line"><span class="cl">0&#10;</span></span><span class="line"><span class="cl">1&#10;</span></span><span class="line"><span class="cl">2&#10;</span></span><span class="line"><span class="cl">3&#10;</span></span><span class="line"><span class="cl">4&#10;</span></span><span class="line"><span class="cl">Sentencia break&#10;</span></span><span class="line"><span class="cl">0&#10;</span></span><span class="line"><span class="cl">1&#10;</span></span><span class="line"><span class="cl">2&#10;</span></span><span class="line"><span class="cl">Sentencia continue&#10;</span></span><span class="line"><span class="cl">0&#10;</span></span><span class="line"><span class="cl">1&#10;</span></span><span class="line"><span class="cl">2&#10;</span></span><span class="line"><span class="cl">4&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">BUILD SUCCESSFUL in 1s&#10;</span></span><span class="line"><span class="cl">2 actionable tasks: 1 executed, 1 up-to-date</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System.out</span>
    </div>
</div>
<div class="alert alert-secondary sourcecode fs-6">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            You can download the <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/JavaForeach">example complete source code</a> from the Blog Bitix examples repository hosted on GitHub and test it on your computer by executing the following command:<br><code>./gradlew run</code></p>
</div>
]]>
        </content>
        
            
                <category term="java"/>
            
                <category term="planeta-codigo"/>
            
                <category term="programacion"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/09/how-to-buy-a-license-and-activate-windows-10-and-office-2019/</id>
        <title>How to buy a license and activate Windows 10 and Office 2019</title>
        <updated>2020-09-10T22:00:00+02:00</updated>
        <published>2020-09-10T22:00:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/09/how-to-buy-a-license-and-activate-windows-10-and-office-2019/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Windows 10 and Microsoft Office 2019 are software products with a private license, to use them legally it is necessary to buy a license that allows them to be activated. Resorting to activators of these products to avoid paying the license is not recommended since they are a source of entry for computer viruses with a significant danger to the security of the computer and the importance of the tasks that we currently perform in it, such as purchases or banking inquiries. A 2012 European court ruling allows third-party vendors to offer Windows 10 and Microsoft Office 2019 licenses at significantly cheaper prices to activate these products fully legally.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/microsoft.svg" width="200" height="200" alt="Microsoft" title="Microsoft"  class=""></p>
</div>
<p>The most widely used operating system on personal computers for home use and on business IT equipment is <a href="https://www.microsoft.com/es-es/windows/">Windows 10</a> from <a href="https://www.microsoft.com/">Microsoft</a>. Many of the manufacturers of desktop computers of brands such as HP or Dell but also many of the assembled computer assemblers of pieces and practically all of the notebook manufacturers include pre-installed Windows 10 as an operating system along with other software, in these cases it is not necessary buy a Windows license as it is included in the price of the product.</p>
<p>Through vendors other than Microsoft, it is possible to buy a cheap and completely legal license with which to activate these products and eliminate the messages that request activation to have access to all their functions without being disabled after a while after their installation.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Article content</h2><toc></toc></div>
<h3 id="windows-10-license-types-and-versions">Windows 10 license types and versions</h3>
<p>Windows 10 has different versions, the differences between them are in the features they support.</p>
<ul>
<li><em>Home</em>: it is the version used mostly and sufficient for most users to be installed on home computers.</li>
<li><em>Pro</em>: this version includes all the functionalities of the <em>Home</em> edition with some additional ones normally necessary in business environments. Some of its additional functionalities are Active Directory, Remote Desktop, BitLocker, virtualization with Hyper-V and <em>Windows Defender Device Guard</em>.</li>
<li><em>Pro for Workstations</em>: is the version that allows you to use Windows on high-performance computers with Intel Xeon or AMD Epyc processors, large amounts of memory and some more advanced options.</li>
</ul>
<p>Microsoft licenses and distributes its software in different ways.</p>
<ul>
<li><em>OEM</em>: the software is pre-installed on the computer by the manufacturer or vendor and the license is associated with it.</li>
<li><em>Retail</em>: the software is sold independently together with the equipment or for an existing equipment, unlike the <em>OEM</em> it is used for several equipment.</li>
<li><em>Microsoft Volume Licensing</em>: allows the use of licenses by organizations that have large volumes of computer equipment such as companies, governments or educational institutions.</li>
</ul>
<h3 id="microsoft-office-versions">Microsoft Office versions</h3>
<p>Office also has different versions of the office suite programs that mainly comprise the Word document editor, the Excel spreadsheet and PowerPoint to create presentations along with some other programs such as Outlook such as an e-mail application or Access to create simple databases.</p>
<ul>
<li><a href="https://www.microsoft.com/es-es/microsoft-365/free-office-online-for-the-web">Office Online</a>: it is the version that competes with <a href="https://www.google.es/intl/es/docs/about/">Google Docs</a>, it is a version implemented as a web application. It is accessed with a web browser, it does not require installing programs on the computer, it is free and allows several people to collaborate on the same document.</li>
<li><a href="https://www.microsoft.com/es-es/microsoft-365/explore-microsoft-365-for-home">Office 365</a>: it is a subscription service with monthly payment that gives access to the office suite programs and their web version. When the next version is published in the future, it is not necessary to make a payment again to access the new version. It includes some additional services such as Skype for video conference communications and OneDrive for cloud storage.</li>
<li><a href="https://products.office.com/es-es/">Office 2019</a>: it is the usual one-time payment method to access the programs in the office suite. The programs are installed as desktop applications on the computer. When a new version is released in the future, you have to pay again for the license to use the new version.</li>
</ul>
<p>Of the desktop applications of Microsoft Office 2019 there are several versions that differ in the applications they include, for most users the version <em>Home and Students</em> that includes the basic applications of an office suite is sufficient.</p>
<ul>
<li><em>Home and Students</em>: includes the three basic applications of the office suite. Word as a word processor to write documents, Excel as a spreadsheet that allows you to perform operations and obtain calculated results by applying formulas, and PowerPoint to create presentations.</li>
<li><em>Home and Business</em>: in addition to the basic office suite applications, it includes the Outlook e-mail desktop application.</li>
<li><em>Professional</em>: in addition to Word, Excel, PowerPoint and Outlook, it includes the Publisher application to create printed documents such as brochures, catalogs, brochures or envelopes, among others. It also includes the Access application for creating databases.</li>
<li><em>Professional Plus</em>: includes all the applications of the <em>Professional</em> version and includes the Skype videoconference communication application.</li>
</ul>
<h3 id="how-much-do-windows-10-and-microsoft-office-2019-licenses-cost">How much do Windows 10 and Microsoft Office 2019 licenses cost?</h3>
<p>In some cases, the price of the Windows 10 license has to be purchased separately from the computer even if it is offered to do so at the same time, in the invoice the cost of the computer and the Windows 10 license will be itemized. The cost of the Windows 10 license sold by Microsoft costs between 145 € for the <em>Home</em> version, 259 € for the <em>Pro</em> and 439 € for the <em>Pro for Workstations</em>, it is not cheap. The Microsoft Office 2019 license sold by Microsoft costs 149 €, it also has payment methods under subscription with a monthly cost.</p>
<p>An additional cost in user licenses that make a new computer very expensive, taking into account some, start at 300 € and even for a 1000 € it represents a significant percentage if not higher than the hardware. <a href="https://www.microsoft.com/es-es/store/b/windows">Microsoft sells <em>Retail</em> licenses for Windows 10</a> and <a href="https://www.microsoft.com/en-eus/microsoft-365/buy/compare-all-microsoft-365-products">Microsoft Office 2019 licenses</a> on their website.</p>
<p>There are several vendors other than Microsoft that allow you to obtain a license for Windows 10 and Microsoft Office in a completely legal, valid and forever way with very cheap prices that allow you to activate these products. <a href="https://curia.europa.eu/jcms/upload/docs/application/pdf/2012-07/cp120094en.pdf">In 2012 the European Union court issued a ruling</a> by which the licenses of Software sold over the internet that is no longer used by their original buyers can be bought and sold legally, this is what some sellers do buy those licenses that are no longer used and resell them to other users at low prices.</p>
<p>If the price of Windows 10 sold by Microsoft in its <em>Retail</em> version is 145 € for the <em>Home</em> version or 259 € for the <em>Pro</em>, these other sellers offer valid licenses at much cheaper prices, between about 10 € and 15 €, which represents a significant saving in this software. If the version of <em>Office Home and Students 2019</em> costs 149 € buying it from Microsoft, other sellers offer licenses with activation codes also for between 10 € and 15 €.</p>
<h3 id="download-windows-10-and-microsoft-office-2019">Download Windows 10 and Microsoft Office 2019</h3>
<p>Both Windows 10 and the Microsoft Office 2019 office suite can be downloaded for free with the original Spanish language pack from Microsoft&rsquo;s official website with the web browser via direct download. The Windows 10 image includes the different versions. Although the download is free, it is necessary to buy a license that grants the right of use.</p>
<ul>
<li><a href="https://www.microsoft.com/es-es/software-download/windows10">Download Windows 10</a></li>
<li><a href="http://officecdn.microsoft.com/pr/492350f6-3a01-4f97-b9c0-c7c6ddf67d60/media/es-es/HomeStudent2019Retail.img">Download Microsoft Office 2019, Home and Student</a></li>
<li><a href="http://officecdn.microsoft.com/pr/492350f6-3a01-4f97-b9c0-c7c6ddf67d60/media/es-es/HomeBusiness2019Retail.img">Download Microsoft Office 2019, Home and Business</a></li>
<li><a href="http://officecdn.microsoft.com/pr/492350f6-3a01-4f97-b9c0-c7c6ddf67d60/media/es-es/Professional2019Retail.img">Download Microsoft Office 2019, Professional</a></li>
<li><a href="https://officecdn.microsoft.com/pr/492350f6-3a01-4f97-b9c0-c7c6ddf67d60/media/es-es/ProPlus2019Retail.img">Download Microsoft Office 2019, Professional Plus</a></li>
</ul>
<h3 id="what-if-i-dont-have-a-windows-10-and-microsoft-office-2019-license">What if I don&rsquo;t have a Windows 10 and Microsoft Office 2019 license</h3>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/">Windows 10 can be downloaded and installed from scratch</a> even without having a license to use it. However, after about 30 days Windows 10 deactivates some aesthetic customization options that do not affect its functionality, it allows you to continue using it indefinitely, including continuing to obtain the latest security updates. Some of the customization options that are disabled are applying custom themes, modifying the system colors and fonts, configuring the start menu or the wallpaper and lock screen.</p>
<p>If you do not want to buy a Windows 10 license, you can install a free distribution of <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> such as <a href="https://www.ubuntu.com/">Ubuntu</a>, <a href="https://picodotdev.github.io/blog-bitix/2017/05/descargar-e-instalar-la-distribucion-ubuntu-de-gnu-linux-paso-a-paso-desde-cero/">Download and install the Ubuntu distribution of GNU/Linux step stepping from scratch</a>. Currently, GNU/Linux operating systems like Ubuntu are just as easy to use and as intuitive as Windows, in which most additional programs are without cost and free for any functionalities that are needed, such as a photo retouching program, video player, photo viewer, web browser, etc. It is even possible <a href="https://picodotdev.github.io/blog-bitix/2019/09/la-aplicacion-cliente-de-steam-en-gnu-linux/">to play most Windows games with Steam on GNU/Linux</a> and <a href="https://www.winehq.org/">Wine</a> with the same performance, common hardware is recognized without the need to install specific drivers including graphics cards, USB memory sticks and external hard drives.</p>
<p>Microsoft Office can also be installed but after a month it prevents the editing of documents if it is not activated, which greatly limits its functionality. Documents can be opened in read mode at any time, but to recover the editing options it is necessary to purchase your license and activate the product. If you don&rsquo;t want to buy a license or if you prefer to use an office suite with a free license, these are <a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/">4 of the best alternatives for Microsoft Office</a>.</p>
<h3 id="where-to-buy-a-windows-10-and-microsoft-office-2019-license">Where to buy a Windows 10 and Microsoft Office 2019 license</h3>
<p>Given the inexpensive price of vendors other than Microsoft that offer Windows 10 and Microsoft Office licenses, it is advisable to purchase a license that allows you to activate these products. Without the need to hack or resort to activators that many of them are a source of viruses and are illegal, just looking for them is a risk for the security of the computer and one of the biggest sources of entry of viruses in Windows systems since searches can lead to malicious pages. Today we do important tasks on the computer from storing numerous personal information to paying online or accessing the bank account or receipts, thus avoiding the risk of computer viruses.</p>
<p>Some of the sellers sell licenses through <a href="https://amzn.to/2flFhHA">Amazon</a> or <a href="https://www.ebay.es/">eBay</a> as third-party sellers, given the popularity of these e-commerce giants it is possibly one of the most convenient options if you already have an account. Another alternative is <a href="https://www.goodoffer24.com">Goodoffer24</a> that offers payment with <a href="https://www.paypal.com/">PayPal</a>, others are <a href="https://www.digitallicense.nl">Digital License</a>, <a href="https://www.g2play.net">G2Play</a>, <a href="https://www.gvgmall.com/">GVGmall</a>, <a href="https://www.gamefun365.com/">Gamefun365</a>.</p>
<p>I do not use the Windows operating system or the Microsoft Office office suite, so I do not have the experience of how it is the result of buying on one of these pages. However, any of these pages and links offer comments and evaluations of both the product and the seller, in the case of Amazon it is usually external sellers which offer fewer guarantees, so I recommend reading both the product description and the comments of other people and ratings that the seller has. If you buy a license after reading this article you can leave a comment.</p>
<p>Once the purchase is made, the product activation code is sent in a few hours by email or to the account of the page. The license activation code is a character string made up of several numbers and letters separated by hyphens with the following appearance, <em>XXXXX-XXXXX-XXXXX-XXXXX-XXXXX</em> that must be entered in the configuration sections of Windows 10 and Microsoft Office 2019.</p>
<ul>
<li><a href="https://www.microsoft.com/es-es/store/b/windows">Windows 10 License</a> from Microsoft.</li>
<li><a href="https://www.microsoft.com/es-es/microsoft-365/buy/compare-all-microsoft-365-products">Microsoft Office 2019 License</a> at Microsoft.</li>
<li><a href="https://amzn.to/333Df5X">Windows 10 Home License</a> on Amazon.</li>
<li><a href="https://amzn.to/3iZ4dBk">Windows 10 Pro License</a> on Amazon.</li>
<li><a href="https://amzn.to/369oJfc">Microsoft Office 2019 License</a> on Amazon.</li>
<li><a href="https://www.ebay.es/sch/i.html?_from=R40&amp;_trksid=p2334524.m570.l1313&amp;_nkw=windows&#43;10&#43;home&#43;key&#43;espa%C3%B1ol&amp;_sacat=0&amp;LH_TitleDesc=0&amp;_osacat=0&amp;_odkw=windows&#43;10&#43;home&#43;64&#43;bits&#43;key&#43;espa%C3%B1ol">Windows 10 Home License</a>on eBay.</li>
<li><a href="https://www.ebay.es/sch/i.html?_from=R40&amp;_trksid=p2334524.m570.l1313&amp;_nkw=windows&#43;10&#43;professional&#43;key&#43;espa%C3%B1ol&amp;_sacat=0&amp;LH_TitleDesc=0&amp;_sop=2&amp;_osacat=0&amp;_odkw=windows&#43;10&#43;professional&#43;64&#43;bits&#43;key&#43;espa%C3%B1ol">Windows 10 Pro License</a> on eBay.</li>
<li><a href="https://www.ebay.es/sch/i.html?_from=R40&amp;_trksid=p2334524.m570.l1313&amp;_nkw=microsoft&#43;office&#43;2019&#43;key&#43;espa%C3%B1ol&amp;_sacat=0&amp;LH_TitleDesc=0&amp;_sop=2&amp;_osacat=0&amp;_odkw=microsoft&#43;office&#43;2019&#43;license&#43;espa%C3%B1ol">Microsoft Office 2019 License</a> on eBay.</li>
</ul>
<h3 id="how-to-activate-windows-10-and-microsoft-office-2019">How to activate Windows 10 and Microsoft Office 2019</h3>
<p>Windows 10 can be activated during installation or once installed by selecting the <em>Start</em> button, then following the options <em>Settings &gt; Update and security &gt; Activation &gt; Update product key &gt; Change product key</em>. In this section you enter the activation code purchased. Once successfully activated in this same section a message is displayed that informs the Windows activation status, if it is activated the message <em>Windows is activated</em> should appear.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/09/how-to-buy-a-license-and-activate-windows-10-and-office-2019/images/activacion-windows-10-instalacion_huc7b655666a8c23d0b9098acd9620b24a_27905_2560x1440_fit_box_3.png" data-gallery="" title="Activación de Windows durante la instalación"><img src="https://picodotdev.github.io/blog-bitix/2020/09/how-to-buy-a-license-and-activate-windows-10-and-office-2019/images/activacion-windows-10-instalacion_huc7b655666a8c23d0b9098acd9620b24a_27905_200x150_fit_box_3.png" width="200" height="150" alt="Activación de Windows durante la instalación" title="Activación de Windows durante la instalación"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/09/how-to-buy-a-license-and-activate-windows-10-and-office-2019/images/activacion-windows-10-1_hue2f00426bda6f3af68fc047a11881ee9_66528_2560x1440_fit_box_3.png" data-gallery="" title="Activación de Windows"><img src="https://picodotdev.github.io/blog-bitix/2020/09/how-to-buy-a-license-and-activate-windows-10-and-office-2019/images/activacion-windows-10-1_hue2f00426bda6f3af68fc047a11881ee9_66528_200x150_fit_box_3.png" width="200" height="150" alt="Activación de Windows" title="Activación de Windows"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/09/how-to-buy-a-license-and-activate-windows-10-and-office-2019/images/activacion-windows-10-2_huf0b8d0f835137dac2b176bf97352d738_64877_2560x1440_fit_box_3.png" data-gallery="" title="Activación de Windows"><img src="https://picodotdev.github.io/blog-bitix/2020/09/how-to-buy-a-license-and-activate-windows-10-and-office-2019/images/activacion-windows-10-2_huf0b8d0f835137dac2b176bf97352d738_64877_200x150_fit_box_3.png" width="200" height="150" alt="Activación de Windows" title="Activación de Windows"  class="lozad "></a></p>
<figcaption>Activación de Windows durante la instalación y una vez instalado</figcaption>
</figure>
</div>
<p>The following command executed from the <em>Command Prompt</em> utility allows you to obtain the Windows 10 activation code.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-cmd" data-lang="cmd"><span class="line"><span class="cl">wmic path softwarelicensingservice get OA3xOriginalProductKey&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>wmic.cmd</span>
    </div>
</div>
<p>Once Microsoft Office is installed, when you open one of the office <em>suite</em> applications, the activation of the product is requested. To activate Microsoft Office with the purchased license code, it is done from the menu <em>File &gt; Account &gt; Product information &gt; Activate product</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/09/how-to-buy-a-license-and-activate-windows-10-and-office-2019/images/activacion-microsoft-office-1_hufbc21a3d004c5fec86856c19435e71a4_35307_2560x1440_fit_box_3.png" data-gallery="" title="Activación de Microsoft Office 2019"><img src="https://picodotdev.github.io/blog-bitix/2020/09/how-to-buy-a-license-and-activate-windows-10-and-office-2019/images/activacion-microsoft-office-1_hufbc21a3d004c5fec86856c19435e71a4_35307_200x150_fit_box_3.png" width="200" height="150" alt="Activación de Microsoft Office 2019" title="Activación de Microsoft Office 2019"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/09/how-to-buy-a-license-and-activate-windows-10-and-office-2019/images/activacion-microsoft-office-2_huf170c625f02e87e1bd96ab8240c6ba61_63468_2560x1440_fit_box_3.png" data-gallery="" title="Activación de Microsoft Office 2019"><img src="https://picodotdev.github.io/blog-bitix/2020/09/how-to-buy-a-license-and-activate-windows-10-and-office-2019/images/activacion-microsoft-office-2_huf170c625f02e87e1bd96ab8240c6ba61_63468_200x150_fit_box_3.png" width="200" height="150" alt="Activación de Microsoft Office 2019" title="Activación de Microsoft Office 2019"  class="lozad "></a></p>
<figcaption>Activación de Microsoft Office 2019</figcaption>
</figure>
</div>
<div class="reference">
    Reference:<br>
<ul>
<li><a href="https://www.europapress.es/portaltic/sector/noticia-revender-licencias-software-adquirido-forma-online-legal-20120703173828.html">Revender licencias de software adquirido de forma online es legal</a></li>
<li><a href="https://support.microsoft.com/es-es/help/12440/windows-10-activate">Activar Windows 10</a></li>
<li><a href="https://support.microsoft.com/es-es/office/activaci%C3%B3n-de-office-5bd38f38-db92-448b-a982-ad170b1e187e">Activación de Office</a></li>
<li><a href="https://support.microsoft.com/es-mx/help/10749/windows-10-find-product-key">Encontrar la clave del producto de Windows</a></li>
<li><a href="https://support.microsoft.com/es-es/office/descargar-e-instalar-o-volver-a-instalar-microsoft-365-u-office-2019-en-un-equipo-pc-o-mac-4414eaaf-0478-48be-9c42-23adc4716658">Descargar e instalar o volver a instalar Microsoft 365 u Office 2019 en un equipo PC o Mac</a></li>
<li><a href="https://www.ardilu.com/descargar/office-2019-home-student">Descargar Microsoft Office 2019 Hogar y Estudiantes</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="microsoft"/>
            
                <category term="planeta-codigo"/>
            
                <category term="windows"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2015/07/microsoft-does-not-care-if-you-use-windows-or-office-without-a-license/</id>
        <title>Microsoft does not care if you use Windows or Office without a license</title>
        <updated>2017-12-03T12:00:00+01:00</updated>
        <published>2017-12-03T12:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2015/07/microsoft-does-not-care-if-you-use-windows-or-office-without-a-license/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>If Microsoft wished there would be no Windows users using it without the corresponding license. But they consents, they does not care that for a personal use it pirated. A few days after July 29, Windows 10 will appear on the file sharing networks and download pages, also a few days later a program will appear that avoids the validation system as has happened with previous versions.</strong></p>]]>
        <![CDATA[<div class="logotypes"> 
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/microsoft.svg" width="200" height="200" alt="Microsoft" title="Microsoft"  class=""></p>
</div>
<p>Microsoft has released for sale and will pre-install the right-of-use (not product ownership) license of its next operating system, Windows 10. Although most will acquire this license through the <a href="https://en.wikipedia.org/wiki/Bundling_of_Microsoft_Windows#The_.22Windows_tax.22">Windows tax</a> when buying a new computer and although (rarely) it is possible to get their reimbursement it is still with obstacles, the great majority will not request the reimbursement maybe for lack of knowledge that the equipment and its operating system are two different products (many do not know either that it is an operating system), ignorance of the possibility of reimbursement or for not making the effort (I plead guilty) of which the manufacturer is habitual that provides zero information on how to proceed and when it is done is with difficulties. Many of us pay for the Windows license even if we do not want it, and although Microsoft logically prefers you to acquire the license, I think it does not matter that you do not pay it for personal use.</p>
<p>There are few but a few options to purchase a laptop without Windows or with some Linux distribution, good quality, good specifications and reasonably priced, one of them are <a href="https://slimbook.es/">Slimbook</a> laptops. In the blog of <a href="https://www.kdeblog.com/">KDE Blog</a> there is an <a href="https://www.kdeblog.com/slimbook-tu-portatil-linux-de-calidad.html">article about an model of these laptops</a> and <a href="https://www.kdeblog.com/unboxing-de-mi-slimbook-con-kubuntu-15-04-y-plasma-5.html">a video with a <em>unboxing</em></a>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2015/07/microsoft-does-not-care-if-you-use-windows-or-office-without-a-license/images/windows-10_hu63ecbf579a4b08a5b972601ac3743876_11446_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10"><img src="https://picodotdev.github.io/blog-bitix/2015/07/microsoft-does-not-care-if-you-use-windows-or-office-without-a-license/images/windows-10_hu63ecbf579a4b08a5b972601ac3743876_11446_300x200_fit_box_3.png" width="300" height="55" alt="Windows 10" title="Windows 10"  class="lozad "></a></p>
</figure>
</div>
<p>Why do I say that they do not mind not paying the license? Because version after version the measures included in Windows or Office to protect them from an unlicensed use are avoided without apparently many difficulties and after a very short time appear in the pages of downloads the images along with the instructions to follow to install it without any type of problem. And in Windows 10 it will be the same. Why do not the included validation measures prevent unlicensed use? Because it suits Microsoft not to be too restrictive. If they were, some would pay the license, but many would say, what? Does the license cost 119 € (or 199, or 50 depending on what is returned with a new computer)? A third (aprox.) of what the computer cost me?, and that only Windows, if we add Office and other programs the cost of the licenses could far exceed the price of the equipment. Worse still, amount to be disbursed every few years due to obsolescence and new versions. And what would those who could not use Windows or Office do? Find alternatives and &hellip; what do you think they would choose? The expensive competition of <a href="https://www.apple.com/">Apple</a> with its <a href="https://www.apple.com/es/mac/">Macs</a> or some distribution GNU/Linux like <a href="https://www.ubuntu.com/">Ubuntu</a>, <a href="https://www.linuxmint.com/">Linux Mint</a>, <a href="https://www.debian.org/">Debian</a>, <a href="https://fedoraproject.org/">Fedora</a>, <a href="https://www.opensuse.org/">openSUSE</a>, etc &hellip; That people knew and paid the cost of the software licenses would probably be one of the best ways to encourage the use of free software and GNU/Linux.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2015/07/microsoft-does-not-care-if-you-use-windows-or-office-without-a-license/images/linux-gnu-ditributions_hua8379f023f8e752d4054ff36fb2ea0fa_40197_2560x1440_fit_box_3.png" data-gallery="" title="Linux, GNU, distribuciones"><img src="https://picodotdev.github.io/blog-bitix/2015/07/microsoft-does-not-care-if-you-use-windows-or-office-without-a-license/images/linux-gnu-ditributions_hua8379f023f8e752d4054ff36fb2ea0fa_40197_300x200_fit_box_3.png" width="300" height="75" alt="Linux, GNU, distribuciones" title="Linux, GNU, distribuciones"  class="lozad "></a></p>
</figure>
</div>
<p>Does anyone believe that a company like Microsoft with the resources and capacity it possesses could not implement a validation that would prevent its misuse, more now where the internet connection is common? No, the answer is that he does not want to and the time has had to prove otherwise. Losing many users in favor of their alternatives would make them able to use those same alternatives at work (including schools and training companies), the business world where Microsoft is easier for them to claim their right legally rather than individually and from where they will get higher income. Doing so would cause Windows usage quota to drop at current monopoly levels and possibly in the long run a risk of their income.</p>
<p>One only has to see the obscene millionades that are adjudicated in contracts for the purchase of licenses in the public administration. Money that comes out of your taxes that many politicians and officials responsible for such awards do not understand (or do not want to understand) that this hefty recurring expense is much better invested in local companies that create jobs in the region and in free software of which anyone can benefit instead of a company that little of its development does in each country where it is used. The cost of the free software can be equally obscene, equally bulging or much smaller but the difference among others is that very probably not by the licenses but by the services of consultancy or development that can be offered by local companies and of which depending on the case any could to benefit.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2015/07/microsoft-does-not-care-if-you-use-windows-or-office-without-a-license/images/windows-genuine_hu4129af9d7be73d8e6dda1c7e4145dd34_21378_2560x1440_fit_q90_box.jpg" data-gallery="" title="Windows Genuine"><img src="https://picodotdev.github.io/blog-bitix/2015/07/microsoft-does-not-care-if-you-use-windows-or-office-without-a-license/images/windows-genuine_hu4129af9d7be73d8e6dda1c7e4145dd34_21378_300x200_fit_q90_box.jpg" width="300" height="169" alt="Windows Genuine" title="Windows Genuine"  class="lozad "></a></p>
</figure>
</div>
<p>Microsoft knows that you are using your software without the corresponding license and tells you to show you a message from time to time or you remove the wallpaper, a bit annoying but not prevent its use. Voluntary or negligent validation systems built into Windows or Office allow many users to use the Pirated Edition, users who are not willing to pay the considerable cost of the license. Although it will prefer that users buy the license Microsoft allows to a certain extent the use of its software without it, the alternative would be to lose the possibility of convincing some to use the software legally apart from losing use quota in favor of other alternatives, perhaps they prefer a situation where their software is used illegally rather than an alternative is more helpful. Microsoft also commits the injustices that the law leaves or no one demands, pre-installed its undesirable system by some who do not want it at the same time as it does not provide clear information and the process is simple to get its return together with the reimbursement of its cost and in taxes that using tax engineering along with other companies are taken to where they pay least.</p>
<p>A new version of Windows or a new computer is an ideal occasion for instead of migrating to the new version of Windows make the jump to GNU/Linux and stop worrying about being raped by slavering licenses or accepting clauses that most people would read and understood they would not accept it so cheerfully. I did it a few years ago going through various distributions, <a href="https://elblogdepicodev.blogspot.com.es/2010/03/de-windows-arch-linux.htmlindex-amp.html">from Windows to Arch Linux</a>, and after almost six years I still follow Arch, <a href="https://picodotdev.github.io/blog-bitix/2014/08/de-arch-linux-a-arch-linux/">from Arch Linux to Arch Linux</a>.</p>
<div class="reference">
    Reference:<br>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/01/windows-10-and-office-2016-as-easy-to-use-without-license-as-always/">Windows 10 and Office 2016 as easy to use without license as always</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/">3 office alternative options to Microsoft Office</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="microsoft"/>
            
                <category term="opinion"/>
            
                <category term="planeta-codigo"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/</id>
        <title>Download and install Windows 10 step by step from scratch</title>
        <updated>2020-11-01T12:30:00+01:00</updated>
        <published>2017-05-09T22:30:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>A virus, <em>bloatware</em> pre-installed on many laptops, or after installing and uninstalling programs in Windows can cause the computer to slow down, display error messages, or a virus to encrypt personal files. In these cases, a simple, fast and reliable common solution to use the computer normally again is to reinstall Windows 10 from scratch. It is not complicated but for a user with little computer knowledge it is not an easy task. In this article I explain how to download and install the Windows 10 operating system step by step from scratch for free.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/microsoft.svg" width="200" height="200" alt="Microsoft" title="Microsoft"  class=""></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/windows-10.svg" width="200" height="200" alt="Windows 10" title="Windows 10"  class=""></p>
</div>
<p>Almost all laptops sold in the most popular department stores are pre-installed with the Windows operating system. But manufacturers with the intention of providing more capabilities and functionalities than those included in <a href="https://www.microsoft.com/es-es/windows/">Windows</a> install numerous programs that make up the well-known <em>bloatware</em> that on many occasions make a completely new computer slower than normal when starting the system, when starting programs or working with them. Among the programs that manufacturers usually pre-install are antivirus that after a while are deactivated since they are usually evaluation versions and can leave the computer unprotected against viruses and malicious software, Windows 10 already incorporates one, Windows Defender, and for most of users is sufficient for its acceptable effectiveness. Other programs that manufacturers usually install are video players or multimedia software, in most cases unnecessary since Windows itself already incorporates the capabilities to work with multimedia files such as photos or videos. It may also be the case that after an update or the installation of a program the computer begins to show failures.</p>
<p>In the above cases, a reinstallation of Windows from scratch is necessary. Many users do not have advanced computer or technology knowledge and do not know the steps to perform a reinstall. In this article I will explain in detail, step by step and from scratch, what are the steps to take to install Windows 10.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Article content</h2><toc></toc></div>
<h3 id="minimum-requirements">Minimum requirements</h3>
<p>The first thing is to know that Windows 10 to function correctly has minimum requirements for the computer on which it will be installed, it was marketed in July 2015 and any computer after that date will already meet the minimum requirements and also the computers that meet with Windows 7 or pre-installed with this previous version. In the page of <a href="https://www.microsoft.com/es-es/windows/windows-10-specifications">Specifications and system requirements for Windows</a> are detailed a good amount of informative notes and the requirements that are the following:</p>
<ul>
<li>Processor: 1 GHz or faster processor or SoC</li>
<li>RAM: 1 gigabyte (GiB) for 32-bit or 2 GB for 64-bit</li>
<li>Hard disk space: 16 GB for a 32-bit OS or 20 GB for a 64-bit OS</li>
<li>Graphics card: DirectX 9 or later with a WDDM 1.0 driver</li>
<li>Screen: 800 x 600</li>
</ul>
<p>These are the basic requirements, the recommended ones for a good user experience are to have 4 GiB of memory and with this memory the next aspect with which an improvement is most noticeable is to have a solid state hard disk or SSD instead of mechanical since they are several magnitudes faster both in reading and writing.</p>
<p>Any new computer meets these requirements but perhaps some do not have an SSD hard disk, these disks are more expensive and offer less capacity although they have already become cheaper and are quite affordable and their capacity from 128 GiB or 256 GiB are enough for many users. Paying a little more for a computer with an SSD disk is a good decision, a computer with a mechanical disk may take 1 or 2 minutes to start up, one with an SSD less than 10 seconds, which is just an example between the difference between one and the other.</p>
<h3 id="windows-10-versions">Windows 10 versions</h3>
<p>Windows 10 has different versions, the differences between them are in the features they support.</p>
<ul>
<li><em>Home</em>: it is the version used mostly and sufficient for most users to be installed on home computers.</li>
<li><em>Pro</em>: this version includes all the functionalities of the <em>Home</em> edition with some additional ones normally necessary in business environments. Some of its additional functionalities are Active Directory, Remote Desktop, BitLocker, virtualization with Hyper-V and <em>Windows Defender Device Guard</em>.</li>
<li><em>Pro for Workstations</em>: is the version that allows you to use Windows on high-performance computers with Intel Xeon or AMD Epyc processors, large amounts of memory and some more advanced options.</li>
</ul>
<h3 id="backup">Backup</h3>
<p>Once you know that the equipment meets the minimum requirements, you have to make a backup copy of the documents, photos and other personal files that the equipment has and you want to keep on an external hard drive or USB memory, if there is a lot of data instead of copying and pasting with the file explorer you can make the <a href="https://picodotdev.github.io/blog-bitix/2016/05/como-realizar-copias-de-seguridad-en-windows-con-freefilesync/">backup with the FreeFileSync program</a> and restore the data also with the same program once Windows is reinstalled.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/freefilesync_hu850fac8bdc50ed57ad63701c150e5e1e_58783_2560x1440_fit_box_3.png" data-gallery="" title="Backup with FreeFileSync"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/freefilesync_hu850fac8bdc50ed57ad63701c150e5e1e_58783_200x150_fit_box_3.png" width="200" height="122" alt="Backup with FreeFileSync" title="Backup with FreeFileSync"  class="lozad "></a></p>
<figcaption>Backup with FreeFileSync</figcaption>
</figure>
</div>
<h3 id="how-to-download-windows-10-for-free">How to download Windows 10 for free</h3>
<p>In previous versions of Windows it had to be searched on file-sharing or P2P networks as a torrent. It is Microsoft itself that offers by direct download the Windows 10 ISO image for free from its own page and a tool for creating the USB or DVD media from which to start the installation. Simply <a href="https://www.microsoft.com/en-us/software-download/windows10">download the Windows 10 installation media</a> to your computer by accessing the download page with a web browser, the installation media includes all versions of Windows, <em>Home</em>, <em>Pro</em> and <em>Pro for Workstations</em>. With a good internet connection the download is fast, it does not take more than a few minutes.</p>
<h3 id="creating-the-installation-media">Creating the installation media</h3>
<p>Depending on the Windows update downloaded, the screenshots or steps will vary but will be largely similar. Accessing the Windows 10 download page from a Windows 7, Windows 8.1 or Windows 10 system will display the option to download the Media Creation Tool or <em>Media Creation Tool</em>. Once downloaded and executed, the tool also allows the download of Windows 10 and the creation of media either a DVD or USB memory. In the case of the USB memory, it must have a capacity of at least 8 GiB and all the data it has will be lost, so your data must be saved in another external drive.</p>
<p>To install Windows 10, it is more advisable to use a USB memory with the <em>Media Creation Tool</em> program since it is faster than using a disused DVD disc for which some systems no longer even include a DVD reader.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-media-creation-tool-01_hufd65225e7198e5f47aea1dbd4b72e459_134397_2560x1440_fit_box_3.png" data-gallery="" title="Media Creation Tool"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-media-creation-tool-01_hufd65225e7198e5f47aea1dbd4b72e459_134397_200x150_fit_box_3.png" width="200" height="150" alt="Media Creation Tool" title="Media Creation Tool"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-media-creation-tool-02_hufd65225e7198e5f47aea1dbd4b72e459_140315_2560x1440_fit_box_3.png" data-gallery="" title="Media Creation Tool"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-media-creation-tool-02_hufd65225e7198e5f47aea1dbd4b72e459_140315_200x150_fit_box_3.png" width="200" height="150" alt="Media Creation Tool" title="Media Creation Tool"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-media-creation-tool-03_hufd65225e7198e5f47aea1dbd4b72e459_136520_2560x1440_fit_box_3.png" data-gallery="" title="Media Creation Tool"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-media-creation-tool-03_hufd65225e7198e5f47aea1dbd4b72e459_136520_200x150_fit_box_3.png" width="200" height="150" alt="Media Creation Tool" title="Media Creation Tool"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-media-creation-tool-04_hufd65225e7198e5f47aea1dbd4b72e459_135275_2560x1440_fit_box_3.png" data-gallery="" title="Media Creation Tool"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-media-creation-tool-04_hufd65225e7198e5f47aea1dbd4b72e459_135275_200x150_fit_box_3.png" width="200" height="150" alt="Media Creation Tool" title="Media Creation Tool"  class="lozad "></a></p>
<figcaption>Creating the installation media</figcaption>
</figure>
</div>
<h3 id="start-window-10-installation">Start Window 10 installation</h3>
<p>Once the Windows 10 installation media is ready in the form of a USB memory or DVD with the computer turned off and the installation media connected to a USB port or inserted in the DVD reader, it must be started so that it starts from the installation media. Depending on the manufacturer, starting the computer from the installation media varies slightly but the press of a key is usually used when the computer starts, the key is usually F2, F8, F10, F12 or the Escape key that allows you to select the drive from which the computer starts where you have to choose the USB memory or DVD.</p>
<p>It may be that the key is used to access the UEFI BIOS where you can also select the boot order of the units that also varies according to the manufacturer, the UEFI BIOS contains important configuration parameters of the computer so you must be careful in the things that are modified in them so if you are not sure of the changes you are making do not save them, luckily the latest versions of the UEFI BIOS are more intuitive and with easier to use graphical interfaces.</p>
<p>Depending on the manufacturer and even models from the same manufacturer, the access key to start from the installation media varies:</p>
<ul>
<li>Acer: F2 or Delete</li>
<li>Asus: F2 or F10</li>
<li>Dell: F2, F1, Delete, F12 or F3</li>
<li>HP: F10 or Esc</li>
<li>Lenovo: F1 or F2</li>
<li>Sony: F2, F3, F1 or assist key</li>
<li>Toshiba: F2, F1, Esc</li>
</ul>
<p>In the following pages you can find several possible keys to enter the BIOS and change the system boot drive according to the brand, <a href="http://www.makeuseof.com/tag/enter-bios-computer/">I</a>, <a href="https://www.lifewire.com/bios-setup-utility-access-keys-for-major-bios-manufacturers-2624461">II</a> and [III](https://www.lifewire.com/bios -setup-utility-access-keys-for-popular-computer-systems-2624463).</p>
<p>It may be the case that when the equipment starts, it shows a message with the key to press if it is necessary to try until it is found. After pressing the power button shortly after or as a logo is displayed is when the key must be pressed.</p>
<h3 id="windows-10-setup-wizard">Windows 10 setup wizard</h3>
<p>One of the successes of Windows 10 is that the installation offers a wizard with which after completing several steps and pressing buttons <em>Next</em> the system is installed and ready to use. Installation is complete in less than an hour.</p>
<p>Among the steps are the selection of the language, the version of the <em>Home</em> or <em>Pro</em> system (the first is enough), the reading of the terms of the license of use that few people read completely due to its length and its little understandable legal jargon. If the computer has a license, the possibility of entering the product key to activate Windows will be offered, if you do not have it, it is possible to skip this step by pressing the option <em>I do not have a product key</em> and use Windows without limitations for a while, after some time in any case the limitations are very slight and Windows 10 is usable normally.</p>
<p>The <em>Customized installation is recommended: install only Windows</em> and do not keep previous files and settings to avoid problems or inherit them from the previous system. It is also recommended to delete all partitions on the disk and let Windows create the necessary ones. After finishing copying files to the computer showing the installation progress, a reboot will be performed automatically.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-01_hu3653d37e445d70237bdc1666bc900c9b_23018_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 installation"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-01_hu3653d37e445d70237bdc1666bc900c9b_23018_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 installation" title="Windows 10 installation"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-02_hu8737aa76b6e74e0cf927acbbc9f767d6_15762_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 installation"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-02_hu8737aa76b6e74e0cf927acbbc9f767d6_15762_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 installation" title="Windows 10 installation"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-03_hu38b6f2a0d57ae4e036f1ebf2cc0ba9ce_7761_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 installation"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-03_hu38b6f2a0d57ae4e036f1ebf2cc0ba9ce_7761_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 installation" title="Windows 10 installation"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-04_huc7b655666a8c23d0b9098acd9620b24a_27905_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 installation"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-04_huc7b655666a8c23d0b9098acd9620b24a_27905_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 installation" title="Windows 10 installation"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-05_huedf05b605a29cade512929b67cb63a00_29308_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 installation"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-05_huedf05b605a29cade512929b67cb63a00_29308_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 installation" title="Windows 10 installation"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-06_hu360f4fa9176ec86849d8525e292d745a_31670_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 installation"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-06_hu360f4fa9176ec86849d8525e292d745a_31670_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 installation" title="Windows 10 installation"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-07_hu27fd114fd4129e58c7144c2b36c1bf05_30034_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 installation"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-07_hu27fd114fd4129e58c7144c2b36c1bf05_30034_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 installation" title="Windows 10 installation"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-08_hucf0c0634ee37cede4e113fe04c7a18d8_30011_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 installation"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-08_hucf0c0634ee37cede4e113fe04c7a18d8_30011_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 installation" title="Windows 10 installation"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-09_hub8188a9d1bb3996561f174e439accd45_18224_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 installation"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/instalacion-windows-10-09_hub8188a9d1bb3996561f174e439accd45_18224_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 installation" title="Windows 10 installation"  class="lozad "></a></p>
<figcaption>Windows 10 installation</figcaption>
</figure>
</div>
<h4 id="basic-configuration">Basic configuration</h4>
<p>After installing Windows, it offers a new wizard where some additional things about the system are customized. Some options to select in these steps before starting to use Windows 10 are:</p>
<ul>
<li>The region or country of the user.</li>
<li>The layout or arrangement of the keyboard keys.</li>
<li>Login user either with a Microsoft account or with an offline account and password. If the computer is connected to the internet, the configuration wizard asks to use a Microsoft account, if you want to use a local account you have to disconnect the network cable.</li>
<li>If you want to use Cortana as a personal assistant.</li>
<li>Some privacy options that are recommended to disable so that Windows does not collect information from our device even if it is anonymous data.</li>
</ul>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-01_huc94c5191a8a49cfe8af12ceae460aeb2_10643_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-01_huc94c5191a8a49cfe8af12ceae460aeb2_10643_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-02_hufae8ac09bc24bc21a35cf32858167fcf_15078_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-02_hufae8ac09bc24bc21a35cf32858167fcf_15078_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-03_hu9e92ba2f396c2ad008a96332bbef0cc3_27292_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-03_hu9e92ba2f396c2ad008a96332bbef0cc3_27292_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-04_hua5168a28023d3f77bf1d1d3442ce2fa9_31965_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-04_hua5168a28023d3f77bf1d1d3442ce2fa9_31965_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-05_hu32e5b5953b9746caa7fb7fcf5fc96f99_30788_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-05_hu32e5b5953b9746caa7fb7fcf5fc96f99_30788_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-06_hu7cd9850ac7c156bb14e5edf0a6b3828a_15679_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-06_hu7cd9850ac7c156bb14e5edf0a6b3828a_15679_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-07_hubc68cff7e31a14395692351abee3c554_36286_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-07_hubc68cff7e31a14395692351abee3c554_36286_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-08_hu486e78d45b29b84959d271497910c123_28489_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-08_hu486e78d45b29b84959d271497910c123_28489_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-09_hue80ff4532111cfcd16d9bd9d9b362ebf_30470_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-09_hue80ff4532111cfcd16d9bd9d9b362ebf_30470_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-10_hu50fd4e6f7da2a0c7ee2e1257debb69ce_26971_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-10_hu50fd4e6f7da2a0c7ee2e1257debb69ce_26971_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-11_hub47375722c5e248a7e695b9606b8b9ec_63777_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-11_hub47375722c5e248a7e695b9606b8b9ec_63777_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-12_hua7dc2bd90edd695f9b35b39e958c30c2_61436_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-12_hua7dc2bd90edd695f9b35b39e958c30c2_61436_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-13_hueccb48aba8017948c54fb27133d69cc4_45763_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-13_hueccb48aba8017948c54fb27133d69cc4_45763_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-14_hu85938cce626695d5a1dfb9caaaf84288_69265_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-14_hu85938cce626695d5a1dfb9caaaf84288_69265_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-15_huce6934b0e6ec8647f05b5ec4c9196e34_54998_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-15_huce6934b0e6ec8647f05b5ec4c9196e34_54998_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-16_huaa5cb6719d7bfe1fbcc5d76e68b76e70_63882_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-16_huaa5cb6719d7bfe1fbcc5d76e68b76e70_63882_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-17_hu4ee5f4a194f638c10cef6c44696725dc_52091_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-17_hu4ee5f4a194f638c10cef6c44696725dc_52091_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-18_hu6d91242804999d82806b1f7f985a565e_55100_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-18_hu6d91242804999d82806b1f7f985a565e_55100_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-19_hu9a02a4028d01069ba244d60c99c3283f_90448_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-19_hu9a02a4028d01069ba244d60c99c3283f_90448_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-20_hu1d9ca35afa09a08dc306f070871ba6b3_18693_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10 Configuration"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/configuracion-windows-10-20_hu1d9ca35afa09a08dc306f070871ba6b3_18693_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10 Configuration" title="Windows 10 Configuration"  class="lozad "></a></p>
<figcaption>Configuración inicial de Windows 10</figcaption>
</figure>
</div>
<p>After the Windows 10 configuration steps, prepare the system for the first login.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/primer-inicio-sesion-windows-10-01_hub4b1dfc545250023694b9ba3115829d7_3722_2560x1440_fit_box_3.png" data-gallery="" title="First start with Windows 10"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/primer-inicio-sesion-windows-10-01_hub4b1dfc545250023694b9ba3115829d7_3722_200x150_fit_box_3.png" width="200" height="150" alt="First start with Windows 10" title="First start with Windows 10"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/primer-inicio-sesion-windows-10-02_hu92d7160fcabfd0918e97a5bfcf2cda18_8016_2560x1440_fit_box_3.png" data-gallery="" title="First start with Windows 10"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/primer-inicio-sesion-windows-10-02_hu92d7160fcabfd0918e97a5bfcf2cda18_8016_200x150_fit_box_3.png" width="200" height="150" alt="First start with Windows 10" title="First start with Windows 10"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/primer-inicio-sesion-windows-10-03_hu15daebdabca7f9d693efbbe841df90f3_16690_2560x1440_fit_box_3.png" data-gallery="" title="First start with Windows 10"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/primer-inicio-sesion-windows-10-03_hu15daebdabca7f9d693efbbe841df90f3_16690_200x150_fit_box_3.png" width="200" height="150" alt="First start with Windows 10" title="First start with Windows 10"  class="lozad "></a></p>
<figcaption>First start with Windows 10</figcaption>
</figure>
</div>
<h3 id="using-windows-and-what-to-do-after-installation">Using Windows and what to do after installation</h3>
<p>If the computer already had a Windows license and was activated, surely Windows 10 will already recognize it as activated. It is also very likely that Windows 10 will be able to automatically recognize all the hardware that you have in the computer, including the graphics card, to use the maximum resolution offered by the screen, so if necessary, you must install an additional device driver by downloading it from the official website of the product manufacturer.</p>
<p>At this point Windows 10 can start to use and perhaps install the basic software and programs that you are going to use as an office suite either <a href="https://products.office.com/es-es/">Microsoft Office</a> or one of the best <a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/">4 alternatives to Microsoft Office</a>, a web browser like <a href="https://www.mozilla.org/es-ES/firefox/new/">Firefox</a> or <a href="https://www.google.es/chrome/browser/desktop/">Chrome</a> with the plugin to block ads <a href="https://adblockplus.org/es/">AdBlockPlus</a> instead of using <a href="https://www.microsoft.com/es-es/windows/microsoft-edge/">Microsoft Edge</a> which is built-in by default. It is not necessary to install any antivirus since Windows 10 already integrates its own, which is also one of the best.</p>
<p>Even without a license and without activating Windows 10 it is perfectly usable, perhaps after a while you will not be able to change some customization options such as the desktop background or window themes but nothing important that prevents you from using it. And in any case <a href="https://picodotdev.github.io/blog-bitix/2016/01/windows-10-y-office-2016-tan-faciles-de-usar-sin-licencia-como-siempre/">Windows 10 and Office 2016 are still as easy to use without a license as ever</a>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-10-01_hu7a226b0e11554bfc7f50cf48f99a95c2_206052_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-10-01_hu7a226b0e11554bfc7f50cf48f99a95c2_206052_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10" title="Windows 10"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-10-02_hua584fff2b9f6a763b95f3733f5ed047f_197183_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-10-02_hua584fff2b9f6a763b95f3733f5ed047f_197183_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10" title="Windows 10"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-10-03_hua5e3bee7b0a9664d72809318af1ef05f_134947_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-10-03_hua5e3bee7b0a9664d72809318af1ef05f_134947_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10" title="Windows 10"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-10-04_hu9f88f2b88975908bbaee460a4df3094c_51975_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-10-04_hu9f88f2b88975908bbaee460a4df3094c_51975_200x150_fit_box_3.png" width="200" height="150" alt="Windows 10" title="Windows 10"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-10-05_hua48fe921f04329bf175569f2f75d609b_247437_2560x1440_fit_q90_box.jpg" data-gallery="" title="Windows 10"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/windows-10-05_hua48fe921f04329bf175569f2f75d609b_247437_200x150_fit_q90_box.jpg" width="200" height="150" alt="Windows 10" title="Windows 10"  class="lozad "></a></p>
<figcaption>Windows 10</figcaption>
</figure>
</div>
<h4 id="buy-a-license-and-activate-windows-10">Buy a license and activate Windows 10</h4>
<p>Installing and using Windows 10 is free but after a few days after installation it must be activated with a valid license code, if it is not activated, some customization options such as changing the desktop background are disabled, although they do not prevent its use.</p>
<p>Windows 10 licenses sold by Microsoft are not cheap, between € 145 and € 439 depending on the version. Some sellers offer cheap and legal licenses at very reduced prices of between $ 10 and $ 15 as I explain in the article <a href="https://picodotdev.github.io/blog-bitix/2020/09/how-to-buy-a-license-and-activate-windows-10-and-office-2019/">How to buy a license and activate Windows 10 and Microsoft Office 2019</a>.</p>
<h3 id="alternative-to-windows-with-gnulinux-distributions">Alternative to Windows with GNU/Linux distributions</h3>
<p>You should know that Windows is not the only operating system option that you can install, if you want you can try any of the <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> distributions as an alternative to Windows and discover the world of free software that it respects your rights and it does not take them away as proprietary software, you can read the article <a href="https://picodotdev.github.io/blog-bitix/2016/10/elegir-una-distribucion-gnu-linux-segun-el-usuario-uso-o-equipo/">choose a GNU/Linux distribution according to the user or team</a> and <a href="https://picodotdev.github.io/blog-bitix/2017/05/descargar-e-instalar-la-distribucion-ubuntu-de-gnu-linux-paso-a-paso-desde-cero/">install Ubuntu step by step from scratch</a>.</p>
<p>The following are some screenshots of several of the most famous GNU/Linux distributions.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/ubuntu_hu688947c873613f770b8fce072759e364_634897_2560x1440_fit_box_3.png" data-gallery="" title="Ubuntu with Unity desktop environment"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/ubuntu_hu688947c873613f770b8fce072759e364_634897_200x150_fit_box_3.png" width="200" height="150" alt="Ubuntu with Unity desktop environment" title="Ubuntu with Unity desktop environment"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/elementary-os_hu6850958699743fb7b2d663014faa6ed7_524177_2560x1440_fit_box_3.png" data-gallery="" title="elementaryOS"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/elementary-os_hu6850958699743fb7b2d663014faa6ed7_524177_200x150_fit_box_3.png" width="200" height="150" alt="elementaryOS" title="elementaryOS"  class="lozad "></a></p>
<figcaption>Ubuntu and elementaryOS</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/fedora_hu3a55cf603f217ed80ba1c280e25bba4d_575634_2560x1440_fit_box_3.png" data-gallery="" title="Fedora with GNOME desktop environment"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/fedora_hu3a55cf603f217ed80ba1c280e25bba4d_575634_200x150_fit_box_3.png" width="200" height="150" alt="Fedora with GNOME desktop environment" title="Fedora with GNOME desktop environment"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/opensuse_hu9d15c118b90231a9588d6324419986dd_87237_2560x1440_fit_box_3.png" data-gallery="" title="openSUSE with KDE desktop environment"><img src="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/images/opensuse_hu9d15c118b90231a9588d6324419986dd_87237_200x150_fit_box_3.png" width="200" height="150" alt="openSUSE with KDE desktop environment" title="openSUSE with KDE desktop environment"  class="lozad "></a></p>
<figcaption>Fedora and openSUSE</figcaption>
</figure>
</div>
]]>
        </content>
        
            
                <category term="microsoft"/>
            
                <category term="planeta-codigo"/>
            
                <category term="software"/>
            
                <category term="windows"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/</id>
        <title>4 free office suites alternatives to Microsoft Office</title>
        <updated>2017-04-14T12:15:00+02:00</updated>
        <published>2017-04-14T12:15:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Microsoft Office is the office suite with a great margin of difference in the usage quota with the next option on Windows systems. It is very complete and includes more features that most users know but it is also a more expensive option than other alternatives that are free without having anything to envy for most users and use cases.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/microsoft.svg" width="200" height="200" alt="Microsoft" title="Microsoft"  class=""></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/libreoffice.svg" width="300" height="58" alt="LibreOffice" title="LibreOffice"  class=""></p>
</div>
<p>In the first article of this 2016 I commented that <a href="https://picodotdev.github.io/blog-bitix/2016/01/windows-10-and-office-2016-as-easy-to-use-without-license-as-always/">Windows and Office are still easy to use without a license</a>. License that costs nothing more and nothing less than about 125 € for <a href="https://amzn.to/3cb4v74">home and students</a> and about 250 € for <a href="https://amzn.to/3sc4aqv">home and companies</a>, by team. And if the equipment is renewed or damaged requiring the change of some components, a new license must be acquired. Given the not inconsiderable cost of the license, it is not surprising that both Windows and Office are one of the most used products without a license or pirated.</p>
<p>Given how easy it is to use Windows and Office without a license together with the <a href="https://elblogdepicodev.blogspot.com.es/2011/05/impuesto-windows.htmlindex-amp.html">Windows tax</a> they have a market share in practically monopoly numbers and there are no signs that it will change in the short term. Sometimes I think that <a href="https://picodotdev.github.io/blog-bitix/2015/07/microsoft-does-not-care-if-you-use-windows-or-office-without-a-license/">Microsoft doesn&rsquo;t care if you use unlicensed Windows or Office</a> for personal use. However, there are alternatives for both Windows and Office that have little to envy, much cheaper or even free and free software even with better support than <a href="https://www.microsoft.com/">Microsoft</a> offers for their own software. What is not recommended to use activators because it is a source of computer viruses or trojans is better <a href="https://picodotdev.github.io/blog-bitix/2020/09/how-to-buy-a-license-and-activate-windows-10-and-office-2019/">buy a cheap license for Windows 10 and Microsoft Office</a>.</p>
<ul>
<li><a href="https://amzn.to/333Df5X">Windows 10 Home License</a> on Amazon.</li>
<li><a href="https://amzn.to/3iZ4dBk">Windows 10 Pro License</a> on Amazon.</li>
<li><a href="https://amzn.to/369oJfc">Microsoft Office 2019 License</a> on Amazon.</li>
<li><a href="https://www.ebay.es/sch/i.html?_from=R40&amp;_trksid=p2334524.m570.l1313&amp;_nkw=windows&#43;10&#43;home&#43;key&#43;64&#43;bits&amp;_sacat=0&amp;LH_TitleDesc=0&amp;_sop=2&amp;_osacat=0&amp;_odkw=windows&#43;10&#43;home&#43;key&#43;64">Windows 10 Home License</a> on eBay.</li>
<li><a href="https://www.ebay.es/sch/i.html?_from=R40&amp;_trksid=p2334524.m570.l1313&amp;_nkw=windows&#43;10&#43;professional&#43;digital&#43;key&#43;64&#43;bits&amp;_sacat=0&amp;LH_TitleDesc=0&amp;_sop=2&amp;_osacat=0&amp;_odkw=windows&#43;10&#43;pro&#43;digital&#43;key&#43;64&#43;bits">Windows 10 Pro License</a> on eBay.</li>
<li><a href="https://www.ebay.es/sch/i.html?_from=R40&amp;_trksid=p2334524.m570.l1313&amp;_nkw=microsoft&#43;office&#43;2019&#43;&#43;key&amp;_sacat=0&amp;LH_TitleDesc=0&amp;_sop=2&amp;_osacat=0&amp;_odkw=microsoft&#43;office&#43;2019&#43;pro&#43;key">Microsoft Office 2019 License</a> on eBay.</li>
</ul>
<p>The alternatives to Windows are the expensive products of <a href="https://www.apple.com/">Apple</a> very oriented to high ranges especially for the price or one of the many distributions <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> that are practically in their entirety free and free software, although free software does not have to be without cost in most cases it is.</p>
<p>In this article I will focus more on the alternatives to Office which are also several. Leaving aside the issue of free software, Office is a good and complete office suite with more options than many users will need.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Article content</h2><toc></toc></div>
<h3 id="microsoft-office">Microsoft Office</h3>
<p>Microsoft Office includes Word as a word processor, Powerpoint for presentations, Excel for spreadsheets, Access for databases, Outlook as an email client, OneNote for taking notes, or Publisher for publications. It is only available for Windows and Mac for the desktop, and the web versions for these and other systems. <a href="https://www.microsoft.com/es-es/microsoft-365/explore-microsoft-365-for-home">Office 365</a> has a cost of around 8.80 € per user and month depending on the plan that includes more or fewer applications.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/microsoft-office-word_hued8ef3b72921858644a854c3b1324ffa_40429_2560x1440_fit_box_3.png" data-gallery="" title="Microsoft Office Word"><img src="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/microsoft-office-word_hued8ef3b72921858644a854c3b1324ffa_40429_200x150_fit_box_3.png" width="200" height="110" alt="Microsoft Office Word" title="Microsoft Office Word"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/microsoft-office-excel_hu39f0ca1f7066a4bb750b82543f03fc4a_58994_2560x1440_fit_box_3.png" data-gallery="" title="Microsoft Office Excel"><img src="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/microsoft-office-excel_hu39f0ca1f7066a4bb750b82543f03fc4a_58994_200x150_fit_box_3.png" width="200" height="111" alt="Microsoft Office Excel" title="Microsoft Office Excel"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/microsoft-office-powerpoint_hu2816baad2ecd1c1a3ea7883c966833fa_53636_2560x1440_fit_box_3.png" data-gallery="" title="Microsoft Office Powerpoint"><img src="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/microsoft-office-powerpoint_hu2816baad2ecd1c1a3ea7883c966833fa_53636_200x150_fit_box_3.png" width="200" height="111" alt="Microsoft Office Powerpoint" title="Microsoft Office Powerpoint"  class="lozad "></a></p>
<figcaption>Microsoft Office</figcaption>
</figure>
</div>
<h3 id="libreoffice">LibreOffice</h3>
<p>The equivalent free and free alternative to Office is <a href="https://www.libreoffice.org/">LibreOffice</a>. It includes a text editor with Writer, spreadsheets with Calc, presentations with Impress, Draw to create graphics and Base for simple databases. However, the interface is similar to that of Office in previous editions to the incorporation of <em>ribbon</em> with an aesthetic without the feeling of being cared for. The menus are long and finding an option among the many available is not easy, when opening a menu option one can feel intimidated by its length and it is somewhat more difficult to quickly find the option you are looking for among all those displayed. There will be users who prefer the interface of menus and toolbars, I am one of those who like <em>ribbon</em> the most. It is available for Windows, Linux, and Mac.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/libreoffice-writer_hu9cba1ad2385911d1b9b85745ef14d342_66983_2560x1440_fit_box_3.png" data-gallery="" title="LibreOffice Writer"><img src="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/libreoffice-writer_hu9cba1ad2385911d1b9b85745ef14d342_66983_200x150_fit_box_3.png" width="200" height="112" alt="LibreOffice Writer" title="LibreOffice Writer"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/libreoffice-calc_hudca12bc47e9281c5e1a1d5ed7f4e8975_80819_2560x1440_fit_box_3.png" data-gallery="" title="LibreOffice Calc"><img src="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/libreoffice-calc_hudca12bc47e9281c5e1a1d5ed7f4e8975_80819_200x150_fit_box_3.png" width="200" height="102" alt="LibreOffice Calc" title="LibreOffice Calc"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/libreoffice-impress_hu9dd7b9ba5c5111503976899ed8e24a14_89813_2560x1440_fit_box_3.png" data-gallery="" title="LibreOffice Impress"><img src="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/libreoffice-impress_hu9dd7b9ba5c5111503976899ed8e24a14_89813_200x150_fit_box_3.png" width="200" height="107" alt="LibreOffice Impress" title="LibreOffice Impress"  class="lozad "></a></p>
<figcaption>LibreOffice</figcaption>
</figure>
</div>
<h3 id="wps-office">WPS Office</h3>
<p>If we like the <em>ribbon</em> interface more without menus with a multitude of options and that it is more careful in terms of design than LibreOffice, similar to the one used in Microsoft Office, <a href="https://www.wps.com/">WPS Office</a> is an option to take into account, it can also be activated in classic mode with menus and toolbars supporting the editing of several documents in tabs. It only offers the basic programs of an office suite: text editor, spreadsheets and presentations. For personal use it is free with some limitations when printing and exporting documents to PDF format but more than enough even without all the options only available in the payment option.</p>
<p>For the business environment or with all its options, its license has a much more reasonable cost than Microsoft Office, 45 € for a one-year license and 80 € for a lifetime license per user.</p>
<p>It is available for Windows (XP, Vista, 7, 8, 10) even in versions for which not even Microsoft Office already offers support, Linux, Android and iOS. Its installer occupies only about 80 MiB against the more than 3 GiB of Office.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/wpsoffice-writer_hu764b11800dd8ab25b46e98956e24c767_87448_2560x1440_fit_box_3.png" data-gallery="" title="WPS Office Writer"><img src="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/wpsoffice-writer_hu764b11800dd8ab25b46e98956e24c767_87448_200x150_fit_box_3.png" width="200" height="115" alt="WPS Office Writer" title="WPS Office Writer"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/wpsoffice-spreadsheets_hu300b88b9ee13dcb8049307c6cb78e238_98971_2560x1440_fit_box_3.png" data-gallery="" title="WPS Office Spreadsheets"><img src="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/wpsoffice-spreadsheets_hu300b88b9ee13dcb8049307c6cb78e238_98971_200x150_fit_box_3.png" width="200" height="105" alt="WPS Office Spreadsheets" title="WPS Office Spreadsheets"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/wpsoffice-presentation_hub75d47bbe5410f6dfa02f671f9594f61_96057_2560x1440_fit_box_3.png" data-gallery="" title="WPS Office Presentation"><img src="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/wpsoffice-presentation_hub75d47bbe5410f6dfa02f671f9594f61_96057_200x150_fit_box_3.png" width="200" height="119" alt="WPS Office Presentation" title="WPS Office Presentation"  class="lozad "></a></p>
<figcaption>WPS Office</figcaption>
</figure>
</div>
<h3 id="google-docs">Google Docs</h3>
<p>Another alternative to Office is <a href="https://www.google.es/intl/es/docs/about/">Google Docs</a>, it does not have all the options that Office has but for most users it is enough. Simply have a Google account to use that includes a text editor, spreadsheets, presentations and the ability to make forms. It runs in the browser and although it is possible to work without internet connection at specific times is required. The documents are stored in the cloud so we will not lose them in case of spoiling our computer, we can access the documents from any of our devices as a smartphone o tablet, edit the same document by two or more persons simultaneously or share the documents with other people. Being based on the cloud we do not need to perform software updates except the browser.</p>
<p>For companies, it is offered at a price of 4 € per user per month that includes the Gmail email client, calendars, video calls and 30 GB of storage. It will be 8 € with more storage and retention options for messages.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/googledocs-documento_hu135c38afbabef8694e3240bb2db17fb8_55051_2560x1440_fit_box_3.png" data-gallery="" title="Google Docs"><img src="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/googledocs-documento_hu135c38afbabef8694e3240bb2db17fb8_55051_200x150_fit_box_3.png" width="200" height="127" alt="Google Docs" title="Google Docs"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/googledocs-hoja-de-calculo_hu634845f4752449e9466b0f15924fb435_60785_2560x1440_fit_box_3.png" data-gallery="" title="Google Docs"><img src="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/googledocs-hoja-de-calculo_hu634845f4752449e9466b0f15924fb435_60785_200x150_fit_box_3.png" width="200" height="127" alt="Google Docs" title="Google Docs"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/googledocs-presentacion_hu223a0e001f4a346baf50abb12abe82ea_84650_2560x1440_fit_box_3.png" data-gallery="" title="Google Docs"><img src="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/googledocs-presentacion_hu223a0e001f4a346baf50abb12abe82ea_84650_200x150_fit_box_3.png" width="200" height="127" alt="Google Docs" title="Google Docs"  class="lozad "></a></p>
<figcaption>Google Docs</figcaption>
</figure>
</div>
<h3 id="onlyoffice">OnlyOffice</h3>
<p><a href="https://www.onlyoffice.com/es/">OnlyOffice</a> also offers a basic office suite consisting of documents, spreadsheets and presentations. It has a desktop application for the main operating systems and it can also be run in its own cloud hosted with <a href="https://nextcloud.com/">Nextcloud</a> preserving document ownership and without the inconvenience of Google Docs loss of privacy. They are applications without all the options offered by Microsoft Office or LibreOffice but for sufficient basic use.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/onlyoffice-documentos_hu5c09b13a1cf720455c6988c5abbc2b8b_64552_2560x1440_fit_box_3.png" data-gallery="" title="OnlyOffice Documents"><img src="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/onlyoffice-documentos_hu5c09b13a1cf720455c6988c5abbc2b8b_64552_200x150_fit_box_3.png" width="200" height="121" alt="OnlyOffice Documents" title="OnlyOffice Documents"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/onlyoffice-hojas-de-calculo_hu0c3d99c9233fa37ff218116983367b96_64612_2560x1440_fit_box_3.png" data-gallery="" title="OnlyOffice Spreadsheets"><img src="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/onlyoffice-hojas-de-calculo_hu0c3d99c9233fa37ff218116983367b96_64612_200x150_fit_box_3.png" width="200" height="121" alt="OnlyOffice Spreadsheets" title="OnlyOffice Spreadsheets"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/onlyoffice-presentaciones_hu895c492b74f8884e6ca1145603e19f25_69031_2560x1440_fit_box_3.png" data-gallery="" title="OnlyOffice PresentPresentationaciones"><img src="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/images/onlyoffice-presentaciones_hu895c492b74f8884e6ca1145603e19f25_69031_200x150_fit_box_3.png" width="200" height="121" alt="OnlyOffice PresentPresentationaciones" title="OnlyOffice PresentPresentationaciones"  class="lozad "></a></p>
<figcaption>OnlyOffice</figcaption>
</figure>
</div>
<h3 id="other-alternatives">Other alternatives</h3>
<p>Some other option that deserves to be discussed is <a href="https://www.calligra.org/">Calligra</a> the <em>suite</em> of the <a href="https://www.kde.org/">KDE desktop environment</a>, <a href="https://www.abisource.com/">Abiword</a>, <a href="https://www.lyx.org/">Lyx</a> or <a href="http://www.gnumeric.org/">Gnumeric</a>.</p>
<p>The next time they ask me to reinstall Windows or Office instead of installing Microsoft&rsquo;s office suite without a license, I think I will install the option for personal use of WPS Office, I will recommend using Google Docs, OnlyOffice or LibreOffice, which I hope will improve and update to modern times your interface when you need to install it.</p>
<div class="reference">
    Reference:<br>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2015/07/a-microsoft-no-le-importa-que-uses-windows-u-office-sin-licencia/">A Microsoft no le importa que uses Windows u Office sin licencia</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/01/windows-10-y-office-2016-tan-faciles-de-usar-sin-licencia-como-siempre/">Windows 10 y Office 2016 tan fáciles de usar sin licencia como siempre</a></li>
<li><a href="https://elblogdepicodev.blogspot.com.es/2011/05/impuesto-windows.htmlindex-amp.html">El impuesto Windows</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="gnu-linux"/>
            
                <category term="microsoft"/>
            
                <category term="software"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2016/01/windows-10-and-office-2016-as-easy-to-use-without-license-as-always/</id>
        <title>Windows 10 and Office 2016 as easy to use without license as always</title>
        <updated>2020-09-26T12:00:00+02:00</updated>
        <published>2017-04-08T11:00:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2016/01/windows-10-and-office-2016-as-easy-to-use-without-license-as-always/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>I commented in an article that it is surprising that Microsoft with the capacity that it has and being the devices connected to Internet mostly is not able to avoid using its software without license. I&rsquo;m about to see if with Windows 10 and Office 2016 it&rsquo;s still as easy to use as always. I will also have a sample of the unfair fame of Windows but that allows Microsoft for the bloatware that the device manufacturers pre-installs with its operating system.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/microsoft.svg" width="200" height="200" alt="Microsoft" title="Microsoft"  class=""></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/windows-10.svg" width="200" height="200" alt="Windows 10" title="Windows 10"  class=""></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/microsoft-office.svg" width="200" height="240" alt="Microsoft Office" title="Microsoft Office"  class=""></p>
</div>
<p>This 2016 I have started nothing more and nothing less than installing the operating system and programs of a laptop. One of those favors that we as advanced computer users habitually do. I normally do it willingly, this time I received another in exchange for another kind, so perfect. The need for reinstallation came from the fact that the laptop was remarkably slow despite having a mechanical hard disk and it was not because the equipment was old or had little memory, the processor was an AMD Athlon x2 QL-65 with 4 GiB memory and 320GB hard drive, something that should be more than enough for the purpose of surfing the internet, watching movies, listening to music and do office tasks. It was slow to start and launching programs in addition to some antivirus message popups complaining that its trial period expired that appeared when entering the desktop. That was not all, a virus encrypted the personal files, photos and documents, asking in exchange for recovering them something that I did not even bother to see in detail, surely nothing good.</p>
<p>The computer had several bloatware programs typical of <a href="https://www.microsoft.com/es-es/windows/">Windows</a> laptops provided by manufacturers, an antivirus that could fit the definition of what it tries to protect that expires after a while and leaves it unprotected, a music player that starts with the desktop and hides at the top of the screen in case you atypically need it. The manufacturers are the ones who pre-install these undesirable programs and will be the main culprits but if <a href="https://www.microsoft.com/">Microsoft</a> knows the bad name they give their systems, and so far has not prevented it, some guilt will have, if its operating system is an imposition in practically the whole laptops that are sold in stores, Do you know the <a href="https://elblogdepicodev.blogspot.com.es/2011/05/impuesto-windows.htmlindex-amp.html">Windows tax</a>?, they could impose some condition to allow Windows pre-install and make their users happier.</p>
<p>On the other hand since Windows Vista era the computer can be reinstalled and leave as factory included all the bloatware previously quoted but for this they reserve about 10 GiB of the hard disk space that is not usable by the user. With hard drives with capacities of 320/500 GB that are reserved 10 GiB is no bigger problem but more than one has asked because its available space does not correspond with the specifications of the equipment that bought.</p>
<p>So to fix the problems I did a clean reinstallation.</p>
<h3 id="starting-the-installation">Starting the installation</h3>
<p>At the point of doing the reinstallation I had no problem, the computer had Windows 7 originally, had been upgraded to Windows 10 and activated correctly in the period of free upgrade offered by Microsoft. As I have done many times in years and with previous versions I start by <a href="https://www.microsoft.com/es-es/software-download/windows10ISO">downloading the Windows 10 installation image media</a> and <a href="http://officecdn.microsoft.com/pr/492350f6-3a01-4f97-b9c0-c7c6ddf67d60/media/es-es/HomeStudent2019Retail.img">the installation media for Microsoft Office, Home and Students</a>. I continue <a href="https://picodotdev.github.io/blog-bitix/2017/05/download-and-install-windows-10-step-by-step-from-scratch/">starting the Windows 10 installation step by step from scratch</a>. The installation media images are offered kindly by Microsoft so I had not to search them in the file sharing networks like in the older times.</p>
<p>In one of the installation steps I deleted all the partitions recovering the space reserved for the recovery partition. A few minutes of waiting, a couple of reboots and several privacy options deactivated that could give Windows 10 the name of spyware, supposedly for the sake of user, and after creating the user account the system starts with all the devices working properly including graphics card, network and WiFi. Windows is displayed as enabled.</p>
<p>I have to install the basic additional programs with the intention of being free software or respecting the licenses <a href="https://www.mozilla.org/es-ES/firefox/new/">Firefox</a> along with <a href="https://adblockplus.org/es/">AdBlockPlus</a>, <a href="https://www.videolan.org/vlc/">VLC</a>, <a href="https://www.peazip.org/peazip-64bit.html">PeaZip</a>, <a href="https://www.imgburn.com/">ImgBurn</a>, <a href="https://get.adobe.com/es/reader/otherversions/">Acrobat Reader</a>, <a href="https://freefilesync.org/">FreeFilesync</a>, <a href="https://www.utorrent.com/intl/es/">uTorrent</a> to which I add <a href="https://www.oracle.com/technetwork/java/index.html">Java</a>. Finally I am asked to install the office suite <a href="https://products.office.com/es-es/">Microsoft Office</a> as it will be used, my intention fails, I propose to recommend some alternative option as <a href="https://www.google.es/intl/es/docs/about/">Google Docs</a> or <a href="https://www.libreoffice.org/">LibreOffice</a>. However, Office is what they use, do they ask students to take a license that still costs about 125 € for students? 250 € for other mortals? It &rsquo;s the start of 2016, it&rsquo;s the weekend and I do not want to think much about it, I download the latest version of Office and I install it.</p>
<h3 id="i-try-to-activate-windows-and-office">I try to activate Windows and Office</h3>
<p>I start Word and it shows me a message that after about 30 days many of its functions will be disabled. The time comes to prove empirically once again what I said in [Microsoft does not care that you use Windows or Office without a license][blogbitix-285-en], I look for some activator in Google, there are hundreds of results, I download one from one of links that gives me some hope of not have a virus, immediately after download the executable file and Windows Defender warns that it have a virus, I run it anyway and click on the button to activate the Office, a message indicating that the activation has failed, I try several options without apparent effect to see if I am not right and Microsoft has done its job to avoid piracy. I search the links and I download another, virus warning, everything normal, I run it, icons begin to appear on the desktop of rare programs that are being installed and Firefox has been changed its home page, wow! this supposed activator was a virus, Defender was right, I will have to reinstall everything again.</p>
<h3 id="searching-an-activator-without-virus">Searching an activator without virus</h3>
<p>I put in the table the fat weapons, start a new reinstallation of Windows 10 and Office in a virtual machine with <a href="https://www.virtualbox.org/">VirtualBox</a> that will allow me to make the tests more easily using the snapshots of the system, if something goes wrong I will be able to return to an earlier point without having to reinstall all again. I aim to find some activator that works, long ago when using Windows in the first or second, maybe the third link no more than that in Google was the activator that worked, I think again that maybe Microsoft has protected better their software. I inform myself a little more on some of the hundreds of pages, I find that I have to disable Windows Defender, as explained in those pages activate Windows and Office (any of its versions) is as easy as I remembered, use an activator and push a button. I just did not find the right one? I put a little more interest and I look for the &ldquo;official&rdquo; page of an activator, it seems that I have found one with good feelings. I disable Windows Defender, I run the activator, the activator window opens and I select to activate Windows and Office pushing button, in a few seconds it ends and it informs that the activation was correct. I check that Windows is enabled and Office is also enabled.</p>
<h3 id="i-start-the-third-installation">I start the third installation</h3>
<p>I start the third installation again on the laptop and perform the activation in the same way as in the virtual machine, except Office only since the laptop has already a legal Windows license. Office reports that it is activated. I wish I had not been able to get it.</p>
<p>It is the beginning of 2016 and I have not made one but three installations of Windows and Office, more days than the year have. And I&rsquo;m still right, using them without a license is still as easy as ever once found the right links in Google, Do a tuesday patch day will install some Windows update that discovers the crack applied to Office? I&rsquo;ll find out.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2016/01/windows-10-and-office-2016-as-easy-to-use-without-license-as-always/images/windows-10_hu01412616b9d4247c1e6e816e672b7863_485385_2560x1440_fit_box_3.png" data-gallery="" title="Windows 10"><img src="https://picodotdev.github.io/blog-bitix/2016/01/windows-10-and-office-2016-as-easy-to-use-without-license-as-always/images/windows-10_hu01412616b9d4247c1e6e816e672b7863_485385_300x200_fit_box_3.png" width="300" height="147" alt="Windows 10" title="Windows 10"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2016/01/windows-10-and-office-2016-as-easy-to-use-without-license-as-always/images/microsoft-word-2016_hu5e276bcd423fd85027e59f007dc641f6_49234_2560x1440_fit_box_3.png" data-gallery="" title="Microsoft Word 2016"><img src="https://picodotdev.github.io/blog-bitix/2016/01/windows-10-and-office-2016-as-easy-to-use-without-license-as-always/images/microsoft-word-2016_hu5e276bcd423fd85027e59f007dc641f6_49234_300x200_fit_box_3.png" width="300" height="147" alt="Microsoft Word 2016" title="Microsoft Word 2016"  class="lozad "></a></p>
<figcaption>Windows 10 and Microsoft Word 2016</figcaption>
</figure>
</div>
<h3 id="what-are-the-alternatives-to-use-an-activator">What are the alternatives to use an activator</h3>
<p>Finally I used an activator but they are insecure, is better to purchase a license to one the alternative sellers to Microsoft that offer valid and legal license keys with prices much more cheaper than Microsoft. Microsoft sells the licenses of Windows starting at 145 € for Windows 10 and for Microsoft Office starting from 149 €, other sellers that can be found in <a href="https://amzn.to/2flFhHA">Amazon</a> and <a href="https://www.ebay.es/">eBay</a> offer legal licenses much more cheaper, between 10 € and 15 €. So that some personalization options does not get disabled in Windows, does not get disabled the Microsoft Office documents edition and does not appears popup messages requesting the activation is necessary to <a href="https://picodotdev.github.io/blog-bitix/2020/09/how-to-buy-a-license-and-activate-windows-10-and-office-2019/">buy a license and activate Windows 10 and Office 2019</a>.</p>
<ul>
<li><a href="https://www.microsoft.com/es-es/store/b/windows">Windows 10 license</a> in Microsoft.</li>
<li><a href="https://www.microsoft.com/es-es/microsoft-365/buy/compare-all-microsoft-365-products">Microsoft Office 2019 license</a> in Microsoft.</li>
<li><a href="https://amzn.to/333Df5X">Windows 10 Home license</a> in Amazon.</li>
<li><a href="https://amzn.to/3iZ4dBk">Windows 10 Pro license</a> in Amazon.</li>
<li><a href="https://amzn.to/369oJfc">Microsoft Office 2019 license</a> in Amazon.</li>
<li><a href="https://www.ebay.es/sch/i.html?_from=R40&amp;_trksid=p2334524.m570.l1313&amp;_nkw=windows&#43;10&#43;home&#43;key&#43;64&#43;bits&amp;_sacat=0&amp;LH_TitleDesc=0&amp;_sop=2&amp;_osacat=0&amp;_odkw=windows&#43;10&#43;home&#43;key&#43;64">Windows 10 Home license</a> in eBay.</li>
<li><a href="https://www.ebay.es/sch/i.html?_from=R40&amp;_trksid=p2334524.m570.l1313&amp;_nkw=windows&#43;10&#43;professional&#43;digital&#43;key&#43;64&#43;bits&amp;_sacat=0&amp;LH_TitleDesc=0&amp;_sop=2&amp;_osacat=0&amp;_odkw=windows&#43;10&#43;pro&#43;digital&#43;key&#43;64&#43;bits">Windows 10 Pro license</a> in eBay.</li>
<li><a href="https://www.ebay.es/sch/i.html?_from=R40&amp;_trksid=p2334524.m570.l1313&amp;_nkw=microsoft&#43;office&#43;2019&#43;&#43;key&amp;_sacat=0&amp;LH_TitleDesc=0&amp;_sop=2&amp;_osacat=0&amp;_odkw=microsoft&#43;office&#43;2019&#43;pro&#43;key">Microsoft Office 2019 license</a> in eBay.</li>
</ul>
<p>If you can use software with a legal license but if not use some of the alternative options available for both Windows <a href="https://picodotdev.github.io/blog-bitix/2016/09/autenticacion-con-oauth-y-keycloak-en-un-servicio-rest-con-jax-rs-y-spring-boot/">choosing a GNU/Linux distribution</a> and <a href="https://picodotdev.github.io/blog-bitix/2016/05/4-free-office-suites-alternatives-to-microsoft-office/">Office and any of its alternatives</a> that suits your needs.</p>
]]>
        </content>
        
            
                <category term="microsoft"/>
            
                <category term="opinion"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/</id>
        <title>Script to install Arch Linux easy, fast, unattended, automated and customizable way</title>
        <updated>2017-01-13T00:00:00+01:00</updated>
        <published>2017-01-13T00:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Arch Linux is one of the most customizable GNU/Linux distributions but whose installation requires reading a good amount of documentation, guides or manuals to know what commands to execute step by step in the <em>prompt</em> of the system in which it leaves you the installation medium. Some users choose a distribution like Antergos, KaOS or Manjaro with a graphical installer and guided simply by the fact that they do not face Arch Linux installation from the command line. Still, executing a command and waiting for it to finish before entering another is slow and requires attention.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/archlinux.svg" width="250" height="186" alt="Arch Linux" title="Arch Linux"  class=""></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/linux.svg" width="200" height="232" alt="Linux" title="Linux"  class=""></p>
</div>
<p>For a long time, installing a <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> distribution has no more difficulty than installing an operating system like <a href="https://www.microsoft.com/es-es/windows/">Windows</a>, which consists of downloading the ISO image from the CD or DVD, burning it to a CD, DVD, or USB stick and start the system with the medium. The <a href="https://picodotdev.github.io/blog-bitix/2016/10/elegir-una-distribucion-gnu-linux-segun-el-usuario-uso-o-equipo/">distributions recommended for users who come from Windows or macOS</a> or do not have much computer knowledge have graphical or text-based installers and guided in several steps until completing the installation in less than half an hour. Distributions like <a href="https://www.ubuntu.com/">Ubuntu</a>, <a href="https://elementary.io/es/">elementary OS</a> or <a href="https://www.linuxmint.com/">Linux Mint</a> make the installation without knowledge and be completed successfully by any user.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/debian-installer-text_hu24823266aaadbd5ea03f13734b295699_7331_2560x1440_fit_box_3.png" data-gallery="" title="Debian installer text mode "><img src="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/debian-installer-text_hu24823266aaadbd5ea03f13734b295699_7331_300x200_fit_box_3.png" width="267" height="200" alt="Debian installer text mode " title="Debian installer text mode "  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/debian-installer-graphics_hu57b39c5df8bb0f15d502613ed89fe1b4_28647_2560x1440_fit_box_3.png" data-gallery="" title="Debian installer in graphical mode"><img src="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/debian-installer-graphics_hu57b39c5df8bb0f15d502613ed89fe1b4_28647_300x200_fit_box_3.png" width="267" height="200" alt="Debian installer in graphical mode" title="Debian installer in graphical mode"  class="lozad "></a></p>
<figcaption>Guided graphical and text-based Debian installation</figcaption>
</figure>
</div>
<p>Other distributions based on different principles and intended users with other needs or preferences may require a little more knowledge in exchange for more advanced settings such as disk partitioning, disk encryption or software that is installed. Some distributions like <a href="https://www.archlinux.org/">Arch Linux</a> don&rsquo;t even provide any installer.</p>
<blockquote>
<p>It is targeted at the proficient GNU/Linux user, or anyone with a do-it-yourself attitude who is
willing to read the documentation, and solve their own problems.</p>
</blockquote>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Article content</h2><toc></toc></div>
<h3 id="system-installation-with-arch-linux">System installation with Arch Linux</h3>
<p>In Arch Linux with his <a href="https://wiki.archlinux.org/index.php/Arch_Linux">way of doing things</a> leaves the power to fully customize the system to his needs and preferences limited only by his determination of to get it. It only provides <a href="https://www.archlinux.org/download/">the media to start the installation with</a> starting with a terminal and a system <em>prompt</em>, an <a href="https://wiki.archlinux.org/index.php/Installation_guide">installation guide</a> along with the [general recommendations][archlinux-general-recommendations] and <a href="https://wiki.archlinux.org/">one of the best sources of information on GNU/Linux</a> as well as complete information on every aspect that we need in the installation. After having read the relevant pages of the Arch Linux wiki, probably more than once and twice, until you understand it for the most part, you begin to make the recipe that contains the necessary commands until the installation is complete.</p>
<p>In many blogs and YouTube videos there are guides that contain the necessary commands and explanations. Any Arch Linux user with a blog has surely posted an article with their installation guide (yes, <a href="https://picodotdev.github.io/blog-bitix/2014/05/anexo-a-la-guia-de-instalacion-y-del-principiante-de-arch-linux/">I posted mine too</a>). A user who wants to install Arch Linux should read several of those articles in addition to the official installation guide. According to the Arch Linux philosophy, this learning process is considered necessary and allows for greater system understanding.</p>
<p>But knowing the commands to enter to install Arch Linux does not avoid having to type them one after the other and wait for the previous one to finish before entering the next one. Nor does everyone have the time to do it. Several <a href="https://wiki.archlinux.org/index.php/Arch-based_distributions">Arch Linux derived distributions</a> such as <a href="https://antergos.com/">Antergos</a>, <a href="https://kaosx.us/">KaOS</a> or <a href="https://manjaro.org/">Manjaro</a> offer the more friendly graphical and guided installers that attract some users looking to use Arch Linux but not go through its unfriendly installation process. Fortunately, as it is a <em>rolling release</em> distribution (constantly updated), you only have to do a single installation per computer throughout its life of use. But even for Arch Linux users doing a second install on a new machine is tiresome.</p>
<p>A few months ago I met <a href="https://arch-anywhere.org/">arch-anywhere</a> which is basically a bash <em>script</em>, with a guided and text-based installer that makes the installation of Arch Linux less laborious in a similar way to those existing in other more friendly distributions. However, there are two things that do not convince me about <em>arch-anywhere</em>, one is that it is not unattended, requiring you to answer several questions interactively, wait for it to finish, execute a command according to the previous answer and answer the next question. Another thing that doesn&rsquo;t convince me is that it uses its own ISO image and not the original Arch Linux image. For the rest, it offers a good level of customization, covering the most common needs of users such as customizing the partitioning, choosing the file system, if you want LVM, encryption, the desktop environment (GNOME, KDE, XFCE, &hellip; ), kernel, boot loader (GRUB) and programs to install.</p>
<h3 id="the-alis-installer-and-supported-features">The alis installer and supported features</h3>
<p>Based on the idea of <em>arch-anywhere</em> and spending a little time I have created a <em>script</em> in <a href="https://es.wikipedia.org/wiki/Bash">bash</a> to install Arch Linux in an automated, unattended and customizable way to some extent although being useful for the most common configuration cases, without being essential to read a few dozen pages of the Arch Linux wiki or follow any step-by-step guide or tutorial. Some of the functionalities it supports are:</p>
<ul>
<li><strong>System</strong>: UEFI, BIOS</li>
<li><strong>Storage</strong>: SATA, NVMe and MMC</li>
<li><strong>Encryption</strong>: root partition encrypted and no encrypted</li>
<li><strong>Partition</strong>: no LVM, LVM, LVM on LUKS, GPT on UEFI, MBR on BIOS</li>
<li><strong>File system</strong>: ext4, btrfs (with subvols), xfs, f2fs, reiserfs</li>
<li><strong>Kernels</strong>: linux, linux-lts, linux-hardened, linux-zen</li>
<li><strong>Desktop environment</strong>: GNOME, KDE, XFCE, Mate, Cinnamon, LXDE, i3-wm, i3-gaps</li>
<li><strong>Display managers</strong>: GDM, SDDM, Lightdm, lxdm</li>
<li><strong>Graphics controller</strong>: intel, nvidia and amd with optionally early KMS start. With intel optionally fastboot, hardware video acceleration and framebuffer compression.</li>
<li><strong>Bootloader</strong>: GRUB, rEFInd, systemd-boot</li>
<li><strong>Custom shell</strong>: bash, zsh, dash, fish</li>
<li><strong>WPA WIFI network</strong> installation</li>
<li><strong>Periodic TRIM</strong> for SSD storage</li>
<li>Intel and AMD <strong>processors microcode</strong></li>
<li>Optional <strong>swap file</strong></li>
<li><strong>VirtualBox guest additions</strong></li>
<li><strong>Kernel compression</strong> and <strong>custom parameters</strong></li>
<li><strong>Users creation</strong> and <strong>add to sudoers</strong></li>
<li><strong>systemd units enable or disable</strong></li>
<li><strong>Multilib</strong> support</li>
<li><strong>Arch Linux</strong> common and custom <strong>packages installation</strong></li>
<li>Flatpak utility installation and <strong>Flatpak packages installation</strong></li>
<li>SDKMAN utility installation and <strong>SDKMAN packages installation</strong></li>
<li><strong>AUR utility</strong> installation (paru, yay, aurman) and <strong>AUR packages installation</strong></li>
<li><strong>Packages installation after base system installation</strong> (preferred way of packages installation)</li>
<li>Script for download installation and <strong>recovery scripts</strong> and configuration files</li>
<li><strong>Retry packages download</strong> on connection/mirror error</li>
<li><strong>Packer support</strong> for testing in VirtualBox</li>
<li><strong>Installation log</strong> with all commands executed and output in a file and/or <strong>asciinema video</strong></li>
<li>Wait after installation for an <strong>abortable reboot</strong></li>
<li>Fork the repository and <strong>use your own configuration</strong></li>
</ul>
<p>The recommended way to install Arch Linux is by learning which commands to execute and what each one does, first read the official Arch Linux installation guide and understand what the <em>script</em> commands do. This <em>script</em> is not official and therefore in the <a href="https://foros.archlinux-es.org/">Arch Linux forum in Spanish</a> or <a href="https://bbs.archlinux.org/">in English</a> they will not be able to give you support although I will help you in the comments of this article if questions. Note that this <em>script</em> removes all information from the installation device. If you try it, leave a comment at the end of the article.</p>
<p>Booted the system with the Arch Linux installation ISO image, you have to download the <em>script</em>, edit some environment variables for the alis configuration and start the installation process. Depending on the preferred desktop environment, if you want LVM, the type of the file system, if you want to encrypt the file system and packages to install, the values ​​of the variables will vary according to the preferences that initially have common values. Two variables that must be modified at least are <em>USER_NAME</em> and <em>USER_PASSWORD</em> with the name of the user and his password that the system will use.</p>
<p>The installation time required varies depending on the internet connection bandwidth and the type of storage, in my case with ADSL with a 1.2 MiB/s download and SSD, the installation of the base system without a desktop environment takes me approximately 10 minutes. With a fiber connection it will take significantly less time. The installation <em>script</em> contains the same commands that would be necessary to perform the manual installation interactively.</p>
<p>Even if alis is not used, the bash code in the <em>script</em> can be viewed as executable documentation or for reference if you choose to install manually. It contains the same commands that a user would manually run one after the other in an interactive installation. <a href="https://github.com/picodotdev/alis/">alis</a> is a <em>script</em> that allows you to install Arch Linux in an unattended, automated and customizable way from Arch Linux.</p>
<p>These are the commands to use alis and its configuration file with which to customize the installation.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># loadkeys es</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># curl -sL https://bit.ly/2F3CATp | bash</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># vim alis.conf</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># ./alis.sh</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>alis-install.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">  1&#10;</span><span class="lnt">  2&#10;</span><span class="lnt">  3&#10;</span><span class="lnt">  4&#10;</span><span class="lnt">  5&#10;</span><span class="lnt">  6&#10;</span><span class="lnt">  7&#10;</span><span class="lnt">  8&#10;</span><span class="lnt">  9&#10;</span><span class="lnt"> 10&#10;</span><span class="lnt"> 11&#10;</span><span class="lnt"> 12&#10;</span><span class="lnt"> 13&#10;</span><span class="lnt"> 14&#10;</span><span class="lnt"> 15&#10;</span><span class="lnt"> 16&#10;</span><span class="lnt"> 17&#10;</span><span class="lnt"> 18&#10;</span><span class="lnt"> 19&#10;</span><span class="lnt"> 20&#10;</span><span class="lnt"> 21&#10;</span><span class="lnt"> 22&#10;</span><span class="lnt"> 23&#10;</span><span class="lnt"> 24&#10;</span><span class="lnt"> 25&#10;</span><span class="lnt"> 26&#10;</span><span class="lnt"> 27&#10;</span><span class="lnt"> 28&#10;</span><span class="lnt"> 29&#10;</span><span class="lnt"> 30&#10;</span><span class="lnt"> 31&#10;</span><span class="lnt"> 32&#10;</span><span class="lnt"> 33&#10;</span><span class="lnt"> 34&#10;</span><span class="lnt"> 35&#10;</span><span class="lnt"> 36&#10;</span><span class="lnt"> 37&#10;</span><span class="lnt"> 38&#10;</span><span class="lnt"> 39&#10;</span><span class="lnt"> 40&#10;</span><span class="lnt"> 41&#10;</span><span class="lnt"> 42&#10;</span><span class="lnt"> 43&#10;</span><span class="lnt"> 44&#10;</span><span class="lnt"> 45&#10;</span><span class="lnt"> 46&#10;</span><span class="lnt"> 47&#10;</span><span class="lnt"> 48&#10;</span><span class="lnt"> 49&#10;</span><span class="lnt"> 50&#10;</span><span class="lnt"> 51&#10;</span><span class="lnt"> 52&#10;</span><span class="lnt"> 53&#10;</span><span class="lnt"> 54&#10;</span><span class="lnt"> 55&#10;</span><span class="lnt"> 56&#10;</span><span class="lnt"> 57&#10;</span><span class="lnt"> 58&#10;</span><span class="lnt"> 59&#10;</span><span class="lnt"> 60&#10;</span><span class="lnt"> 61&#10;</span><span class="lnt"> 62&#10;</span><span class="lnt"> 63&#10;</span><span class="lnt"> 64&#10;</span><span class="lnt"> 65&#10;</span><span class="lnt"> 66&#10;</span><span class="lnt"> 67&#10;</span><span class="lnt"> 68&#10;</span><span class="lnt"> 69&#10;</span><span class="lnt"> 70&#10;</span><span class="lnt"> 71&#10;</span><span class="lnt"> 72&#10;</span><span class="lnt"> 73&#10;</span><span class="lnt"> 74&#10;</span><span class="lnt"> 75&#10;</span><span class="lnt"> 76&#10;</span><span class="lnt"> 77&#10;</span><span class="lnt"> 78&#10;</span><span class="lnt"> 79&#10;</span><span class="lnt"> 80&#10;</span><span class="lnt"> 81&#10;</span><span class="lnt"> 82&#10;</span><span class="lnt"> 83&#10;</span><span class="lnt"> 84&#10;</span><span class="lnt"> 85&#10;</span><span class="lnt"> 86&#10;</span><span class="lnt"> 87&#10;</span><span class="lnt"> 88&#10;</span><span class="lnt"> 89&#10;</span><span class="lnt"> 90&#10;</span><span class="lnt"> 91&#10;</span><span class="lnt"> 92&#10;</span><span class="lnt"> 93&#10;</span><span class="lnt"> 94&#10;</span><span class="lnt"> 95&#10;</span><span class="lnt"> 96&#10;</span><span class="lnt"> 97&#10;</span><span class="lnt"> 98&#10;</span><span class="lnt"> 99&#10;</span><span class="lnt">100&#10;</span><span class="lnt">101&#10;</span><span class="lnt">102&#10;</span><span class="lnt">103&#10;</span><span class="lnt">104&#10;</span><span class="lnt">105&#10;</span><span class="lnt">106&#10;</span><span class="lnt">107&#10;</span><span class="lnt">108&#10;</span><span class="lnt">109&#10;</span><span class="lnt">110&#10;</span><span class="lnt">111&#10;</span><span class="lnt">112&#10;</span><span class="lnt">113&#10;</span><span class="lnt">114&#10;</span><span class="lnt">115&#10;</span><span class="lnt">116&#10;</span><span class="lnt">117&#10;</span><span class="lnt">118&#10;</span><span class="lnt">119&#10;</span><span class="lnt">120&#10;</span><span class="lnt">121&#10;</span><span class="lnt">122&#10;</span><span class="lnt">123&#10;</span><span class="lnt">124&#10;</span><span class="lnt">125&#10;</span><span class="lnt">126&#10;</span><span class="lnt">127&#10;</span><span class="lnt">128&#10;</span><span class="lnt">129&#10;</span><span class="lnt">130&#10;</span><span class="lnt">131&#10;</span><span class="lnt">132&#10;</span><span class="lnt">133&#10;</span><span class="lnt">134&#10;</span><span class="lnt">135&#10;</span><span class="lnt">136&#10;</span><span class="lnt">137&#10;</span><span class="lnt">138&#10;</span><span class="lnt">139&#10;</span><span class="lnt">140&#10;</span><span class="lnt">141&#10;</span><span class="lnt">142&#10;</span><span class="lnt">143&#10;</span><span class="lnt">144&#10;</span><span class="lnt">145&#10;</span><span class="lnt">146&#10;</span><span class="lnt">147&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Arch Linux Install Script (alis) configuration file</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Some variables values are preceded by a ! character, this means that the value is ignored.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Some variables accept a single value others accept multiple values as annotated in the comments.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Some variables are boolean with a value of true or false.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Read the Arch Linux wiki pages to learn more about the variables values.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># https://github.com/picodotdev/alis/blob/master/README.md</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># init</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## KEYS sets keyboard layout.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## LOG generates a log file with the commands executed and output generated during installation.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### The log file is saved to /var/log/alis.log.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KEYS</span><span class="o">=</span><span class="s2">&#34;es&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LOG</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># partition</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## DEVICE sets which is the device for the installation.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## DEVICE_TRIM sets if the DEVICE device supports TRIM feature.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## LVM sets if the DEVICE is partitioned with LVM partition scheme.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## LUKS_PASSWORD and LUKS_PASSWORD_RETYPE if set is the password for encrypt the device. With LVM, LVM on LUKS is used. If &#34;ask&#34; password alis asks for a secure password.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## FILE_SYSTEM_TYPE root device is formatted with this file system type.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## SWAP_SIZE swap file size with a size of the value in megabytes. If no value no swap file is created.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## PARTITION_MODE how partition is performed on DEVICE.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### &#34;auto&#34; value deletes all existing partitions and creates a boot partition and a root partition using disk full size.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### Warning! all disk data will be lost, so backup existing data before.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### &#34;custom&#34; value allows to use a custom parted partition script.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### &#34;manual&#34; allows to specify which existing partitions are used for boot partition and root partition.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE</span><span class="o">=</span><span class="s2">&#34;/dev/sda !/dev/nvme0n1 !/dev/mmcblk0&#34;</span> <span class="c1"># sata nvme mmc (single)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_TRIM</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LVM</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LUKS_PASSWORD</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LUKS_PASSWORD_RETYPE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">FILE_SYSTEM_TYPE</span><span class="o">=</span><span class="s2">&#34;ext4 !btrfs !xfs !f2fs !reiserfs&#34;</span> <span class="c1"># (single)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">SWAP_SIZE</span><span class="o">=</span><span class="s2">&#34;!2048 !4096 !8192&#34;</span> <span class="c1"># (single)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_MODE</span><span class="o">=</span><span class="s2">&#34;auto !custom !manual&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_CUSTOM_PARTED_UEFI</span><span class="o">=</span><span class="s2">&#34;mklabel gpt mkpart ESP fat32 1MiB 512MiB mkpart root </span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2"> 512MiB 100% set 1 esp on&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_CUSTOM_PARTED_BIOS</span><span class="o">=</span><span class="s2">&#34;mklabel msdos mkpart primary ext4 4MiB 512MiB mkpart primary </span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2"> 512MiB 100% set 1 boot on&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_CUSTOMMANUAL_BOOT</span><span class="o">=</span><span class="s2">&#34;!/dev/sda1 !/dev/nvme0n1p1 !/dev/mmcblk0p1&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_CUSTOMMANUAL_ROOT</span><span class="o">=</span><span class="s2">&#34;!/dev/sda2 !/dev/nvme0n1p2 !/dev/mmcblk0p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># network_install</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## Variables to setup the WIFI connection to internet.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## The WIFI interface, WIFI ESSID identifier and WIFI password must be specified. If &#34;ask&#34; password alis asks for a secure password.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## PING_HOSTNAME is the host to check the internet connection.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">WIFI_INTERFACE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">WIFI_ESSID</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">WIFI_KEY</span><span class="o">=</span><span class="s2">&#34;ask&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">WIFI_KEY_RETYPE</span><span class="o">=</span><span class="s2">&#34;ask&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PING_HOSTNAME</span><span class="o">=</span><span class="s2">&#34;mirrors.kernel.org&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># install</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## REFLECTOR allows to use reflector utility to use the best mirrors for packages download.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## REFLECTOR_COUNTRIES is an array of countries to select mirrors from.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## PACMAN_MIRROR if reflector is not used this specific mirror is used.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## KERNELS additional kernels and headers to install.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## KERNELS_COMPRESSION selects de algorithm for kernel compression.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## KERNELS_PARAMETERS specific kernel parameters to set on boot. eg. iommu=soft</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">REFLECTOR</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">REFLECTOR_COUNTRIES</span><span class="o">=(</span><span class="s2">&#34;Spain&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PACMAN_MIRROR</span><span class="o">=</span><span class="s2">&#34;https://mirrors.kernel.org/archlinux/\$repo/os/\$arch&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KERNELS</span><span class="o">=</span><span class="s2">&#34;!linux-lts !linux-lts-headers !linux-hardened !linux-hardened-headers !linux-zen !linux-zen-headers&#34;</span> <span class="c1"># (multiple)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KERNELS_COMPRESSION</span><span class="o">=</span><span class="s2">&#34;!gzip !bzip2 !lzma !xz !lzop !lz4 zstd&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KERNELS_PARAMETERS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># display driver</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## DISPLAY_DRIVER installs a specific display driver, you must know which brand is the graphics hardware.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## Other variables activates some features if are supported for the DISPLAY_DRIVER.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DISPLAY_DRIVER</span><span class="o">=</span><span class="s2">&#34;!intel !amdgpu !ati !nvidia !nvidia-lts !nvidia-dkms !nvidia-390xx !nvidia-390xx-lts !nvidia-390xx-dkms !nouveau&#34;</span> <span class="c1"># (single)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KMS</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">FASTBOOT</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">FRAMEBUFFER_COMPRESSION</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DISPLAY_DRIVER_DDX</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">VULKAN</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DISPLAY_DRIVER_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DISPLAY_DRIVER_HARDWARE_ACCELERATION_INTEL</span><span class="o">=</span><span class="s2">&#34;intel-media-driver !libva-intel-driver&#34;</span> <span class="c1"># (single)</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># config</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## Some variables for system configuration, from timezone, locale and keyboard to the root password.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## ROOT_PASSWORD root user password. If &#34;ask&#34; password alis asks for a secure password.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">TIMEZONE</span><span class="o">=</span><span class="s2">&#34;/usr/share/zoneinfo/Europe/Madrid&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LOCALES</span><span class="o">=(</span><span class="s2">&#34;es_ES.UTF-8 UTF-8&#34;</span> <span class="s2">&#34;en_US.UTF-8 UTF-8&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LOCALE_CONF</span><span class="o">=(</span><span class="s2">&#34;LANG=es_ES.UTF-8&#34;</span> <span class="s2">&#34;LANGUAGE=es_ES:es:en_US:en&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KEYMAP</span><span class="o">=</span><span class="s2">&#34;KEYMAP=es&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KEYLAYOUT</span><span class="o">=</span><span class="s2">&#34;es&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KEYMODEL</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KEYVARIANT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KEYOPTIONS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">FONT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">FONT_MAP</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">HOSTNAME</span><span class="o">=</span><span class="s2">&#34;archlinux&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ROOT_PASSWORD</span><span class="o">=</span><span class="s2">&#34;ask&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ROOT_PASSWORD_RETYPE</span><span class="o">=</span><span class="s2">&#34;ask&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># user</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## USER_NAME, USER_PASSWORD Regular user to create in the system. A password must be specified, if &#34;ask&#34; password alis asks for a secure password.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## ADDITIONAL_USERS is an array of additional users to create in the system, if &#34;ask&#34; password alis asks for a secure password.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">USER_NAME</span><span class="o">=</span><span class="s2">&#34;picodotdev&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">USER_PASSWORD</span><span class="o">=</span><span class="s2">&#34;ask&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">USER_PASSWORD_RETYPE</span><span class="o">=</span><span class="s2">&#34;ask&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ADDITIONAL_USERS</span><span class="o">=()</span> <span class="c1"># eg. (&#34;user1=password1&#34; &#34;user2=password2&#34;)</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1">## systemd-homed (experimental feature)</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### SYSTEMD_HOMED &#34;true&#34; value requires interactivity to set user password</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">SYSTEMD_HOMED</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">SYSTEMD_HOMED_STORAGE</span><span class="o">=</span><span class="s2">&#34;directory !fscrypt !luks !cifs !subvolume&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">SYSTEMD_HOMED_CIFS_DOMAIN</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">SYSTEMD_HOMED_CIFS_SERVICE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># mkinitcpio</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## HOOKS are the system hooks to execute to build the initial ramdisk.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### Generally, it is not necessary to modify, alis enables or disables some hooks</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### taking in account other variables values like bootloader or device encryption.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">HOOKS</span><span class="o">=</span><span class="s2">&#34;base !udev !usr !resume !systemd !btrfs keyboard autodetect modconf block !net !dmraid !mdadm !mdadm_udev !keymap !consolefont !sd-vconsole !encrypt !lvm2 !sd-encrypt !sd-lvm2 fsck filesystems&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># bootloader</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## BOOTLOADER system boot loader.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">BOOTLOADER</span><span class="o">=</span><span class="s2">&#34;!grub !refind systemd&#34;</span> <span class="c1"># (single)</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># shell</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## CUSTOM_SHELL configures an alternative custom shell interpreter.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">CUSTOM_SHELL</span><span class="o">=</span><span class="s2">&#34;bash !zsh !dash !fish&#34;</span> <span class="c1"># (single)</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># desktop</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## DESKTOP_ENVIRONMENT installs a desktop environment.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DESKTOP_ENVIRONMENT</span><span class="o">=</span><span class="s2">&#34;!gnome !kde !xfce !mate !cinnamon !lxde !i3-wm !i3-gaps&#34;</span> <span class="c1"># (single)</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># packages (all multiple)</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## PACKAGES_MULTILIB configures multilib repository for pacman and install multilib packages for display driver</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## PACKAGES_INSTALL installs packages on system installation, edit alis-packages.conf to select packages.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### It is recommended to install packages after base installation and reboot.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PACKAGES_MULTILIB</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PACKAGES_INSTALL</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># misc</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## VAGRANT for build a VirtualBox OVA with Packer</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">VAGRANT</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># systemd</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## SYSTEMD_UNITS systemd units to enable or disable.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### If preceded with a &#34;+&#34; unit is enabled, if preceded with &#34;-&#34; unit is disabled, if preceded with &#34;!&#34; unit is ignored (no action is performed).</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### eg. &#34;+ufw.service&#34; to enable, &#34;-ufw.service&#34; to disable, &#34;!ufw.service&#34; to ignore</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">SYSTEMD_UNITS</span><span class="o">=</span><span class="s2">&#34;!ufw.service !docker.service&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># reboot</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## REBOOT on installation end reboots the system automatically. If &#34;false&#34; no reboot is performed and the user must do it explicitly.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">REBOOT</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>alis.conf</span>
    </div>
</div>
<h3 id="screenshots-of-different-supported-desktop-environments">Screenshots of different supported desktop environments</h3>
<p>These are some screenshots with different desktop environments that I have tested with VirtualBox.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-gnome_hu9b320e0da9c3f7b53e055de7bd0dea05_59051_2560x1440_fit_q90_box.jpg" data-gallery="" title="GNOME"><img src="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-gnome_hu9b320e0da9c3f7b53e055de7bd0dea05_59051_300x200_fit_q90_box.jpg" width="267" height="200" alt="GNOME" title="GNOME"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-kde_huc1033173311b1fe983324c1eed546025_77308_2560x1440_fit_q90_box.jpg" data-gallery="" title="KDE"><img src="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-kde_huc1033173311b1fe983324c1eed546025_77308_300x200_fit_q90_box.jpg" width="267" height="200" alt="KDE" title="KDE"  class="lozad "></a></p>
<figcaption>GNOME and KDE desktop environments</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-xfce_hu207a5cc7835aaa368efdd5626136b4e2_50488_2560x1440_fit_q90_box.jpg" data-gallery="" title="XFCE"><img src="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-xfce_hu207a5cc7835aaa368efdd5626136b4e2_50488_300x200_fit_q90_box.jpg" width="267" height="200" alt="XFCE" title="XFCE"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-cinnamon_huada952b2201e9040ea05142b38c6dec4_57971_2560x1440_fit_q90_box.jpg" data-gallery="" title="Cinnamon"><img src="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-cinnamon_huada952b2201e9040ea05142b38c6dec4_57971_300x200_fit_q90_box.jpg" width="267" height="200" alt="Cinnamon" title="Cinnamon"  class="lozad "></a></p>
<figcaption>Xfce and Cinnamon desktop environments</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-lxde_huafe9060d5dbd54d661872c90b35b3c3e_60009_2560x1440_fit_q90_box.jpg" data-gallery="" title="LXDE"><img src="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-lxde_huafe9060d5dbd54d661872c90b35b3c3e_60009_300x200_fit_q90_box.jpg" width="267" height="200" alt="LXDE" title="LXDE"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-mate_huc99153c03fd4a5e1c154432239083495_26705_2560x1440_fit_q90_box.jpg" data-gallery="" title="Mate"><img src="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-mate_huc99153c03fd4a5e1c154432239083495_26705_300x200_fit_q90_box.jpg" width="267" height="200" alt="Mate" title="Mate"  class="lozad "></a></p>
<figcaption>LXDE and Mate desktop environments</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-root-password_hubb5350839af640196e4dc7ade488175e_3831_2560x1440_fit_box_3.png" data-gallery="" title="Password request to decrypt root partition"><img src="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-root-password_hubb5350839af640196e4dc7ade488175e_3831_300x200_fit_box_3.png" width="267" height="200" alt="Password request to decrypt root partition" title="Password request to decrypt root partition"  class="lozad "></a></p>
<figcaption>Password request to decrypt root partition</figcaption>
</figure>
</div>
<h3 id="installation-video-of-the-base-system-with-alis">Installation video of the base system with alis</h3>
<p>The following video captured with <a href="https://asciinema.org/">asciinema</a> shows how using alis to install Arch Linux on a computer with the complete process of the basic system installation.</p>
<div class="media">
<script type="text/javascript" src="https://asciinema.org/a/418524.js" id="asciicast-418524" async></script>
<noscript><a href="https://asciinema.org/a/418524" target="_blank"><img src="https://asciinema.org/a/418524.png" width="650" height="450"></a></noscript>
</div>
<h3 id="alis-source-code">Alis source code</h3>
<p>The installer code is not very complicated and much simpler than other similar interactive <em>scripts</em>, as it does not mix the installation commands with the interactive messages that ask questions and wait for answers, also after setting the variables and starting the installation process the it is done unattended until completed without requiring the user to enter more data interactively.</p>
<p>The commands that I have compiled from the recipe are the ones that we would execute one after another starting from the original Arch Linux installation media. The <em>main</em> function contains the steps that the installation consists of, from partitioning and encrypting the disk to restarting after the installation is complete, the rest of the functions the commands of that installation step.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">   1&#10;</span><span class="lnt">   2&#10;</span><span class="lnt">   3&#10;</span><span class="lnt">   4&#10;</span><span class="lnt">   5&#10;</span><span class="lnt">   6&#10;</span><span class="lnt">   7&#10;</span><span class="lnt">   8&#10;</span><span class="lnt">   9&#10;</span><span class="lnt">  10&#10;</span><span class="lnt">  11&#10;</span><span class="lnt">  12&#10;</span><span class="lnt">  13&#10;</span><span class="lnt">  14&#10;</span><span class="lnt">  15&#10;</span><span class="lnt">  16&#10;</span><span class="lnt">  17&#10;</span><span class="lnt">  18&#10;</span><span class="lnt">  19&#10;</span><span class="lnt">  20&#10;</span><span class="lnt">  21&#10;</span><span class="lnt">  22&#10;</span><span class="lnt">  23&#10;</span><span class="lnt">  24&#10;</span><span class="lnt">  25&#10;</span><span class="lnt">  26&#10;</span><span class="lnt">  27&#10;</span><span class="lnt">  28&#10;</span><span class="lnt">  29&#10;</span><span class="lnt">  30&#10;</span><span class="lnt">  31&#10;</span><span class="lnt">  32&#10;</span><span class="lnt">  33&#10;</span><span class="lnt">  34&#10;</span><span class="lnt">  35&#10;</span><span class="lnt">  36&#10;</span><span class="lnt">  37&#10;</span><span class="lnt">  38&#10;</span><span class="lnt">  39&#10;</span><span class="lnt">  40&#10;</span><span class="lnt">  41&#10;</span><span class="lnt">  42&#10;</span><span class="lnt">  43&#10;</span><span class="lnt">  44&#10;</span><span class="lnt">  45&#10;</span><span class="lnt">  46&#10;</span><span class="lnt">  47&#10;</span><span class="lnt">  48&#10;</span><span class="lnt">  49&#10;</span><span class="lnt">  50&#10;</span><span class="lnt">  51&#10;</span><span class="lnt">  52&#10;</span><span class="lnt">  53&#10;</span><span class="lnt">  54&#10;</span><span class="lnt">  55&#10;</span><span class="lnt">  56&#10;</span><span class="lnt">  57&#10;</span><span class="lnt">  58&#10;</span><span class="lnt">  59&#10;</span><span class="lnt">  60&#10;</span><span class="lnt">  61&#10;</span><span class="lnt">  62&#10;</span><span class="lnt">  63&#10;</span><span class="lnt">  64&#10;</span><span class="lnt">  65&#10;</span><span class="lnt">  66&#10;</span><span class="lnt">  67&#10;</span><span class="lnt">  68&#10;</span><span class="lnt">  69&#10;</span><span class="lnt">  70&#10;</span><span class="lnt">  71&#10;</span><span class="lnt">  72&#10;</span><span class="lnt">  73&#10;</span><span class="lnt">  74&#10;</span><span class="lnt">  75&#10;</span><span class="lnt">  76&#10;</span><span class="lnt">  77&#10;</span><span class="lnt">  78&#10;</span><span class="lnt">  79&#10;</span><span class="lnt">  80&#10;</span><span class="lnt">  81&#10;</span><span class="lnt">  82&#10;</span><span class="lnt">  83&#10;</span><span class="lnt">  84&#10;</span><span class="lnt">  85&#10;</span><span class="lnt">  86&#10;</span><span class="lnt">  87&#10;</span><span class="lnt">  88&#10;</span><span class="lnt">  89&#10;</span><span class="lnt">  90&#10;</span><span class="lnt">  91&#10;</span><span class="lnt">  92&#10;</span><span class="lnt">  93&#10;</span><span class="lnt">  94&#10;</span><span class="lnt">  95&#10;</span><span class="lnt">  96&#10;</span><span class="lnt">  97&#10;</span><span class="lnt">  98&#10;</span><span class="lnt">  99&#10;</span><span class="lnt"> 100&#10;</span><span class="lnt"> 101&#10;</span><span class="lnt"> 102&#10;</span><span class="lnt"> 103&#10;</span><span class="lnt"> 104&#10;</span><span class="lnt"> 105&#10;</span><span class="lnt"> 106&#10;</span><span class="lnt"> 107&#10;</span><span class="lnt"> 108&#10;</span><span class="lnt"> 109&#10;</span><span class="lnt"> 110&#10;</span><span class="lnt"> 111&#10;</span><span class="lnt"> 112&#10;</span><span class="lnt"> 113&#10;</span><span class="lnt"> 114&#10;</span><span class="lnt"> 115&#10;</span><span class="lnt"> 116&#10;</span><span class="lnt"> 117&#10;</span><span class="lnt"> 118&#10;</span><span class="lnt"> 119&#10;</span><span class="lnt"> 120&#10;</span><span class="lnt"> 121&#10;</span><span class="lnt"> 122&#10;</span><span class="lnt"> 123&#10;</span><span class="lnt"> 124&#10;</span><span class="lnt"> 125&#10;</span><span class="lnt"> 126&#10;</span><span class="lnt"> 127&#10;</span><span class="lnt"> 128&#10;</span><span class="lnt"> 129&#10;</span><span class="lnt"> 130&#10;</span><span class="lnt"> 131&#10;</span><span class="lnt"> 132&#10;</span><span class="lnt"> 133&#10;</span><span class="lnt"> 134&#10;</span><span class="lnt"> 135&#10;</span><span class="lnt"> 136&#10;</span><span class="lnt"> 137&#10;</span><span class="lnt"> 138&#10;</span><span class="lnt"> 139&#10;</span><span class="lnt"> 140&#10;</span><span class="lnt"> 141&#10;</span><span class="lnt"> 142&#10;</span><span class="lnt"> 143&#10;</span><span class="lnt"> 144&#10;</span><span class="lnt"> 145&#10;</span><span class="lnt"> 146&#10;</span><span class="lnt"> 147&#10;</span><span class="lnt"> 148&#10;</span><span class="lnt"> 149&#10;</span><span class="lnt"> 150&#10;</span><span class="lnt"> 151&#10;</span><span class="lnt"> 152&#10;</span><span class="lnt"> 153&#10;</span><span class="lnt"> 154&#10;</span><span class="lnt"> 155&#10;</span><span class="lnt"> 156&#10;</span><span class="lnt"> 157&#10;</span><span class="lnt"> 158&#10;</span><span class="lnt"> 159&#10;</span><span class="lnt"> 160&#10;</span><span class="lnt"> 161&#10;</span><span class="lnt"> 162&#10;</span><span class="lnt"> 163&#10;</span><span class="lnt"> 164&#10;</span><span class="lnt"> 165&#10;</span><span class="lnt"> 166&#10;</span><span class="lnt"> 167&#10;</span><span class="lnt"> 168&#10;</span><span class="lnt"> 169&#10;</span><span class="lnt"> 170&#10;</span><span class="lnt"> 171&#10;</span><span class="lnt"> 172&#10;</span><span class="lnt"> 173&#10;</span><span class="lnt"> 174&#10;</span><span class="lnt"> 175&#10;</span><span class="lnt"> 176&#10;</span><span class="lnt"> 177&#10;</span><span class="lnt"> 178&#10;</span><span class="lnt"> 179&#10;</span><span class="lnt"> 180&#10;</span><span class="lnt"> 181&#10;</span><span class="lnt"> 182&#10;</span><span class="lnt"> 183&#10;</span><span class="lnt"> 184&#10;</span><span class="lnt"> 185&#10;</span><span class="lnt"> 186&#10;</span><span class="lnt"> 187&#10;</span><span class="lnt"> 188&#10;</span><span class="lnt"> 189&#10;</span><span class="lnt"> 190&#10;</span><span class="lnt"> 191&#10;</span><span class="lnt"> 192&#10;</span><span class="lnt"> 193&#10;</span><span class="lnt"> 194&#10;</span><span class="lnt"> 195&#10;</span><span class="lnt"> 196&#10;</span><span class="lnt"> 197&#10;</span><span class="lnt"> 198&#10;</span><span class="lnt"> 199&#10;</span><span class="lnt"> 200&#10;</span><span class="lnt"> 201&#10;</span><span class="lnt"> 202&#10;</span><span class="lnt"> 203&#10;</span><span class="lnt"> 204&#10;</span><span class="lnt"> 205&#10;</span><span class="lnt"> 206&#10;</span><span class="lnt"> 207&#10;</span><span class="lnt"> 208&#10;</span><span class="lnt"> 209&#10;</span><span class="lnt"> 210&#10;</span><span class="lnt"> 211&#10;</span><span class="lnt"> 212&#10;</span><span class="lnt"> 213&#10;</span><span class="lnt"> 214&#10;</span><span class="lnt"> 215&#10;</span><span class="lnt"> 216&#10;</span><span class="lnt"> 217&#10;</span><span class="lnt"> 218&#10;</span><span class="lnt"> 219&#10;</span><span class="lnt"> 220&#10;</span><span class="lnt"> 221&#10;</span><span class="lnt"> 222&#10;</span><span class="lnt"> 223&#10;</span><span class="lnt"> 224&#10;</span><span class="lnt"> 225&#10;</span><span class="lnt"> 226&#10;</span><span class="lnt"> 227&#10;</span><span class="lnt"> 228&#10;</span><span class="lnt"> 229&#10;</span><span class="lnt"> 230&#10;</span><span class="lnt"> 231&#10;</span><span class="lnt"> 232&#10;</span><span class="lnt"> 233&#10;</span><span class="lnt"> 234&#10;</span><span class="lnt"> 235&#10;</span><span class="lnt"> 236&#10;</span><span class="lnt"> 237&#10;</span><span class="lnt"> 238&#10;</span><span class="lnt"> 239&#10;</span><span class="lnt"> 240&#10;</span><span class="lnt"> 241&#10;</span><span class="lnt"> 242&#10;</span><span class="lnt"> 243&#10;</span><span class="lnt"> 244&#10;</span><span class="lnt"> 245&#10;</span><span class="lnt"> 246&#10;</span><span class="lnt"> 247&#10;</span><span class="lnt"> 248&#10;</span><span class="lnt"> 249&#10;</span><span class="lnt"> 250&#10;</span><span class="lnt"> 251&#10;</span><span class="lnt"> 252&#10;</span><span class="lnt"> 253&#10;</span><span class="lnt"> 254&#10;</span><span class="lnt"> 255&#10;</span><span class="lnt"> 256&#10;</span><span class="lnt"> 257&#10;</span><span class="lnt"> 258&#10;</span><span class="lnt"> 259&#10;</span><span class="lnt"> 260&#10;</span><span class="lnt"> 261&#10;</span><span class="lnt"> 262&#10;</span><span class="lnt"> 263&#10;</span><span class="lnt"> 264&#10;</span><span class="lnt"> 265&#10;</span><span class="lnt"> 266&#10;</span><span class="lnt"> 267&#10;</span><span class="lnt"> 268&#10;</span><span class="lnt"> 269&#10;</span><span class="lnt"> 270&#10;</span><span class="lnt"> 271&#10;</span><span class="lnt"> 272&#10;</span><span class="lnt"> 273&#10;</span><span class="lnt"> 274&#10;</span><span class="lnt"> 275&#10;</span><span class="lnt"> 276&#10;</span><span class="lnt"> 277&#10;</span><span class="lnt"> 278&#10;</span><span class="lnt"> 279&#10;</span><span class="lnt"> 280&#10;</span><span class="lnt"> 281&#10;</span><span class="lnt"> 282&#10;</span><span class="lnt"> 283&#10;</span><span class="lnt"> 284&#10;</span><span class="lnt"> 285&#10;</span><span class="lnt"> 286&#10;</span><span class="lnt"> 287&#10;</span><span class="lnt"> 288&#10;</span><span class="lnt"> 289&#10;</span><span class="lnt"> 290&#10;</span><span class="lnt"> 291&#10;</span><span class="lnt"> 292&#10;</span><span class="lnt"> 293&#10;</span><span class="lnt"> 294&#10;</span><span class="lnt"> 295&#10;</span><span class="lnt"> 296&#10;</span><span class="lnt"> 297&#10;</span><span class="lnt"> 298&#10;</span><span class="lnt"> 299&#10;</span><span class="lnt"> 300&#10;</span><span class="lnt"> 301&#10;</span><span class="lnt"> 302&#10;</span><span class="lnt"> 303&#10;</span><span class="lnt"> 304&#10;</span><span class="lnt"> 305&#10;</span><span class="lnt"> 306&#10;</span><span class="lnt"> 307&#10;</span><span class="lnt"> 308&#10;</span><span class="lnt"> 309&#10;</span><span class="lnt"> 310&#10;</span><span class="lnt"> 311&#10;</span><span class="lnt"> 312&#10;</span><span class="lnt"> 313&#10;</span><span class="lnt"> 314&#10;</span><span class="lnt"> 315&#10;</span><span class="lnt"> 316&#10;</span><span class="lnt"> 317&#10;</span><span class="lnt"> 318&#10;</span><span class="lnt"> 319&#10;</span><span class="lnt"> 320&#10;</span><span class="lnt"> 321&#10;</span><span class="lnt"> 322&#10;</span><span class="lnt"> 323&#10;</span><span class="lnt"> 324&#10;</span><span class="lnt"> 325&#10;</span><span class="lnt"> 326&#10;</span><span class="lnt"> 327&#10;</span><span class="lnt"> 328&#10;</span><span class="lnt"> 329&#10;</span><span class="lnt"> 330&#10;</span><span class="lnt"> 331&#10;</span><span class="lnt"> 332&#10;</span><span class="lnt"> 333&#10;</span><span class="lnt"> 334&#10;</span><span class="lnt"> 335&#10;</span><span class="lnt"> 336&#10;</span><span class="lnt"> 337&#10;</span><span class="lnt"> 338&#10;</span><span class="lnt"> 339&#10;</span><span class="lnt"> 340&#10;</span><span class="lnt"> 341&#10;</span><span class="lnt"> 342&#10;</span><span class="lnt"> 343&#10;</span><span class="lnt"> 344&#10;</span><span class="lnt"> 345&#10;</span><span class="lnt"> 346&#10;</span><span class="lnt"> 347&#10;</span><span class="lnt"> 348&#10;</span><span class="lnt"> 349&#10;</span><span class="lnt"> 350&#10;</span><span class="lnt"> 351&#10;</span><span class="lnt"> 352&#10;</span><span class="lnt"> 353&#10;</span><span class="lnt"> 354&#10;</span><span class="lnt"> 355&#10;</span><span class="lnt"> 356&#10;</span><span class="lnt"> 357&#10;</span><span class="lnt"> 358&#10;</span><span class="lnt"> 359&#10;</span><span class="lnt"> 360&#10;</span><span class="lnt"> 361&#10;</span><span class="lnt"> 362&#10;</span><span class="lnt"> 363&#10;</span><span class="lnt"> 364&#10;</span><span class="lnt"> 365&#10;</span><span class="lnt"> 366&#10;</span><span class="lnt"> 367&#10;</span><span class="lnt"> 368&#10;</span><span class="lnt"> 369&#10;</span><span class="lnt"> 370&#10;</span><span class="lnt"> 371&#10;</span><span class="lnt"> 372&#10;</span><span class="lnt"> 373&#10;</span><span class="lnt"> 374&#10;</span><span class="lnt"> 375&#10;</span><span class="lnt"> 376&#10;</span><span class="lnt"> 377&#10;</span><span class="lnt"> 378&#10;</span><span class="lnt"> 379&#10;</span><span class="lnt"> 380&#10;</span><span class="lnt"> 381&#10;</span><span class="lnt"> 382&#10;</span><span class="lnt"> 383&#10;</span><span class="lnt"> 384&#10;</span><span class="lnt"> 385&#10;</span><span class="lnt"> 386&#10;</span><span class="lnt"> 387&#10;</span><span class="lnt"> 388&#10;</span><span class="lnt"> 389&#10;</span><span class="lnt"> 390&#10;</span><span class="lnt"> 391&#10;</span><span class="lnt"> 392&#10;</span><span class="lnt"> 393&#10;</span><span class="lnt"> 394&#10;</span><span class="lnt"> 395&#10;</span><span class="lnt"> 396&#10;</span><span class="lnt"> 397&#10;</span><span class="lnt"> 398&#10;</span><span class="lnt"> 399&#10;</span><span class="lnt"> 400&#10;</span><span class="lnt"> 401&#10;</span><span class="lnt"> 402&#10;</span><span class="lnt"> 403&#10;</span><span class="lnt"> 404&#10;</span><span class="lnt"> 405&#10;</span><span class="lnt"> 406&#10;</span><span class="lnt"> 407&#10;</span><span class="lnt"> 408&#10;</span><span class="lnt"> 409&#10;</span><span class="lnt"> 410&#10;</span><span class="lnt"> 411&#10;</span><span class="lnt"> 412&#10;</span><span class="lnt"> 413&#10;</span><span class="lnt"> 414&#10;</span><span class="lnt"> 415&#10;</span><span class="lnt"> 416&#10;</span><span class="lnt"> 417&#10;</span><span class="lnt"> 418&#10;</span><span class="lnt"> 419&#10;</span><span class="lnt"> 420&#10;</span><span class="lnt"> 421&#10;</span><span class="lnt"> 422&#10;</span><span class="lnt"> 423&#10;</span><span class="lnt"> 424&#10;</span><span class="lnt"> 425&#10;</span><span class="lnt"> 426&#10;</span><span class="lnt"> 427&#10;</span><span class="lnt"> 428&#10;</span><span class="lnt"> 429&#10;</span><span class="lnt"> 430&#10;</span><span class="lnt"> 431&#10;</span><span class="lnt"> 432&#10;</span><span class="lnt"> 433&#10;</span><span class="lnt"> 434&#10;</span><span class="lnt"> 435&#10;</span><span class="lnt"> 436&#10;</span><span class="lnt"> 437&#10;</span><span class="lnt"> 438&#10;</span><span class="lnt"> 439&#10;</span><span class="lnt"> 440&#10;</span><span class="lnt"> 441&#10;</span><span class="lnt"> 442&#10;</span><span class="lnt"> 443&#10;</span><span class="lnt"> 444&#10;</span><span class="lnt"> 445&#10;</span><span class="lnt"> 446&#10;</span><span class="lnt"> 447&#10;</span><span class="lnt"> 448&#10;</span><span class="lnt"> 449&#10;</span><span class="lnt"> 450&#10;</span><span class="lnt"> 451&#10;</span><span class="lnt"> 452&#10;</span><span class="lnt"> 453&#10;</span><span class="lnt"> 454&#10;</span><span class="lnt"> 455&#10;</span><span class="lnt"> 456&#10;</span><span class="lnt"> 457&#10;</span><span class="lnt"> 458&#10;</span><span class="lnt"> 459&#10;</span><span class="lnt"> 460&#10;</span><span class="lnt"> 461&#10;</span><span class="lnt"> 462&#10;</span><span class="lnt"> 463&#10;</span><span class="lnt"> 464&#10;</span><span class="lnt"> 465&#10;</span><span class="lnt"> 466&#10;</span><span class="lnt"> 467&#10;</span><span class="lnt"> 468&#10;</span><span class="lnt"> 469&#10;</span><span class="lnt"> 470&#10;</span><span class="lnt"> 471&#10;</span><span class="lnt"> 472&#10;</span><span class="lnt"> 473&#10;</span><span class="lnt"> 474&#10;</span><span class="lnt"> 475&#10;</span><span class="lnt"> 476&#10;</span><span class="lnt"> 477&#10;</span><span class="lnt"> 478&#10;</span><span class="lnt"> 479&#10;</span><span class="lnt"> 480&#10;</span><span class="lnt"> 481&#10;</span><span class="lnt"> 482&#10;</span><span class="lnt"> 483&#10;</span><span class="lnt"> 484&#10;</span><span class="lnt"> 485&#10;</span><span class="lnt"> 486&#10;</span><span class="lnt"> 487&#10;</span><span class="lnt"> 488&#10;</span><span class="lnt"> 489&#10;</span><span class="lnt"> 490&#10;</span><span class="lnt"> 491&#10;</span><span class="lnt"> 492&#10;</span><span class="lnt"> 493&#10;</span><span class="lnt"> 494&#10;</span><span class="lnt"> 495&#10;</span><span class="lnt"> 496&#10;</span><span class="lnt"> 497&#10;</span><span class="lnt"> 498&#10;</span><span class="lnt"> 499&#10;</span><span class="lnt"> 500&#10;</span><span class="lnt"> 501&#10;</span><span class="lnt"> 502&#10;</span><span class="lnt"> 503&#10;</span><span class="lnt"> 504&#10;</span><span class="lnt"> 505&#10;</span><span class="lnt"> 506&#10;</span><span class="lnt"> 507&#10;</span><span class="lnt"> 508&#10;</span><span class="lnt"> 509&#10;</span><span class="lnt"> 510&#10;</span><span class="lnt"> 511&#10;</span><span class="lnt"> 512&#10;</span><span class="lnt"> 513&#10;</span><span class="lnt"> 514&#10;</span><span class="lnt"> 515&#10;</span><span class="lnt"> 516&#10;</span><span class="lnt"> 517&#10;</span><span class="lnt"> 518&#10;</span><span class="lnt"> 519&#10;</span><span class="lnt"> 520&#10;</span><span class="lnt"> 521&#10;</span><span class="lnt"> 522&#10;</span><span class="lnt"> 523&#10;</span><span class="lnt"> 524&#10;</span><span class="lnt"> 525&#10;</span><span class="lnt"> 526&#10;</span><span class="lnt"> 527&#10;</span><span class="lnt"> 528&#10;</span><span class="lnt"> 529&#10;</span><span class="lnt"> 530&#10;</span><span class="lnt"> 531&#10;</span><span class="lnt"> 532&#10;</span><span class="lnt"> 533&#10;</span><span class="lnt"> 534&#10;</span><span class="lnt"> 535&#10;</span><span class="lnt"> 536&#10;</span><span class="lnt"> 537&#10;</span><span class="lnt"> 538&#10;</span><span class="lnt"> 539&#10;</span><span class="lnt"> 540&#10;</span><span class="lnt"> 541&#10;</span><span class="lnt"> 542&#10;</span><span class="lnt"> 543&#10;</span><span class="lnt"> 544&#10;</span><span class="lnt"> 545&#10;</span><span class="lnt"> 546&#10;</span><span class="lnt"> 547&#10;</span><span class="lnt"> 548&#10;</span><span class="lnt"> 549&#10;</span><span class="lnt"> 550&#10;</span><span class="lnt"> 551&#10;</span><span class="lnt"> 552&#10;</span><span class="lnt"> 553&#10;</span><span class="lnt"> 554&#10;</span><span class="lnt"> 555&#10;</span><span class="lnt"> 556&#10;</span><span class="lnt"> 557&#10;</span><span class="lnt"> 558&#10;</span><span class="lnt"> 559&#10;</span><span class="lnt"> 560&#10;</span><span class="lnt"> 561&#10;</span><span class="lnt"> 562&#10;</span><span class="lnt"> 563&#10;</span><span class="lnt"> 564&#10;</span><span class="lnt"> 565&#10;</span><span class="lnt"> 566&#10;</span><span class="lnt"> 567&#10;</span><span class="lnt"> 568&#10;</span><span class="lnt"> 569&#10;</span><span class="lnt"> 570&#10;</span><span class="lnt"> 571&#10;</span><span class="lnt"> 572&#10;</span><span class="lnt"> 573&#10;</span><span class="lnt"> 574&#10;</span><span class="lnt"> 575&#10;</span><span class="lnt"> 576&#10;</span><span class="lnt"> 577&#10;</span><span class="lnt"> 578&#10;</span><span class="lnt"> 579&#10;</span><span class="lnt"> 580&#10;</span><span class="lnt"> 581&#10;</span><span class="lnt"> 582&#10;</span><span class="lnt"> 583&#10;</span><span class="lnt"> 584&#10;</span><span class="lnt"> 585&#10;</span><span class="lnt"> 586&#10;</span><span class="lnt"> 587&#10;</span><span class="lnt"> 588&#10;</span><span class="lnt"> 589&#10;</span><span class="lnt"> 590&#10;</span><span class="lnt"> 591&#10;</span><span class="lnt"> 592&#10;</span><span class="lnt"> 593&#10;</span><span class="lnt"> 594&#10;</span><span class="lnt"> 595&#10;</span><span class="lnt"> 596&#10;</span><span class="lnt"> 597&#10;</span><span class="lnt"> 598&#10;</span><span class="lnt"> 599&#10;</span><span class="lnt"> 600&#10;</span><span class="lnt"> 601&#10;</span><span class="lnt"> 602&#10;</span><span class="lnt"> 603&#10;</span><span class="lnt"> 604&#10;</span><span class="lnt"> 605&#10;</span><span class="lnt"> 606&#10;</span><span class="lnt"> 607&#10;</span><span class="lnt"> 608&#10;</span><span class="lnt"> 609&#10;</span><span class="lnt"> 610&#10;</span><span class="lnt"> 611&#10;</span><span class="lnt"> 612&#10;</span><span class="lnt"> 613&#10;</span><span class="lnt"> 614&#10;</span><span class="lnt"> 615&#10;</span><span class="lnt"> 616&#10;</span><span class="lnt"> 617&#10;</span><span class="lnt"> 618&#10;</span><span class="lnt"> 619&#10;</span><span class="lnt"> 620&#10;</span><span class="lnt"> 621&#10;</span><span class="lnt"> 622&#10;</span><span class="lnt"> 623&#10;</span><span class="lnt"> 624&#10;</span><span class="lnt"> 625&#10;</span><span class="lnt"> 626&#10;</span><span class="lnt"> 627&#10;</span><span class="lnt"> 628&#10;</span><span class="lnt"> 629&#10;</span><span class="lnt"> 630&#10;</span><span class="lnt"> 631&#10;</span><span class="lnt"> 632&#10;</span><span class="lnt"> 633&#10;</span><span class="lnt"> 634&#10;</span><span class="lnt"> 635&#10;</span><span class="lnt"> 636&#10;</span><span class="lnt"> 637&#10;</span><span class="lnt"> 638&#10;</span><span class="lnt"> 639&#10;</span><span class="lnt"> 640&#10;</span><span class="lnt"> 641&#10;</span><span class="lnt"> 642&#10;</span><span class="lnt"> 643&#10;</span><span class="lnt"> 644&#10;</span><span class="lnt"> 645&#10;</span><span class="lnt"> 646&#10;</span><span class="lnt"> 647&#10;</span><span class="lnt"> 648&#10;</span><span class="lnt"> 649&#10;</span><span class="lnt"> 650&#10;</span><span class="lnt"> 651&#10;</span><span class="lnt"> 652&#10;</span><span class="lnt"> 653&#10;</span><span class="lnt"> 654&#10;</span><span class="lnt"> 655&#10;</span><span class="lnt"> 656&#10;</span><span class="lnt"> 657&#10;</span><span class="lnt"> 658&#10;</span><span class="lnt"> 659&#10;</span><span class="lnt"> 660&#10;</span><span class="lnt"> 661&#10;</span><span class="lnt"> 662&#10;</span><span class="lnt"> 663&#10;</span><span class="lnt"> 664&#10;</span><span class="lnt"> 665&#10;</span><span class="lnt"> 666&#10;</span><span class="lnt"> 667&#10;</span><span class="lnt"> 668&#10;</span><span class="lnt"> 669&#10;</span><span class="lnt"> 670&#10;</span><span class="lnt"> 671&#10;</span><span class="lnt"> 672&#10;</span><span class="lnt"> 673&#10;</span><span class="lnt"> 674&#10;</span><span class="lnt"> 675&#10;</span><span class="lnt"> 676&#10;</span><span class="lnt"> 677&#10;</span><span class="lnt"> 678&#10;</span><span class="lnt"> 679&#10;</span><span class="lnt"> 680&#10;</span><span class="lnt"> 681&#10;</span><span class="lnt"> 682&#10;</span><span class="lnt"> 683&#10;</span><span class="lnt"> 684&#10;</span><span class="lnt"> 685&#10;</span><span class="lnt"> 686&#10;</span><span class="lnt"> 687&#10;</span><span class="lnt"> 688&#10;</span><span class="lnt"> 689&#10;</span><span class="lnt"> 690&#10;</span><span class="lnt"> 691&#10;</span><span class="lnt"> 692&#10;</span><span class="lnt"> 693&#10;</span><span class="lnt"> 694&#10;</span><span class="lnt"> 695&#10;</span><span class="lnt"> 696&#10;</span><span class="lnt"> 697&#10;</span><span class="lnt"> 698&#10;</span><span class="lnt"> 699&#10;</span><span class="lnt"> 700&#10;</span><span class="lnt"> 701&#10;</span><span class="lnt"> 702&#10;</span><span class="lnt"> 703&#10;</span><span class="lnt"> 704&#10;</span><span class="lnt"> 705&#10;</span><span class="lnt"> 706&#10;</span><span class="lnt"> 707&#10;</span><span class="lnt"> 708&#10;</span><span class="lnt"> 709&#10;</span><span class="lnt"> 710&#10;</span><span class="lnt"> 711&#10;</span><span class="lnt"> 712&#10;</span><span class="lnt"> 713&#10;</span><span class="lnt"> 714&#10;</span><span class="lnt"> 715&#10;</span><span class="lnt"> 716&#10;</span><span class="lnt"> 717&#10;</span><span class="lnt"> 718&#10;</span><span class="lnt"> 719&#10;</span><span class="lnt"> 720&#10;</span><span class="lnt"> 721&#10;</span><span class="lnt"> 722&#10;</span><span class="lnt"> 723&#10;</span><span class="lnt"> 724&#10;</span><span class="lnt"> 725&#10;</span><span class="lnt"> 726&#10;</span><span class="lnt"> 727&#10;</span><span class="lnt"> 728&#10;</span><span class="lnt"> 729&#10;</span><span class="lnt"> 730&#10;</span><span class="lnt"> 731&#10;</span><span class="lnt"> 732&#10;</span><span class="lnt"> 733&#10;</span><span class="lnt"> 734&#10;</span><span class="lnt"> 735&#10;</span><span class="lnt"> 736&#10;</span><span class="lnt"> 737&#10;</span><span class="lnt"> 738&#10;</span><span class="lnt"> 739&#10;</span><span class="lnt"> 740&#10;</span><span class="lnt"> 741&#10;</span><span class="lnt"> 742&#10;</span><span class="lnt"> 743&#10;</span><span class="lnt"> 744&#10;</span><span class="lnt"> 745&#10;</span><span class="lnt"> 746&#10;</span><span class="lnt"> 747&#10;</span><span class="lnt"> 748&#10;</span><span class="lnt"> 749&#10;</span><span class="lnt"> 750&#10;</span><span class="lnt"> 751&#10;</span><span class="lnt"> 752&#10;</span><span class="lnt"> 753&#10;</span><span class="lnt"> 754&#10;</span><span class="lnt"> 755&#10;</span><span class="lnt"> 756&#10;</span><span class="lnt"> 757&#10;</span><span class="lnt"> 758&#10;</span><span class="lnt"> 759&#10;</span><span class="lnt"> 760&#10;</span><span class="lnt"> 761&#10;</span><span class="lnt"> 762&#10;</span><span class="lnt"> 763&#10;</span><span class="lnt"> 764&#10;</span><span class="lnt"> 765&#10;</span><span class="lnt"> 766&#10;</span><span class="lnt"> 767&#10;</span><span class="lnt"> 768&#10;</span><span class="lnt"> 769&#10;</span><span class="lnt"> 770&#10;</span><span class="lnt"> 771&#10;</span><span class="lnt"> 772&#10;</span><span class="lnt"> 773&#10;</span><span class="lnt"> 774&#10;</span><span class="lnt"> 775&#10;</span><span class="lnt"> 776&#10;</span><span class="lnt"> 777&#10;</span><span class="lnt"> 778&#10;</span><span class="lnt"> 779&#10;</span><span class="lnt"> 780&#10;</span><span class="lnt"> 781&#10;</span><span class="lnt"> 782&#10;</span><span class="lnt"> 783&#10;</span><span class="lnt"> 784&#10;</span><span class="lnt"> 785&#10;</span><span class="lnt"> 786&#10;</span><span class="lnt"> 787&#10;</span><span class="lnt"> 788&#10;</span><span class="lnt"> 789&#10;</span><span class="lnt"> 790&#10;</span><span class="lnt"> 791&#10;</span><span class="lnt"> 792&#10;</span><span class="lnt"> 793&#10;</span><span class="lnt"> 794&#10;</span><span class="lnt"> 795&#10;</span><span class="lnt"> 796&#10;</span><span class="lnt"> 797&#10;</span><span class="lnt"> 798&#10;</span><span class="lnt"> 799&#10;</span><span class="lnt"> 800&#10;</span><span class="lnt"> 801&#10;</span><span class="lnt"> 802&#10;</span><span class="lnt"> 803&#10;</span><span class="lnt"> 804&#10;</span><span class="lnt"> 805&#10;</span><span class="lnt"> 806&#10;</span><span class="lnt"> 807&#10;</span><span class="lnt"> 808&#10;</span><span class="lnt"> 809&#10;</span><span class="lnt"> 810&#10;</span><span class="lnt"> 811&#10;</span><span class="lnt"> 812&#10;</span><span class="lnt"> 813&#10;</span><span class="lnt"> 814&#10;</span><span class="lnt"> 815&#10;</span><span class="lnt"> 816&#10;</span><span class="lnt"> 817&#10;</span><span class="lnt"> 818&#10;</span><span class="lnt"> 819&#10;</span><span class="lnt"> 820&#10;</span><span class="lnt"> 821&#10;</span><span class="lnt"> 822&#10;</span><span class="lnt"> 823&#10;</span><span class="lnt"> 824&#10;</span><span class="lnt"> 825&#10;</span><span class="lnt"> 826&#10;</span><span class="lnt"> 827&#10;</span><span class="lnt"> 828&#10;</span><span class="lnt"> 829&#10;</span><span class="lnt"> 830&#10;</span><span class="lnt"> 831&#10;</span><span class="lnt"> 832&#10;</span><span class="lnt"> 833&#10;</span><span class="lnt"> 834&#10;</span><span class="lnt"> 835&#10;</span><span class="lnt"> 836&#10;</span><span class="lnt"> 837&#10;</span><span class="lnt"> 838&#10;</span><span class="lnt"> 839&#10;</span><span class="lnt"> 840&#10;</span><span class="lnt"> 841&#10;</span><span class="lnt"> 842&#10;</span><span class="lnt"> 843&#10;</span><span class="lnt"> 844&#10;</span><span class="lnt"> 845&#10;</span><span class="lnt"> 846&#10;</span><span class="lnt"> 847&#10;</span><span class="lnt"> 848&#10;</span><span class="lnt"> 849&#10;</span><span class="lnt"> 850&#10;</span><span class="lnt"> 851&#10;</span><span class="lnt"> 852&#10;</span><span class="lnt"> 853&#10;</span><span class="lnt"> 854&#10;</span><span class="lnt"> 855&#10;</span><span class="lnt"> 856&#10;</span><span class="lnt"> 857&#10;</span><span class="lnt"> 858&#10;</span><span class="lnt"> 859&#10;</span><span class="lnt"> 860&#10;</span><span class="lnt"> 861&#10;</span><span class="lnt"> 862&#10;</span><span class="lnt"> 863&#10;</span><span class="lnt"> 864&#10;</span><span class="lnt"> 865&#10;</span><span class="lnt"> 866&#10;</span><span class="lnt"> 867&#10;</span><span class="lnt"> 868&#10;</span><span class="lnt"> 869&#10;</span><span class="lnt"> 870&#10;</span><span class="lnt"> 871&#10;</span><span class="lnt"> 872&#10;</span><span class="lnt"> 873&#10;</span><span class="lnt"> 874&#10;</span><span class="lnt"> 875&#10;</span><span class="lnt"> 876&#10;</span><span class="lnt"> 877&#10;</span><span class="lnt"> 878&#10;</span><span class="lnt"> 879&#10;</span><span class="lnt"> 880&#10;</span><span class="lnt"> 881&#10;</span><span class="lnt"> 882&#10;</span><span class="lnt"> 883&#10;</span><span class="lnt"> 884&#10;</span><span class="lnt"> 885&#10;</span><span class="lnt"> 886&#10;</span><span class="lnt"> 887&#10;</span><span class="lnt"> 888&#10;</span><span class="lnt"> 889&#10;</span><span class="lnt"> 890&#10;</span><span class="lnt"> 891&#10;</span><span class="lnt"> 892&#10;</span><span class="lnt"> 893&#10;</span><span class="lnt"> 894&#10;</span><span class="lnt"> 895&#10;</span><span class="lnt"> 896&#10;</span><span class="lnt"> 897&#10;</span><span class="lnt"> 898&#10;</span><span class="lnt"> 899&#10;</span><span class="lnt"> 900&#10;</span><span class="lnt"> 901&#10;</span><span class="lnt"> 902&#10;</span><span class="lnt"> 903&#10;</span><span class="lnt"> 904&#10;</span><span class="lnt"> 905&#10;</span><span class="lnt"> 906&#10;</span><span class="lnt"> 907&#10;</span><span class="lnt"> 908&#10;</span><span class="lnt"> 909&#10;</span><span class="lnt"> 910&#10;</span><span class="lnt"> 911&#10;</span><span class="lnt"> 912&#10;</span><span class="lnt"> 913&#10;</span><span class="lnt"> 914&#10;</span><span class="lnt"> 915&#10;</span><span class="lnt"> 916&#10;</span><span class="lnt"> 917&#10;</span><span class="lnt"> 918&#10;</span><span class="lnt"> 919&#10;</span><span class="lnt"> 920&#10;</span><span class="lnt"> 921&#10;</span><span class="lnt"> 922&#10;</span><span class="lnt"> 923&#10;</span><span class="lnt"> 924&#10;</span><span class="lnt"> 925&#10;</span><span class="lnt"> 926&#10;</span><span class="lnt"> 927&#10;</span><span class="lnt"> 928&#10;</span><span class="lnt"> 929&#10;</span><span class="lnt"> 930&#10;</span><span class="lnt"> 931&#10;</span><span class="lnt"> 932&#10;</span><span class="lnt"> 933&#10;</span><span class="lnt"> 934&#10;</span><span class="lnt"> 935&#10;</span><span class="lnt"> 936&#10;</span><span class="lnt"> 937&#10;</span><span class="lnt"> 938&#10;</span><span class="lnt"> 939&#10;</span><span class="lnt"> 940&#10;</span><span class="lnt"> 941&#10;</span><span class="lnt"> 942&#10;</span><span class="lnt"> 943&#10;</span><span class="lnt"> 944&#10;</span><span class="lnt"> 945&#10;</span><span class="lnt"> 946&#10;</span><span class="lnt"> 947&#10;</span><span class="lnt"> 948&#10;</span><span class="lnt"> 949&#10;</span><span class="lnt"> 950&#10;</span><span class="lnt"> 951&#10;</span><span class="lnt"> 952&#10;</span><span class="lnt"> 953&#10;</span><span class="lnt"> 954&#10;</span><span class="lnt"> 955&#10;</span><span class="lnt"> 956&#10;</span><span class="lnt"> 957&#10;</span><span class="lnt"> 958&#10;</span><span class="lnt"> 959&#10;</span><span class="lnt"> 960&#10;</span><span class="lnt"> 961&#10;</span><span class="lnt"> 962&#10;</span><span class="lnt"> 963&#10;</span><span class="lnt"> 964&#10;</span><span class="lnt"> 965&#10;</span><span class="lnt"> 966&#10;</span><span class="lnt"> 967&#10;</span><span class="lnt"> 968&#10;</span><span class="lnt"> 969&#10;</span><span class="lnt"> 970&#10;</span><span class="lnt"> 971&#10;</span><span class="lnt"> 972&#10;</span><span class="lnt"> 973&#10;</span><span class="lnt"> 974&#10;</span><span class="lnt"> 975&#10;</span><span class="lnt"> 976&#10;</span><span class="lnt"> 977&#10;</span><span class="lnt"> 978&#10;</span><span class="lnt"> 979&#10;</span><span class="lnt"> 980&#10;</span><span class="lnt"> 981&#10;</span><span class="lnt"> 982&#10;</span><span class="lnt"> 983&#10;</span><span class="lnt"> 984&#10;</span><span class="lnt"> 985&#10;</span><span class="lnt"> 986&#10;</span><span class="lnt"> 987&#10;</span><span class="lnt"> 988&#10;</span><span class="lnt"> 989&#10;</span><span class="lnt"> 990&#10;</span><span class="lnt"> 991&#10;</span><span class="lnt"> 992&#10;</span><span class="lnt"> 993&#10;</span><span class="lnt"> 994&#10;</span><span class="lnt"> 995&#10;</span><span class="lnt"> 996&#10;</span><span class="lnt"> 997&#10;</span><span class="lnt"> 998&#10;</span><span class="lnt"> 999&#10;</span><span class="lnt">1000&#10;</span><span class="lnt">1001&#10;</span><span class="lnt">1002&#10;</span><span class="lnt">1003&#10;</span><span class="lnt">1004&#10;</span><span class="lnt">1005&#10;</span><span class="lnt">1006&#10;</span><span class="lnt">1007&#10;</span><span class="lnt">1008&#10;</span><span class="lnt">1009&#10;</span><span class="lnt">1010&#10;</span><span class="lnt">1011&#10;</span><span class="lnt">1012&#10;</span><span class="lnt">1013&#10;</span><span class="lnt">1014&#10;</span><span class="lnt">1015&#10;</span><span class="lnt">1016&#10;</span><span class="lnt">1017&#10;</span><span class="lnt">1018&#10;</span><span class="lnt">1019&#10;</span><span class="lnt">1020&#10;</span><span class="lnt">1021&#10;</span><span class="lnt">1022&#10;</span><span class="lnt">1023&#10;</span><span class="lnt">1024&#10;</span><span class="lnt">1025&#10;</span><span class="lnt">1026&#10;</span><span class="lnt">1027&#10;</span><span class="lnt">1028&#10;</span><span class="lnt">1029&#10;</span><span class="lnt">1030&#10;</span><span class="lnt">1031&#10;</span><span class="lnt">1032&#10;</span><span class="lnt">1033&#10;</span><span class="lnt">1034&#10;</span><span class="lnt">1035&#10;</span><span class="lnt">1036&#10;</span><span class="lnt">1037&#10;</span><span class="lnt">1038&#10;</span><span class="lnt">1039&#10;</span><span class="lnt">1040&#10;</span><span class="lnt">1041&#10;</span><span class="lnt">1042&#10;</span><span class="lnt">1043&#10;</span><span class="lnt">1044&#10;</span><span class="lnt">1045&#10;</span><span class="lnt">1046&#10;</span><span class="lnt">1047&#10;</span><span class="lnt">1048&#10;</span><span class="lnt">1049&#10;</span><span class="lnt">1050&#10;</span><span class="lnt">1051&#10;</span><span class="lnt">1052&#10;</span><span class="lnt">1053&#10;</span><span class="lnt">1054&#10;</span><span class="lnt">1055&#10;</span><span class="lnt">1056&#10;</span><span class="lnt">1057&#10;</span><span class="lnt">1058&#10;</span><span class="lnt">1059&#10;</span><span class="lnt">1060&#10;</span><span class="lnt">1061&#10;</span><span class="lnt">1062&#10;</span><span class="lnt">1063&#10;</span><span class="lnt">1064&#10;</span><span class="lnt">1065&#10;</span><span class="lnt">1066&#10;</span><span class="lnt">1067&#10;</span><span class="lnt">1068&#10;</span><span class="lnt">1069&#10;</span><span class="lnt">1070&#10;</span><span class="lnt">1071&#10;</span><span class="lnt">1072&#10;</span><span class="lnt">1073&#10;</span><span class="lnt">1074&#10;</span><span class="lnt">1075&#10;</span><span class="lnt">1076&#10;</span><span class="lnt">1077&#10;</span><span class="lnt">1078&#10;</span><span class="lnt">1079&#10;</span><span class="lnt">1080&#10;</span><span class="lnt">1081&#10;</span><span class="lnt">1082&#10;</span><span class="lnt">1083&#10;</span><span class="lnt">1084&#10;</span><span class="lnt">1085&#10;</span><span class="lnt">1086&#10;</span><span class="lnt">1087&#10;</span><span class="lnt">1088&#10;</span><span class="lnt">1089&#10;</span><span class="lnt">1090&#10;</span><span class="lnt">1091&#10;</span><span class="lnt">1092&#10;</span><span class="lnt">1093&#10;</span><span class="lnt">1094&#10;</span><span class="lnt">1095&#10;</span><span class="lnt">1096&#10;</span><span class="lnt">1097&#10;</span><span class="lnt">1098&#10;</span><span class="lnt">1099&#10;</span><span class="lnt">1100&#10;</span><span class="lnt">1101&#10;</span><span class="lnt">1102&#10;</span><span class="lnt">1103&#10;</span><span class="lnt">1104&#10;</span><span class="lnt">1105&#10;</span><span class="lnt">1106&#10;</span><span class="lnt">1107&#10;</span><span class="lnt">1108&#10;</span><span class="lnt">1109&#10;</span><span class="lnt">1110&#10;</span><span class="lnt">1111&#10;</span><span class="lnt">1112&#10;</span><span class="lnt">1113&#10;</span><span class="lnt">1114&#10;</span><span class="lnt">1115&#10;</span><span class="lnt">1116&#10;</span><span class="lnt">1117&#10;</span><span class="lnt">1118&#10;</span><span class="lnt">1119&#10;</span><span class="lnt">1120&#10;</span><span class="lnt">1121&#10;</span><span class="lnt">1122&#10;</span><span class="lnt">1123&#10;</span><span class="lnt">1124&#10;</span><span class="lnt">1125&#10;</span><span class="lnt">1126&#10;</span><span class="lnt">1127&#10;</span><span class="lnt">1128&#10;</span><span class="lnt">1129&#10;</span><span class="lnt">1130&#10;</span><span class="lnt">1131&#10;</span><span class="lnt">1132&#10;</span><span class="lnt">1133&#10;</span><span class="lnt">1134&#10;</span><span class="lnt">1135&#10;</span><span class="lnt">1136&#10;</span><span class="lnt">1137&#10;</span><span class="lnt">1138&#10;</span><span class="lnt">1139&#10;</span><span class="lnt">1140&#10;</span><span class="lnt">1141&#10;</span><span class="lnt">1142&#10;</span><span class="lnt">1143&#10;</span><span class="lnt">1144&#10;</span><span class="lnt">1145&#10;</span><span class="lnt">1146&#10;</span><span class="lnt">1147&#10;</span><span class="lnt">1148&#10;</span><span class="lnt">1149&#10;</span><span class="lnt">1150&#10;</span><span class="lnt">1151&#10;</span><span class="lnt">1152&#10;</span><span class="lnt">1153&#10;</span><span class="lnt">1154&#10;</span><span class="lnt">1155&#10;</span><span class="lnt">1156&#10;</span><span class="lnt">1157&#10;</span><span class="lnt">1158&#10;</span><span class="lnt">1159&#10;</span><span class="lnt">1160&#10;</span><span class="lnt">1161&#10;</span><span class="lnt">1162&#10;</span><span class="lnt">1163&#10;</span><span class="lnt">1164&#10;</span><span class="lnt">1165&#10;</span><span class="lnt">1166&#10;</span><span class="lnt">1167&#10;</span><span class="lnt">1168&#10;</span><span class="lnt">1169&#10;</span><span class="lnt">1170&#10;</span><span class="lnt">1171&#10;</span><span class="lnt">1172&#10;</span><span class="lnt">1173&#10;</span><span class="lnt">1174&#10;</span><span class="lnt">1175&#10;</span><span class="lnt">1176&#10;</span><span class="lnt">1177&#10;</span><span class="lnt">1178&#10;</span><span class="lnt">1179&#10;</span><span class="lnt">1180&#10;</span><span class="lnt">1181&#10;</span><span class="lnt">1182&#10;</span><span class="lnt">1183&#10;</span><span class="lnt">1184&#10;</span><span class="lnt">1185&#10;</span><span class="lnt">1186&#10;</span><span class="lnt">1187&#10;</span><span class="lnt">1188&#10;</span><span class="lnt">1189&#10;</span><span class="lnt">1190&#10;</span><span class="lnt">1191&#10;</span><span class="lnt">1192&#10;</span><span class="lnt">1193&#10;</span><span class="lnt">1194&#10;</span><span class="lnt">1195&#10;</span><span class="lnt">1196&#10;</span><span class="lnt">1197&#10;</span><span class="lnt">1198&#10;</span><span class="lnt">1199&#10;</span><span class="lnt">1200&#10;</span><span class="lnt">1201&#10;</span><span class="lnt">1202&#10;</span><span class="lnt">1203&#10;</span><span class="lnt">1204&#10;</span><span class="lnt">1205&#10;</span><span class="lnt">1206&#10;</span><span class="lnt">1207&#10;</span><span class="lnt">1208&#10;</span><span class="lnt">1209&#10;</span><span class="lnt">1210&#10;</span><span class="lnt">1211&#10;</span><span class="lnt">1212&#10;</span><span class="lnt">1213&#10;</span><span class="lnt">1214&#10;</span><span class="lnt">1215&#10;</span><span class="lnt">1216&#10;</span><span class="lnt">1217&#10;</span><span class="lnt">1218&#10;</span><span class="lnt">1219&#10;</span><span class="lnt">1220&#10;</span><span class="lnt">1221&#10;</span><span class="lnt">1222&#10;</span><span class="lnt">1223&#10;</span><span class="lnt">1224&#10;</span><span class="lnt">1225&#10;</span><span class="lnt">1226&#10;</span><span class="lnt">1227&#10;</span><span class="lnt">1228&#10;</span><span class="lnt">1229&#10;</span><span class="lnt">1230&#10;</span><span class="lnt">1231&#10;</span><span class="lnt">1232&#10;</span><span class="lnt">1233&#10;</span><span class="lnt">1234&#10;</span><span class="lnt">1235&#10;</span><span class="lnt">1236&#10;</span><span class="lnt">1237&#10;</span><span class="lnt">1238&#10;</span><span class="lnt">1239&#10;</span><span class="lnt">1240&#10;</span><span class="lnt">1241&#10;</span><span class="lnt">1242&#10;</span><span class="lnt">1243&#10;</span><span class="lnt">1244&#10;</span><span class="lnt">1245&#10;</span><span class="lnt">1246&#10;</span><span class="lnt">1247&#10;</span><span class="lnt">1248&#10;</span><span class="lnt">1249&#10;</span><span class="lnt">1250&#10;</span><span class="lnt">1251&#10;</span><span class="lnt">1252&#10;</span><span class="lnt">1253&#10;</span><span class="lnt">1254&#10;</span><span class="lnt">1255&#10;</span><span class="lnt">1256&#10;</span><span class="lnt">1257&#10;</span><span class="lnt">1258&#10;</span><span class="lnt">1259&#10;</span><span class="lnt">1260&#10;</span><span class="lnt">1261&#10;</span><span class="lnt">1262&#10;</span><span class="lnt">1263&#10;</span><span class="lnt">1264&#10;</span><span class="lnt">1265&#10;</span><span class="lnt">1266&#10;</span><span class="lnt">1267&#10;</span><span class="lnt">1268&#10;</span><span class="lnt">1269&#10;</span><span class="lnt">1270&#10;</span><span class="lnt">1271&#10;</span><span class="lnt">1272&#10;</span><span class="lnt">1273&#10;</span><span class="lnt">1274&#10;</span><span class="lnt">1275&#10;</span><span class="lnt">1276&#10;</span><span class="lnt">1277&#10;</span><span class="lnt">1278&#10;</span><span class="lnt">1279&#10;</span><span class="lnt">1280&#10;</span><span class="lnt">1281&#10;</span><span class="lnt">1282&#10;</span><span class="lnt">1283&#10;</span><span class="lnt">1284&#10;</span><span class="lnt">1285&#10;</span><span class="lnt">1286&#10;</span><span class="lnt">1287&#10;</span><span class="lnt">1288&#10;</span><span class="lnt">1289&#10;</span><span class="lnt">1290&#10;</span><span class="lnt">1291&#10;</span><span class="lnt">1292&#10;</span><span class="lnt">1293&#10;</span><span class="lnt">1294&#10;</span><span class="lnt">1295&#10;</span><span class="lnt">1296&#10;</span><span class="lnt">1297&#10;</span><span class="lnt">1298&#10;</span><span class="lnt">1299&#10;</span><span class="lnt">1300&#10;</span><span class="lnt">1301&#10;</span><span class="lnt">1302&#10;</span><span class="lnt">1303&#10;</span><span class="lnt">1304&#10;</span><span class="lnt">1305&#10;</span><span class="lnt">1306&#10;</span><span class="lnt">1307&#10;</span><span class="lnt">1308&#10;</span><span class="lnt">1309&#10;</span><span class="lnt">1310&#10;</span><span class="lnt">1311&#10;</span><span class="lnt">1312&#10;</span><span class="lnt">1313&#10;</span><span class="lnt">1314&#10;</span><span class="lnt">1315&#10;</span><span class="lnt">1316&#10;</span><span class="lnt">1317&#10;</span><span class="lnt">1318&#10;</span><span class="lnt">1319&#10;</span><span class="lnt">1320&#10;</span><span class="lnt">1321&#10;</span><span class="lnt">1322&#10;</span><span class="lnt">1323&#10;</span><span class="lnt">1324&#10;</span><span class="lnt">1325&#10;</span><span class="lnt">1326&#10;</span><span class="lnt">1327&#10;</span><span class="lnt">1328&#10;</span><span class="lnt">1329&#10;</span><span class="lnt">1330&#10;</span><span class="lnt">1331&#10;</span><span class="lnt">1332&#10;</span><span class="lnt">1333&#10;</span><span class="lnt">1334&#10;</span><span class="lnt">1335&#10;</span><span class="lnt">1336&#10;</span><span class="lnt">1337&#10;</span><span class="lnt">1338&#10;</span><span class="lnt">1339&#10;</span><span class="lnt">1340&#10;</span><span class="lnt">1341&#10;</span><span class="lnt">1342&#10;</span><span class="lnt">1343&#10;</span><span class="lnt">1344&#10;</span><span class="lnt">1345&#10;</span><span class="lnt">1346&#10;</span><span class="lnt">1347&#10;</span><span class="lnt">1348&#10;</span><span class="lnt">1349&#10;</span><span class="lnt">1350&#10;</span><span class="lnt">1351&#10;</span><span class="lnt">1352&#10;</span><span class="lnt">1353&#10;</span><span class="lnt">1354&#10;</span><span class="lnt">1355&#10;</span><span class="lnt">1356&#10;</span><span class="lnt">1357&#10;</span><span class="lnt">1358&#10;</span><span class="lnt">1359&#10;</span><span class="lnt">1360&#10;</span><span class="lnt">1361&#10;</span><span class="lnt">1362&#10;</span><span class="lnt">1363&#10;</span><span class="lnt">1364&#10;</span><span class="lnt">1365&#10;</span><span class="lnt">1366&#10;</span><span class="lnt">1367&#10;</span><span class="lnt">1368&#10;</span><span class="lnt">1369&#10;</span><span class="lnt">1370&#10;</span><span class="lnt">1371&#10;</span><span class="lnt">1372&#10;</span><span class="lnt">1373&#10;</span><span class="lnt">1374&#10;</span><span class="lnt">1375&#10;</span><span class="lnt">1376&#10;</span><span class="lnt">1377&#10;</span><span class="lnt">1378&#10;</span><span class="lnt">1379&#10;</span><span class="lnt">1380&#10;</span><span class="lnt">1381&#10;</span><span class="lnt">1382&#10;</span><span class="lnt">1383&#10;</span><span class="lnt">1384&#10;</span><span class="lnt">1385&#10;</span><span class="lnt">1386&#10;</span><span class="lnt">1387&#10;</span><span class="lnt">1388&#10;</span><span class="lnt">1389&#10;</span><span class="lnt">1390&#10;</span><span class="lnt">1391&#10;</span><span class="lnt">1392&#10;</span><span class="lnt">1393&#10;</span><span class="lnt">1394&#10;</span><span class="lnt">1395&#10;</span><span class="lnt">1396&#10;</span><span class="lnt">1397&#10;</span><span class="lnt">1398&#10;</span><span class="lnt">1399&#10;</span><span class="lnt">1400&#10;</span><span class="lnt">1401&#10;</span><span class="lnt">1402&#10;</span><span class="lnt">1403&#10;</span><span class="lnt">1404&#10;</span><span class="lnt">1405&#10;</span><span class="lnt">1406&#10;</span><span class="lnt">1407&#10;</span><span class="lnt">1408&#10;</span><span class="lnt">1409&#10;</span><span class="lnt">1410&#10;</span><span class="lnt">1411&#10;</span><span class="lnt">1412&#10;</span><span class="lnt">1413&#10;</span><span class="lnt">1414&#10;</span><span class="lnt">1415&#10;</span><span class="lnt">1416&#10;</span><span class="lnt">1417&#10;</span><span class="lnt">1418&#10;</span><span class="lnt">1419&#10;</span><span class="lnt">1420&#10;</span><span class="lnt">1421&#10;</span><span class="lnt">1422&#10;</span><span class="lnt">1423&#10;</span><span class="lnt">1424&#10;</span><span class="lnt">1425&#10;</span><span class="lnt">1426&#10;</span><span class="lnt">1427&#10;</span><span class="lnt">1428&#10;</span><span class="lnt">1429&#10;</span><span class="lnt">1430&#10;</span><span class="lnt">1431&#10;</span><span class="lnt">1432&#10;</span><span class="lnt">1433&#10;</span><span class="lnt">1434&#10;</span><span class="lnt">1435&#10;</span><span class="lnt">1436&#10;</span><span class="lnt">1437&#10;</span><span class="lnt">1438&#10;</span><span class="lnt">1439&#10;</span><span class="lnt">1440&#10;</span><span class="lnt">1441&#10;</span><span class="lnt">1442&#10;</span><span class="lnt">1443&#10;</span><span class="lnt">1444&#10;</span><span class="lnt">1445&#10;</span><span class="lnt">1446&#10;</span><span class="lnt">1447&#10;</span><span class="lnt">1448&#10;</span><span class="lnt">1449&#10;</span><span class="lnt">1450&#10;</span><span class="lnt">1451&#10;</span><span class="lnt">1452&#10;</span><span class="lnt">1453&#10;</span><span class="lnt">1454&#10;</span><span class="lnt">1455&#10;</span><span class="lnt">1456&#10;</span><span class="lnt">1457&#10;</span><span class="lnt">1458&#10;</span><span class="lnt">1459&#10;</span><span class="lnt">1460&#10;</span><span class="lnt">1461&#10;</span><span class="lnt">1462&#10;</span><span class="lnt">1463&#10;</span><span class="lnt">1464&#10;</span><span class="lnt">1465&#10;</span><span class="lnt">1466&#10;</span><span class="lnt">1467&#10;</span><span class="lnt">1468&#10;</span><span class="lnt">1469&#10;</span><span class="lnt">1470&#10;</span><span class="lnt">1471&#10;</span><span class="lnt">1472&#10;</span><span class="lnt">1473&#10;</span><span class="lnt">1474&#10;</span><span class="lnt">1475&#10;</span><span class="lnt">1476&#10;</span><span class="lnt">1477&#10;</span><span class="lnt">1478&#10;</span><span class="lnt">1479&#10;</span><span class="lnt">1480&#10;</span><span class="lnt">1481&#10;</span><span class="lnt">1482&#10;</span><span class="lnt">1483&#10;</span><span class="lnt">1484&#10;</span><span class="lnt">1485&#10;</span><span class="lnt">1486&#10;</span><span class="lnt">1487&#10;</span><span class="lnt">1488&#10;</span><span class="lnt">1489&#10;</span><span class="lnt">1490&#10;</span><span class="lnt">1491&#10;</span><span class="lnt">1492&#10;</span><span class="lnt">1493&#10;</span><span class="lnt">1494&#10;</span><span class="lnt">1495&#10;</span><span class="lnt">1496&#10;</span><span class="lnt">1497&#10;</span><span class="lnt">1498&#10;</span><span class="lnt">1499&#10;</span><span class="lnt">1500&#10;</span><span class="lnt">1501&#10;</span><span class="lnt">1502&#10;</span><span class="lnt">1503&#10;</span><span class="lnt">1504&#10;</span><span class="lnt">1505&#10;</span><span class="lnt">1506&#10;</span><span class="lnt">1507&#10;</span><span class="lnt">1508&#10;</span><span class="lnt">1509&#10;</span><span class="lnt">1510&#10;</span><span class="lnt">1511&#10;</span><span class="lnt">1512&#10;</span><span class="lnt">1513&#10;</span><span class="lnt">1514&#10;</span><span class="lnt">1515&#10;</span><span class="lnt">1516&#10;</span><span class="lnt">1517&#10;</span><span class="lnt">1518&#10;</span><span class="lnt">1519&#10;</span><span class="lnt">1520&#10;</span><span class="lnt">1521&#10;</span><span class="lnt">1522&#10;</span><span class="lnt">1523&#10;</span><span class="lnt">1524&#10;</span><span class="lnt">1525&#10;</span><span class="lnt">1526&#10;</span><span class="lnt">1527&#10;</span><span class="lnt">1528&#10;</span><span class="lnt">1529&#10;</span><span class="lnt">1530&#10;</span><span class="lnt">1531&#10;</span><span class="lnt">1532&#10;</span><span class="lnt">1533&#10;</span><span class="lnt">1534&#10;</span><span class="lnt">1535&#10;</span><span class="lnt">1536&#10;</span><span class="lnt">1537&#10;</span><span class="lnt">1538&#10;</span><span class="lnt">1539&#10;</span><span class="lnt">1540&#10;</span><span class="lnt">1541&#10;</span><span class="lnt">1542&#10;</span><span class="lnt">1543&#10;</span><span class="lnt">1544&#10;</span><span class="lnt">1545&#10;</span><span class="lnt">1546&#10;</span><span class="lnt">1547&#10;</span><span class="lnt">1548&#10;</span><span class="lnt">1549&#10;</span><span class="lnt">1550&#10;</span><span class="lnt">1551&#10;</span><span class="lnt">1552&#10;</span><span class="lnt">1553&#10;</span><span class="lnt">1554&#10;</span><span class="lnt">1555&#10;</span><span class="lnt">1556&#10;</span><span class="lnt">1557&#10;</span><span class="lnt">1558&#10;</span><span class="lnt">1559&#10;</span><span class="lnt">1560&#10;</span><span class="lnt">1561&#10;</span><span class="lnt">1562&#10;</span><span class="lnt">1563&#10;</span><span class="lnt">1564&#10;</span><span class="lnt">1565&#10;</span><span class="lnt">1566&#10;</span><span class="lnt">1567&#10;</span><span class="lnt">1568&#10;</span><span class="lnt">1569&#10;</span><span class="lnt">1570&#10;</span><span class="lnt">1571&#10;</span><span class="lnt">1572&#10;</span><span class="lnt">1573&#10;</span><span class="lnt">1574&#10;</span><span class="lnt">1575&#10;</span><span class="lnt">1576&#10;</span><span class="lnt">1577&#10;</span><span class="lnt">1578&#10;</span><span class="lnt">1579&#10;</span><span class="lnt">1580&#10;</span><span class="lnt">1581&#10;</span><span class="lnt">1582&#10;</span><span class="lnt">1583&#10;</span><span class="lnt">1584&#10;</span><span class="lnt">1585&#10;</span><span class="lnt">1586&#10;</span><span class="lnt">1587&#10;</span><span class="lnt">1588&#10;</span><span class="lnt">1589&#10;</span><span class="lnt">1590&#10;</span><span class="lnt">1591&#10;</span><span class="lnt">1592&#10;</span><span class="lnt">1593&#10;</span><span class="lnt">1594&#10;</span><span class="lnt">1595&#10;</span><span class="lnt">1596&#10;</span><span class="lnt">1597&#10;</span><span class="lnt">1598&#10;</span><span class="lnt">1599&#10;</span><span class="lnt">1600&#10;</span><span class="lnt">1601&#10;</span><span class="lnt">1602&#10;</span><span class="lnt">1603&#10;</span><span class="lnt">1604&#10;</span><span class="lnt">1605&#10;</span><span class="lnt">1606&#10;</span><span class="lnt">1607&#10;</span><span class="lnt">1608&#10;</span><span class="lnt">1609&#10;</span><span class="lnt">1610&#10;</span><span class="lnt">1611&#10;</span><span class="lnt">1612&#10;</span><span class="lnt">1613&#10;</span><span class="lnt">1614&#10;</span><span class="lnt">1615&#10;</span><span class="lnt">1616&#10;</span><span class="lnt">1617&#10;</span><span class="lnt">1618&#10;</span><span class="lnt">1619&#10;</span><span class="lnt">1620&#10;</span><span class="lnt">1621&#10;</span><span class="lnt">1622&#10;</span><span class="lnt">1623&#10;</span><span class="lnt">1624&#10;</span><span class="lnt">1625&#10;</span><span class="lnt">1626&#10;</span><span class="lnt">1627&#10;</span><span class="lnt">1628&#10;</span><span class="lnt">1629&#10;</span><span class="lnt">1630&#10;</span><span class="lnt">1631&#10;</span><span class="lnt">1632&#10;</span><span class="lnt">1633&#10;</span><span class="lnt">1634&#10;</span><span class="lnt">1635&#10;</span><span class="lnt">1636&#10;</span><span class="lnt">1637&#10;</span><span class="lnt">1638&#10;</span><span class="lnt">1639&#10;</span><span class="lnt">1640&#10;</span><span class="lnt">1641&#10;</span><span class="lnt">1642&#10;</span><span class="lnt">1643&#10;</span><span class="lnt">1644&#10;</span><span class="lnt">1645&#10;</span><span class="lnt">1646&#10;</span><span class="lnt">1647&#10;</span><span class="lnt">1648&#10;</span><span class="lnt">1649&#10;</span><span class="lnt">1650&#10;</span><span class="lnt">1651&#10;</span><span class="lnt">1652&#10;</span><span class="lnt">1653&#10;</span><span class="lnt">1654&#10;</span><span class="lnt">1655&#10;</span><span class="lnt">1656&#10;</span><span class="lnt">1657&#10;</span><span class="lnt">1658&#10;</span><span class="lnt">1659&#10;</span><span class="lnt">1660&#10;</span><span class="lnt">1661&#10;</span><span class="lnt">1662&#10;</span><span class="lnt">1663&#10;</span><span class="lnt">1664&#10;</span><span class="lnt">1665&#10;</span><span class="lnt">1666&#10;</span><span class="lnt">1667&#10;</span><span class="lnt">1668&#10;</span><span class="lnt">1669&#10;</span><span class="lnt">1670&#10;</span><span class="lnt">1671&#10;</span><span class="lnt">1672&#10;</span><span class="lnt">1673&#10;</span><span class="lnt">1674&#10;</span><span class="lnt">1675&#10;</span><span class="lnt">1676&#10;</span><span class="lnt">1677&#10;</span><span class="lnt">1678&#10;</span><span class="lnt">1679&#10;</span><span class="lnt">1680&#10;</span><span class="lnt">1681&#10;</span><span class="lnt">1682&#10;</span><span class="lnt">1683&#10;</span><span class="lnt">1684&#10;</span><span class="lnt">1685&#10;</span><span class="lnt">1686&#10;</span><span class="lnt">1687&#10;</span><span class="lnt">1688&#10;</span><span class="lnt">1689&#10;</span><span class="lnt">1690&#10;</span><span class="lnt">1691&#10;</span><span class="lnt">1692&#10;</span><span class="lnt">1693&#10;</span><span class="lnt">1694&#10;</span><span class="lnt">1695&#10;</span><span class="lnt">1696&#10;</span><span class="lnt">1697&#10;</span><span class="lnt">1698&#10;</span><span class="lnt">1699&#10;</span><span class="lnt">1700&#10;</span><span class="lnt">1701&#10;</span><span class="lnt">1702&#10;</span><span class="lnt">1703&#10;</span><span class="lnt">1704&#10;</span><span class="lnt">1705&#10;</span><span class="lnt">1706&#10;</span><span class="lnt">1707&#10;</span><span class="lnt">1708&#10;</span><span class="lnt">1709&#10;</span><span class="lnt">1710&#10;</span><span class="lnt">1711&#10;</span><span class="lnt">1712&#10;</span><span class="lnt">1713&#10;</span><span class="lnt">1714&#10;</span><span class="lnt">1715&#10;</span><span class="lnt">1716&#10;</span><span class="lnt">1717&#10;</span><span class="lnt">1718&#10;</span><span class="lnt">1719&#10;</span><span class="lnt">1720&#10;</span><span class="lnt">1721&#10;</span><span class="lnt">1722&#10;</span><span class="lnt">1723&#10;</span><span class="lnt">1724&#10;</span><span class="lnt">1725&#10;</span><span class="lnt">1726&#10;</span><span class="lnt">1727&#10;</span><span class="lnt">1728&#10;</span><span class="lnt">1729&#10;</span><span class="lnt">1730&#10;</span><span class="lnt">1731&#10;</span><span class="lnt">1732&#10;</span><span class="lnt">1733&#10;</span><span class="lnt">1734&#10;</span><span class="lnt">1735&#10;</span><span class="lnt">1736&#10;</span><span class="lnt">1737&#10;</span><span class="lnt">1738&#10;</span><span class="lnt">1739&#10;</span><span class="lnt">1740&#10;</span><span class="lnt">1741&#10;</span><span class="lnt">1742&#10;</span><span class="lnt">1743&#10;</span><span class="lnt">1744&#10;</span><span class="lnt">1745&#10;</span><span class="lnt">1746&#10;</span><span class="lnt">1747&#10;</span><span class="lnt">1748&#10;</span><span class="lnt">1749&#10;</span><span class="lnt">1750&#10;</span><span class="lnt">1751&#10;</span><span class="lnt">1752&#10;</span><span class="lnt">1753&#10;</span><span class="lnt">1754&#10;</span><span class="lnt">1755&#10;</span><span class="lnt">1756&#10;</span><span class="lnt">1757&#10;</span><span class="lnt">1758&#10;</span><span class="lnt">1759&#10;</span><span class="lnt">1760&#10;</span><span class="lnt">1761&#10;</span><span class="lnt">1762&#10;</span><span class="lnt">1763&#10;</span><span class="lnt">1764&#10;</span><span class="lnt">1765&#10;</span><span class="lnt">1766&#10;</span><span class="lnt">1767&#10;</span><span class="lnt">1768&#10;</span><span class="lnt">1769&#10;</span><span class="lnt">1770&#10;</span><span class="lnt">1771&#10;</span><span class="lnt">1772&#10;</span><span class="lnt">1773&#10;</span><span class="lnt">1774&#10;</span><span class="lnt">1775&#10;</span><span class="lnt">1776&#10;</span><span class="lnt">1777&#10;</span><span class="lnt">1778&#10;</span><span class="lnt">1779&#10;</span><span class="lnt">1780&#10;</span><span class="lnt">1781&#10;</span><span class="lnt">1782&#10;</span><span class="lnt">1783&#10;</span><span class="lnt">1784&#10;</span><span class="lnt">1785&#10;</span><span class="lnt">1786&#10;</span><span class="lnt">1787&#10;</span><span class="lnt">1788&#10;</span><span class="lnt">1789&#10;</span><span class="lnt">1790&#10;</span><span class="lnt">1791&#10;</span><span class="lnt">1792&#10;</span><span class="lnt">1793&#10;</span><span class="lnt">1794&#10;</span><span class="lnt">1795&#10;</span><span class="lnt">1796&#10;</span><span class="lnt">1797&#10;</span><span class="lnt">1798&#10;</span><span class="lnt">1799&#10;</span><span class="lnt">1800&#10;</span><span class="lnt">1801&#10;</span><span class="lnt">1802&#10;</span><span class="lnt">1803&#10;</span><span class="lnt">1804&#10;</span><span class="lnt">1805&#10;</span><span class="lnt">1806&#10;</span><span class="lnt">1807&#10;</span><span class="lnt">1808&#10;</span><span class="lnt">1809&#10;</span><span class="lnt">1810&#10;</span><span class="lnt">1811&#10;</span><span class="lnt">1812&#10;</span><span class="lnt">1813&#10;</span><span class="lnt">1814&#10;</span><span class="lnt">1815&#10;</span><span class="lnt">1816&#10;</span><span class="lnt">1817&#10;</span><span class="lnt">1818&#10;</span><span class="lnt">1819&#10;</span><span class="lnt">1820&#10;</span><span class="lnt">1821&#10;</span><span class="lnt">1822&#10;</span><span class="lnt">1823&#10;</span><span class="lnt">1824&#10;</span><span class="lnt">1825&#10;</span><span class="lnt">1826&#10;</span><span class="lnt">1827&#10;</span><span class="lnt">1828&#10;</span><span class="lnt">1829&#10;</span><span class="lnt">1830&#10;</span><span class="lnt">1831&#10;</span><span class="lnt">1832&#10;</span><span class="lnt">1833&#10;</span><span class="lnt">1834&#10;</span><span class="lnt">1835&#10;</span><span class="lnt">1836&#10;</span><span class="lnt">1837&#10;</span><span class="lnt">1838&#10;</span><span class="lnt">1839&#10;</span><span class="lnt">1840&#10;</span><span class="lnt">1841&#10;</span><span class="lnt">1842&#10;</span><span class="lnt">1843&#10;</span><span class="lnt">1844&#10;</span><span class="lnt">1845&#10;</span><span class="lnt">1846&#10;</span><span class="lnt">1847&#10;</span><span class="lnt">1848&#10;</span><span class="lnt">1849&#10;</span><span class="lnt">1850&#10;</span><span class="lnt">1851&#10;</span><span class="lnt">1852&#10;</span><span class="lnt">1853&#10;</span><span class="lnt">1854&#10;</span><span class="lnt">1855&#10;</span><span class="lnt">1856&#10;</span><span class="lnt">1857&#10;</span><span class="lnt">1858&#10;</span><span class="lnt">1859&#10;</span><span class="lnt">1860&#10;</span><span class="lnt">1861&#10;</span><span class="lnt">1862&#10;</span><span class="lnt">1863&#10;</span><span class="lnt">1864&#10;</span><span class="lnt">1865&#10;</span><span class="lnt">1866&#10;</span><span class="lnt">1867&#10;</span><span class="lnt">1868&#10;</span><span class="lnt">1869&#10;</span><span class="lnt">1870&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/env bash&#10;</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nb">set</span> -e&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Arch Linux Install Script (alis) installs unattended, automated</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># and customized Arch Linux system.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Copyright (C) 2021 picodotdev</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># This program is free software: you can redistribute it and/or modify</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># it under the terms of the GNU General Public License as published by</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># the Free Software Foundation, either version 3 of the License, or</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># (at your option) any later version.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># This program is distributed in the hope that it will be useful,</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># GNU General Public License for more details.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># You should have received a copy of the GNU General Public License</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># This script is hosted at https://github.com/picodotdev/alis. For new features,</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># improvements and bugs fill an issue in GitHub or make a pull request.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Pull Request are welcome!</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># If you test it in real hardware please send me an email to pico.dev@gmail.com with</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># the machine description and tell me if somethig goes wrong or all works fine.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Please, don&#39;t ask for support for this script in Arch Linux forums, first read</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># the Arch Linux wiki [1], the Installation Guide [2] and the General</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Recomendations [3], later compare the commands with those of this script.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># [1] https://wiki.archlinux.org</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># [2] https://wiki.archlinux.org/index.php/Installation_guide</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># [3] https://wiki.archlinux.org/index.php/General_recommendations</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Usage:</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># # loadkeys es</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># # iwctl --passphrase &#34;[WIFI_KEY]&#34; station [WIFI_INTERFACE] connect &#34;[WIFI_ESSID]&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  # (Optional) Connect to WIFI network. _ip link show_ to know WIFI_INTERFACE.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># # curl https://raw.githubusercontent.com/picodotdev/alis/master/download.sh | bash, curl https://raw.githubusercontent.com/picodotdev/alis/master/download.sh | bash -s -- -u [github user], or with URL shortener curl -sL https://bit.ly/2F3CATp | bash</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># # vim alis.conf</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># # ./alis.sh</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># global variables (no configuration, don&#39;t edit)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ASCIINEMA</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">BIOS_TYPE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_BOOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_ROOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_LVM</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LUKS_DEVICE_NAME</span><span class="o">=</span><span class="s2">&#34;cryptroot&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LVM_VOLUME_GROUP</span><span class="o">=</span><span class="s2">&#34;vg&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LVM_VOLUME_LOGICAL</span><span class="o">=</span><span class="s2">&#34;root&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">SWAPFILE</span><span class="o">=</span><span class="s2">&#34;/swapfile&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">BOOT_DIRECTORY</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ESP_DIRECTORY</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#PARTITION_BOOT_NUMBER=0</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">UUID_BOOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">UUID_ROOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTUUID_BOOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTUUID_ROOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_SATA</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_NVME</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_MMC</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">CPU_VENDOR</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">VIRTUALBOX</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">CMDLINE_LINUX_ROOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="nv">CONF_FILE</span><span class="o">=</span><span class="s2">&#34;alis.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">GLOBALS_FILE</span><span class="o">=</span><span class="s2">&#34;alis-globals.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LOG_FILE</span><span class="o">=</span><span class="s2">&#34;alis.log&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ASCIINEMA_FILE</span><span class="o">=</span><span class="s2">&#34;alis.asciinema&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="nv">RED</span><span class="o">=</span><span class="s1">&#39;\033[0;31m&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">GREEN</span><span class="o">=</span><span class="s1">&#39;\033[0;32m&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LIGHT_BLUE</span><span class="o">=</span><span class="s1">&#39;\033[1;34m&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">NC</span><span class="o">=</span><span class="s1">&#39;\033[0m&#39;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> configuration_install<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">source</span> <span class="s2">&#34;</span><span class="nv">$CONF_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> sanitize_variables<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$DEVICE</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_MODE</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_CUSTOM_PARTED_UEFI</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOM_PARTED_UEFI</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_CUSTOM_PARTED_BIOS</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOM_PARTED_BIOS</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_CUSTOMMANUAL_BOOT</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOMMANUAL_BOOT</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_CUSTOMMANUAL_ROOT</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOMMANUAL_ROOT</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">FILE_SYSTEM_TYPE</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SWAP_SIZE</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$SWAP_SIZE</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">KERNELS</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$KERNELS</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">KERNELS_COMPRESSION</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SYSTEMD_HOMED_STORAGE</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">BOOTLOADER</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$BOOTLOADER</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CUSTOM_SHELL</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$CUSTOM_SHELL</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DESKTOP_ENVIRONMENT</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$DESKTOP_ENVIRONMENT</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DISPLAY_DRIVER</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DISPLAY_DRIVER_HARDWARE_ACCELERATION_INTEL</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER_HARDWARE_ACCELERATION_INTEL</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SYSTEMD_UNITS</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$SYSTEMD_UNITS</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> sanitize_variable<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VARIABLE</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VARIABLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$VARIABLE</span> <span class="p">|</span> sed <span class="s2">&#34;s/![^ ]*//g&#34;</span><span class="k">)</span> <span class="c1"># remove disabled</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VARIABLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$VARIABLE</span> <span class="p">|</span> sed <span class="s2">&#34;s/ {2,}/ /g&#34;</span><span class="k">)</span> <span class="c1"># remove unnecessary white spaces</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VARIABLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$VARIABLE</span> <span class="p">|</span> sed <span class="s1">&#39;s/^[[:space:]]*//&#39;</span><span class="k">)</span> <span class="c1"># trim leading</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VARIABLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$VARIABLE</span> <span class="p">|</span> sed <span class="s1">&#39;s/[[:space:]]*$//&#39;</span><span class="k">)</span> <span class="c1"># trim trailing</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$VARIABLE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;KEYS&#34;</span> <span class="s2">&#34;</span><span class="nv">$KEYS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;LOG&#34;</span> <span class="s2">&#34;</span><span class="nv">$LOG</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;DEVICE&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;DEVICE_TRIM&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_TRIM</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;LVM&#34;</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_equals <span class="s2">&#34;LUKS_PASSWORD&#34;</span> <span class="s2">&#34;LUKS_PASSWORD_RETYPE&#34;</span> <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD_RETYPE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;FILE_SYSTEM_TYPE&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="s2">&#34;ext4 btrfs xfs f2fs reiserfs&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;PARTITION_MODE&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="s2">&#34;auto custom manual&#34;</span> <span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;custom&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;PARTITION_CUSTOM_PARTED_UEFI&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOM_PARTED_UEFI</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;PARTITION_CUSTOM_PARTED_BIOS&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOM_PARTED_BIOS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;custom&#34;</span> -o <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;manual&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;PARTITION_CUSTOMMANUAL_BOOT&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOMMANUAL_BOOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;PARTITION_CUSTOMMANUAL_ROOT&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOMMANUAL_ROOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;PARTITION_MODE&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="s2">&#34;auto&#34;</span> <span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_equals <span class="s2">&#34;WIFI_KEY&#34;</span> <span class="s2">&#34;WIFI_KEY_RETYPE&#34;</span> <span class="s2">&#34;</span><span class="nv">$WIFI_KEY</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$WIFI_KEY_RETYPE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;PING_HOSTNAME&#34;</span> <span class="s2">&#34;</span><span class="nv">$PING_HOSTNAME</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;PACMAN_MIRROR&#34;</span> <span class="s2">&#34;</span><span class="nv">$PACMAN_MIRROR</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;KERNELS&#34;</span> <span class="s2">&#34;</span><span class="nv">$KERNELS</span><span class="s2">&#34;</span> <span class="s2">&#34;linux-lts linux-lts-headers linux-hardened linux-hardened-headers linux-zen linux-zen-headers&#34;</span> <span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;KERNELS_COMPRESSION&#34;</span> <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> <span class="s2">&#34;gzip bzip2 lzma xz lzop lz4 zstd&#34;</span> <span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;DISPLAY_DRIVER&#34;</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> <span class="s2">&#34;intel amdgpu ati nvidia nvidia-lts nvidia-dkms nvidia-390xx nvidia-390xx-lts nvidia-390xx-dkms nouveau&#34;</span> <span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;KMS&#34;</span> <span class="s2">&#34;</span><span class="nv">$KMS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;FASTBOOT&#34;</span> <span class="s2">&#34;</span><span class="nv">$FASTBOOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;FRAMEBUFFER_COMPRESSION&#34;</span> <span class="s2">&#34;</span><span class="nv">$FRAMEBUFFER_COMPRESSION</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;DISPLAY_DRIVER_DDX&#34;</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER_DDX</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;DISPLAY_DRIVER_HARDWARE_ACCELERATION&#34;</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER_HARDWARE_ACCELERATION</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;DISPLAY_DRIVER_HARDWARE_ACCELERATION_INTEL&#34;</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER_HARDWARE_ACCELERATION_INTEL</span><span class="s2">&#34;</span> <span class="s2">&#34;intel-media-driver libva-intel-driver&#34;</span> <span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;TIMEZONE&#34;</span> <span class="s2">&#34;</span><span class="nv">$TIMEZONE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;REFLECTOR&#34;</span> <span class="s2">&#34;</span><span class="nv">$REFLECTOR</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;PACMAN_MIRROR&#34;</span> <span class="s2">&#34;</span><span class="nv">$PACMAN_MIRROR</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;LOCALES&#34;</span> <span class="s2">&#34;</span><span class="nv">$LOCALES</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;LOCALE_CONF&#34;</span> <span class="s2">&#34;</span><span class="nv">$LOCALE_CONF</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;LANG&#34;</span> <span class="s2">&#34;</span><span class="nv">$LANG</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;KEYMAP&#34;</span> <span class="s2">&#34;</span><span class="nv">$KEYMAP</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;HOSTNAME&#34;</span> <span class="s2">&#34;</span><span class="nv">$HOSTNAME</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;USER_NAME&#34;</span> <span class="s2">&#34;</span><span class="nv">$USER_NAME</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;USER_PASSWORD&#34;</span> <span class="s2">&#34;</span><span class="nv">$USER_PASSWORD</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_equals <span class="s2">&#34;ROOT_PASSWORD&#34;</span> <span class="s2">&#34;ROOT_PASSWORD_RETYPE&#34;</span> <span class="s2">&#34;</span><span class="nv">$ROOT_PASSWORD</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$ROOT_PASSWORD_RETYPE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_equals <span class="s2">&#34;USER_PASSWORD&#34;</span> <span class="s2">&#34;USER_PASSWORD_RETYPE&#34;</span> <span class="s2">&#34;</span><span class="nv">$USER_PASSWORD</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$USER_PASSWORD_RETYPE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;SYSTEMD_HOMED&#34;</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;SYSTEMD_HOMED_STORAGE&#34;</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span> <span class="s2">&#34;directory fscrypt luks cifs subvolume&#34;</span> <span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;fscrypt&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;FILE_SYSTEM_TYPE&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="s2">&#34;ext4 f2fs&#34;</span> <span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;cifs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;SYSTEMD_HOMED_CIFS_DOMAIN&#34;</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_CIFS_DOMAIN</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;SYSTEMD_HOMED_CIFS_SERVICE&#34;</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_CIFS_SERVICE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;HOOKS&#34;</span> <span class="s2">&#34;</span><span class="nv">$HOOKS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;BOOTLOADER&#34;</span> <span class="s2">&#34;</span><span class="nv">$BOOTLOADER</span><span class="s2">&#34;</span> <span class="s2">&#34;grub refind systemd&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;CUSTOM_SHELL&#34;</span> <span class="s2">&#34;</span><span class="nv">$CUSTOM_SHELL</span><span class="s2">&#34;</span> <span class="s2">&#34;bash zsh dash fish&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;DESKTOP_ENVIRONMENT&#34;</span> <span class="s2">&#34;</span><span class="nv">$DESKTOP_ENVIRONMENT</span><span class="s2">&#34;</span> <span class="s2">&#34;gnome kde xfce mate cinnamon lxde i3-wm i3-gaps&#34;</span> <span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;PACKAGES_MULTILIB&#34;</span> <span class="s2">&#34;</span><span class="nv">$PACKAGES_MULTILIB</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;PACKAGES_INSTALL&#34;</span> <span class="s2">&#34;</span><span class="nv">$PACKAGES_INSTALL</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;VAGRANT&#34;</span> <span class="s2">&#34;</span><span class="nv">$VAGRANT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;REBOOT&#34;</span> <span class="s2">&#34;</span><span class="nv">$REBOOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables_value<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&#34;</span><span class="nv">$VALUE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2"> environment variable must have a value.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables_boolean<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$VALUE</span><span class="s2">&#34;</span> <span class="s2">&#34;true false&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables_list<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUES</span><span class="o">=</span><span class="nv">$3</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">REQUIRED</span><span class="o">=</span><span class="nv">$4</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$REQUIRED</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span> -o <span class="s2">&#34;</span><span class="nv">$REQUIRED</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$VALUE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VALUE</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;&#34;</span> -a -z <span class="s2">&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$VALUES</span><span class="s2">&#34;</span> <span class="p">|</span> grep -F -w <span class="s2">&#34;</span><span class="nv">$VALUE</span><span class="s2">&#34;</span><span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2"> environment variable value [</span><span class="nv">$VALUE</span><span class="s2">] must be in [</span><span class="nv">$VALUES</span><span class="s2">].&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables_equals<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME1</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME2</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE1</span><span class="o">=</span><span class="nv">$3</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE2</span><span class="o">=</span><span class="nv">$4</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VALUE1</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;</span><span class="nv">$VALUE2</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$NAME1</span><span class="s2"> and </span><span class="nv">$NAME2</span><span class="s2"> must be equal [</span><span class="nv">$VALUE1</span><span class="s2">, </span><span class="nv">$VALUE2</span><span class="s2">].&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables_size<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SIZE_EXPECT</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SIZE</span><span class="o">=</span><span class="nv">$3</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SIZE_EXPECT</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;</span><span class="nv">$SIZE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2"> array size [</span><span class="nv">$SIZE</span><span class="s2">] must be [</span><span class="nv">$SIZE_EXPECT</span><span class="s2">].&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> warning<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LIGHT_BLUE</span><span class="si">}</span><span class="s2">Welcome to Arch Linux Install Script</span><span class="si">${</span><span class="nv">NC</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="si">${</span><span class="nv">RED</span><span class="si">}</span><span class="s2">Warning&#34;</span><span class="s1">&#39;!&#39;</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">NC</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="si">${</span><span class="nv">RED</span><span class="si">}</span><span class="s2">This script deletes all partitions of the persistent</span><span class="si">${</span><span class="nv">NC</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="si">${</span><span class="nv">RED</span><span class="si">}</span><span class="s2">storage and continuing all your data in it will be lost.</span><span class="si">${</span><span class="nv">NC</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -p <span class="s2">&#34;Do you want to continue? [y/N] &#34;</span> yn&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="nv">$yn</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">[</span>Yy<span class="o">]</span>* <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">[</span>Nn<span class="o">]</span>* <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> init<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;init()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;init_log&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;loadkeys <span class="nv">$KEYS</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> init_log<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LOG</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exec</span> &gt; &gt;<span class="o">(</span>tee -a <span class="nv">$LOG_FILE</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exec</span> 2&gt; &gt;<span class="o">(</span>tee -a <span class="nv">$LOG_FILE</span> &gt;<span class="p">&amp;</span>2<span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">set</span> -o xtrace&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> facts<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;facts()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -d /sys/firmware/efi <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">BIOS_TYPE</span><span class="o">=</span><span class="s2">&#34;uefi&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">BIOS_TYPE</span><span class="o">=</span><span class="s2">&#34;bios&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -f <span class="s2">&#34;</span><span class="nv">$ASCIINEMA_FILE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ASCIINEMA</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ASCIINEMA</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_SATA</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_NVME</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_MMC</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$DEVICE</span> <span class="p">|</span> grep <span class="s2">&#34;^/dev/[a-z]d[a-z]&#34;</span><span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_SATA</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">elif</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$DEVICE</span> <span class="p">|</span> grep <span class="s2">&#34;^/dev/nvme&#34;</span><span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_NVME</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">elif</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$DEVICE</span> <span class="p">|</span> grep <span class="s2">&#34;^/dev/mmc&#34;</span><span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_MMC</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span>lscpu <span class="p">|</span> grep GenuineIntel<span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CPU_VENDOR</span><span class="o">=</span><span class="s2">&#34;intel&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">elif</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span>lscpu <span class="p">|</span> grep AuthenticAMD<span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CPU_VENDOR</span><span class="o">=</span><span class="s2">&#34;amd&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span>lspci <span class="p">|</span> grep -i virtualbox<span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VIRTUALBOX</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> checks<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;checks()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_facts&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_facts<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;bios&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;BOOTLOADER&#34;</span> <span class="s2">&#34;</span><span class="nv">$BOOTLOADER</span><span class="s2">&#34;</span> <span class="s2">&#34;grub&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> prepare<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;prepare()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;configure_reflector&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;configure_time&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;prepare_partition&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;ask_passwords&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;configure_network&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> configure_reflector<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$REFLECTOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;false&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;systemctl stop reflector.service&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> configure_time<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;timedatectl set-ntp <span class="nb">true</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> prepare_partition<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -d /mnt/boot <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;umount /mnt/boot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;umount /mnt&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -e <span class="s2">&#34;/dev/mapper/</span><span class="nv">$LVM_VOLUME_GROUP</span><span class="s2">-</span><span class="nv">$LVM_VOLUME_LOGICAL</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;umount <span class="s2">&#34;/dev/mapper/</span><span class="nv">$LVM_VOLUME_GROUP</span><span class="s2">-</span><span class="nv">$LVM_VOLUME_LOGICAL</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -e <span class="s2">&#34;/dev/mapper/</span><span class="nv">$LUKS_DEVICE_NAME</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cryptsetup close <span class="nv">$LUKS_DEVICE_NAME</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> ask_passwords<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;ask&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">while</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD_TYPED</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Type LUKS password: &#39;</span> LUKS_PASSWORD&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Retype LUKS password: &#39;</span> LUKS_PASSWORD_RETYPE&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD_RETYPE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;LUKS password don&#39;t match. Please, type again.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$WIFI_INTERFACE</span><span class="s2">&#34;</span> -a <span class="s2">&#34;</span><span class="nv">$WIFI_KEY</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;ask&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">while</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD_TYPED</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Type WIFI key: &#39;</span> WIFI_KEY&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Retype WIFI key: &#39;</span> WIFI_KEY_RETYPE&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$WIFI_KEY</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;</span><span class="nv">$WIFI_KEY_RETYPE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;WIFI key don&#39;t match. Please, type again.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$ROOT_PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;ask&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">while</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD_TYPED</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Type root password: &#39;</span> ROOT_PASSWORD&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Retype root password: &#39;</span> ROOT_PASSWORD_RETYPE&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$ROOT_PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;</span><span class="nv">$ROOT_PASSWORD_RETYPE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Root password don&#39;t match. Please, type again.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$USER_PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;ask&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">while</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD_TYPED</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Type user password: &#39;</span> USER_PASSWORD&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Retype user password: &#39;</span> USER_PASSWORD_RETYPE&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$USER_PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;</span><span class="nv">$USER_PASSWORD_RETYPE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;User password don&#39;t match. Please, type again.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> I in <span class="si">${</span><span class="p">!ADDITIONAL_USERS[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE</span><span class="o">=</span><span class="si">${</span><span class="nv">ADDITIONAL_USERS</span><span class="p">[</span><span class="si">${</span><span class="nv">I</span><span class="si">}</span><span class="p">]</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">IFS</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nv">S</span><span class="o">=(</span><span class="nv">$VALUE</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">USER</span><span class="o">=</span><span class="si">${</span><span class="nv">S</span><span class="p">[0]</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD</span><span class="o">=</span><span class="si">${</span><span class="nv">S</span><span class="p">[1]</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_RETYPE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;ask&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">while</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD_TYPED</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s2">&#34;Type user (</span><span class="nv">$USER</span><span class="s2">) password: &#34;</span> PASSWORD&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s2">&#34;Retype user (</span><span class="nv">$USER</span><span class="s2">) password: &#34;</span> PASSWORD_RETYPE&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD_RETYPE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ADDITIONAL_USERS<span class="o">[</span><span class="si">${</span><span class="nv">I</span><span class="si">}</span><span class="o">]=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span><span class="s2">=</span><span class="si">${</span><span class="nv">PASSWORD</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;User (</span><span class="nv">$USER</span><span class="s2">) password don&#39;t match. Please, type again.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> configure_network<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$WIFI_INTERFACE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iwctl --passphrase <span class="s2">&#34;</span><span class="nv">$WIFI_KEY</span><span class="s2">&#34;</span> station <span class="nv">$WIFI_INTERFACE</span> connect <span class="s2">&#34;</span><span class="nv">$WIFI_ESSID</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep <span class="m">10</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># only one ping -c 1, ping gets stuck if -c 5</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;ping -c <span class="m">1</span> -i <span class="m">2</span> -W <span class="m">5</span> -w <span class="m">30</span> <span class="nv">$PING_HOSTNAME</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Network ping check failed. Cannot continue.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> partition<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;partition()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;partprobe <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># setup</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;auto&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_PARTED_FILE_SYSTEM_TYPE</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_PARTED_FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;f2fs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_PARTED_FILE_SYSTEM_TYPE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_PARTED_UEFI</span><span class="o">=</span><span class="s2">&#34;mklabel gpt mkpart ESP fat32 1MiB 512MiB mkpart root </span><span class="nv">$PARTITION_PARTED_FILE_SYSTEM_TYPE</span><span class="s2"> 512MiB 100% set 1 esp on&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_PARTED_BIOS</span><span class="o">=</span><span class="s2">&#34;mklabel msdos mkpart primary ext4 4MiB 512MiB mkpart primary </span><span class="nv">$PARTITION_PARTED_FILE_SYSTEM_TYPE</span><span class="s2"> 512MiB 100% set 1 boot on&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;uefi&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_SATA</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_NVME</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_MMC</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;bios&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_SATA</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_NVME</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_MMC</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">elif</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;custom&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_PARTED_UEFI</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOM_PARTED_UEFI</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_PARTED_BIOS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOM_PARTED_BIOS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;custom&#34;</span> -o <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;manual&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOMMANUAL_BOOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOMMANUAL_ROOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">PARTITION_ROOT</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_BOOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_ROOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">PARTITION_BOOT_NUMBER</span><span class="p">//</span><span class="se">\/</span><span class="nv">dev</span><span class="se">\/</span><span class="nv">sda</span><span class="p">/</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">PARTITION_BOOT_NUMBER</span><span class="p">//</span><span class="se">\/</span><span class="nv">dev</span><span class="se">\/</span><span class="nv">nvme0n1p</span><span class="p">/</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">PARTITION_BOOT_NUMBER</span><span class="p">//</span><span class="se">\/</span><span class="nv">dev</span><span class="se">\/</span><span class="nv">mmcblk0p</span><span class="p">/</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">PARTITION_ROOT_NUMBER</span><span class="p">//</span><span class="se">\/</span><span class="nv">dev</span><span class="se">\/</span><span class="nv">sda</span><span class="p">/</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">PARTITION_ROOT_NUMBER</span><span class="p">//</span><span class="se">\/</span><span class="nv">dev</span><span class="se">\/</span><span class="nv">nvme0n1p</span><span class="p">/</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">PARTITION_ROOT_NUMBER</span><span class="p">//</span><span class="se">\/</span><span class="nv">dev</span><span class="se">\/</span><span class="nv">mmcblk0p</span><span class="p">/</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># partition</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;auto&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sgdisk --zap-all <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wipefs -a -f <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;partprobe <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;auto&#34;</span> -o <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;custom&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;uefi&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parted -s <span class="nv">$DEVICE</span> <span class="nv">$PARTITION_PARTED_UEFI</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sgdisk -t<span class="o">=</span><span class="nv">$PARTITION_ROOT_NUMBER</span>:8309 <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">elif</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sgdisk -t<span class="o">=</span><span class="nv">$PARTITION_ROOT_NUMBER</span>:8e00 <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;bios&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parted -s <span class="nv">$DEVICE</span> <span class="nv">$PARTITION_PARTED_BIOS</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;partprobe <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># luks and lvm</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="p">|</span> cryptsetup --key-size<span class="o">=</span><span class="m">512</span> --key-file<span class="o">=</span>- luksFormat --type luks2 <span class="nv">$PARTITION_ROOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="p">|</span> cryptsetup --key-file<span class="o">=</span>- open <span class="nv">$PARTITION_ROOT</span> <span class="nv">$LUKS_DEVICE_NAME</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep <span class="m">5</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_LVM</span><span class="o">=</span><span class="s2">&#34;/dev/mapper/</span><span class="nv">$LUKS_DEVICE_NAME</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_LVM</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pvcreate <span class="nv">$DEVICE_LVM</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vgcreate <span class="nv">$LVM_VOLUME_GROUP</span> <span class="nv">$DEVICE_LVM</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lvcreate -l 100%FREE -n <span class="nv">$LVM_VOLUME_LOGICAL</span> <span class="nv">$LVM_VOLUME_GROUP</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;/dev/mapper/</span><span class="nv">$LUKS_DEVICE_NAME</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;/dev/mapper/</span><span class="nv">$LVM_VOLUME_GROUP</span><span class="s2">-</span><span class="nv">$LVM_VOLUME_LOGICAL</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># format</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;wipefs -a -f <span class="nv">$PARTITION_BOOT</span> <span class="o">||</span> <span class="nb">true</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;wipefs -a -f <span class="nv">$DEVICE_ROOT</span> <span class="o">||</span> <span class="nb">true</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;uefi&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkfs.fat -n ESP -F32 <span class="nv">$PARTITION_BOOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;bios&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkfs.ext4 -L boot <span class="nv">$PARTITION_BOOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;f2fs&#34;</span> -o <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;reiserfs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkfs.<span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> -l root <span class="nv">$DEVICE_ROOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkfs.<span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> -L root <span class="nv">$DEVICE_ROOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># options</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_OPTIONS_BOOT</span><span class="o">=</span><span class="s2">&#34;defaults&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_OPTIONS_ROOT</span><span class="o">=</span><span class="s2">&#34;defaults&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_TRIM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_OPTIONS_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS_BOOT</span><span class="s2">,noatime&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_OPTIONS_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS_ROOT</span><span class="s2">,noatime&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;f2fs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_OPTIONS_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS_ROOT</span><span class="s2">,nodiscard&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># mount</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;btrfs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span> /mnt&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;btrfs subvolume create /mnt/root&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;btrfs subvolume create /mnt/home&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;btrfs subvolume create /mnt/var&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;btrfs subvolume create /mnt/snapshots&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;umount /mnt&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;subvol=root,</span><span class="nv">$PARTITION_OPTIONS</span><span class="s2">,compress=zstd&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span> /mnt&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir /mnt/<span class="o">{</span>boot,home,var,snapshots<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS_BOOT</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_BOOT</span><span class="s2">&#34;</span> /mnt/boot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;subvol=home,</span><span class="nv">$PARTITION_OPTIONS_ROOT</span><span class="s2">,compress=zstd&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span> /mnt/home&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;subvol=var,</span><span class="nv">$PARTITION_OPTIONS_ROOT</span><span class="s2">,compress=zstd&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span> /mnt/var&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;subvol=snapshots,</span><span class="nv">$PARTITION_OPTIONS_ROOT</span><span class="s2">,compress=zstd&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span> /mnt/snapshots&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS_ROOT</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span> /mnt&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir /mnt/boot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS_BOOT</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_BOOT</span><span class="s2">&#34;</span> /mnt/boot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># swap</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SWAP_SIZE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;btrfs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;truncate -s <span class="m">0</span> /mnt<span class="nv">$SWAPFILE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chattr +C /mnt<span class="nv">$SWAPFILE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;btrfs property <span class="nb">set</span> /mnt<span class="nv">$SWAPFILE</span> compression none&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dd <span class="k">if</span><span class="o">=</span>/dev/zero <span class="nv">of</span><span class="o">=</span>/mnt<span class="nv">$SWAPFILE</span> <span class="nv">bs</span><span class="o">=</span>1M <span class="nv">count</span><span class="o">=</span><span class="nv">$SWAP_SIZE</span> <span class="nv">status</span><span class="o">=</span>progress&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chmod <span class="m">600</span> /mnt<span class="nv">$SWAPFILE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkswap /mnt<span class="nv">$SWAPFILE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># set variables</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">BOOT_DIRECTORY</span><span class="o">=</span>/boot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ESP_DIRECTORY</span><span class="o">=</span>/boot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">UUID_BOOT</span><span class="o">=</span><span class="k">$(</span>blkid -s UUID -o value <span class="nv">$PARTITION_BOOT</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">UUID_ROOT</span><span class="o">=</span><span class="k">$(</span>blkid -s UUID -o value <span class="nv">$PARTITION_ROOT</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTUUID_BOOT</span><span class="o">=</span><span class="k">$(</span>blkid -s PARTUUID -o value <span class="nv">$PARTITION_BOOT</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTUUID_ROOT</span><span class="o">=</span><span class="k">$(</span>blkid -s PARTUUID -o value <span class="nv">$PARTITION_ROOT</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> install<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;install()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$PACMAN_MIRROR</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Server = </span><span class="nv">$PACMAN_MIRROR</span><span class="s2">&#34;</span> &gt; /etc/pacman.d/mirrorlist&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$REFLECTOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">COUNTRIES</span><span class="o">=()</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> COUNTRY in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">REFLECTOR_COUNTRIES</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">COUNTRIES</span><span class="o">+=(</span>--country <span class="s2">&#34;</span><span class="si">${</span><span class="nv">COUNTRY</span><span class="si">}</span><span class="s2">&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman -Sy --noconfirm reflector&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reflector <span class="s2">&#34;</span><span class="si">${</span><span class="nv">COUNTRIES</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span> --latest <span class="m">25</span> --age <span class="m">24</span> --protocol https --completion-percent <span class="m">100</span> --sort rate --save /etc/pacman.d/mirrorlist&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s1">&#39;s/#Color/Color/&#39;</span> /etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s1">&#39;s/#ParallelDownloads/ParallelDownloads/&#39;</span> /etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacstrap /mnt base base-devel linux linux-firmware&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s1">&#39;s/#Color/Color/&#39;</span> /mnt/etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s1">&#39;s/#ParallelDownloads/ParallelDownloads/&#39;</span> /mnt/etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PACKAGES_MULTILIB</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span> &gt;&gt; /mnt/etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;[multilib]&#34;</span> &gt;&gt; /mnt/etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Include = /etc/pacman.d/mirrorlist&#34;</span> &gt;&gt; /mnt/etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span> &gt;&gt; /mnt/etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> configuration<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;configuration()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;genfstab -U /mnt &gt;&gt; /mnt/etc/fstab&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SWAP_SIZE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;# swap&#34;</span> &gt;&gt; /mnt/etc/fstab&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$SWAPFILE</span><span class="s2"> none swap defaults 0 0&#34;</span> &gt;&gt; /mnt/etc/fstab&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span> &gt;&gt; /mnt/etc/fstab&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_TRIM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;f2fs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s1">&#39;s/relatime/noatime,nodiscard/&#39;</span> /mnt/etc/fstab&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s1">&#39;s/relatime/noatime/&#39;</span> /mnt/etc/fstab&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> fstrim.timer&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt ln -s -f <span class="nv">$TIMEZONE</span> /etc/localtime&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt hwclock --systohc&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> LOCALE in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LOCALES</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/#</span><span class="nv">$LOCALE</span><span class="s2">/</span><span class="nv">$LOCALE</span><span class="s2">/&#34;</span> /etc/locale.gen&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/#</span><span class="nv">$LOCALE</span><span class="s2">/</span><span class="nv">$LOCALE</span><span class="s2">/&#34;</span> /mnt/etc/locale.gen&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> VARIABLE in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LOCALE_CONF</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">#localectl set-locale &#34;$VARIABLE&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="nv">$VARIABLE</span><span class="s2">&#34;</span> &gt;&gt; /mnt/etc/locale.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;locale-gen&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt locale-gen&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="nv">$KEYMAP</span><span class="s2">\n</span><span class="nv">$FONT</span><span class="s2">\n</span><span class="nv">$FONT_MAP</span><span class="s2">&#34;</span> &gt; /mnt/etc/vconsole.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="nv">$HOSTNAME</span> &gt; /mnt/etc/hostname&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$KEYLAYOUT</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$OPTIONS</span><span class="s2">&#34;</span><span class="s1">$&#39;\n&#39;</span><span class="s2">&#34;&nbsp;&nbsp;&nbsp;&nbsp;Option \&#34;XkbLayout\&#34; \&#34;</span><span class="nv">$KEYLAYOUT</span><span class="s2">\&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$KEYMODEL</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$OPTIONS</span><span class="s2">&#34;</span><span class="s1">$&#39;\n&#39;</span><span class="s2">&#34;&nbsp;&nbsp;&nbsp;&nbsp;Option \&#34;XkbModel\&#34; \&#34;</span><span class="nv">$KEYMODEL</span><span class="s2">\&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$KEYVARIANT</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$OPTIONS</span><span class="s2">&#34;</span><span class="s1">$&#39;\n&#39;</span><span class="s2">&#34;&nbsp;&nbsp;&nbsp;&nbsp;Option \&#34;XkbVariant\&#34; \&#34;</span><span class="nv">$KEYVARIANT</span><span class="s2">\&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$KEYOPTIONS</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$OPTIONS</span><span class="s2">&#34;</span><span class="s1">$&#39;\n&#39;</span><span class="s2">&#34;&nbsp;&nbsp;&nbsp;&nbsp;Option \&#34;XkbOptions\&#34; \&#34;</span><span class="nv">$KEYOPTIONS</span><span class="s2">\&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt mkdir -p <span class="s2">&#34;/etc/X11/xorg.conf.d/&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt; /mnt/etc/X11/xorg.conf.d/00-keyboard.conf&#10;</span></span></span><span class="line"><span class="cl"><span class="s"># Written by systemd-localed(8), read by systemd-localed and Xorg. It&#39;s&#10;</span></span></span><span class="line"><span class="cl"><span class="s"># probably wise not to edit this file manually. Use localectl(1) to&#10;</span></span></span><span class="line"><span class="cl"><span class="s"># instruct systemd-localed to update it.&#10;</span></span></span><span class="line"><span class="cl"><span class="s">Section &#34;InputClass&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;Identifier &#34;system-keyboard&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;MatchIsKeyboard &#34;on&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;$OPTIONS&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EndSection&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SWAP_SIZE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;vm.swappiness=10&#34;</span> &gt; /mnt/etc/sysctl.d/99-sysctl.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">printf</span> <span class="s2">&#34;</span><span class="nv">$ROOT_PASSWORD</span><span class="s2">\n</span><span class="nv">$ROOT_PASSWORD</span><span class="s2">&#34;</span> <span class="p">|</span> arch-chroot /mnt passwd&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> mkinitcpio_configuration<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;mkinitcpio_configuration()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KMS</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">MODULES</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;intel&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">MODULES</span><span class="o">=</span><span class="s2">&#34;i915&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia&#34;</span> <span class="p">|</span> <span class="s2">&#34;nvidia-lts&#34;</span>  <span class="p">|</span> <span class="s2">&#34;nvidia-dkms&#34;</span> <span class="p">|</span> <span class="s2">&#34;nvidia-390xx&#34;</span> <span class="p">|</span> <span class="s2">&#34;nvidia-390xx-lts&#34;</span> <span class="p">|</span> <span class="s2">&#34;nvidia-390xx-dkms&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">MODULES</span><span class="o">=</span><span class="s2">&#34;nvidia nvidia_modeset nvidia_uvm nvidia_drm&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;amdgpu&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">MODULES</span><span class="o">=</span><span class="s2">&#34;amdgpu&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;ati&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">MODULES</span><span class="o">=</span><span class="s2">&#34;radeon&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nouveau&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">MODULES</span><span class="o">=</span><span class="s2">&#34;nouveau&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s2">&#34;s/^MODULES=()/MODULES=(</span><span class="nv">$MODULES</span><span class="s2">)/&#34;</span> /etc/mkinitcpio.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;intel&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FASTBOOT</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$OPTIONS</span><span class="s2"> fastboot=1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FRAMEBUFFER_COMPRESSION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$OPTIONS</span><span class="s2"> enable_fbc=1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$OPTIONS</span><span class="s2">&#34;</span><span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options i915 </span><span class="nv">$OPTIONS</span><span class="s2">&#34;</span> &gt; /mnt/etc/modprobe.d/i915.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;lvm2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;btrfs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;btrfs-progs&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;f2fs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;f2fs-tools&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;reiserfs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;reiserfsprogs&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BOOTLOADER</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;systemd&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!systemd/systemd/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!sd-vconsole/sd-vconsole/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!sd-lvm2/sd-lvm2/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!sd-encrypt/sd-encrypt/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!udev/udev/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!usr/usr/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!keymap/keymap/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!consolefont/consolefont/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!lvm2/lvm2/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!encrypt/encrypt/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$HOOKS</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s2">&#34;s/^HOOKS=(.*)</span>$<span class="s2">/HOOKS=(</span><span class="nv">$HOOKS</span><span class="s2">)/&#34;</span> /etc/mkinitcpio.conf&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s1">&#39;s/^#COMPRESSION=&#34;&#39;</span><span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span><span class="s1">&#39;&#34;/COMPRESSION=&#34;&#39;</span><span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span><span class="s1">&#39;&#34;/&#39;</span> /etc/mkinitcpio.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;bzip2&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;bzip2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;lzma&#34;</span> -o <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;xz&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;xz&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;lzop&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;lzop&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;lz4&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;lz4&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;zstd&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;zstd&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> display_driver<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;display_driver()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DDX</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;intel&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-mesa&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;amdgpu&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-mesa&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;ati&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-mesa&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER</span><span class="o">=</span><span class="s2">&#34;nvidia&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-lts&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER</span><span class="o">=</span><span class="s2">&#34;nvidia-lts&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-dkms&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER</span><span class="o">=</span><span class="s2">&#34;nvidia-dkms&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER</span><span class="o">=</span><span class="s2">&#34;nvidia-390xx&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx-lts&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER</span><span class="o">=</span><span class="s2">&#34;nvidia-390xx-lts&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx-dkms&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER</span><span class="o">=</span><span class="s2">&#34;nvidia-390xx-dkms&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nouveau&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-mesa&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER_DDX</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;intel&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DDX</span><span class="o">=</span><span class="s2">&#34;xf86-video-intel&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;amdgpu&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DDX</span><span class="o">=</span><span class="s2">&#34;xf86-video-amdgpu&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;ati&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DDX</span><span class="o">=</span><span class="s2">&#34;xf86-video-ati&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nouveau&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DDX</span><span class="o">=</span><span class="s2">&#34;xf86-video-nouveau&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VULKAN</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;intel&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;vulkan-icd-loader vulkan-intel&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-vulkan-icd-loader lib32-vulkan-intel&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;amdgpu&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;vulkan-radeon&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-vulkan-radeon&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;ati&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;vulkan-radeon&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-vulkan-radeon&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-lts&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-dkms&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx-lts&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx-dkms&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nouveau&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER_HARDWARE_ACCELERATION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;intel&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER_HARDWARE_ACCELERATION_INTEL</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="nv">$DISPLAY_DRIVER_HARDWARE_ACCELERATION_INTEL</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;amdgpu&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;ati&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;mesa-vdpau&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-mesa-vdpau&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-lts&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-dkms&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx-lts&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx-dkms&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nouveau&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;mesa </span><span class="nv">$PACKAGES_DRIVER</span><span class="s2"> </span><span class="nv">$PACKAGES_DDX</span><span class="s2"> </span><span class="nv">$PACKAGES_VULKAN</span><span class="s2"> </span><span class="nv">$PACKAGES_HARDWARE_ACCELERATION</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PACKAGES_MULTILIB</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;</span><span class="nv">$PACKAGES_DRIVER_MULTILIB</span><span class="s2"> </span><span class="nv">$PACKAGES_VULKAN_MULTILIB</span><span class="s2"> </span><span class="nv">$PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> kernels<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;kernels()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;linux-headers&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$KERNELS</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;</span><span class="nv">$KERNELS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> mkinitcpio<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;mkinitcpio()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt mkinitcpio -P&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> network<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;network()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;networkmanager&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> NetworkManager.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> virtualbox<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;virtualbox()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&#34;</span><span class="nv">$KERNELS</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;virtualbox-guest-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;virtualbox-guest-utils virtualbox-guest-dkms&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> users<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;users()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;create_user <span class="s2">&#34;</span><span class="nv">$USER_NAME</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$USER_PASSWORD</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> U in <span class="si">${</span><span class="nv">ADDITIONAL_USERS</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">IFS</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nv">S</span><span class="o">=(</span><span class="si">${</span><span class="nv">U</span><span class="si">}</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">USER</span><span class="o">=</span><span class="si">${</span><span class="nv">S</span><span class="p">[0]</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD</span><span class="o">=</span><span class="si">${</span><span class="nv">S</span><span class="p">[1]</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;create_user <span class="s2">&#34;</span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">PASSWORD</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">	arch-chroot /mnt sed -i <span class="s1">&#39;s/# %wheel ALL=(ALL) ALL/%wheel ALL=(ALL) ALL/&#39;</span> /etc/sudoers&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;xdg-user-dirs&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt; &#34;/mnt/etc/pam.d/nss-auth&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">#%PAM-1.0&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">auth&nbsp;&nbsp;&nbsp;&nbsp; sufficient pam_unix.so try_first_pass nullok&#10;</span></span></span><span class="line"><span class="cl"><span class="s">auth&nbsp;&nbsp;&nbsp;&nbsp; sufficient pam_systemd_home.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">auth&nbsp;&nbsp;&nbsp;&nbsp; required   pam_deny.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">account  sufficient pam_unix.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">account  sufficient pam_systemd_home.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">account  required   pam_deny.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">password sufficient pam_unix.so try_first_pass nullok sha512 shadow&#10;</span></span></span><span class="line"><span class="cl"><span class="s">password sufficient pam_systemd_home.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">password required   pam_deny.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt; &#34;/mnt/etc/pam.d/system-auth&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">#%PAM-1.0&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">auth&nbsp;&nbsp;&nbsp;&nbsp;  substack   nss-auth&#10;</span></span></span><span class="line"><span class="cl"><span class="s">auth&nbsp;&nbsp;&nbsp;&nbsp;  optional   pam_permit.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">auth&nbsp;&nbsp;&nbsp;&nbsp;  required   pam_env.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">account   substack   nss-auth&#10;</span></span></span><span class="line"><span class="cl"><span class="s">account   optional   pam_permit.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">account   required   pam_time.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">password  substack   nss-auth&#10;</span></span></span><span class="line"><span class="cl"><span class="s">password  optional   pam_permit.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">session   required  pam_limits.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">session   optional  pam_systemd_home.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">session   required  pam_unix.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">session   optional  pam_permit.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> create_user<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">USER</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> systemd-homed.service&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;create_user_homectl <span class="nv">$USER</span> <span class="nv">$PASSWORD</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#&nbsp;&nbsp;&nbsp;&nbsp;   create_user_useradd $USER $PASSWORD</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;create_user_useradd <span class="nv">$USER</span> <span class="nv">$PASSWORD</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> create_user_homectl<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">USER</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STORAGE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CIFS_DOMAIN</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CIFS_USERNAME</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CIFS_SERVICE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">TZ</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="si">${</span><span class="nv">TIMEZONE</span><span class="si">}</span> <span class="p">|</span> sed <span class="s2">&#34;s/\/usr\/share\/zoneinfo\///g&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">L</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="si">${</span><span class="nv">LOCALE_CONF</span><span class="p">[0]</span><span class="si">}</span> <span class="p">|</span> sed <span class="s2">&#34;s/LANG=//g&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">IMAGE_PATH</span><span class="o">=</span><span class="s2">&#34;/home/</span><span class="nv">$USER</span><span class="s2">.homedir&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOME_PATH</span><span class="o">=</span><span class="s2">&#34;/home/</span><span class="nv">$USER</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STORAGE</span><span class="o">=</span><span class="s2">&#34;--storage=</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;cifs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CIFS_DOMAIN</span><span class="o">=</span><span class="s2">&#34;--cifs-domain=</span><span class="nv">$SYSTEMD_HOMED_CIFS_DOMAIN</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CIFS_USERNAME</span><span class="o">=</span><span class="s2">&#34;--cifs-user-name=</span><span class="nv">$USER</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CIFS_SERVICE</span><span class="o">=</span><span class="s2">&#34;--cifs-service=</span><span class="nv">$SYSTEMD_HOMED_CIFS_SERVICE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;luks&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">IMAGE_PATH</span><span class="o">=</span><span class="s2">&#34;/home/</span><span class="nv">$USER</span><span class="s2">.home&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">### something missing, inside alis this not works, after install the user is in state infixated</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">### after install and reboot this commands work</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;systemctl start systemd-homed.service&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">set</span> +e&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;homectl create <span class="s2">&#34;</span><span class="nv">$USER</span><span class="s2">&#34;</span> --enforce-password-policy<span class="o">=</span>no --timezone<span class="o">=</span><span class="nv">$TZ</span> --language<span class="o">=</span><span class="nv">$L</span> <span class="nv">$STORAGE</span> <span class="nv">$CIFS_DOMAIN</span> <span class="nv">$CIFS_USERNAME</span> <span class="nv">$CIFS_SERVICE</span> -G wheel,storage,optical&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;homectl activate <span class="s2">&#34;</span><span class="nv">$USER</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">set</span> -e&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cp -a <span class="s2">&#34;</span><span class="nv">$IMAGE_PATH</span><span class="s2">/.&#34;</span> <span class="s2">&#34;/mnt</span><span class="nv">$IMAGE_PATH</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cp -a <span class="s2">&#34;</span><span class="nv">$HOME_PATH</span><span class="s2">/.&#34;</span> <span class="s2">&#34;/mnt</span><span class="nv">$HOME_PATH</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cp -a <span class="s2">&#34;/var/lib/systemd/home/.&#34;</span> <span class="s2">&#34;/mnt/var/lib/systemd/home/&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> create_user_useradd<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">USER</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt useradd -m -G wheel,storage,optical -s /bin/bash <span class="nv">$USER</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">printf</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD</span><span class="s2">\n</span><span class="nv">$PASSWORD</span><span class="s2">&#34;</span> <span class="p">|</span> arch-chroot /mnt passwd <span class="nv">$USER</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> bootloader<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;bootloader()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">BOOTLOADER_ALLOW_DISCARDS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$CPU_VENDOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;intel&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;intel-ucode&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$CPU_VENDOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;amd&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;amd-ucode&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CMDLINE_LINUX_ROOT</span><span class="o">=</span><span class="s2">&#34;root=</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CMDLINE_LINUX_ROOT</span><span class="o">=</span><span class="s2">&#34;root=PARTUUID=</span><span class="nv">$PARTUUID_ROOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_TRIM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">BOOTLOADER_ALLOW_DISCARDS</span><span class="o">=</span><span class="s2">&#34;:allow-discards&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&#34;cryptdevice=PARTUUID=</span><span class="nv">$PARTUUID_ROOT</span><span class="s2">:</span><span class="nv">$LUKS_DEVICE_NAME$BOOTLOADER_ALLOW_DISCARDS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;btrfs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> rootflags=subvol=root&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KMS</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia&#34;</span> <span class="p">|</span> <span class="s2">&#34;nvidia-390xx&#34;</span> <span class="p">|</span> <span class="s2">&#34;nvidia-390xx-lts&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> nvidia-drm.modeset=1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$KERNELS_PARAMETERS</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$KERNELS_PARAMETERS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$BOOTLOADER</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;grub&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bootloader_grub&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;refind&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bootloader_refind&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;systemd&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bootloader_systemd&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl set-default multi-user.target&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> bootloader_grub<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;grub dosfstools&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s1">&#39;s/GRUB_DEFAULT=0/GRUB_DEFAULT=saved/&#39;</span> /etc/default/grub&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s1">&#39;s/#GRUB_SAVEDEFAULT=&#34;true&#34;/GRUB_SAVEDEFAULT=&#34;true&#34;/&#39;</span> /etc/default/grub&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i -E <span class="s1">&#39;s/GRUB_CMDLINE_LINUX_DEFAULT=&#34;(.*) quiet&#34;/GRUB_CMDLINE_LINUX_DEFAULT=&#34;\1&#34;/&#39;</span> /etc/default/grub&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s1">&#39;s/GRUB_CMDLINE_LINUX=&#34;&#34;/GRUB_CMDLINE_LINUX=&#34;&#39;</span><span class="s2">&#34;</span><span class="nv">$CMDLINE_LINUX</span><span class="s2">&#34;</span><span class="s1">&#39;&#34;/&#39;</span> /etc/default/grub&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span> &gt;&gt; /mnt/etc/default/grub&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;# alis&#34;</span> &gt;&gt; /mnt/etc/default/grub&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;GRUB_DISABLE_SUBMENU=y&#34;</span> &gt;&gt; /mnt/etc/default/grub&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;uefi&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;efibootmgr&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt grub-install --target<span class="o">=</span>x86_64-efi --bootloader-id<span class="o">=</span>grub --efi-directory<span class="o">=</span><span class="nv">$ESP_DIRECTORY</span> --recheck&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">#arch-chroot /mnt efibootmgr --create --disk $DEVICE --part $PARTITION_BOOT_NUMBER --loader /EFI/grub/grubx64.efi --label &#34;GRUB Boot Manager&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;bios&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt grub-install --target<span class="o">=</span>i386-pc --recheck <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt grub-mkconfig -o <span class="s2">&#34;</span><span class="nv">$BOOT_DIRECTORY</span><span class="s2">/grub/grub.cfg&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -n <span class="s2">&#34;\EFI\grub\grubx64.efi&#34;</span> &gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/startup.nsh&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> bootloader_refind<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;refind&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt refind-install&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt rm /boot/refind_linux.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s1">&#39;s/^timeout.*/timeout 5/&#39;</span> <span class="s2">&#34;</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/EFI/refind/refind.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s1">&#39;s/^#scan_all_linux_kernels.*/scan_all_linux_kernels false/&#39;</span> <span class="s2">&#34;</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/EFI/refind/refind.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">#arch-chroot /mnt sed -i &#39;s/^#default_selection &#34;+,bzImage,vmlinuz&#34;/default_selection &#34;+,bzImage,vmlinuz&#34;/&#39; &#34;$ESP_DIRECTORY/EFI/refind/refind.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">REFIND_MICROCODE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$CPU_VENDOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;intel&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">REFIND_MICROCODE</span><span class="o">=</span><span class="s2">&#34;initrd=/intel-ucode.img&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$CPU_VENDOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;amd&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">REFIND_MICROCODE</span><span class="o">=</span><span class="s2">&#34;initrd=/amd-ucode.img&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt;&gt; &#34;/mnt$ESP_DIRECTORY/EFI/refind/refind.conf&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s"># alis&#10;</span></span></span><span class="line"><span class="cl"><span class="s">menuentry &#34;Arch Linux&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;volume   $PARTUUID_BOOT&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;loader   /vmlinuz-linux&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;initrd   /initramfs-linux.img&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;icon&nbsp;&nbsp;&nbsp;&nbsp; /EFI/refind/icons/os_arch.png&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;options  &#34;$REFIND_MICROCODE $CMDLINE_LINUX_ROOT rw $CMDLINE_LINUX&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot using fallback initramfs&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  initrd /initramfs-linux-fallback.img&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot to terminal&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  add_options &#34;systemd.unit=multi-user.target&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="nv">$KERNELS</span> <span class="o">=</span>~ .*linux-lts.* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt;&gt; &#34;/mnt$ESP_DIRECTORY/EFI/refind/refind.conf&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">menuentry &#34;Arch Linux (lts)&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;volume   $PARTUUID_BOOT&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;loader   /vmlinuz-linux-lts&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;initrd   /initramfs-linux-lts.img&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;icon&nbsp;&nbsp;&nbsp;&nbsp; /EFI/refind/icons/os_arch.png&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;options  &#34;$REFIND_MICROCODE $CMDLINE_LINUX_ROOT rw $CMDLINE_LINUX&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot using fallback initramfs&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  initrd /initramfs-linux-lts-fallback.img&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot to terminal&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  add_options &#34;systemd.unit=multi-user.target&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="nv">$KERNELS</span> <span class="o">=</span>~ .*linux-hardened.* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt;&gt; &#34;/mnt$ESP_DIRECTORY/EFI/refind/refind.conf&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">menuentry &#34;Arch Linux (hardened)&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;volume   $PARTUUID_BOOT&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;loader   /vmlinuz-linux-hardened&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;initrd   /initramfs-linux-hardened.img&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;icon&nbsp;&nbsp;&nbsp;&nbsp; /EFI/refind/icons/os_arch.png&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;options  &#34;$REFIND_MICROCODE $CMDLINE_LINUX_ROOT rw $CMDLINE_LINUX&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot using fallback initramfs&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  initrd /initramfs-linux-lts-fallback.img&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot to terminal&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  add_options &#34;systemd.unit=multi-user.target&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="nv">$KERNELS</span> <span class="o">=</span>~ .*linux-zen.* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt;&gt; &#34;/mnt$ESP_DIRECTORY/EFI/refind/refind.conf&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">menuentry &#34;Arch Linux (zen)&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;volume   $PARTUUID_BOOT&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;loader   /vmlinuz-linux-zen&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;initrd   /initramfs-linux-zen.img&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;icon&nbsp;&nbsp;&nbsp;&nbsp; /EFI/refind/icons/os_arch.png&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;options  &#34;$REFIND_MICROCODE $CMDLINE_LINUX_ROOT rw $CMDLINE_LINUX&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot using fallback initramfs&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  initrd /initramfs-linux-lts-fallback.img&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot to terminal&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  add_options &#34;systemd.unit=multi-user.target&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -n <span class="s2">&#34;\EFI\refind\refind_x64.efi&#34;</span> &gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/startup.nsh&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> bootloader_systemd<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemd-machine-id-setup&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt bootctl --path<span class="o">=</span><span class="s2">&#34;</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">&#34;</span> install&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt mkdir -p <span class="s2">&#34;</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt mkdir -p <span class="s2">&#34;</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt; &#34;/mnt$ESP_DIRECTORY/loader/loader.conf&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s"># alis&#10;</span></span></span><span class="line"><span class="cl"><span class="s">timeout 5&#10;</span></span></span><span class="line"><span class="cl"><span class="s">default archlinux&#10;</span></span></span><span class="line"><span class="cl"><span class="s">editor 0&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt mkdir -p <span class="s2">&#34;/etc/pacman.d/hooks/&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt; &#34;/mnt/etc/pacman.d/hooks/systemd-boot.hook&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">[Trigger]&#10;</span></span></span><span class="line"><span class="cl"><span class="s">Type = Package&#10;</span></span></span><span class="line"><span class="cl"><span class="s">Operation = Upgrade&#10;</span></span></span><span class="line"><span class="cl"><span class="s">Target = systemd&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">[Action]&#10;</span></span></span><span class="line"><span class="cl"><span class="s">Description = Updating systemd-boot&#10;</span></span></span><span class="line"><span class="cl"><span class="s">When = PostTransaction&#10;</span></span></span><span class="line"><span class="cl"><span class="s">Exec = /usr/bin/bootctl update&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SYSTEMD_MICROCODE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SYSTEMD_OPTIONS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$CPU_VENDOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;intel&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SYSTEMD_MICROCODE</span><span class="o">=</span><span class="s2">&#34;/intel-ucode.img&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$CPU_VENDOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;amd&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SYSTEMD_MICROCODE</span><span class="o">=</span><span class="s2">&#34;/amd-ucode.img&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="nv">SYSTEMD_OPTIONS</span><span class="o">=</span><span class="s2">&#34;luks.name=</span><span class="nv">$UUID_ROOT</span><span class="s2">=</span><span class="nv">$LUKS_DEVICE_NAME</span><span class="s2"> luks.options=discard&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (terminal)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> systemd.unit=multi-user.target </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (fallback)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-fallback.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-fallback.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="nv">$KERNELS</span> <span class="o">=</span>~ .*linux-lts.* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (lts)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-lts&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-lts.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-lts.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (lts, terminal)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-lts&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-lts.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-lts.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> systemd.unit=multi-user.target </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (lts-fallback)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-lts&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$CPU_INTEL</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> -a <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-lts-fallback.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-lts-fallback.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="nv">$KERNELS</span> <span class="o">=</span>~ .*linux-hardened.* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (hardened)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-hardened&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-hardened.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-hardened.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (hardened, terminal)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-hardened&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-hardened.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-hardened.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> systemd.unit=multi-user.target </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (hardened-fallback)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-hardened&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-hardened-fallback.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-hardened-fallback.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="nv">$KERNELS</span> <span class="o">=</span>~ .*linux-zen.* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (zen)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-zen&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-zen.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-zen.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (zen, terminal)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-zen&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-zen.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-zen.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> systemd.unit=multi-user.target </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (zen-fallback)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-zen&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-zen-fallback.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-zen-fallback.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -n <span class="s2">&#34;\EFI\systemd\systemd-bootx64.efi&#34;</span> &gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/startup.nsh&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> custom_shell<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;custom_shell()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CUSTOM_SHELL_PATH</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$CUSTOM_SHELL</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;zsh&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;zsh&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CUSTOM_SHELL_PATH</span><span class="o">=</span><span class="s2">&#34;/usr/bin/zsh&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;dash&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;dash&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CUSTOM_SHELL_PATH</span><span class="o">=</span><span class="s2">&#34;/usr/bin/dash&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;fish&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;fish&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CUSTOM_SHELL_PATH</span><span class="o">=</span><span class="s2">&#34;/usr/bin/fish&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$CUSTOM_SHELL_PATH</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;custom_shell_user <span class="s2">&#34;root&#34;</span> <span class="nv">$CUSTOM_SHELL_PATH</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;custom_shell_user <span class="s2">&#34;</span><span class="nv">$USER_NAME</span><span class="s2">&#34;</span> <span class="nv">$CUSTOM_SHELL_PATH</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> U in <span class="si">${</span><span class="nv">ADDITIONAL_USERS</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">IFS</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nv">S</span><span class="o">=(</span><span class="si">${</span><span class="nv">U</span><span class="si">}</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">USER</span><span class="o">=</span><span class="si">${</span><span class="nv">S</span><span class="p">[0]</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;custom_shell_user <span class="s2">&#34;</span><span class="nv">$USER</span><span class="s2">&#34;</span> <span class="nv">$CUSTOM_SHELL_PATH</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> custom_shell_user<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">USER</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CUSTOM_SHELL_PATH</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;homectl update --shell<span class="o">=</span><span class="nv">$CUSTOM_SHELL_PATH</span> <span class="nv">$USER</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt chsh -s <span class="nv">$CUSTOM_SHELL_PATH</span> <span class="nv">$USER</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;desktop_environment()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$DESKTOP_ENVIRONMENT</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;gnome&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_gnome&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;kde&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_kde&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;xfce&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_xfce&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;mate&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_mate&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;cinnamon&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_cinnamon&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;lxde&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_lxde&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;i3-wm&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_i3_wm&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;i3-gaps&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_i3_gaps&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl set-default graphical.target&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_gnome<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;gnome&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> gdm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_kde<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;plasma-meta plasma-wayland-session kde-applications-meta&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> sddm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_xfce<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;xfce4 xfce4-goodies lightdm lightdm-gtk-greeter xorg-server&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> lightdm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_mate<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;mate mate-extra lightdm lightdm-gtk-greeter xorg-server&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> lightdm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_cinnamon<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;cinnamon lightdm lightdm-gtk-greeter xorg-server&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> lightdm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_lxde<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;lxde lxdm&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> lxdm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_i3_wm<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;i3-wm i3blocks i3lock i3status dmenu rxvt-unicode lightdm lightdm-gtk-greeter xorg-server&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> lightdm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_i3_gaps<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;i3-gaps i3blocks i3lock i3status dmenu rxvt-unicode lightdm lightdm-gtk-greeter xorg-server&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> lightdm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> packages<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PACKAGES_INSTALL</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">(</span><span class="nv">USER_NAME</span><span class="o">=</span><span class="nv">$USER_NAME</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="nv">USER_PASSWORD</span><span class="o">=</span><span class="nv">$USER_PASSWORD</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./alis-packages.sh<span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> vagrant<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;openssh&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;create_user <span class="s2">&#34;vagrant&#34;</span> <span class="s2">&#34;vagrant&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> sshd.service&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt ssh-keygen -A&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sshd -t&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> systemd_units<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">IFS</span><span class="o">=</span><span class="s1">&#39; &#39;</span> <span class="nv">UNITS</span><span class="o">=(</span><span class="nv">$SYSTEMD_UNITS</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> U in <span class="si">${</span><span class="nv">UNITS</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ACTION</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">UNIT</span><span class="o">=</span><span class="si">${</span><span class="nv">U</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="nv">$UNIT</span> <span class="o">==</span> -* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ACTION</span><span class="o">=</span><span class="s2">&#34;disable&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">UNIT</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$UNIT</span> <span class="p">|</span> sed <span class="s2">&#34;s/^-//g&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">elif</span> <span class="o">[[</span> <span class="nv">$UNIT</span> <span class="o">==</span> +* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ACTION</span><span class="o">=</span><span class="s2">&#34;enable&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">UNIT</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$UNIT</span> <span class="p">|</span> sed <span class="s2">&#34;s/^+//g&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">elif</span> <span class="o">[[</span> <span class="nv">$UNIT</span> <span class="o">=</span>~ ^<span class="o">[</span>a-zA-Z0-9<span class="o">]</span>+ <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ACTION</span><span class="o">=</span><span class="s2">&#34;enable&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">UNIT</span><span class="o">=</span><span class="nv">$UNIT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ACTION</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nv">$ACTION</span> <span class="nv">$UNIT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> end<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="si">${</span><span class="nv">GREEN</span><span class="si">}</span><span class="s2">Arch Linux installed successfully&#34;</span><span class="s1">&#39;!&#39;</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">NC</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$REBOOT</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">REBOOT</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">set</span> +e&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="o">((</span> <span class="nv">i</span> <span class="o">=</span> 15<span class="p">;</span> i &gt;<span class="o">=</span> 1<span class="p">;</span> i-- <span class="o">))</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -r -s -n <span class="m">1</span> -t <span class="m">1</span> -p <span class="s2">&#34;Rebooting in </span><span class="nv">$i</span><span class="s2"> seconds... Press any key to abort.&#34;</span><span class="s1">$&#39;\n&#39;</span> KEY&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">REBOOT</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">break</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">set</span> -e&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$REBOOT</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Rebooting...&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;copy_logs&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_reboot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$ASCIINEMA</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Reboot aborted. You will must terminate asciinema recording and do a explicit reboot (exit, ./alis-reboot.sh).&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Reboot aborted. You will must do a explicit reboot (./alis-reboot.sh).&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$ASCIINEMA</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;No reboot. You will must terminate asciinema recording and do a explicit reboot (exit, ./alis-reboot.sh).&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;No reboot. You will must do a explicit reboot (./alis-reboot.sh).&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> pacman_install<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ERROR</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">set</span> +e&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">IFS</span><span class="o">=</span><span class="s1">&#39; &#39;</span> <span class="nv">PACKAGES</span><span class="o">=(</span><span class="nv">$1</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> VARIABLE in <span class="o">{</span>1..5<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt pacman -Syu --noconfirm --needed <span class="si">${</span><span class="nv">PACKAGES</span><span class="p">[@]</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> <span class="o">==</span> <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ERROR</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">break</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep <span class="m">10</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">set</span> -e&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$ERROR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> copy_logs<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ESCAPED_LUKS_PASSWORD</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LUKS_PASSWORD</span><span class="si">}</span><span class="s2">&#34;</span> <span class="p">|</span> sed <span class="s1">&#39;s/[.[\*^$()+?{|]/[\\&amp;]/g&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ESCAPED_ROOT_PASSWORD</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ROOT_PASSWORD</span><span class="si">}</span><span class="s2">&#34;</span> <span class="p">|</span> sed <span class="s1">&#39;s/[.[\*^$()+?{|]/[\\&amp;]/g&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ESCAPED_USER_PASSWORD</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">USER_PASSWORD</span><span class="si">}</span><span class="s2">&#34;</span> <span class="p">|</span> sed <span class="s1">&#39;s/[.[\*^$()+?{|]/[\\&amp;]/g&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -f <span class="s2">&#34;</span><span class="nv">$CONF_FILE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SOURCE_FILE</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$CONF_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">FILE</span><span class="o">=</span><span class="s2">&#34;/mnt/var/log/alis/</span><span class="nv">$CONF_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir -p /mnt/var/log/alis&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cp <span class="s2">&#34;</span><span class="nv">$SOURCE_FILE</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chown root:root <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chmod <span class="m">600</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_LUKS_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_ROOT_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_ROOT_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_USER_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_USER_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -f <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SOURCE_FILE</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">FILE</span><span class="o">=</span><span class="s2">&#34;/mnt/var/log/alis/</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir -p /mnt/var/log/alis&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cp <span class="s2">&#34;</span><span class="nv">$SOURCE_FILE</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chown root:root <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chmod <span class="m">600</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_LUKS_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_ROOT_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_ROOT_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_USER_PASWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_USER_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -f <span class="s2">&#34;</span><span class="nv">$ASCIINEMA_FILE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SOURCE_FILE</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$ASCIINEMA_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">FILE</span><span class="o">=</span><span class="s2">&#34;/mnt/var/log/alis/</span><span class="nv">$ASCIINEMA_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir -p /mnt/var/log/alis&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cp <span class="s2">&#34;</span><span class="nv">$SOURCE_FILE</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chown root:root <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chmod <span class="m">600</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_LUKS_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_ROOT_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_ROOT_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_USER_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_USER_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> do_reboot<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;umount -R /mnt/boot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;umount -R /mnt&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;reboot&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> print_step<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STEP</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LIGHT_BLUE</span><span class="si">}</span><span class="s2"># </span><span class="si">${</span><span class="nv">STEP</span><span class="si">}</span><span class="s2"> step</span><span class="si">${</span><span class="nv">NC</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> execute_step<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STEP</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STEPS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$2</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34; </span><span class="nv">$STEPS</span><span class="s2"> &#34;</span> <span class="o">=</span>~ <span class="s2">&#34; </span><span class="nv">$STEP</span><span class="s2"> &#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">eval</span> <span class="nv">$STEP</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;save_globals&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Skipping </span><span class="nv">$STEP</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> load_globals<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -f <span class="s2">&#34;</span><span class="nv">$GLOBALS_FILE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">source</span> <span class="s2">&#34;</span><span class="nv">$GLOBALS_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> save_globals<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt; $GLOBALS_FILE&#10;</span></span></span><span class="line"><span class="cl"><span class="s">ASCIINEMA=&#34;$ASCIINEMA&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">BIOS_TYPE=&#34;$BIOS_TYPE&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">PARTITION_BOOT=&#34;$PARTITION_BOOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">PARTITION_ROOT=&#34;$PARTITION_ROOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">PARTITION_BOOT_NUMBER=&#34;$PARTITION_BOOT_NUMBER&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">PARTITION_ROOT_NUMBER=&#34;$PARTITION_ROOT_NUMBER&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">DEVICE_ROOT=&#34;$DEVICE_ROOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">DEVICE_LVM=&#34;$DEVICE_LVM&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">LUKS_DEVICE_NAME=&#34;$LUKS_DEVICE_NAME&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">LVM_VOLUME_GROUP=&#34;$LVM_VOLUME_GROUP&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">LVM_VOLUME_LOGICAL=&#34;$LVM_VOLUME_LOGICAL&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">SWAPFILE=&#34;$SWAPFILE&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">BOOT_DIRECTORY=&#34;$BOOT_DIRECTORY&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">ESP_DIRECTORY=&#34;$ESP_DIRECTORY&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">UUID_BOOT=&#34;$UUID_BOOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">UUID_ROOT=&#34;$UUID_ROOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">PARTUUID_BOOT=&#34;$PARTUUID_BOOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">PARTUUID_ROOT=&#34;$PARTUUID_ROOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">DEVICE_SATA=&#34;$DEVICE_SATA&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">DEVICE_NVME=&#34;$DEVICE_NVME&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">DEVICE_MMC=&#34;$DEVICE_MMC&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">CPU_VENDOR=&#34;$CPU_VENDOR&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">VIRTUALBOX=&#34;$VIRTUALBOX&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">CMDLINE_LINUX_ROOT=&#34;$CMDLINE_LINUX_ROOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">CMDLINE_LINUX=&#34;$CMDLINE_LINUX&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> main<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ALL_STEPS</span><span class="o">=(</span><span class="s2">&#34;configuration_install&#34;</span> <span class="s2">&#34;sanitize_variables&#34;</span> <span class="s2">&#34;check_variables&#34;</span> <span class="s2">&#34;warning&#34;</span> <span class="s2">&#34;init&#34;</span> <span class="s2">&#34;facts&#34;</span> <span class="s2">&#34;checks&#34;</span> <span class="s2">&#34;prepare&#34;</span> <span class="s2">&#34;partition&#34;</span> <span class="s2">&#34;install&#34;</span> <span class="s2">&#34;configuration&#34;</span> <span class="s2">&#34;mkinitcpio_configuration&#34;</span> <span class="s2">&#34;display_driver&#34;</span> <span class="s2">&#34;kernels&#34;</span> <span class="s2">&#34;mkinitcpio&#34;</span> <span class="s2">&#34;network&#34;</span> <span class="s2">&#34;virtualbox&#34;</span> <span class="s2">&#34;users&#34;</span> <span class="s2">&#34;bootloader&#34;</span> <span class="s2">&#34;custom_shell&#34;</span> <span class="s2">&#34;desktop_environment&#34;</span> <span class="s2">&#34;packages&#34;</span> <span class="s2">&#34;vagrant&#34;</span> <span class="s2">&#34;systemd_units&#34;</span> <span class="s2">&#34;end&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STEP</span><span class="o">=</span><span class="s2">&#34;configuration_install&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STEP</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$STEP</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;steps&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Steps: </span><span class="nv">$ALL_STEPS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="m">0</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># get step execute from</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">FOUND</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STEPS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> S in <span class="si">${</span><span class="nv">ALL_STEPS</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="nv">$FOUND</span> <span class="o">=</span> <span class="s2">&#34;true&#34;</span> -o <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEP</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">S</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">FOUND</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STEPS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$STEPS</span><span class="s2"> </span><span class="nv">$S</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># execute steps</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;load_globals&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;configuration_install&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;sanitize_variables&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;check_variables&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;warning&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;init&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;facts&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;checks&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;prepare&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;partition&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;install&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;configuration&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;mkinitcpio_configuration&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;display_driver&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;kernels&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;mkinitcpio&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;network&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;virtualbox&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;users&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;bootloader&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$CUSTOM_SHELL</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;custom_shell&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$DESKTOP_ENVIRONMENT</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;desktop_environment&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;packages&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VAGRANT</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;vagrant&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;systemd_units&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;end&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">main <span class="nv">$@</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>alis.sh</span>
    </div>
</div>
<div class="alert alert-secondary sourcecode fs-6">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            You can download the <a href="https://github.com/picodotdev/alis/tree/master/">example complete source code</a> from the Blog Bitix examples repository hosted on GitHub.</p>
</div>
]]>
        </content>
        
            
                <category term="gnu-linux"/>
            
                <category term="planeta-codigo"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    
</feed>