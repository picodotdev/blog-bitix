<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title type="text">Blog Bitix</title>
    <subtitle type="text">Blog sobre al lenguaje de programación Java y la distribución GNU/Linux que uso habitualmente, Arch Linux, lo que aprendo sobre el software libre, la programación web y otros temas relacionados con la tecnología y la informática. El contenido puede contener trazas de asuntos fuera de tema.</subtitle>
    <link rel="self" href="https://picodotdev.github.io/blog-bitix/index.xml"/>
    <link href="https://picodotdev.github.io/blog-bitix/" />
    <id>https://picodotdev.github.io/blog-bitix/tags/software-libre/</id>
    <updated>2022-01-13T23:00:00+01:00</updated>
    <author><name>picodotdev</name></author>
    <generator>Hugo</generator>
    <icon>https://picodotdev.github.io/blog-bitix/assets/favicon.ico</icon>
    <logo>https://picodotdev.github.io/blog-bitix/assets/images/blog-bitix.svg</logo>
    <rights>https://creativecommons.org/licenses/by-sa/4.0/</rights>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/03/listado-de-programas-esenciales-segun-categoria-para-gnu-linux/</id>
        <title>Listado de programas esenciales según categoría para GNU/Linux</title>
        <updated>2020-03-13T12:00:00+01:00</updated>
        <published>2020-03-13T12:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/03/listado-de-programas-esenciales-segun-categoria-para-gnu-linux/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>El sistema operativo solo proporciona la abstracción del hardware a los programas de usuario. Son los programas los que permiten al usuario realizar las tareas productivas. Según su categoría hay varios programas según los tipos de archivos que soportan o funcionalidad que proporcionan. Ofimática, internet y comunicaciones, fotos y gráficos, multimedia, juegos, programación y desarrollo seguridad y privacidad, &hellip;</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/gnu.svg" width="200" height="196" alt="GNU" title="GNU"  class=""></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/linux.svg" width="200" height="232" alt="Linux" title="Linux"  class=""></p>
</div>
<p>Un sistema operativo como <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a>, <a href="https://www.microsoft.com/es-es/windows/">Windows</a> o <a href="https://www.apple.com/macos/">macOS</a> tiene poca utilidad sin los programas de usuario que permiten realizar tareas. Para las tareas más comunes normalmente hay varios programas entre los que elegir, con una traducción al español e interfaz gráfica.</p>
<p>En GNU/Linux además la mayoría de los programas son software libre. Las ventajas del software libres son que el código fuente está disponible con lo que no pueden contener funciones maliciosas ocultas, está permitido modificar el código fuente y redistribuirlo bajo la misma licencia y compartir el programa con cualquiera que lo necesite. No tiene que ser así pero generalmente los programas de software libre son generalmente gratuitos ni requieren costosas licencias de uso.</p>
<p>Esta lista no incluye los <a href="https://picodotdev.github.io/blog-bitix/2020/02/las-aplicaciones-integradas-del-entorno-de-escritorio-gnome/">programas básicos que integra un entorno de escritorio por defecto como GNOME</a> o <a href="https://picodotdev.github.io/blog-bitix/2021/09/aplicaciones-adicionales-disenadas-para-el-entorno-de-escritorio-gnome/">las aplicaciones adicionales diseñadas para el entorno de escritorio GNOME</a> sino solo los programas adicionales comunes que se suelen instalar para complementar los que ya están instalados en el sistema.</p>
<p>Los programas incluidos en esta lista solo son una pequeña muestra seleccionada de todos los disponibles que están entre los más usados y considerados por los usuarios.</p>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/Category:Lists_of_software">Lista de software</a></li>
<li><a href="https://wiki.archlinux.org/index.php/List_of_applications">Lista de aplicaciones</a></li>
<li><a href="https://wiki.archlinux.org/index.php/List_of_applications/Documents">Aplicaciones para documentos</a></li>
<li><a href="https://wiki.archlinux.org/index.php/List_of_applications/Internet">Aplicaciones para internet</a></li>
<li><a href="https://wiki.archlinux.org/index.php/List_of_games">Lista de juegos</a></li>
</ul>
<p>Todos estos programas están disponibles como paquete para cada distribución GNU/Linux, si no lo estuviera quizá esté disponible como paquete <a href="https://flatpak.org/">Flatpak</a>, <a href="https://snapcraft.io/">Snapcraft</a> o <a href="https://appimage.org/">AppImage</a> para instalar el software independientemente de la distribución.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/11/flatpak-distribucion-e-instalacion-de-programas-de-escritorio-en-las-distribuciones-gnu-linux/">Flatpak, distribución e instalación de programas de escritorio en las distribuciones GNU/Linux</a></li>
</ul>
<p>Índice de categorías de programas:</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix">Ofimática, documentos y escritorio</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix">Editor de textos avanzado</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix">Internet y comunicaciones</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix">Fotos y gráficos</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix">Multimedia, vídeo y audio</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix">Programación y desarrollo</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix">Seguridad y privacidad</a></li>
</ul>
<div class="alert alert-warning tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="ofimática-documentos-y-escritorio">Ofimática, documentos y escritorio</h3>
<p>La ofimática es la funcionalidad más común a todos los usuarios. Poder editar documentos de texto, utilizar hojas de cálculo aplicando fórmulas y crear presentaciones. Un editor de texto avanzado tiene más funcionalidad si son necesarias que el simple editor de texto incluido en los entornos de escritorio. Visualizar archivos digitalizados como libros electrónicos y archivos de cómics es necesario para aquellos usuarios que les gusta la lectura. Tomar capturas de pantalla es otra funcionalidad para que los entornos de escritorio ya incluyen algún programa pero también suelen ser simples aunque suficientes, para los usuarios que necesitan alguna funcionalidad hay algún programa más especializado.</p>
<h4 id="editor-de-documentos-ofimáticos">Editor de documentos ofimáticos</h4>
<p><a href="https://www.libreoffice.org/">LibrerOffice</a> es el paquete ofimático más popular y completo de GNU/Linux pero su interfaz no es la más agradable visualmente y muchos usuarios no necesitan las funcionalidades más avanzadas. <a href="https://www.onlyoffice.com/es/">OnlyOffice</a> es un paquete ofimático más sencillo y solo incluye las aplicaciones básicas editor de documentos, hoja de cálculo y presentaciones. <a href="https://www.wps.com/">WPS Office</a> no es software libre pero posee una versión gratuita con limitaciones con una interfaz cuidada parecida a <a href="https://products.office.com/es-es/">Microsoft Office</a>.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/05/4-opciones-ofimaticas-alternativas-gratuitas-a-microsoft-office/">4 opciones ofimáticas alternativas gratuitas a Microsoft Office</a></li>
</ul>
<h4 id="editor-de-textos-avanzado">Editor de textos avanzado</h4>
<p><a href="https://code.visualstudio.com/">Visual Studio Code</a> es un editor de texto avanzado con funcionalidades útiles para los usuarios avanzados como una terminal integrada. Se le pueden añadir complementos que casi lo convierte en un IDE sin llegar al nivel de uno dedicado. Posee muchas combinaciones de acceso rápido para aumentar la productividad al acceder a funcionalidades usadas repetidamente.</p>
<h4 id="libros-electrónicos-y-cómics">Libros electrónicos y cómics</h4>
<p>Los libros electrónicos ya son muy asequibles y aportan comodidad en menor peso y espacio sobre los libros impresos en papel. Hay múltiples formatos de libro electrónico y los lectores soportan únicamente algunos de ellos por lo que es necesario un programa para realizar una conversión entre formato en el que se tiene el libro y el que soporta el lector. Un ejemplo es el <a href="https://amzn.to/3oqIKXt">Amazon Kindle</a> que no soporta el formato <em>epub</em> y hay que realizar la conversión a <em>azw</em> o <em>mobi</em>. Un conversor de formato de libros electrónicos y organizador de la biblioteca digital es <a href="https://calibre-ebook.com/">Calibre</a>.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2019/11/gestionar-biblioteca-y-convertir-entre-formatos-de-libros-electronicos-con-calibre/">Gestionar biblioteca y convertir entre formatos de libros electrónicos con Calibre</a></li>
</ul>
<p>Otros formatos de libros son los cómics y estos por su formato gráfico son imágenes empaquetas en un único archivo. Para leer estos archivos y proporcionar una interfaz adaptada a las necesidades de los cómics hay programas para estos tipos de archivos. <a href="https://sourceforge.net/p/mcomix/wiki/Home/">MComix</a> es una aplicación dedicada a la lectura de cómics en el ordenador.</p>
<h4 id="capturador-de-pantalla">Capturador de pantalla</h4>
<p>Hacer una captura de pantalla es muy útil para compartir la imagen de una aplicación, una parte del escritorio o el escritorio completo. Los entornos de escritorio ya suelen incluir un capturador de pantalla, las aplicaciones dedicadas incluyen alguna funcionalidad adicional como <a href="https://shutter-project.org/">Shutter</a>.</p>
<p>Otra forma de captura del escritorio es capturar un vídeo del escritorio, incluído el sonido. <a href="https://sourceforge.net/projects/recordmydesktop/">recordMyDesktop</a> graba el entorno de escritorio sin necesidad de un hardware dedicado como una capturadora de vídeo.</p>
<h4 id="copias-de-seguridad">Copias de seguridad</h4>
<p>Es muy importante realizar copias de seguridad de la información digital para no perderla si por cualquier circunstancia el sistema de almacenamiento o dispositivo se estropea impidiendo acceder a los archivos. <a href="https://freefilesync.org/">FreeFileSync</a> permite hacer copias de los archivos en varios dispositivos de almacenamiento de forma rápida copiando solo los archivos que hayan sido modificados desde la fecha de la última copia de seguridad.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/05/como-realizar-copias-de-seguridad-en-windows-con-freefilesync/">Cómo realizar copias de seguridad en Windows con FreeFileSync</a></li>
</ul>
<h3 id="internet-y-comunicaciones">Internet y comunicaciones</h3>
<p>El acceso a internet ya está disponible para mayoría de la población de las sociedades desarrolladas, ha multiplicado las posibilidades de los ordenadores y posibilitado diferentes formas de comunicación instantánea con personas que están a miles de kilómetros.</p>
<h4 id="navegador">Navegador</h4>
<p>El navegador web es una pieza fundamental en el ordenador que permite acceder a las páginas web de internet, realizar descargas de archivos y otra multitud de tareas que hoy en día ya se puede realizar desde leer periódicos digitales a compras y transferencias de dinero en la banca digital.</p>
<p>Dada la importancia que ya se realizan con estos programas y la información de los usuarios que tratan es importante que estén actualizados a la última versión con todas las correcciones de seguridad aplicadas y que incluya funcionalidades para proteger la privacidad de la información de los usuarios. <a href="https://www.mozilla.org/es-ES/firefox/new/">Firefox</a> y <a href="https://www.chromium.org/">Chromium</a> son de los más populares.</p>
<h4 id="correo-electrónico">Correo electrónico</h4>
<p>Con el correo web como <a href="https://www.google.com/intl/es/gmail/about/">GMail</a> o <a href="https://protonmail.com/es/">Protonmail</a> las aplicaciones de correo electrónicos de escritorio no son imprescindibles. Sigue habiendo algunos programas dedicados que posibilitan algunas funcionalidades como firma digital o cifrado y descifrado con <a href="https://www.gnupg.org/index.html">GnuPG</a>. Dos aplicaciones de correo electrónico son <a href="https://www.thunderbird.net/es-ES/">Thunderbird</a> y <a href="https://wiki.gnome.org/Apps/Geary">Geary</a>.</p>
<h4 id="lector-de-feeds">Lector de feeds</h4>
<p>También hay lectores de feeds web como <a href="https://feedly.com">Feedly</a> pero los usuarios pueden preferir un programa dedicado local en el ordenador, <a href="https://lzone.de/liferea/">Liferea</a> es uno.</p>
<h4 id="descargar-archivos-torrent-y-descargas-directas">Descargar archivos torrent y descargas directas</h4>
<p>Para descargar películas, series y libros electrónicos se utilizan archivos torrent un programa que descargue el contenido de los usuarios que lo tengan, es una descarga distribuida y suele ofrecer una buena velocidad de descarga si lo tiene varios usuarios, un programa para descargar archivos torrent es <a href="https://transmissionbt.com/">Transmission</a>.</p>
<p>Si es posible es mejor utilizar descarga mediante torrents, si no es posible y se ofrece la descarga directa está <a href="https://beta.jdownloader.org/">JDownloader</a> que posibilita detener y continuar la descarga en el punto que se quedó.</p>
<h4 id="mensajería-instantánea">Mensajería instantánea</h4>
<p><a href="https://telegram.org/">Telegram</a> y <a href="https://www.whatsapp.com/">Whatsapp</a> son las mensajerías más utilizadas por su ubicuidad con el auge de los <em>smartphones</em>. <a href="https://www.pidgin.im/">Pidgin</a> permite el envío de mensajes entre personas con un ordenador.</p>
<p>Para el trabajo en grupo <a href="https://slack.com/">Slack</a> es una evolución de los programas como Pidgin y muy utilizado en las empresas. Es otra forma de comunicación más apropiada en ciertas circunstancias que la comunicación mediante correo electrónico. Slack ofrece además de mensajes de texto, imágenes y reacciones permite llamadas de audio y videoconferencias.</p>
<h4 id="videoconferencia">Videoconferencia</h4>
<p><a href="https://jitsi.org/">Jitsi</a> es una aplicación de código abierto que permite realizar videoconferencias en tiempo real con múltiples participantes, dispone de aplicaciones para móviles <a href="https://www.android.com/">Android</a> e <a href="https://www.apple.com/es/ios/ios-12/">iOS</a>. Se puede usar de forma gratuita y también ofrecen el servicio de forma hospedada con un coste según el número de usuarios.</p>
<p>Otra opción es <a href="https://www.skype.com/es/">Skype</a>.</p>
<h4 id="nube-privada">Nube privada</h4>
<p>Google ofrece multitud de servicios gratuitos que poseen gran cantidad de información personal, en GMail los mensajes enviados y recibidos de otros usuarios, en Google Docs los documentos, en Calendar las citas y otra información utilizando más servicios. Para proteger la información personal <a href="https://nextcloud.com/">Nextcloud</a> permite sustituir varios de esos servicios en la nube por una nube privada propia.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/">Nube privada para documentos personales con Nextcloud y OnlyOffice</a></li>
</ul>
<h3 id="fotos-y-gráficos">Fotos y gráficos</h3>
<p>El retoque fotogŕafico permite crear imágenes y retocar fotografías en formato vectorial o formada por píxeles en formato <em>raster</em>, permite retocar las imágenes realizadas con móvil.</p>
<h4 id="retoque-fotográfico">Retoque fotográfico</h4>
<p>Para un uso personal <a href="https://www.gimp.org/">GIMP</a> permite sustituir programas que requieren costosas licencias com <a href="https://www.adobe.com/es/products/photoshop.html">Adobe Photoshop</a>, incluso para un uso profesional salvo quizá una función muy avanzada GIMP también es una muy buena opción. En cada nueva versión se mejoran sus funcionalidades y se añaden nuevas.</p>
<p><a href="https://inkscape.org/es/">Inkscape</a> permite editar y crear imágenes en formato vectorial.</p>
<h3 id="multimedia-vídeo-y-audio">Multimedia, vídeo y audio</h3>
<p>Reproducir vídeos, películas, archivos de audio y música son otra categoría de archivos para los que se necesitan programas específicos. Algunos programas pueden hacer todo lo anterior y otros solo se centran en la música y archivos de audio. Otros programas permite crear vídeos a partir de una colección de archivos de vídeo y audio. También suele ser necesario realizar conversiones entre formatos de archivos para reproducirlos en los que soporte el programa que los reproduce.</p>
<h4 id="reproductor-de-vídeo-audio-películas-y-música">Reproductor de vídeo, audio, películas y música</h4>
<p><a href="https://www.videolan.org/vlc/">VLC</a> es un programa que realiza multitud de funcionalidades, sus principales son reproducir archivos de vídeo y audio pero también permite realizar conversiones e incluso ser el programa que capture el vídeo de una capturadora hardware. Su interfaz no es la más estéticamente bonita pero funciona realmente bien y es capaz de reproducir cualquier formato de archivo multimedia.</p>
<p>Para reproducir música los programas <a href="https://wiki.gnome.org/Apps/Rhythmbox">Rhythmbox</a> y <a href="http://banshee.fm/">Banshee</a> permite organizar la librería digital de archivos de música.</p>
<h4 id="editor-de-vídeo">Editor de vídeo</h4>
<p>Con una colección de archivos de vídeo, imágenes y archivos de audio y un programa como <a href="https://www.openshot.org/">OpenShot</a> permite crear un vídeo aplicando varios efectos y transiciones, el resultado es un nuevo vídeo que incluye parte o todo el contenido individual original.</p>
<p>Otra opción sencilla es <a href="http://www.pitivi.org/">Pitivi</a> pero suficiente con las opciones comunes de un editor de vídeo.</p>
<h4 id="conversor-de-vídeo-y-audio">Conversor de vídeo y audio</h4>
<p>Al igual que en otros formatos de archivos es posible necesitar realizar conversiones entre formatos. Tanto de vídeo con <a href="https://handbrake.es/">Handbrake</a> y audio con <a href="https://soundconverter.org/">Soundconverter</a>. Además de hacer conversiones es posible ajustar la calidad del nuevo vídeo para hacer que tenga menos calidad y ocupe menos.</p>
<h4 id="otros-programas-específicos">Otros programas específicos</h4>
<p><a href="https://audacity.es/">Audacity</a> es un programa para la edición de audio y <a href="https://www.blender.org/">Blender</a> un programa de modelado 3D. <a href="https://picard.musicbrainz.org/">MusicBrainz Picard</a> permite editar los metadatos de los archivos de música para que los reproductores muestren la información correcta del título, álbum, grupo musical o género.</p>
<p>Para capturar vídeo y audio del escritorio o para hacer una transmisión en directo o <em>streaming</em> el programa <a href="https://obsproject.com/">OBS</a> permite realizar la captura de vídeo y audio de múltiples fuentes incluida una captura desde una cámara web con la posibilidad de hacer un <em>croma</em> y realizar una composicón con todas las fuentes para producir la salida en la calidad deseada.</p>
<p>Los juagadores para realizar comunicación con los amigos o compañeros de partida necesitan una aplicación para hablar entre ellos en tiempo real, <a href="https://discord.com/">Discord</a> es una aplicación para el propósito de comunicación por voz en tiempo real.</p>
<h3 id="juegos">Juegos</h3>
<p>GNU/Linux no es la opción más popular para los juegos que está dominado por Windows pero ya hay algunos programas que permiten descargar e instalar juegos de forma muy sencilla e incluso jugar a los juegos que han sido desarrollados para Windows. También hay algunos buenos juegos desarrollados para GNU/Linux.</p>
<p><a href="https://store.steampowered.com/">Steam</a> y <a href="https://www.winehq.org/">Wine</a> permiten jugar a juegos de Windows, en Steam hay juegos compatibles de forma nativa para GNU/Linux. <a href="https://www.gog.com/">GOG</a> permite jugar a juegos ya con unos años pero que fueron notables en su época. <a href="https://www.mame.net/">Mame</a>, <a href="https://www.lakka.tv/">Lakka</a> y <a href="https://www.retroarch.com/">Retroarch</a> permite jugar hoy en día a juegos de arcade aún más antiguos, de recreativas y de la generación de las primeras consolas.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/">Cómo usar Wine para jugar en GNU/Linux a Diablo 3 u otros juegos de Blizzard o Windows</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2019/09/la-aplicacion-cliente-de-steam-en-gnu-linux/">La aplicación cliente de Steam en GNU/Linux</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/08/jugar-a-videojuegos-clasicos-y-miticos-de-arcade-con-mame-en-gnu-linux/">Jugar a videojuegos clásicos y míticos de arcade con Mame en GNU/Linux</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/08/22-plus-buenos-juegos-en-gnu-linux/">22+ buenos juegos en GNU/Linux</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/08/varios-juegos-de-culto-con-scummvm-en-gnu-linux/">Varios juegos de culto con ScummVM en GNU/Linux</a></li>
</ul>
<h3 id="programación-y-desarrollo">Programación y desarrollo</h3>
<p>Si algo destaca GNU/Linux es en el aspecto de programas disponibles para tareas de programación y desarrollo, hay multitud de programas y es uno de los sistemas operativos con más variedad y mejor preparado para este fin.</p>
<h4 id="compiladores">Compiladores</h4>
<p>En GNU/Linux hay compiladores para cualquier lenguaje de programación ya sea Java, C, C#, Python, Rust, Go y muchos otros. <a href="https://gcc.gnu.org/">GCC</a> permite compilar los archivos de código fuente y producir el archivo ejecutable.</p>
<h4 id="entorno-integrado-de-desarrollo">Entorno integrado de desarrollo</h4>
<p>Los entornos integrados de desarrollo o IDE ofrecen funcionalidades que permiten aumentar la productividad al escribir código como la asistencia de código y mostrar la propia documentación de cada método y nombres de los parámetros. Así como depurar el código mientras se ejecuta.</p>
<p>En Java los tres IDEs más populares son <a href="https://www.jetbrains.com/idea/">IntelliJ IDEA</a>, <a href="https://eclipse.org">eclipse</a>, <a href="https://netbeans.apache.org/">Apache Netbeans</a>.</p>
<h4 id="bases-de-datos-y-software-de-servidor">Bases de datos y software de servidor</h4>
<p>Las aplicaciones normalmente guardan sus datos en almacenes de datos, esto son las bases de datos. Hay varios tipos de bases de datos, dos grandes grupos son las basadas en el modelo relacional como <a href="https://www.postgresql.org/">PostgreSQL</a> y <a href="https://www.mysql.com/">MySQL</a> y las noSQL como <a href="https://redis.io/">Redis</a> o <a href="https://www.mongodb.com/">MongoDB</a>.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2017/05/introduccion-a-la-base-de-datos-relacional-postgresql/">Introducción a la base de datos relacional PostgreSQL</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2017/05/introduccion-a-la-base-de-datos-nosql-mongodb/">Introducción a la base de datos NoSQL MongoDB</a></li>
</ul>
<p>Hay otro tipo de programas útiles en el desarrollo como los servidores web como <a href="https://nginx.org/">Nginx</a>, mensajería como <a href="https://www.rabbitmq.com/">RabbitMQ</a> o tecnología de contenedores como <a href="https://www.docker.com/">Docker</a>.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2017/02/ejemplo-de-rabbitmq-con-java-para-enviar-y-recibir-mensajes/">Ejemplo de RabbitMQ con Java para enviar y recibir mensajes</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2014/11/como-instalar-y-guia-de-inicio-basica-de-docker/">Cómo instalar y guía de inicio básica de Docker</a></li>
</ul>
<h4 id="virtualización">Virtualización</h4>
<p>La virtualización permite ejecutar un sistema dentro de otros sistema, por ejemplo, ejecutar Windows en GNU/Linux o una distribución GNU/Linux en Windows. También permite probar macOS en GNU/Linux o incluso alguna ditribución BSD o <a href="https://www.minix3.org/">Minix</a>.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/09/como-instalar-y-probar-macos-con-virtualbox-en-windows-o-gnu-linux/">Cómo instalar y probar macOS con VirtualBox en Windows o GNU/Linux</a></li>
</ul>
<h3 id="seguridad-y-privacidad">Seguridad y privacidad</h3>
<p>Un aspecto al que se le da gran importancia en GNU/Linux es a la seguridad, está construido con la seguridad como una característica importante. También la privacidad es otro aspecto destacado. Los programas son software libre y dado que el código fuente está disponible los programas no contienen funciones maliciosas ocultas que recopilan información del usuario sin su conocimiento.</p>
<p>Tampoco suele ser necesario instalar un antivirus ya que los programas al ser gratuitos no es necesario buscar activadores que permitan el uso de los programas sin haber adquirido la licencia previamente. Los activadores de programas son una de las principales fuentes de entradas de virus en un sistema, no solo porque son programas que se ejecutan en el sistema que pueden quedar residentes realizando funciones desconocidas pero no con buenos propósitos sino también por el tipo de páginas de baja reputación e inseguras a las que hay que acceder para descargarlos.</p>
<h4 id="gestor-de-contraseñas">Gestor de contraseñas</h4>
<p>Las contraseñas deben ser únicas para cada sitio web, tener una longitud de entre 8, 16 o más caracteres y combinar letras, números y símbolos. Estas restricciones hacen que las contraseñas sean difíciles de recordar. Precisamente por estos motivos hay programas que guardan cifradas bajo una contraseña maestra la colección de credenciales de cada sitio web. <a href="https://keepassxc.org/">KeepassXC</a> es una base de datos que guarda las credenciales e información adicional cifrada, también permite generar contraseñas únicas que cumplan los requisitos deseados de longitud y tipos de caracteres que deben incluir.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/11/guardar-contrasenas-de-forma-segura-con-keepassxc/">Guardar contraseñas de forma segura con KeePassXC</a></li>
</ul>
<h4 id="cifrado-y-descifrado-de-archivos">Cifrado y descifrado de archivos</h4>
<p><a href="https://www.gnupg.org/index.html">GnuPG</a> permite cifrar y firmar digitalmente archivos y contenido, esto permite comprobar que el archivo no ha sido modificado en la transmisión y que el archivo proviene de la persona que lo ha firmado. Esto es un mecanismo importante en la seguridad y las comunicaciones. GnuPG tiene complementos para integrase en Thunderbird para firmar y cifrar el correo electrónico. <a href="https://www.gnupg.org/related_software/gpa/">GnuPG Assistant</a> es una aplicación con interfaz gráfica que posibilita hacer operaciones de firma y cifrado.</p>
<p><a href="https://vgough.github.io/encfs/">EncFS</a> permite crear un sistema de archivo cifrado de modo que su contenido esté protegido por una contraseña.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/02/cifrar-archivos-con-encfs-en-gnu-linux/">Cifrar archivos con EncFS en GNU/Linux</a></li>
</ul>
<h4 id="cortafuegos">Cortafuegos</h4>
<p><a href="https://launchpad.net/ufw">UFW</a> permite restringir el tráfico de red aceptado por la computadora tanto entrante como saliente, para exponer únicamente en internet los recursos imprescindibles de la computadora. Es fácil de utilizar e incluso tiene una <a href="https://gufw.org/">interfaz gráfica</a>.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/12/permitir-o-denegar-trafico-de-red-con-el-firewall-ufw-en-gnu-linux/">Permitir o denegar tráfico de red con el firewall UFW en GNU/Linux</a></li>
</ul>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://itsfoss.com/essential-linux-applications/">Must Have Essential Linux Applications</a></li>
<li><a href="https://www.techsupportalert.com/content/best-free-software-linux.htm">Best Free Software for Linux</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="gnu-linux"/>
            
                <category term="planeta-codigo"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2019/12/articulo-7-de-yo-apoyo-al-software-libre/</id>
        <title>Artículo #7 de Yo apoyo al software libre</title>
        <updated>2019-12-22T11:30:00+01:00</updated>
        <published>2019-12-22T11:30:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2019/12/articulo-7-de-yo-apoyo-al-software-libre/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/calibre.png" width="300" height="120" alt="Calibre" title="Calibre"  class=""></p>
</div>
<p>Continuando con la serie de artículos comentando las donaciones que voy realizando a los proyectos de software libre en este caso comentaré otro programa que uso habitualmente. En este caso de trata del programa el <a href="https://picodotdev.github.io/blog-bitix/2019/11/gestionar-biblioteca-y-convertir-entre-formatos-de-libros-electronicos-con-calibre/">gestor gestor de libros electrónicos y conversor entre diferentes formatos de libro electrónicos Calibre</a> que que quizá no tiene la interfaz de usuario más atractiva pero es muy útil, funciona realmente bien y permite tener organizada la biblioteca digital.</p>
<p>Lo uso habitualmente para convertir los libros en formato <em>epub</em> a <em>mobi</em> para poder leerlos en el lector de libros electrónicos <a href="https://amzn.to/3Dd5Q8p">Amazon Kindle</a>. El programa <a href="https://calibre-ebook.com/">Calibre</a> es software libre y gratuito pero ofrece la opción de realizar una donación para contribuir al mantenimiento del proyecto que el desarrollador o desarrolladores seguro agradecen para costear sus gastos ayudándoles a realizar nuevas mejoras en el programa.</p>
<p>Hace unos meses se publicó la versión 4.0 del programa y cada semana o dos semanas hay una nueva versión que incluye correcciones y algunas mejoras, aún usando la distribución de <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> como <a href="https://www.archlinux.org/">Arch Linux</a> siendo <em>rolling release</em> y actualizando el sistema cada dos semanas es uno de los pocos programas que habitualmente tengo desactualizado en una versión anterior a la última, eso es resultado de las numerosas versiones que se publican del mismo.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2019/12/articulo-7-de-yo-apoyo-al-software-libre/images/calibre_hu9c32197af81954eafa56c2f92459cc2d_1940986_2560x1440_fit_box_3.png" data-gallery="" title="Biblioteca y conversor de libros electrónicos Calibre"><img src="https://picodotdev.github.io/blog-bitix/2019/12/articulo-7-de-yo-apoyo-al-software-libre/images/calibre_hu9c32197af81954eafa56c2f92459cc2d_1940986_300x200_fit_box_3.png" width="292" height="200" alt="Biblioteca y conversor de libros electrónicos Calibre" title="Biblioteca y conversor de libros electrónicos Calibre"  class="lozad "></a></p>
<figcaption>Biblioteca y conversor de libros electrónicos Calibre</figcaption>
</figure>
</div>
<p>La cantidad que he donado no es mucho pero si un porcentaje de los usuarios que lo utilizan realizarán una pequeña donación el proyecto continuará desarrollándose. Muchos programas de software libre utilizados por usuarios e incluso empresas que ganan millones de dólares confían en proyectos que en algunos casos solo están mantenidos por una persona y de forma voluntaria en su tiempo libre sin recibir un sueldo a cambio.</p>
<p>Una donación en la medida que uno pueda o desee es una buena forma de si un programa le es realmente útil devolver algo en compensación de su uso. A continuación el recibo de la donación que he realizado a Calibre.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2019/12/articulo-7-de-yo-apoyo-al-software-libre/images/donacion-calibre_hua07f0c6883cb9d3f9b30f28b2d16ce12_117262_2560x1440_fit_box_3.png" data-gallery="" title="Donación Calibre"><img src="https://picodotdev.github.io/blog-bitix/2019/12/articulo-7-de-yo-apoyo-al-software-libre/images/donacion-calibre_hua07f0c6883cb9d3f9b30f28b2d16ce12_117262_650x450_fit_box_3.png" width="296" height="450" alt="Donación Calibre" title="Donación Calibre"  class="lozad "></a></p>
<figcaption>Donación Calibre</figcaption>
</figure>
</div>
<p>Recuerda que si no es por privacidad y usas un bloqueador de anuncios <a href="https://adblockplus.org/es/faq_basics#disable">desactivándolo en Blog Bitix</a> ayudas a que pueda seguir haciendo estas donaciones aún siendo pequeñas y una parte pequeña de los ingresos que me genera el blog.</p>
<table class="table">
    <thead>
        <tr class="thead-dark">
            <th colspan="4">Donaciones que he realizado hasta la última fecha</th>
        </tr>
        <tr class="thead-light">
            <th>#</th>
            <th>Fecha</th>
            <th>Proyecto</th>
            <th>Donación</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>2015/12</td>
            <td>Free Software Foundation Europe (FSFE)</td>
            <td>40 €</td>
        </tr>
        <tr>
            <td>2</td>
            <td>2016/09</td>
            <td>Wikipedia, Mozilla/Firefox</td>
            <td>10 €, 10 €</td>
        </tr>
        <tr>
            <td>3</td>
            <td>2017/01</td>
            <td>elementaryOS, Libre Office, Arch Linux ARM</td>
            <td>10 €, 10 €, 10 €</td>
        </tr>
        <tr>
            <td>4</td>
            <td>2017/05</td>
            <td>GNOME, VideoLAN (VLC), Arch Linux</td>
            <td>15,31 €, 10 €, 0,31 €</td>
        </tr>
        <tr>
            <td>5</td>
            <td>2018/01</td>
            <td>LineageOS, Replicant</td>
            <td>15 €, 15 €</td>
        </tr>
        <tr>
            <td>6</td>
            <td>2018/12</td>
            <td>Wine</td>
            <td>$20</td>
        </tr>
        <tr>
            <td>7</td>
            <td>2019/12</td>
            <td>Calibre</td>
            <td>$10</td>
        </tr>
        <tr>
            <td>8</td>
            <td>2020/12</td>
            <td>Phoronix, Mozilla/Firefox, GnuPG</td>
            <td>$12, 10 €, 10 €</td>
        </tr>
        <tr>
            <td>9</td>
            <td>2022/01</td>
            <td>KeePassXC</td>
            <td>15 €</td>
        </tr>
        <tr>
            <td colspan="3">Total</td>
            <td>180 €, $42</td>
        </tr>
    </tbody>
</table>
]]>
        </content>
        
            
                <category term="planeta-codigo"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/</id>
        <title>Nube privada para documentos personales con Nextcloud y OnlyOffice</title>
        <updated>2019-12-05T12:00:00+01:00</updated>
        <published>2019-12-05T12:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Empresas como Google ofrecen servicios gratuitos que los usuarios pueden utilizar, algunos de ellos a cambio de entregrarles documentos con información personal con la consiguiente potencial pérdida de privacidad. Algunos de estos servicios son sustituibles con alternativas como Nextcloud y OnlyOffice que permiten a sus usuarios ser dueños de su información ya sea utilizando una Raspberry Pi como servidor que debe ser administrada o incluso en la nube con servicios como DigitalOcean o AWS.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/nextcloud.svg" width="200" height="141" alt="Nextcloud" title="Nextcloud"  class=""></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/onlyoffice.svg" width="200" height="186" alt="OnlyOffice" title="OnlyOffice"  class=""></p>
</div>
<p>Una cuenta de Google da acceso a múltiples servicios gratuitos, útiles y con un servicio más que correcto. Algunas de estos servicios está el de correo electrónico de <a href="https://www.google.com/intl/es/gmail/about/">GMail</a>, la sincronización y unidad de documentos de <a href="https://www.google.es/drive/apps.html">Google Drive</a>, calendario para apuntar citas y recordatorios con <a href="https://www.google.com/calendar/about/">Google Calendar</a>, el acceso a la <em>suite</em> ofimática colaborativa <a href="https://www.google.es/intl/es/docs/about/">Google Docs</a> o fotos con <a href="https://www.google.com/photos/about/">Google Photos</a>. Estos son los servicios que uso de Google por su comodidad.</p>
<p>Los servicios en la nube permiten guardar los documentos e información fuera del dispositivo donde se usen, esto permite tener sincronizados y compartir todos los documentos entre varios dispositivos como el ordenador personal en casa, tener disponibles los documentos en el ordenador del trabajo y en un dispositivo móvil como un <em>smartphone</em> en cualquier lugar. El problema de los servicios en la nube es que no somos realmente propietarios de nuestra información y documentos, son entregados a esos servicios como los de Google, esto genera una pérdida de privacidad sin ser conscientes de los usos que le pueda dar Google. Para proteger nuestra privacidad hay alternativas para disponer de nuestra propia nube que proporcione la mayoría de estos servicios.</p>
<p><a href="https://nextcloud.com/">Nextcloud</a> es un software que permite alojar en nuestro propio servidor nuestros documentos sustituyendo a varios de los servicios de Google. Nextcloud permite almacenar archivos y documentos ofimáticos, fotos, música, calendarios, un visor de PDF, editor de <em>markdown</em>, gestor de tareas o nuestros contactos. Permite complementos con los que añadir las funcionalidad que necesitemos como un reproductor de música o un paquete ofimático con <a href="https://www.onlyoffice.com/es/">OnlyOffice</a> que sustituya a Google Docs.</p>
<p>Una <a href="https://www.raspberrypi.org/">Raspberry Pi 4</a> o una de sus <a href="https://picodotdev.github.io/blog-bitix/2018/03/7-plus-computadoras-baratas-del-tamano-de-una-tarjeta-de-credito-basadas-en-gnu-linux-y-arm/">7 computadoras alternativas</a> similares es una buena opción como servidor por su pequeño tamaño, bajo consumo, totalmente silencioso con un recomendable disipador pasivo y suficiente para ejecutar con normalidad Nextcloud con los 4 GiB de memoria del modelo con más capacidad. Hay <a href="https://picodotdev.github.io/blog-bitix/2018/03/7-plus-computadoras-baratas-del-tamano-de-una-tarjeta-de-credito-basadas-en-gnu-linux-y-arm/">otras placas similares</a> o incluso se puede utilizar un <a href="https://picodotdev.github.io/blog-bitix/2018/11/desempaquetado-intel-nuc-nuc8i5bek-bean-canyon-hyperx-impact-ram-y-samsung-970-evo-nvme-ssd/">Intel NUC</a> que permiten más cantidad de memoria y sus procesadores son más capaces. Para una nube privada una Raspberry Pi es interesante por su pequeño tamaño y bajo consumo eléctrico dado que su funcionamiento sería constante.</p>
<div class="media media-amazon">
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07TC2BK1X&amp;linkId=6e87726b77e92056e7ac168add1bc747" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07XNVPK8X&amp;linkId=bef0fad42b2cc046799c66f7fa220c0f" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B073JWXGNT&amp;linkId=d64d66fda7d25defd2018c4119aa7e46" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B014I8U33I&amp;linkId=df5c52be4ca21b9991d26145edb0b642" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07VMXHJ4Q&amp;linkId=39ee0802cdc202ce8259d463b59224ed" title="Amazon" class="lozad"></iframe>
</div>
<p>Usando <a href="https://www.docker.com/">Docker</a> y el <a href="https://github.com/ONLYOFFICE/docker-onlyoffice-nextcloud">repositorio de GitHub</a> es sencillo iniciar el servidor de Nextcloud realizando los siguientes pasos.</p>
<ul>
<li>Instalar Docker.</li>
<li>Descargar o clonar el repositorio de GitHub.</li>
<li>Iniciar con Docker Compose los contenedores de Nextcloud y OnlyOffice.</li>
<li>Acceder <em>http://localhost</em> y realizar la configuración inicial, introducir el usuario y contraseña de administrador.</li>
<li>Ejecutar <em>bash set_configuration.sh</em>.</li>
<li>Añadir el complemento de OnlyOffice.</li>
<li>Acceder a <em>http://localhost</em>.</li>
</ul>
<p>Este archivo de Docker Compose incluye Nextcloud con OnlyOffice sin usar una base de datos externa.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">app</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">app-server</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">nextcloud:fpm</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">stdin_open</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">tty</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">always</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">expose</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s1">&#39;80&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s1">&#39;9000&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">volumes</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">app_data:/var/www/html</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">onlyoffice-document-server</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">onlyoffice-document-server</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">onlyoffice/documentserver:latest</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">stdin_open</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">tty</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">always</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">expose</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s1">&#39;80&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s1">&#39;443&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">volumes</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">document_data:/var/www/onlyoffice/Data</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">document_log:/var/log/onlyoffice</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">nginx</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">nginx-server</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">stdin_open</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">tty</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">always</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">ports</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="m">80</span><span class="p">:</span><span class="m">80</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="m">443</span><span class="p">:</span><span class="m">443</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">volumes</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">./nginx.conf:/etc/nginx/nginx.conf</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">app_data:/var/www/html</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">volumes</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">document_data</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">document_log</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">app_data</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">mysql_data</span><span class="p">:</span><span class="w">&#10;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-compose.yml</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker-compose up&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-compose-up.sh</span>
    </div>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-configuracion_hu7348f075c395873d91de02a5fb57b540_592428_2560x1440_fit_box_3.png" data-gallery="" title="Configuración de Nextcloud"><img src="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-configuracion_hu7348f075c395873d91de02a5fb57b540_592428_300x200_fit_box_3.png" width="300" height="198" alt="Configuración de Nextcloud" title="Configuración de Nextcloud"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-inicio_hu8b8d704537521248ed406d67202f5cb8_498606_2560x1440_fit_box_3.png" data-gallery="" title="Inicio de Nextcluod"><img src="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-inicio_hu8b8d704537521248ed406d67202f5cb8_498606_300x200_fit_box_3.png" width="300" height="198" alt="Inicio de Nextcluod" title="Inicio de Nextcluod"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-archivos_hu0e5f45861c65c3026f8a6d9908487425_77402_2560x1440_fit_box_3.png" data-gallery="" title="Archivos en Nextcloud"><img src="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-archivos_hu0e5f45861c65c3026f8a6d9908487425_77402_300x200_fit_box_3.png" width="300" height="198" alt="Archivos en Nextcloud" title="Archivos en Nextcloud"  class="lozad "></a></p>
<figcaption>Configuración y archivos en Nextcloud</figcaption>
</figure>
</div>
<p><a href="https://picodotdev.github.io/blog-bitix/2016/05/4-opciones-ofimaticas-alternativas-gratuitas-a-microsoft-office/">OnlyOffice es un paquete ofimático alternativa a Microsoft Office</a> que ofrece un editor de documentos de texto, una hoja de cálculo y una aplicación para realizar presentaciones integrables en Nextcloud. Son aplicaciones con menos opciones que las ofrecidas por Microsoft Office pero suficientes para un uso sencillo, también dispone de una versión como aplicaciones de escritorio.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-onlyoffice-documento_hu75d514e1af687067042b36db0d8cca97_82529_2560x1440_fit_box_3.png" data-gallery="" title="Documento con OnlyOffice"><img src="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-onlyoffice-documento_hu75d514e1af687067042b36db0d8cca97_82529_300x200_fit_box_3.png" width="300" height="198" alt="Documento con OnlyOffice" title="Documento con OnlyOffice"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-onlyoffice-hoja-de-calculo_hu1e880885d1b87bcaeedc67cdcf30656f_90253_2560x1440_fit_box_3.png" data-gallery="" title="Hola de cálculo con OnlyOffice"><img src="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-onlyoffice-hoja-de-calculo_hu1e880885d1b87bcaeedc67cdcf30656f_90253_300x200_fit_box_3.png" width="300" height="198" alt="Hola de cálculo con OnlyOffice" title="Hola de cálculo con OnlyOffice"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-onlyoffice-presentacion_huf80b231b0357f81b45055c61fc87e78a_89511_2560x1440_fit_box_3.png" data-gallery="" title="Presentación con OnlyOffice"><img src="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-onlyoffice-presentacion_huf80b231b0357f81b45055c61fc87e78a_89511_300x200_fit_box_3.png" width="300" height="198" alt="Presentación con OnlyOffice" title="Presentación con OnlyOffice"  class="lozad "></a></p>
<figcaption>Ofimática con OnlyOffice y Nextcloud alternativa a Google Docs</figcaption>
</figure>
</div>
<p>Otras utilidades es un reproductor de música, calendario o galería de fotos, hay un complemento para añadir estas funcionalidades.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-visor-pdf_hu9c375447dbaadb6118d44af382ae6dc2_244274_2560x1440_fit_box_3.png" data-gallery="" title="Visor de documento PDF"><img src="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-visor-pdf_hu9c375447dbaadb6118d44af382ae6dc2_244274_300x200_fit_box_3.png" width="300" height="198" alt="Visor de documento PDF" title="Visor de documento PDF"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-calendario_hua3364b511a687c3dd051fba1e58308cd_55308_2560x1440_fit_box_3.png" data-gallery="" title="Calendario"><img src="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-calendario_hua3364b511a687c3dd051fba1e58308cd_55308_300x200_fit_box_3.png" width="300" height="198" alt="Calendario" title="Calendario"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-visor-fotos_hu8fa48cc6dd28b15761dd535ce8c3e54c_529797_2560x1440_fit_box_3.png" data-gallery="" title="Visor de fotos"><img src="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-visor-fotos_hu8fa48cc6dd28b15761dd535ce8c3e54c_529797_300x200_fit_box_3.png" width="300" height="198" alt="Visor de fotos" title="Visor de fotos"  class="lozad "></a></p>
<figcaption>Aplicaciones y complementos</figcaption>
</figure>
</div>
<p>Con <a href="https://en.wikipedia.org/wiki/WebDAV">WebDAV</a> los documentos son accesibles como si fuese una unidad local proporcionando la misma funcionalidad de Google Drive. En GNOME con el explorador de archivos Nautilus es posible conectarse a dispositivo WebDAV, en el caso de Nextcloud la dirección es <em>dav://localhost/remote.php/dav/files/admin</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-webdav_hu654eea6c2f2a8913b74ce780deb20881_51637_2560x1440_fit_box_3.png" data-gallery="" title="Archivos en el explorador de archivos Nautilus con WebDAV"><img src="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-webdav_hu654eea6c2f2a8913b74ce780deb20881_51637_300x200_fit_box_3.png" width="289" height="200" alt="Archivos en el explorador de archivos Nautilus con WebDAV" title="Archivos en el explorador de archivos Nautilus con WebDAV"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-administracion_hub414e9a557d957a8ac86576d54dc2a39_111099_2560x1440_fit_box_3.png" data-gallery="" title="Opciones de administración"><img src="https://picodotdev.github.io/blog-bitix/2019/12/nube-privada-para-documentos-personales-con-nextcloud-y-onlyoffice/images/nextcloud-administracion_hub414e9a557d957a8ac86576d54dc2a39_111099_300x200_fit_box_3.png" width="251" height="200" alt="Opciones de administración" title="Opciones de administración"  class="lozad "></a></p>
<figcaption>Archivos en el explorador de archivos Nautilus con WebDAV y opciones de administración</figcaption>
</figure>
</div>
<p>Con las <a href="https://nextcloud.com/install/#">aplicaciones para <em>smatphone</em></a> los documentos quedan accesibles en cualquier lugar teniendo un dispositivo móvil, <em>smartphone</em> o tableta. Tener una nube propia que esté accesible en internet hace necesario tener un dominio propio, añadir seguridad para lo que es necesario configurar Nextcloud de modo que utilice el protocolo seguro que cifre las comunicaciones con TLS, esto requiere obtener <a href="https://picodotdev.github.io/blog-bitix/2014/02/generar-y-convertir-claves-y-certificados-con-openssl/">un certificado autofirmado</a> al menos o mejor obteniéndolo de <a href="https://letsencrypt.org/">Let&rsquo;s Encrypt</a>, que proporciona certificados de forma automatizada y gratuita. Otra medida para aumentar la seguridad es utilizar un segundo factor de autenticación o <em>2FA</em>.</p>
<p>Hay <a href="https://github.com/nextcloud/docker/blob/master/.examples/docker-compose/with-nginx-proxy/postgres/fpm/docker-compose.yml">ejemplo de archivo de Docker Compose para tener Nextcloud con un certificado</a> creado y renovado de forma automática con Let&rsquo;s Encrypt a través del contenedor <a href="https://github.com/JrCs/docker-letsencrypt-nginx-proxy-companion">jrcs/letsencrypt-nginx-proxy-companion</a> y configurando las variables de entorno <em>LETSENCRYPT_HOST</em>, <em>LETSENCRYPT_EMAIL</em> con el dominio propio para Nextcloud y un correo electrónico.</p>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/series/docker/">Serie de artículos sobre Docker</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="planeta-codigo"/>
            
                <category term="software"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2019/10/microservicios-con-spring-cloud-consul-nomad-y-traefik/</id>
        <title>Microservicios con Spring Cloud, Consul, Nomad y Traefik</title>
        <updated>2020-03-11T11:00:00+01:00</updated>
        <published>2019-10-12T02:30:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2019/10/microservicios-con-spring-cloud-consul-nomad-y-traefik/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Sin entrar a si los microservicios son adecuados o no son adecuados en una aplicación, está claro que si se utilizan estos tienen varias necesidades. Un servicio de registro y descubrimiento, configuración centralizada, tolerancia a fallos, <em>gateway/load balancer/reverse proxy</em>, trazabilidad y métricas, autenticación, orquestación, &hellip; Los microservicios quizá no sean un gran monolito, quizá mas pequeños y con funcinalidad más acotada, pero el hecho de que se comuniquen a través de un medio más complejo y menos fiable como la red en vez de una llamada a un método y sean más numerosos hacen que la complejidad sea incluso mayor. Este artículo propone un ejemplo con Spring Cloud para los servicios, Consul para el registro y descubrimiento, Nomad para la orquestación y Traefik como <em>gateway</em>.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/java.svg" width="200" height="366" alt="Java" title="Java"  class=""></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/spring.svg" width="200" height="200" alt="Spring" title="Spring"  class=""></p>
</div>
<p>En otro artículo mostraba un ejemplo de <a href="https://picodotdev.github.io/blog-bitix/2018/09/registro-y-descubrimiento-de-servicios-con-spring-cloud-netflix/">microservicios con Spring Cloud</a> usando únicamente herramientas de <a href="https://spring.io/">Spring</a>. Cada una de esas herramientas cubren una funcionalidad que necesitan los microservicios. Entre ellas:</p>
<ul>
<li>Registro y descubrimiento, con <a href="https://github.com/Netflix/eureka">Eureka</a>. Los microservicios son numerosos, de vida efímera creándose y destruyéndose en diferentes ubicaciones por lo tanto necesitan una forma de localizarse unos a otros, la forma para encontrarse es acudiendo a un servicio donde se registran cuando se inician y se descubren cuando necesitan la ubicación de otro servicio.</li>
<li>Configuración centralizada, con <a href="https://cloud.spring.io/spring-cloud-config/">Spring Cloud Config</a>. Dado el número de microservicios actualizar la configuración de cada uno de ellos puede ser un problema, además dado que se pueden iniciar en diferentes ubicaciones aprovisionarles la configuración adecuada es un reto. En vez de aprovisionar la configuración otra técnica es hacer que cuando se inicien la obtengan de un servicio donde queda centralizada la configuración.</li>
<li>Tolerancia a fallos, con <a href="https://github.com/Netflix/Hystrix">Hyxtrix</a> y <a href="https://github.com/resilience4j/resilience4j">Resilience4j</a>. El medio de comunicación de los microservicios es a través de la red un medio mucho menos confiable que una llamada a un método en un lenguaje de programación en una aplicación monolítica. De modo que los microservicios han de estar preparados para tolerar fallos en sus comunicaciones con otros servicios.</li>
<li><em>Gateway</em>, <em>load balancer</em> y <em>reverse proxy</em> con tolerancia a fallos, con <a href="https://github.com/Netflix/zuul">Zuul</a>. Para aumentar la disponibilidad, escalabilidad y tolerar fallos en algunos servicios se suelen crear varias instancias de cada microservicio pero tener varias instancias hace que sea necesario balancear la carga entre cada una de las instancias. Para que los clientes sean agnósticos del número de instancias se emplea un <em>gateway</em> que proporciona balanceo de carga e implementa a su vez patrones de tolerancia a fallos.</li>
<li>Trazabilidad y correlación de trazas entre diferentes servicios, con <a href="https://spring.io/projects/spring-cloud-sleuth">Spring Cloud Sleuth</a>. Una petición puede desencadenar una cadena de peticiones entre diferentes servicios ubicados en múltiples nodos, para tareas de diagnóstico en caso de querer investigar un <em>bug</em> o que ha ocurrido es necesario correlacionar todas las trazas que ha desencadenado una petición, se implementa asignado un identificativo global a la petición que es transmitido en las llamadas de microservicio a microservicio.</li>
</ul>
<p>En otro <a href="https://picodotdev.github.io/blog-bitix/2019/02/servidor-oauth-gateway-y-servicio-rest-utilizando-tokens-jwt-con-spring/">ejemplo sobre OAuth con Spring</a> mostraba otra funcionalidad:</p>
<ul>
<li><em>Gateway</em>, con <a href="https://spring.io/projects/spring-cloud-gateway">Spring Cloud Gateway</a>.</li>
<li>Autenticación y autorización, con <a href="https://spring.io/projects/spring-security-oauth">Spring Security OAuth</a>.</li>
</ul>
<p>Los microservicios también necesitan monitorización y métricas, en el ejemplo <a href="https://picodotdev.github.io/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/">Monitorizar una aplicación Java de Spring Boot con Micrometer, Prometheus y Grafana</a>:</p>
<ul>
<li>Con <a href="https://prometheus.io/">Prometheus</a> y <a href="https://grafana.com/">Grafana</a>. Nuevamente el número de instancias que requiere una arquitectura orientada a microservicios origina la necesidad en mayor medida de conocer el estado del sistema, ya sean métricas de los sistemas como uso de CPU, memoria o almacenamiento o de la aplicación como peticiones por segundo y porcentaje de correctas e incorrectas.</li>
</ul>
<p>En esta lista falta un orquestador para el despliegue de los microservicios, que se encargue de su ciclo de vida, escalado de instancias y despliegue con estrategias <em>rolling</em>, <em>blue/green</em> y <em>canary</em>. Es una cosa que le faltaba al ejemplo de microservicios con Spring Cloud.</p>
<ul>
<li>Orquestador de servicios, con <a href="https://www.nomadproject.io/">Nomad</a>. <a href="https://picodotdev.github.io/blog-bitix/2019/04/introduccion-a-nomad-para-gestionar-aplicaciones-y-microservicios/">Introducción a Nomad para gestionar aplicaciones y microservicios</a>, <a href="https://picodotdev.github.io/blog-bitix/2019/04/estrategias-de-despliegue-para-microservicios-con-nomad/">Estrategias de despliegue para microservicios con Nomad</a>.</li>
</ul>
<p>Además, en este ejemplo reemplazo varias de estas herramientas de Spring. Sustituyo el servicio de registro y descubrimiento proporcionado por Eureka por <a href="https://www.consul.io/">Consul</a>, el <em>gateway</em>, <em>load balancer</em> y <em>reverse proxy</em> proporcionado por Zuul por <a href="https://traefik.io/">Traefik</a> y añado el orquestador de microservicios <a href="https://www.nomadproject.io/">Nomad</a>.</p>
<div class="media">
<figure>
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/hashicorp-consul.svg" width="200" height="200" alt="Traefik" title="Traefik"  class="lozad ">
<img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/hashicorp-nomad.svg" width="200" height="200"  class="lozad ">
<img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/traefik.svg" width="200" height="200"  class="lozad "></p>
</figure>
</div>
<p>Traefik se configura con los servicios iniciados en los contenedores de Docker utilizando junto con los bloques o <em>stanzas</em> de <em>config</em> y <em>tags</em> en la definición de los servicios de Nomad. Según el criterio definido por el servicio Traefik es capaz de redirigir el tráfico que le llegue al servicio apropiado, entre las posibilidades que puede realizar Traefik es balanceo de carga entre las múltiples instancias que se hayan definido pero también implementa patrones de tolerancia a fallos con reintentos, el patrón <em>circuit breaker</em> o limitar el tráfico para evitar saturar a un servicio con demasiadas peticiones.</p>
<p>El esquema de servicios sería el siguiente. Los <em>job</em> son enviados a Nomad desde la linea de comandos que inicia los contenedores en Docker y registra los servicios en Consul, Traefik monitoriza el catálogo de servicios registrados en Consul y se autoconfigura según los <em>tags</em> asociados a los servicios, los <em>tags</em> se especificar en los archivos de los servicios para Nomad. Una vez iniciados los servicios desde la terminal con un <em>curl</em> o desde la aplicación cliente que accede a Consul para conocer la ubicación del servicio de Traefik envían una petición a Traefik que haciendo balanceo de carga la reenvía a una de las instancias del servicio, el servicio responde y Traefik envía la respuesta al cliente.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2019/10/microservicios-con-spring-cloud-consul-nomad-y-traefik/images/esquema-arquitectura_hu4a60e9874e21fb74b7496e4608f1c5ff_356960_2560x1440_fit_box_3.png" data-gallery="" title="Esquema arquitectura"><img src="https://picodotdev.github.io/blog-bitix/2019/10/microservicios-con-spring-cloud-consul-nomad-y-traefik/images/esquema-arquitectura_hu4a60e9874e21fb74b7496e4608f1c5ff_356960_600x450_fit_box_3.png" width="600" height="382" alt="Esquema arquitectura" title="Esquema arquitectura"  class="lozad "></a></p>
<figcaption>Esquema arquitectura</figcaption>
</figure>
</div>
<p>La ejecución del ejemplo requiere <a href="https://www.docker.com/">Docker</a> ya que es en este caso el <em>driver</em> empleado en Nomad para ejecutar los servicios del servicio de configuración, el <em>gateway</em>, el servicio y el cliente del servicio. Nomad además se encarga de registrar los servicios en el servicio de registro y descubrimiento de Consul.</p>
<p>Los contenedores de Docker se añade a una misma red para que puedan comunicarse entre ellos, ha de ser así hasta que no se resuelva una <a href="https://github.com/docker/for-linux/issues/264">petición de Docker para que los contenedores puedan comunicarse con la máquina <em>host</em></a> que los alberga.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker network create --subnet 172.30.0.0/16 nomad&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-network-create.sh</span>
    </div>
</div>
<p>Posteriormente hay que ejecutar Consul y Nomad tras lo cual se puede acceder a sus consolas de estado.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ consul agent -dev -ui -client<span class="o">=</span>0.0.0.0&#10;</span></span><span class="line"><span class="cl">$ nomad agent -dev&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>nomad-consul-run.sh</span>
    </div>
</div>
<p>Enviar a Nomad los <em>job</em> de Traefik tras lo cual se puede acceder a su consola de estado. El siguiente paso es enviar el <em>job</em> del servicio que proporciona la configuración a los microservicios. Lo anterior únicamente es infraestructura aún no hay ningún servicio que proporcione alguna funcionalidad, la funcionalidad que proporciona el servicio implementado con Spring es simplemente devolver un mensaje como respuesta a la petición que se le realice, se envía el <em>job</em> del servicio a Nomad. Finalmente, el servicio es consumido por un cliente que realiza una petición al servicio cada 1 segundo.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ./gradlew assemble&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">$ nomad job run nomad/traefik.nomad&#10;</span></span><span class="line"><span class="cl">$ nomad job run nomad/configserver.nomad&#10;</span></span><span class="line"><span class="cl">$ nomad job run nomad/service.nomad&#10;</span></span><span class="line"><span class="cl">$ nomad job run nomad/client.nomad</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>nomad-job-run.sh</span>
    </div>
</div>
<p>Definición de un servicio en un <em>job</em> para Nomad. <em>count</em> define cuantas instancias del servicio se inicia, la <em>stanza</em> <em>update</em> define como será la actualización cuando se actualice el servicio, la <em>stanza</em> <em>labels</em> contiene la configuración para Traefik, <em>check</em> define los parámetros para la monitorización.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span><span class="lnt">43&#10;</span><span class="lnt">44&#10;</span><span class="lnt">45&#10;</span><span class="lnt">46&#10;</span><span class="lnt">47&#10;</span><span class="lnt">48&#10;</span><span class="lnt">49&#10;</span><span class="lnt">50&#10;</span><span class="lnt">51&#10;</span><span class="lnt">52&#10;</span><span class="lnt">53&#10;</span><span class="lnt">54&#10;</span><span class="lnt">55&#10;</span><span class="lnt">56&#10;</span><span class="lnt">57&#10;</span><span class="lnt">58&#10;</span><span class="lnt">59&#10;</span><span class="lnt">60&#10;</span><span class="lnt">61&#10;</span><span class="lnt">62&#10;</span><span class="lnt">63&#10;</span><span class="lnt">64&#10;</span><span class="lnt">65&#10;</span><span class="lnt">66&#10;</span><span class="lnt">67&#10;</span><span class="lnt">68&#10;</span><span class="lnt">69&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-hcl" data-lang="hcl"><span class="line"><span class="cl"><span class="k">job</span> <span class="s2">&#34;service&#34;</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">  datacenters</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;dc1&#34;</span><span class="p">]</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">  <span class="k">group</span> <span class="s2">&#34;service&#34;</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;count</span> <span class="o">=</span> <span class="m">2</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">update</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  max_parallel</span>&nbsp;&nbsp;&nbsp;&nbsp;  <span class="o">=</span> <span class="m">1</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  health_check</span>&nbsp;&nbsp;&nbsp;&nbsp;  <span class="o">=</span> <span class="s2">&#34;checks&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  min_healthy_time</span>  <span class="o">=</span> <span class="s2">&#34;20s&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  healthy_deadline</span>  <span class="o">=</span> <span class="s2">&#34;10m&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  progress_deadline</span> <span class="o">=</span> <span class="s2">&#34;20m&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  canary</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">=</span> <span class="m">1</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  stagger</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   <span class="o">=</span> <span class="s2">&#34;15s&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">task</span> <span class="s2">&#34;service&#34;</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  driver</span> <span class="o">=</span> <span class="s2">&#34;docker&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">config</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image</span> <span class="o">=</span> <span class="s2">&#34;openjdk:11-jdk&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;args</span> <span class="o">=</span> <span class="p">[</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="s2">&#34;bash&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="s2">&#34;-c&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &#34;(cd /app &amp;&amp; java -jar /app/service/build/libs/service-1.0.jar --port</span><span class="o">=</span><span class="m">8080</span><span class="p">)</span><span class="err">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">]</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">port_map</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  http</span> <span class="o">=</span> <span class="s2">&#34;8080&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;network_mode</span> <span class="o">=</span> <span class="s2">&#34;nomad&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extra_hosts</span> <span class="o">=</span> <span class="p">[</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="s2">&#34;traefik:172.30.0.3&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">]</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;volumes</span> <span class="o">=</span> <span class="p">[</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="s2">&#34;/home/picodotdev/Software/personal/blog-ejemplos/SpringCloudConsulNomadTraefik/:/app&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">]</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">service</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span> <span class="o">=</span> <span class="s2">&#34;service&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;port</span> <span class="o">=</span> <span class="s2">&#34;http&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">check</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  type</span>&nbsp;&nbsp;&nbsp;&nbsp; <span class="o">=</span> <span class="s2">&#34;http&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  port</span>&nbsp;&nbsp;&nbsp;&nbsp; <span class="o">=</span> <span class="s2">&#34;http&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  path</span>&nbsp;&nbsp;&nbsp;&nbsp; <span class="o">=</span> <span class="s2">&#34;/actuator/health&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  interval</span> <span class="o">=</span> <span class="s2">&#34;5s&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  timeout</span>  <span class="o">=</span> <span class="s2">&#34;2s&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tags</span> <span class="o">=</span> <span class="p">[</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &#34;traefik.http.middlewares.service1-stripprefix.stripprefix.prefixes</span><span class="o">=</span><span class="err">/</span><span class="k">service</span><span class="err">&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &#34;traefik.http.middlewares.service1-retry.retry.attempts</span><span class="o">=</span><span class="m">10</span><span class="err">&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &#34;traefik.http.routers.service1.middlewares</span><span class="o">=</span><span class="k">service1</span><span class="err">-</span><span class="k">stripprefix</span><span class="p">,</span><span class="k">service1</span><span class="err">-</span><span class="k">retry</span><span class="err">&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &#34;traefik.http.routers.service1.rule</span><span class="o">=</span><span class="k">PathPrefix</span><span class="p">(</span><span class="err">`/</span><span class="k">service</span><span class="err">`</span><span class="p">)</span><span class="err">&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &#34;traefik.http.services.service1.loadbalancer.server.port</span><span class="o">=</span><span class="m">8080</span><span class="err">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">]</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">resources</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpu</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">=</span> <span class="m">200</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memory</span> <span class="o">=</span> <span class="m">1024</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">network</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  mbits</span> <span class="o">=</span> <span class="m">20</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">port</span> <span class="s2">&#34;http&#34;</span> {}&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">  }&#10;</span></span><span class="line"><span class="cl">}</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>service.nomad</span>
    </div>
</div>
<p>Tanto Consul, Nomad como Traefik ofrecen una consola para ver su estado ubicadas en las siguientes direcciones respectivamente accesibles con el navegador <em>http://127.0.0.1:8500</em>, <em>http://127.0.0.1:4646</em>, <em>http://127.0.0.1:8092</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2019/10/microservicios-con-spring-cloud-consul-nomad-y-traefik/images/consul_hud3df5263e4ff8422559f6f7fab94c175_89169_2560x1440_fit_box_3.png" data-gallery="" title="Consul"><img src="https://picodotdev.github.io/blog-bitix/2019/10/microservicios-con-spring-cloud-consul-nomad-y-traefik/images/consul_hud3df5263e4ff8422559f6f7fab94c175_89169_200x150_fit_box_3.png" width="160" height="150" alt="Consul" title="Consul"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2019/10/microservicios-con-spring-cloud-consul-nomad-y-traefik/images/nomad-1_hu7dea68e7f0ccfcb1f8f0def4178aee0e_68294_2560x1440_fit_box_3.png" data-gallery="" title="Nomad"><img src="https://picodotdev.github.io/blog-bitix/2019/10/microservicios-con-spring-cloud-consul-nomad-y-traefik/images/nomad-1_hu7dea68e7f0ccfcb1f8f0def4178aee0e_68294_200x150_fit_box_3.png" width="160" height="150" alt="Nomad" title="Nomad"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2019/10/microservicios-con-spring-cloud-consul-nomad-y-traefik/images/nomad-2_hu8ddf74c95bb84f5e3e2ed8d218a76259_132025_2560x1440_fit_box_3.png" data-gallery="" title="Nomad"><img src="https://picodotdev.github.io/blog-bitix/2019/10/microservicios-con-spring-cloud-consul-nomad-y-traefik/images/nomad-2_hu8ddf74c95bb84f5e3e2ed8d218a76259_132025_200x150_fit_box_3.png" width="160" height="150" alt="Nomad" title="Nomad"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2019/10/microservicios-con-spring-cloud-consul-nomad-y-traefik/images/traefik-1_hu3af731e91707f43f4848927f9f158b51_144944_2560x1440_fit_box_3.png" data-gallery="" title="Traefik"><img src="https://picodotdev.github.io/blog-bitix/2019/10/microservicios-con-spring-cloud-consul-nomad-y-traefik/images/traefik-1_hu3af731e91707f43f4848927f9f158b51_144944_200x150_fit_box_3.png" width="160" height="150" alt="Traefik" title="Traefik"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2019/10/microservicios-con-spring-cloud-consul-nomad-y-traefik/images/traefik-2_huaf1df74fbd86c4da2a3168542bc294a4_157667_2560x1440_fit_box_3.png" data-gallery="" title="Traefik"><img src="https://picodotdev.github.io/blog-bitix/2019/10/microservicios-con-spring-cloud-consul-nomad-y-traefik/images/traefik-2_huaf1df74fbd86c4da2a3168542bc294a4_157667_200x150_fit_box_3.png" width="160" height="150" alt="Traefik" title="Traefik"  class="lozad "></a></p>
<figcaption>Consolas de administración de Consul, Nomad y Traefik</figcaption>
</figure>
</div>
<p>El código del servicio, del cliente implementados con Spring y la salida del cliente son los siguientes.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.springcloud.service</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="nd">@RestController</span>&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DefaultController</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Autowired</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="n">DefaultConfiguration</span> <span class="n">configuration</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Autowired</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="n">Tracing</span> <span class="n">tracing</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Autowired</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="n">Tracer</span> <span class="n">tracer</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="n">Random</span> <span class="n">random</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="n">Counter</span> <span class="n">counter</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="nf">DefaultController</span><span class="o">(</span><span class="n">MeterRegistry</span> <span class="n">registry</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">this</span><span class="o">.</span><span class="na">random</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Random</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">this</span><span class="o">.</span><span class="na">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="o">.</span><span class="na">builder</span><span class="o">(</span><span class="s">&#34;service.invocations&#34;</span><span class="o">).</span><span class="na">description</span><span class="o">(</span><span class="s">&#34;Total service invocations&#34;</span><span class="o">).</span><span class="na">register</span><span class="o">(</span><span class="n">registry</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">&#34;/&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="n">String</span> <span class="nf">home</span><span class="o">(</span><span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">counter</span><span class="o">.</span><span class="na">increment</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// Timeout simulation&#10;</span></span></span><span class="line"><span class="cl"><span class="c1"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">//Thread.sleep(random.nextInt(4000));&#10;</span></span></span><span class="line"><span class="cl"><span class="c1"></span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">TraceContext</span><span class="o">.</span><span class="na">Extractor</span><span class="o">&lt;</span><span class="n">HttpServletRequest</span><span class="o">&gt;</span> <span class="n">extractor</span> <span class="o">=</span> <span class="n">tracing</span><span class="o">.</span><span class="na">propagation</span><span class="o">().</span><span class="na">extractor</span><span class="o">((</span><span class="n">HttpServletRequest</span> <span class="n">carrier</span><span class="o">,</span> <span class="n">String</span> <span class="n">key</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="k">return</span> <span class="n">carrier</span><span class="o">.</span><span class="na">getHeader</span><span class="o">(</span><span class="n">key</span><span class="o">);</span> <span class="o">});</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Span</span> <span class="n">span</span> <span class="o">=</span> <span class="n">tracer</span><span class="o">.</span><span class="na">nextSpan</span><span class="o">(</span><span class="n">extractor</span><span class="o">.</span><span class="na">extract</span><span class="o">(</span><span class="n">request</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;Service Span (traceId: %s, spanId: %s)%n&#34;</span><span class="o">,</span> <span class="n">span</span><span class="o">.</span><span class="na">context</span><span class="o">().</span><span class="na">traceIdString</span><span class="o">(),</span> <span class="n">span</span><span class="o">.</span><span class="na">context</span><span class="o">().</span><span class="na">spanIdString</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;Hello world (url: %s, remoteAddress_%s, localAddress: %s, traceId: %s, spanId: %s, key: %s)&#34;</span><span class="o">,</span> <span class="n">request</span><span class="o">.</span><span class="na">getRequestURL</span><span class="o">(),</span> &#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">request</span><span class="o">.</span><span class="na">getRemoteAddr</span><span class="o">(),</span> <span class="n">request</span><span class="o">.</span><span class="na">getLocalAddr</span><span class="o">(),</span> <span class="n">span</span><span class="o">.</span><span class="na">context</span><span class="o">().</span><span class="na">traceIdString</span><span class="o">(),</span> <span class="n">span</span><span class="o">.</span><span class="na">context</span><span class="o">().</span><span class="na">spanIdString</span><span class="o">(),</span> <span class="n">configuration</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>DefaultController.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span><span class="lnt">43&#10;</span><span class="lnt">44&#10;</span><span class="lnt">45&#10;</span><span class="lnt">46&#10;</span><span class="lnt">47&#10;</span><span class="lnt">48&#10;</span><span class="lnt">49&#10;</span><span class="lnt">50&#10;</span><span class="lnt">51&#10;</span><span class="lnt">52&#10;</span><span class="lnt">53&#10;</span><span class="lnt">54&#10;</span><span class="lnt">55&#10;</span><span class="lnt">56&#10;</span><span class="lnt">57&#10;</span><span class="lnt">58&#10;</span><span class="lnt">59&#10;</span><span class="lnt">60&#10;</span><span class="lnt">61&#10;</span><span class="lnt">62&#10;</span><span class="lnt">63&#10;</span><span class="lnt">64&#10;</span><span class="lnt">65&#10;</span><span class="lnt">66&#10;</span><span class="lnt">67&#10;</span><span class="lnt">68&#10;</span><span class="lnt">69&#10;</span><span class="lnt">70&#10;</span><span class="lnt">71&#10;</span><span class="lnt">72&#10;</span><span class="lnt">73&#10;</span><span class="lnt">74&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.springcloud.client</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="nd">@Component</span>&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ProxyService</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Autowired</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="n">LoadBalancerClient</span> <span class="n">loadBalancer</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Autowired</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="n">Tracing</span> <span class="n">tracing</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Autowired</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="n">Tracer</span> <span class="n">tracer</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="n">CircuitBreakerConfig</span> <span class="n">circuitBreakerConfiguration</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="n">TimeLimiterConfig</span> <span class="n">timeLimiterConfiguration</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="n">HttpClient</span> <span class="n">client</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="nf">ProxyService</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">circuitBreakerConfiguration</span> <span class="o">=</span> <span class="n">CircuitBreakerConfig</span><span class="o">.</span><span class="na">custom</span><span class="o">()</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">failureRateThreshold</span><span class="o">(</span><span class="n">50</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">recordExceptions</span><span class="o">(</span><span class="n">IOException</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">TimeoutException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">build</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">timeLimiterConfiguration</span> <span class="o">=</span> <span class="n">TimeLimiterConfig</span><span class="o">.</span><span class="na">custom</span><span class="o">()</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">timeoutDuration</span><span class="o">(</span><span class="n">Duration</span><span class="o">.</span><span class="na">ofMillis</span><span class="o">(</span><span class="n">2500</span><span class="o">))</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">cancelRunningFuture</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">build</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">client</span> <span class="o">=</span> <span class="n">HttpClient</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">version</span><span class="o">(</span><span class="n">HttpClient</span><span class="o">.</span><span class="na">Version</span><span class="o">.</span><span class="na">HTTP_2</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="n">String</span> <span class="nf">get</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">ServiceInstance</span> <span class="n">instance</span> <span class="o">=</span> <span class="n">loadBalancer</span><span class="o">.</span><span class="na">choose</span><span class="o">(</span><span class="s">&#34;traefik&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">URI</span> <span class="n">uri</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="na">getUri</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">String</span> <span class="n">resource</span> <span class="o">=</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;%s%s&#34;</span><span class="o">,</span> <span class="n">uri</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">replace</span><span class="o">(</span><span class="s">&#34;127.0.0.1&#34;</span><span class="o">,</span> <span class="s">&#34;traefik&#34;</span><span class="o">),</span> <span class="s">&#34;/service&#34;</span><span class="o">);</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">HttpRequest</span><span class="o">.</span><span class="na">Builder</span> <span class="n">r</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">try</span> <span class="o">{</span> &#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">r</span> <span class="o">=</span> <span class="n">HttpRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">(</span><span class="k">new</span> <span class="n">URI</span><span class="o">(</span><span class="n">resource</span><span class="o">)).</span><span class="na">GET</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">getFallback</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">final</span> <span class="n">HttpRequest</span><span class="o">.</span><span class="na">Builder</span> <span class="n">request</span> <span class="o">=</span> <span class="n">r</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Span</span> <span class="n">span</span> <span class="o">=</span> <span class="n">tracer</span><span class="o">.</span><span class="na">newTrace</span><span class="o">().</span><span class="na">start</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">TraceContext</span><span class="o">.</span><span class="na">Injector</span><span class="o">&lt;</span><span class="n">HttpRequest</span><span class="o">.</span><span class="na">Builder</span><span class="o">&gt;</span> <span class="n">injector</span> <span class="o">=</span> <span class="n">tracing</span><span class="o">.</span><span class="na">propagation</span><span class="o">().</span><span class="na">injector</span><span class="o">((</span><span class="n">HttpRequest</span><span class="o">.</span><span class="na">Builder</span> <span class="n">carrier</span><span class="o">,</span> <span class="n">String</span> <span class="n">key</span><span class="o">,</span> <span class="n">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="n">carrier</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span> <span class="o">});</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">injector</span><span class="o">.</span><span class="na">inject</span><span class="o">(</span><span class="n">span</span><span class="o">.</span><span class="na">context</span><span class="o">(),</span> <span class="n">request</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;Client Span (traceId: %s, spanId: %s)%n&#34;</span><span class="o">,</span> <span class="n">span</span><span class="o">.</span><span class="na">context</span><span class="o">().</span><span class="na">traceIdString</span><span class="o">(),</span> <span class="n">span</span><span class="o">.</span><span class="na">context</span><span class="o">().</span><span class="na">spanIdString</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">CircuitBreaker</span> <span class="n">circuitBreaker</span> <span class="o">=</span> <span class="n">CircuitBreaker</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">&#34;resilience4jCircuitBreakerProxyService&#34;</span><span class="o">,</span> <span class="n">circuitBreakerConfiguration</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">TimeLimiter</span> <span class="n">timeLimiter</span> <span class="o">=</span> <span class="n">TimeLimiter</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">timeLimiterConfiguration</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Supplier</span><span class="o">&lt;</span><span class="n">CompletableFuture</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">get</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">CompletableFuture</span><span class="o">.</span><span class="na">supplyAsync</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">try</span> <span class="o">{</span> &#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">HttpResponse</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">build</span><span class="o">(),</span> <span class="n">HttpResponse</span><span class="o">.</span><span class="na">BodyHandlers</span><span class="o">.</span><span class="na">ofString</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="na">body</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">getFallback</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">});</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">};</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">getLimiter</span> <span class="o">=</span> <span class="n">TimeLimiter</span><span class="o">.</span><span class="na">decorateFutureSupplier</span><span class="o">(</span><span class="n">timeLimiter</span><span class="o">,</span> <span class="n">get</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">getCircuitBreaker</span> <span class="o">=</span> <span class="n">CircuitBreaker</span><span class="o">.</span><span class="na">decorateCallable</span><span class="o">(</span><span class="n">circuitBreaker</span><span class="o">,</span> <span class="n">getLimiter</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">Try</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">getCircuitBreaker</span><span class="o">::</span><span class="n">call</span><span class="o">).</span><span class="na">recover</span><span class="o">((</span><span class="n">throwable</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">getFallback</span><span class="o">()).</span><span class="na">get</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="n">String</span> <span class="nf">getFallback</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="s">&#34;Fallback&#34;</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>ProxyService.java</span>
    </div>
</div>
<p>Como hay 2 instancias del servicio y Traefik realiza balanceo de carga utilizando el algoritmo <em>round robbin</em> se observa en la salida con las respuestas que la dirección IP que ha atendido la petición es alternativamente una de las dos instancias del servicio.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">...&#10;</span></span><span class="line"><span class="cl">Service response: Hello world (url: http://172.30.0.3/, remoteAddress_172.30.0.3, localAddress: 172.30.0.4, traceId: 63afa4d0cd4f466c, spanId: 4719dfcc16b6104e, key: value)&#10;</span></span><span class="line"><span class="cl">Client Span (traceId: 57eeaa436aa09238, spanId: 57eeaa436aa09238)&#10;</span></span><span class="line"><span class="cl">Service response: Hello world (url: http://172.30.0.3/, remoteAddress_172.30.0.3, localAddress: 172.30.0.5, traceId: 57eeaa436aa09238, spanId: 26dc213be2d933ac, key: value)&#10;</span></span><span class="line"><span class="cl">Client Span (traceId: 23c748bf222052a6, spanId: 23c748bf222052a6)&#10;</span></span><span class="line"><span class="cl">Service response: Hello world (url: http://172.30.0.3/, remoteAddress_172.30.0.3, localAddress: 172.30.0.4, traceId: 23c748bf222052a6, spanId: 0404d949c6e04c18, key: value)&#10;</span></span><span class="line"><span class="cl">Client Span (traceId: c45d66a4ec9cf14c, spanId: c45d66a4ec9cf14c)&#10;</span></span><span class="line"><span class="cl">Service response: Hello world (url: http://172.30.0.3/, remoteAddress_172.30.0.3, localAddress: 172.30.0.5, traceId: c45d66a4ec9cf14c, spanId: e7f6ccf2efb8234b, key: value)&#10;</span></span><span class="line"><span class="cl">Client Span (traceId: 2fdb3b71a682d2e6, spanId: 2fdb3b71a682d2e6)&#10;</span></span><span class="line"><span class="cl">Service response: Hello world (url: http://172.30.0.3/, remoteAddress_172.30.0.3, localAddress: 172.30.0.4, traceId: 2fdb3b71a682d2e6, spanId: 24ac2a8d2bfb1e6e, key: value)&#10;</span></span><span class="line"><span class="cl">Client Span (traceId: a33b010e02709c6a, spanId: a33b010e02709c6a)&#10;</span></span><span class="line"><span class="cl">Service response: Hello world (url: http://172.30.0.3/, remoteAddress_172.30.0.3, localAddress: 172.30.0.5, traceId: a33b010e02709c6a, spanId: 0abe6074fc277af6, key: value)&#10;</span></span><span class="line"><span class="cl">...</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System.out</span>
    </div>
</div>
<p>En un momento posterior si surge la necesidad de querer desplegar una nueva versión del microservicio basta con generar de nuevo el artefacto del microservicio, cambiando la versión en el archivo <em>build.gradle</em>. El despliegue de la nueva versión se realizan mediante la estrategia <em>canary</em>, manteniendo las instancias con la versión anterior del servicio y añadiendo una nueva con la nueva versión. Si se descubre algún error en la instancia <em>canary</em> se puede revertir el estado a la versión anterior, que consiste en detener la instancia <em>canary</em>. Una vez se comprueba que la instancia con la nueva versión funciona correctamente analizando sus trazas y métricas se envía la order a Nomad de promocionar las instancias de forma progresiva con la versión antigua a la nueva versión.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ nomad job run nomad/service.nomad&#10;</span></span><span class="line"><span class="cl">$ nomad job promote service&#10;</span></span><span class="line"><span class="cl">$ nomad job revert service <span class="m">0</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>nomad-job-promote.sh</span>
    </div>
</div>
<p>El servicio exporta métricas en formato para Prometheus que con Grafana. Según se realizan peticiones al servicio el valor de métrica de contador de llamadas al servicio aumenta de forma progresiva.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ curl http://127.0.0.1:8093/service/actuator/prometheus <span class="p">|</span> grep <span class="s2">&#34;service.invocations&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># HELP service_invocations_total Total service invocations</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># TYPE service_invocations_total counter</span>&#10;</span></span><span class="line"><span class="cl">service_invocations_total 20.0&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>service-prometheus.sh</span>
    </div>
</div>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/SpringCloudConsulNomadTraefik">código fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub y probarlo en tu equipo ejecutando siguiente comando:<br><code>./run.sh</code></p>
</div>
]]>
        </content>
        
            
                <category term="java"/>
            
                <category term="planeta-codigo"/>
            
                <category term="programacion"/>
            
                <category term="software"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/</id>
        <title>Hemeroteca #14</title>
        <updated>2018-12-30T19:00:00+01:00</updated>
        <published>2018-12-30T19:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        
        <![CDATA[<p>Casi 9 años publicando de forma constante un artículo a la semana, dos artículos algunas semanas. Durante casi está década creo que ha habido pocas semanas en las que no he publicado. Este último años no ha sido distinto, el siguiente espero&hellip; espero que sea parecido o mejor ahora que tengo mi propio equipo personal que he estado mucho tiempo esperando hasta que fuese comercializado, un <a href="https://picodotdev.github.io/blog-bitix/2018/11/desempaquetado-intel-nuc-nuc8i5bek-bean-canyon-hyperx-impact-ram-y-samsung-970-evo-nvme-ssd/">Intel NUC Bean Canyon</a> del que en este semestre he publicado un artículo con de su desempaquetado junto con otros artículos del <a href="https://picodotdev.github.io/blog-bitix/2018/10/desempaquetado-y-analisis-de-monitor-benq-pd2700q-2k-qhd-ips-27-pulgadas/">monitor BenQ PD2700Q</a> y <a href="https://picodotdev.github.io/blog-bitix/2018/09/desempaquetado-y-analisis-de-teclado-y-raton-inalambrico-v7-ckw200/">teclado ratón</a> pero también comentando las opciones que he barajado.</p>
<p>Casi 9 años publicando artículos algunos mejor que otros pero siempre intentando compartir lo que sé o voy aprendiendo, para llegar a esta cifra hay que tener constancia para llegar a escribir tanto tiempo, dedicación, no abandonar fácil para no empezar una cosa y dejarlo al cabo de poco e incluso de publicar aún cuando el ánimo no es el de los mejores momentos, planificación y organización para saber que publicar, tiempo ya que cuesta escribir los artículos, motivación y perseverancia para tener más visitas, comentarios de algunos usuarios, más ingresos de AdSense, compartir, &hellip; No es fácil, en mi caso sabiendo que mucho de lo que escribo no lo aplico en el trabajo, donde actualmente tengo un Mac por obligación y no trabajo con Java y mis temas principales son GNU/Linux y Java, con lo que a veces tengo la sensación de no serme útil. Al finalizar este 2018 ya van 371 artículos publicados desde finales del 2013 que empecé a hacerlo en Blog Bitix.</p>
<p>Ahora que tengo mi propio equipo y como de nuevo estoy usando <a href="https://www.archlinux.org/">Arch Linux</a> podré publicar más artículos sobre <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a>, he empezado por publicar como jugar a <a href="https://eu.diablo3.com/es/">Diablo 3</a> u otros juegos de <a href="https://www.blizzard.com/es-es/">Blizzard</a> en Linux con <a href="https://www.winehq.org/">Wine</a>.</p>
<p>Durante <a href="https://picodotdev.github.io/blog-bitix/2018/">el año 2018 he escrito múltiples artículos</a> y este semestre he escrito varios relacionados con el ordenador que necesitaba y finalmente he comprado al final de año pero del que había noticias desde muchos meses antes, la espera de varios meses hasta que se comercializase se me hizo larga.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/09/desempaquetado-y-analisis-de-teclado-y-raton-inalambrico-v7-ckw200/">Desempaquetado y análisis de teclado y ratón inalámbrico V7 CKW200</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/10/desempaquetado-y-analisis-de-monitor-benq-pd2700q-2k-qhd-ips-27-pulgadas/">Desempaquetado y análisis de monitor BenQ PD2700Q 2K/QHD, IPS, 27 pulgadas</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/11/desempaquetado-intel-nuc-nuc8i5bek-bean-canyon-hyperx-impact-ram-y-samsung-970-evo-nvme-ssd/">Desempaquetado Intel NUC8i5BEK (Bean Canyon), HyperX Impact (RAM) y Samsung 970 EVO NVMe (SSD)</a></li>
</ul>
<p>He completado con algún artículo más la <a href="https://picodotdev.github.io/blog-bitix/series/graphql/">serie sobre GraphQL</a>.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/08/el-editor-explorador-e-ide-graphiql-para-una-api-con-graphql/">El editor, explorador e IDE GraphiQL para una API con GraphQL</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/08/usando-directivas-en-graphql/">Usando directivas en GraphQL</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/08/los-fragmentos-en-graphql/">Los fragmentos en GraphQL</a></li>
</ul>
<p>También he escrito varios artículos de la serie sobre <a href="https://picodotdev.github.io/blog-bitix/series/spring-cloud/">Spring Cloud</a> para escribir microservicios en Java.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/08/aplicaciones-basadas-en-microservicios/">Aplicaciones basadas en microservicios</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/09/registro-y-descubrimiento-de-servicios-con-spring-cloud-netflix/">Registro y descubrimiento de servicios con Spring Cloud Netflix</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/09/servicio-de-configuracion-para-microservicios-con-spring-cloud-config/">Servicio de configuración para microservicios con Spring Cloud Config</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/09/almacenar-cifrados-los-valores-de-configuracion-sensibles-en-spring-cloud-config/">Almacenar cifrados los valores de configuración sensibles en Spring Cloud Config</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/10/tolerancia-a-fallos-en-un-cliente-de-microservicio-con-spring-cloud-netflix-y-hystrix/">Tolerancia a fallos en un cliente de microservicio con Spring Cloud Netflix y Hystrix</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/10/balanceo-de-carga-y-resiliencia-en-un-microservicio-con-spring-cloud-netflix-y-ribbon/">Balanceo de carga y resiliencia en un microservicio con Spring Cloud Netflix y Ribbon</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/10/proxy-para-microservicios-con-spring-cloud-netflix-y-zuul/">Proxy para microservicios con Spring Cloud Netflix y Zuul</a></li>
</ul>
<p>Algunos pocos artículos sobre GNU/Linux.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/07/como-recuperar-arch-linux-despues-de-una-actualizacion-que-provoca-el-sistema-no-inicie/">Como recuperar Arch Linux después de una actualización que provoca el sistema no inicie</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/09/el-editor-de-archivos-e-ide-minimalista-visual-studio-code/">El editor de archivos e IDE minimalista Visual Studio Code</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/09/el-comando-fork-bomb-explicado/">El comando fork bomb explicado</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/11/flatpak-distribucion-e-instalacion-de-programas-de-escritorio-en-las-distribuciones-gnu-linux/">Flatpak, distribución e instalación de programas de escritorio en las distribuciones GNU/Linux</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/">Cómo usar Wine para jugar en GNU/Linux a Diablo 3 u otros juegos de Blizzard o Windows</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/12/monitorizar-procesos-que-realizan-lectura-o-escritura-al-almacenamiento-en-gnu-linux/">Monitorizar procesos que realizan lectura o escritura al almacenamiento en GNU/Linux</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/12/permitir-o-denegar-trafico-de-red-con-el-firewall-ufw-en-gnu-linux/">Permitir o denegar tráfico de red con el firewall UFW en GNU/Linux</a></li>
</ul>
<p>Sobre Java o programación algunos más.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/07/que-es-un-sut-fake-stub-mock-y-spy-en-las-pruebas-con-un-ejemplo/">Qué es un SUT, fake, stub, mock y spy en las pruebas con un ejemplo</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/07/pruebas-funcionales-con-geb-en-una-aplicacion-web-java/">Pruebas funcionales con Geb en una aplicación web Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/07/la-libreria-log4j-para-emitir-trazas-en-aplicaciones-java/">La librería Log4j para emitir trazas en aplicaciones Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/07/identificar-todas-las-trazas-de-una-peticion-en-una-aplicacion-web-java-con-log4j/">Identificar todas las trazas de una petición en una aplicación web Java con Log4j</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/08/personalizar-el-mensaje-emitido-de-un-objeto-en-log4j/">Personalizar el mensaje emitido de un objeto en Log4j</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/09/recargar-la-configuracion-sin-reiniciar-una-aplicacion-spring-boot-con-spring-cloud-config/">Recargar sin reiniciar la configuración de una aplicación Spring Boot con Spring Cloud Config</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/09/novedades-y-nuevas-caracteristicas-de-java-11/">Novedades y nuevas características de Java 11</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/10/ejemplo-sencillo-de-como-leer-datos-de-un-archivo-excel-o-csv-en-java/">Ejemplo sencillo de cómo leer datos de un archivo Excel o CSV en Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/11/formatear-con-color-sentencias-sql-o-codigo-fuente-en-la-terminal-con-java-y-jansi/">Formatear con color sentencias SQL o código fuente en la terminal con Java y Jansi</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/11/novedades-de-java-ee-8/">Novedades de Java EE 8</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/12/monitorizar-una-aplicacion-java-de-spring-boot-con-micrometer-prometheus-y-grafana/">Monitorizar una aplicación Java de Spring Boot con Micrometer, Prometheus y Grafana</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/12/exponer-las-metricas-de-hystrix-en-grafana-con-prometheus-de-una-aplicacion-spring-boot/">Exponer las métricas de Hystrix en Grafana con Prometheus de una aplicación Spring Boot</a></li>
</ul>
<p>Y varios de opinión o noticias relevantes como la caída de <a href="https://es.wikipedia.org/wiki/Sun_Microsystems">Sun</a> hace ya años o la compra de <a href="https://www.redhat.com/es">Red Hat</a> por parte de <a href="https://www.ibm.com/us-en/">IBM</a>.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/07/sobre-la-venta-entre-particulares-de-ebay-milanuncios-y-wallapop/">Sobre la venta entre particulares de eBay, milanuncios y Wallapop</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/08/despues-de-la-guerra-del-numero-de-nucleos-en-los-procesadores-vendra-la-guerra-de-la-computacion-heterogenea-o-manycores/">Después de la guerra del número de núcleos en los procesadores, ¿vendrá la guerra de la computación heterogénea o manycores?</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/08/sobre-las-competiciones-deportivas-de-videojuegos-o-esports/">Sobre las competiciones deportivas de videojuegos o eSports</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/10/sun-microsystems-cae-la-adquiere-oracle/">Sun Microsystems cae, la adquiere Oracle</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/10/ibm-adquiere-red-hat-el-gigante-de-linux-y-codigo-abierto/">IBM adquiere Red Hat, el gigante de Linux y código abierto</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/11/el-agotamiento-de-direcciones-ipv4-y-el-protocolo-de-internet-ipv6/">El agotamiento de direcciones IPv4 y el protocolo de internet IPv6</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/">Artículo #6 de Yo apoyo al software libre</a></li>
</ul>
<p>Revisando los artículos que he publicado en <a href="https://picodotdev.github.io/blog-bitix/series/hemeroteca/">otras hemerotecas</a> hay algunos que parece no los haya escrito hace 2 y 3 años sino mucho menos. El crecimiento tanto en visitas como en ingresos no ha sido tanto como años anteriores, supongo que ya llegado un cierto umbral es difícil conservar los mismos ratios de crecimiento. Todos estos nuevos artículos es nuevo contenido que hace que reciba algunas visitas más y que los ingresos sean algo mayores. Dependiendo de si miro en Analytics o AdSense unas 520K páginas vistas este 2018 no muchas más que las casi 500K del 2017. En cualquier caso en las siguientes imágenes están las estadísticas de este blog por si a alguien le sirven para comparar con el suyo o como previsión de una web similar, a mi me servirá para consultarlo en un futuro y ver la evolución de los datos, también el tiempo necesario para conseguirlo o el número de artículos requeridos.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/analytics-2018_hu2ada8cebf2023f92a50bb99f47b93326_64912_2560x1440_fit_box_3.png" data-gallery="" title="Analytics 2018 de Blog Bitix"><img src="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/analytics-2018_hu2ada8cebf2023f92a50bb99f47b93326_64912_600x450_fit_box_3.png" width="600" height="254" alt="Analytics 2018 de Blog Bitix" title="Analytics 2018 de Blog Bitix"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-2018_hu636faed4932c19361f2f0a556d5002dc_32098_2560x1440_fit_box_3.png" data-gallery="" title="AdSense 2018 de Blog Bitix"><img src="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-2018_hu636faed4932c19361f2f0a556d5002dc_32098_600x450_fit_box_3.png" width="600" height="258" alt="AdSense 2018 de Blog Bitix" title="AdSense 2018 de Blog Bitix"  class="lozad "></a></p>
<figcaption>Evolución visitas e ingresos en 2018</figcaption>
</figure>
</div>
<p>Incluyo además algunas métricas que proporciona AdSense de RPM, clics y CPC. Este final de año ha sido especialmente bueno con la semana del <em>black friday</em> como punto álgido llegando casi a 70 € en un mes, en todo el año han sido casi 500 € contra los 450 € del 2017.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-ingresos-2018_hu1b9e049b82ca37c55653dc9f7f608567_86318_2560x1440_fit_box_3.png" data-gallery="" title="Ingresos 2018 de Blog Bitix"><img src="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-ingresos-2018_hu1b9e049b82ca37c55653dc9f7f608567_86318_300x200_fit_box_3.png" width="113" height="200" alt="Ingresos 2018 de Blog Bitix" title="Ingresos 2018 de Blog Bitix"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-paginas-vistas-2018_hu9af27ceaf50279e6f09b10b7794973eb_87876_2560x1440_fit_box_3.png" data-gallery="" title="Páginas vistas 2018 de Blog Bitix"><img src="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-paginas-vistas-2018_hu9af27ceaf50279e6f09b10b7794973eb_87876_300x200_fit_box_3.png" width="113" height="200" alt="Páginas vistas 2018 de Blog Bitix" title="Páginas vistas 2018 de Blog Bitix"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-clics-2018_hued0fc56ac5576d06747e659b90f243e1_85483_2560x1440_fit_box_3.png" data-gallery="" title="Clics 2018 de Blog Bitix"><img src="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-clics-2018_hued0fc56ac5576d06747e659b90f243e1_85483_300x200_fit_box_3.png" width="113" height="200" alt="Clics 2018 de Blog Bitix" title="Clics 2018 de Blog Bitix"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-crt-2018_hua934a19f5a838277c977312945230d48_84813_2560x1440_fit_box_3.png" data-gallery="" title="CRT 2018 de Blog Bitix"><img src="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-crt-2018_hua934a19f5a838277c977312945230d48_84813_300x200_fit_box_3.png" width="113" height="200" alt="CRT 2018 de Blog Bitix" title="CRT 2018 de Blog Bitix"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-cpc-2018_hu5dd2148119d9c65dff7097ef6269582d_77672_2560x1440_fit_box_3.png" data-gallery="" title="CPC 2018 de Blog Bitix"><img src="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-cpc-2018_hu5dd2148119d9c65dff7097ef6269582d_77672_300x200_fit_box_3.png" width="113" height="200" alt="CPC 2018 de Blog Bitix" title="CPC 2018 de Blog Bitix"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-rpm-2018_hu9d3b8ec4b7a7f5b5a4f8281d0b22755b_80426_2560x1440_fit_box_3.png" data-gallery="" title="RPM 2018 de Blog Bitix"><img src="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-rpm-2018_hu9d3b8ec4b7a7f5b5a4f8281d0b22755b_80426_300x200_fit_box_3.png" width="113" height="200" alt="RPM 2018 de Blog Bitix" title="RPM 2018 de Blog Bitix"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-tipos-de-puja-2018_hufd652d0bb9a4a214cdee3c8d07383e3c_22630_2560x1440_fit_box_3.png" data-gallery="" title="Tipos de puja 2018 de Blog Bitix"><img src="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-tipos-de-puja-2018_hufd652d0bb9a4a214cdee3c8d07383e3c_22630_300x200_fit_box_3.png" width="273" height="200" alt="Tipos de puja 2018 de Blog Bitix" title="Tipos de puja 2018 de Blog Bitix"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-plataformas-2018_hu3c48376a2ee051ee4cfb9dd80dd68b49_21354_2560x1440_fit_box_3.png" data-gallery="" title="Plataformas 2018 de Blog Bitix"><img src="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/gadsense-plataformas-2018_hu3c48376a2ee051ee4cfb9dd80dd68b49_21354_300x200_fit_box_3.png" width="274" height="200" alt="Plataformas 2018 de Blog Bitix" title="Plataformas 2018 de Blog Bitix"  class="lozad "></a></p>
<figcaption>Métricas de AdSense</figcaption>
</figure>
</div>
<p>Además, de AdSense incluyo enlaces de Amazon de algunos productos que compro y de los que publico algún artículo. Este año a través de los enlaces de afiliado de Amazon ha facturado a través de ellos casi 900 € y he recibido a cambio 50 € en comisiones.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/amazon-2018_hu745a46ebc42e3ba687315a0ce1b2c13d_83793_2560x1440_fit_box_3.png" data-gallery="" title="Facturación e ingresos Amazon"><img src="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/amazon-2018_hu745a46ebc42e3ba687315a0ce1b2c13d_83793_600x450_fit_box_3.png" width="600" height="430" alt="Facturación e ingresos Amazon" title="Facturación e ingresos Amazon"  class="lozad "></a></p>
</figure>
</div>
<p>Como siempre mis deseos de que empecéis bien el nuevo año, en este caso el 2019, ¡buen 2019!.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/christmas-tux-2018_hu95daf3122e4db98487c9042ab621eb95_564556_2560x1440_fit_q90_box.jpg" data-gallery="" title="Christmas Tux 2018"><img src="https://picodotdev.github.io/blog-bitix/2018/12/hemeroteca-14/images/christmas-tux-2018_hu95daf3122e4db98487c9042ab621eb95_564556_600x450_fit_q90_box.jpg" width="600" height="338" alt="Christmas Tux 2018" title="Christmas Tux 2018"  class="lozad "></a></p>
<figcaption>¡Buen 2019! <br>Fuente: klowner.com</figcaption>
</figure>
</div>
]]>
        </content>
        
            
                <category term="gnu-linux"/>
            
                <category term="java"/>
            
                <category term="opinion"/>
            
                <category term="planeta-codigo"/>
            
                <category term="programacion"/>
            
                <category term="software"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2018/12/permitir-o-denegar-trafico-de-red-con-el-firewall-ufw-en-gnu-linux/</id>
        <title>Permitir o denegar tráfico de red con el firewall UFW en GNU/Linux</title>
        <updated>2018-12-24T13:00:00+01:00</updated>
        <published>2018-12-24T13:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2018/12/permitir-o-denegar-trafico-de-red-con-el-firewall-ufw-en-gnu-linux/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/gnu.svg" width="200" height="196" alt="GNU" title="GNU"  class=""></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/linux.svg" width="200" height="232" alt="Linux" title="Linux"  class=""></p>
</div>
<p>Un cortafuegos o <em>firewall</em> hace que un sistema sea más seguro analizando todo el tráfico de red que se recibe y envía impidiéndolo o permitiéndolo según las reglas que se hayan definido. Aunque los <em>routers</em> con los que nos conectamos a internet también hacen la función de <em>firewall</em> es aconsejable instalar un cortafuegos en cada sistema, sobre todo en sistemas portátiles que podemos conectar a redes WIFI ajenas a las que pueden conectarse al mismo tiempo otros muchos usuarios que desconocemos.</p>
<p>En <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> un <em>firewall</em> con el que las reglas de tráfico de red se puede definir de forma sencilla es <em>Uncomplicated Firewall</em> o UFW. En la distribución <a href="https://www.archlinux.org/">Arch Linux</a> hay que instalar su paquete y habilitarlo para que se inicie con el sistema.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># pacman -S ufw</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>pacman.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># systemctl enable ufw.service</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># ufw enable</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>ufw-enable.sh</span>
    </div>
</div>
<p>En la <a href="https://wiki.archlinux.org/">wiki de Arch Linux</a> hay una buena página explicativa de su uso.</p>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/Uncomplicated_Firewall">Arch Linux Wiki Uncomplicated Firewall</a></li>
</ul>
<p>Instalado y activado hay que definir las reglas de tráfico permitidas. Por defecto, se deniega el tŕafico proveniente de un sistema que no sea el local. Por ejemplo, con el cortafuegos activado para que un servidor web sea accesible desde otro equipo en la misma red o desde internet hay crear una regla que permita todo el tráfico entrante los puertos por defecto <em>80</em> para <em>http</em> y <em>443</em> para <em>https</em>.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ufw allow 80/tcp</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># ufw allow 443/tcp</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>ufw-allow-1.sh</span>
    </div>
</div>
<p>Para permitir acceso al servidor web únicamente desde la red local a la que está conectado el equipo hay que indicar la dirección IP de la red, los casos habituales son <em>192.168.0.0/24</em> o <em>192.168.1.0/24</em>. En vez de usar la directiva <em>allow</em> se puede emplear la directiva <em>deny</em> para denegar el tráfico.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ufw allow from 192.168.1.0/24 to any port 80 proto tcp</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># ufw allow from 192.168.1.0/24 to any port 443 proto tcp</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>ufw-allow-2.sh</span>
    </div>
</div>
<p>Definidas algunas reglas se pueden listar y de forma numerada en el caso de querer eliminar alguna.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ufw status</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># ufw status numbered</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>ufw-status-1.sh</span>
    </div>
</div>
<p>Para eliminar reglas hay que hacerlo según su número de la lista anterior.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ufw delete 1</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>ufw-delete.sh</span>
    </div>
</div>
<p>Ciertas aplicaciones usan un puerto conocido como el ejemplo de servidor web en el puerto <em>443</em> o <em>80</em>, SSH en el <em>22</em> o descarga y compartición de archivos mediante P2P por Bittorrent que dependiendo de la aplicación se usa uno u otro, en el caso de <a href="https://transmissionbt.com/">Transmission</a> es <em>51413</em>. Sabiendo la aplicación para la que se quiere permitir el tráfico no es necesario conocer su puerto, ufw ya incorpora varias aplicaciones conocidas que se listan y activan con un comando.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ufw app list</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>ufw-app-list.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ufw allow Transmission</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># ufw allow from 192.168.1.0/24 to any app &#34;WWW&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># ufw allow from 192.168.1.0/24 to any app &#34;WWW Secure&#34;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>ufw-app-allow.sh</span>
    </div>
</div>
<p>En el caso de este ejemplo se permite el tráfico para la aplicación Transmission desde cualquier ordenador y a las aplicaciones de servidor web tanto en el puerto seguro como inseguro y en el puerto <em>8080</em> que usan algunos servidores de aplicaciones limitando su acceso únicamente desde la red local.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ufw status</span>&#10;</span></span><span class="line"><span class="cl">Status: active&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">To&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Action&nbsp;&nbsp;&nbsp;&nbsp;  From&#10;</span></span><span class="line"><span class="cl">--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ------&nbsp;&nbsp;&nbsp;&nbsp;  ----&#10;</span></span><span class="line"><span class="cl">Transmission&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   ALLOW&nbsp;&nbsp;&nbsp;&nbsp;   Anywhere&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &#10;</span></span><span class="line"><span class="cl">8080/tcp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   ALLOW&nbsp;&nbsp;&nbsp;&nbsp;   192.168.1.0/24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span><span class="line"><span class="cl">WWW Secure&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ALLOW&nbsp;&nbsp;&nbsp;&nbsp;   192.168.1.0/24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span><span class="line"><span class="cl">WWW&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ALLOW&nbsp;&nbsp;&nbsp;&nbsp;   192.168.1.0/24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span><span class="line"><span class="cl">Transmission <span class="o">(</span>v6<span class="o">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  ALLOW&nbsp;&nbsp;&nbsp;&nbsp;   Anywhere <span class="o">(</span>v6<span class="o">)</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>ufw-status-2.sh</span>
    </div>
</div>
<p>Los comandos anteriores aunque cambiando los valores de los puertos o dirección IP son suficientes para hacer un sistema más seguro no permitiendo tráfico de red y evitando que se puedan establecer conexiones desde otro sistema en la misma red de área local a ciertos puertos de red abiertos sin ser conscientes de que los están.</p>
<p>En algunos casos como usando una <a href="https://www.raspberrypi.org/">Raspberry Pi</a> sin interfaz gráfica para minimizar el consumo de recursos es necesario conocer o consultar los comandos de ufw.</p>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://help.ubuntu.com/community/UFW">Ubuntu UFW</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="gnu-linux"/>
            
                <category term="planeta-codigo"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/</id>
        <title>Artículo #6 de Yo apoyo al software libre</title>
        <updated>2018-12-07T12:00:00+01:00</updated>
        <published>2018-12-07T12:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/wine.svg" width="200" height="321" alt="Wine" title="Wine"  class=""></p>
</div>
<p>La dedicación que me exige el blog para tratar de escribir, editar y publicar al menos un artículo a la semana de forma constante sin faltar ninguna semana, últimamente estoy publicando dos, se me está recompensando en forma de superar unas pocas visitas más cada mes. Y esto también se ve reflejado en los ingresos de <a href="https://www.google.com/adsense/">AdSense</a>, ya es raro el día que no me genera al menos dos euros al día salvo los fin de semanas que puede quedarse cerca. Un buen día según el número de clics y la fortuna de que en estos el coste por clic (CPC) sea generoso los ingresos pueden llegar a entre tres y cinco euros.</p>
<p>Uno, dos o tres euros al día no parece significativo pero multiplicado por los treinta días del mes el conjunto suma entre 30 y 50 euros que creo no está nada mal. Aunque esto por supuesto no compensa la dedicación, sin embargo, con un mucho mayor número de visitas y complementándolo con otro tipo de ingresos como afiliación de <a href="https://amzn.to/2flFhHA">Amazon</a>, <a href="https://www.gearbest.com/">Gearbest</a>, <a href="https://www.pccomponentes.com/">PcComponentes</a>, etc&hellip; formación, libros, y artículos patrocinados entiendo que alguien o haya medios como <a href="https://www.xataka.com/">Xataka</a>, <a href="https://www.noticias3d.com/">Noticias 3D</a>, <a href="https://www.profesionalreview.com/">Profesional Review</a> o <a href="https://elchapuzasinformatico.com/">El chapuzas informático</a> que puedan tener unos ingresos mucho más significativos, incluídos artículos patrocinados, y pueda ser el medio de vida de los mismos a nivel individual o como organización. Según mis cálculos con 100K visitas diarias se generan 100 € diarios solo de publicidad AdSense uno podría plantearse que fuese el medio de vida de una persona, ahora bien no es fácil conseguir ese número de visitas diarias.</p>
<p>Todo esto es como introducción en que debido a estos ingresos que me genera el blog en ocasiones ya desde hace un tiempo hago una pequeña donación económica a los proyectos que me resultan de interés o he usado. En esta ocasión la donación que haré será a un proyecto dedicado a hacer posible que juegos triple A y software escrito para <a href="https://www.microsoft.com/es-es/windows/">Windows</a> sea posible utilizarlos en <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> cuando no ofrecen soporte nativo, este proyecto es <a href="https://www.winehq.org/">Wine</a>.</p>
<h3 id="wine">Wine</h3>
<p>Después de haber comprado un <a href="https://picodotdev.github.io/blog-bitix/2018/11/desempaquetado-intel-nuc-nuc8i5bek-bean-canyon-hyperx-impact-ram-y-samsung-970-evo-nvme-ssd/">Intel NUC8i5BEK</a> le he instalado <a href="https://www.archlinux.org/">Arch Linux</a> estoy jugando a <a href="https://eu.diablo3.com/es/">Diablo 3</a> en él sin ningún tipo de problema, sin cierres inesperados y con buenos fps. La gráfica <a href="https://en.wikipedia.org/wiki/Intel_Graphics_Technology#Kaby_Lake_Refresh_/_Coffee_Lake">Intel Iris 655</a> del modelo <a href="https://ark.intel.com/products/135935/Intel-Core-i5-8259U-Processor-6M-Cache-up-to-3_80-GHz">Intel Core i5-8259U</a> no es tan potente comparada con cualquier dedicada <a href="https://www.nvidia.com/es-es/">NVIDIA</a> o <a href="https://www.amd.com/es">AMD</a> pero suficiente para este juego que ya tiene unos años, si es necesario bajando la resolución o detalles gráficos.</p>
<p>Diablo 2 es uno de los últimos juegos que jugué y lo finalice por completo aunque solo con el bárbaro y solo en el primer nivel de dificultad. Lo jugué en mi antiguo AMD Athlon 1800+ y una NVIDIA GeForce 2 MX 440. Me gustan este tipo de juegos tipo RPG en que se va evolucionando y consiguiendo nuevas armas para personalizar el personaje, además posee buen argumento e historia.</p>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/">Para jugar a Diablo 3 he necesitado instalar Wine</a> y con este la aplicación de <a href="https://www.blizzard.com/es-es/apps/battle.net/desktop">Battle.net</a> para Windows e instalar Diablo 3. Blizzard ofrece el primer acto de Diablo 3 antes de comprar el juego. He podido probarlo y ver que funciona correctamente sin tener que comprarlo primero. Una vez probado que funciona es muy posible que lo compre y lo juegue completo (o esa es mi intención).</p>
<p>Wine es una implementación de la API de Windows con la que los programas de Windows pueden ser ejecutados en GNU/Linux y <a href="https://www.apple.com/macos/">macOS</a>, incluidos los juegos y su API DirectX. Y hace posible que tener Windows no sea imprescindible para determinados programas como <a href="https://products.office.com/es-es/">Microsoft Office</a> o los juegos que son algunos de los motivos por los que algunas personas siguen usando Windows en vez de pasarse definitivamente y de forma completa a GNU/Linux.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/battle-net-1_hu1af337f1f432100fe28211cfcfba345a_223158_2560x1440_fit_box_3.png" data-gallery="" title="Cliente de Battle.net"><img src="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/battle-net-1_hu1af337f1f432100fe28211cfcfba345a_223158_200x150_fit_box_3.png" width="200" height="127" alt="Cliente de Battle.net" title="Cliente de Battle.net"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/battle-net-2_huea8a38413f264d96312ce2a9693571e3_48092_2560x1440_fit_box_3.png" data-gallery="" title="Cliente de Battle.net"><img src="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/battle-net-2_huea8a38413f264d96312ce2a9693571e3_48092_200x150_fit_box_3.png" width="103" height="150" alt="Cliente de Battle.net" title="Cliente de Battle.net"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/battle-net-3_hu5f811e379f7ce2577c2a8d282c7472b1_260250_2560x1440_fit_q90_box.jpg" data-gallery="" title="Cliente de Battle.net"><img src="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/battle-net-3_hu5f811e379f7ce2577c2a8d282c7472b1_260250_200x150_fit_q90_box.jpg" width="200" height="128" alt="Cliente de Battle.net" title="Cliente de Battle.net"  class="lozad "></a></p>
<figcaption>Cliente de Battle.net</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/battle-net-4_huf11a73986e214039994ef0e7bf4a303f_266343_2560x1440_fit_q90_box.jpg" data-gallery="" title="Instalación de Diablo 3"><img src="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/battle-net-4_huf11a73986e214039994ef0e7bf4a303f_266343_200x150_fit_q90_box.jpg" width="200" height="128" alt="Instalación de Diablo 3" title="Instalación de Diablo 3"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/battle-net-5_hu0a819fe368be398b4c4d99e6162ed45b_267077_2560x1440_fit_q90_box.jpg" data-gallery="" title="Instalación de Diablo 3"><img src="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/battle-net-5_hu0a819fe368be398b4c4d99e6162ed45b_267077_200x150_fit_q90_box.jpg" width="200" height="128" alt="Instalación de Diablo 3" title="Instalación de Diablo 3"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/battle-net-6_hue446743061eb0a432b132dc6dbcf9a5e_202739_2560x1440_fit_q90_box.jpg" data-gallery="" title="Instalación de Diablo 3"><img src="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/battle-net-6_hue446743061eb0a432b132dc6dbcf9a5e_202739_200x150_fit_q90_box.jpg" width="200" height="120" alt="Instalación de Diablo 3" title="Instalación de Diablo 3"  class="lozad "></a></p>
<figcaption>Instalación de Diablo 3</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/diablo-3-1_hub14f7cad927ad832ab1c483f44c3f52b_701372_2560x1440_fit_q90_box.jpg" data-gallery="" title="Personaje de clase monje"><img src="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/diablo-3-1_hub14f7cad927ad832ab1c483f44c3f52b_701372_300x200_fit_q90_box.jpg" width="300" height="169" alt="Personaje de clase monje" title="Personaje de clase monje"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/diablo-3-2_hu77eb845d42bfd677525787845cd0f45e_640813_2560x1440_fit_q90_box.jpg" data-gallery="" title="Camino hacia Nueva Tristán"><img src="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/diablo-3-2_hu77eb845d42bfd677525787845cd0f45e_640813_300x200_fit_q90_box.jpg" width="300" height="169" alt="Camino hacia Nueva Tristán" title="Camino hacia Nueva Tristán"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/diablo-3-3_hu995bdb92e4e7ff882ec5b13fa47f4dbd_551707_2560x1440_fit_q90_box.jpg" data-gallery="" title="Jugando a Diablo 3"><img src="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/diablo-3-3_hu995bdb92e4e7ff882ec5b13fa47f4dbd_551707_200x150_fit_q90_box.jpg" width="200" height="113" alt="Jugando a Diablo 3" title="Jugando a Diablo 3"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/diablo-3-4_hu08a4565579a3291fe5a28cd7a2e12b7d_459463_2560x1440_fit_q90_box.jpg" data-gallery="" title="Jugando a Diablo 3"><img src="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/diablo-3-4_hu08a4565579a3291fe5a28cd7a2e12b7d_459463_200x150_fit_q90_box.jpg" width="200" height="113" alt="Jugando a Diablo 3" title="Jugando a Diablo 3"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/diablo-3-5_hu3f5cbd2a42cf434d3b17080246a9e1f4_630426_2560x1440_fit_q90_box.jpg" data-gallery="" title="Jugando a Diablo 3"><img src="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/diablo-3-5_hu3f5cbd2a42cf434d3b17080246a9e1f4_630426_200x150_fit_q90_box.jpg" width="200" height="113" alt="Jugando a Diablo 3" title="Jugando a Diablo 3"  class="lozad "></a></p>
<figcaption>Juego de Diablo 3</figcaption>
</figure>
</div>
<h3 id="donación">Donación</h3>
<p>La donación no es muy grande pero espero que ayude para cubrir los costes que tengan las personas que contribuyen en el desarrollo de este proyecto. La donación se puede realizar mediante el medio de pago <a href="https://www.paypal.com/">PayPal</a>. Como tenía algo de dinero acumulado de un par de artículos patrocinados que escribí he utilizado $20 de ese saldo para donar a <a href="https://www.winehq.org/">Wine</a>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/donacion-wine_hu34f8e8e6c27e406f3ed4b7a49ffbe688_74259_2560x1440_fit_box_3.png" data-gallery="" title="Donación Wine"><img src="https://picodotdev.github.io/blog-bitix/2018/12/articulo-6-de-yo-apoyo-al-software-libre/images/donacion-wine_hu34f8e8e6c27e406f3ed4b7a49ffbe688_74259_650x450_fit_box_3.png" width="318" height="450" alt="Donación Wine" title="Donación Wine"  class="lozad "></a></p>
<figcaption>Donación Wine</figcaption>
</figure>
</div>
<p>Este es el sexto artículo de esta serie de donaciones con Yo apoyo el software libre ya son unas cuantas donaciones las que he hecho, gracias también a los visitantes que llegan principalmente como resultado de una búsqueda en un buscador, en menor medida también de alguno de los que están suscritos a la <a href="https://picodotdev.github.io/blog-bitix/index.xml">fuente de artículos</a> que en el momento que publico uno nuevo si les interesa lo visitan.</p>
<table class="table">
    <thead>
        <tr class="thead-dark">
            <th colspan="4">Donaciones que he realizado hasta la última fecha</th>
        </tr>
        <tr class="thead-light">
            <th>#</th>
            <th>Fecha</th>
            <th>Proyecto</th>
            <th>Donación</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>2015/12</td>
            <td>Free Software Foundation Europe (FSFE)</td>
            <td>40 €</td>
        </tr>
        <tr>
            <td>2</td>
            <td>2016/09</td>
            <td>Wikipedia, Mozilla/Firefox</td>
            <td>10 €, 10 €</td>
        </tr>
        <tr>
            <td>3</td>
            <td>2017/01</td>
            <td>elementaryOS, Libre Office, Arch Linux ARM</td>
            <td>10 €, 10 €, 10 €</td>
        </tr>
        <tr>
            <td>4</td>
            <td>2017/05</td>
            <td>GNOME, VideoLAN (VLC), Arch Linux</td>
            <td>15,31 €, 10 €, 0,31 €</td>
        </tr>
        <tr>
            <td>5</td>
            <td>2018/01</td>
            <td>LineageOS, Replicant</td>
            <td>15 €, 15 €</td>
        </tr>
        <tr>
            <td>6</td>
            <td>2018/12</td>
            <td>Wine</td>
            <td>$20</td>
        </tr>
        <tr>
            <td>7</td>
            <td>2019/12</td>
            <td>Calibre</td>
            <td>$10</td>
        </tr>
        <tr>
            <td>8</td>
            <td>2020/12</td>
            <td>Phoronix, Mozilla/Firefox, GnuPG</td>
            <td>$12, 10 €, 10 €</td>
        </tr>
        <tr>
            <td>9</td>
            <td>2022/01</td>
            <td>KeePassXC</td>
            <td>15 €</td>
        </tr>
        <tr>
            <td colspan="3">Total</td>
            <td>180 €, $42</td>
        </tr>
    </tbody>
</table>
]]>
        </content>
        
            
                <category term="planeta-codigo"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/</id>
        <title>Cómo usar Wine para jugar en GNU/Linux a juegos de Windows</title>
        <updated>2018-10-07T16:00:00+02:00</updated>
        <published>2018-12-02T17:30:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/wine.svg" width="200" height="321" alt="Wine" title="Wine"  class=""></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/blizzard.svg" width="300" height="157" alt="Blizzard" title="Blizzard"  class=""></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/linux.svg" width="200" height="232" alt="Linux" title="Linux"  class=""></p>
</div>
<p>Desde el año 2008 que llevo utilizando <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> como único sistema operativo en mi equipo para todas las tareas que realizo nunca me he planteado jugar a juegos de primera linea o triple A. No por que no se pudiese sino porque GNU/Linux nunca ha sido considerado una opción para estos juegos, <a href="https://picodotdev.github.io/blog-bitix/series/juegos/">hay juegos sí y algunos buenos</a> pero la mayoría de los comerciales se desarrollan para ejecutarse en <a href="https://www.microsoft.com/es-es/windows/">Windows</a> o como mucho en <a href="https://www.apple.com/macos/">macOS</a> y yo ni siquiera me lo había planteado.</p>
<p>Con el último portátil que he tenido con un procesador <a href="https://ark.intel.com/es-es/products/67355/Intel-Core-i5-3210M-Processor-3M-Cache-up-to-3_10-GHz-rPGA">Intel i5-3210M</a> con una gráfica integrada <a href="https://en.wikipedia.org/wiki/Intel_Graphics_Technology#Ivy_Bridge">HD 4000</a> ya hubiese podido jugar a alguno aunque hubiese sido a una resolución no muy alta o bajando detalles gráficos. Por lo menos para jugar a unos de los juegos que siempre me ha llamado la atención en sus diferentes versiones, <a href="https://es.wikipedia.org/wiki/Diablo_%28videojuego%29">Diablo</a>, <a href="https://es.wikipedia.org/wiki/Diablo_II">Diablo 2</a> y <a href="https://es.wikipedia.org/wiki/Diablo_III">Diablo 3</a>. El primero y el segundo me los pasé en la época que jugaba más habitualmente, Diablo 2 habrá sido uno de los últimos juegos que me he pasado completos al menos con una clase de personaje.</p>
<p>Ahora que he cambiado de equipo a un <a href="https://www.intel.com/content/www/us/en/products/boards-kits/nuc/kits/nuc8i5bek.html">Intel NUC8i5BEK</a> con un procesador de 4 núcleos y 8 hilos <a href="https://ark.intel.com/products/135935/Intel-Core-i5-8259U-Processor-6M-Cache-up-to-3_80-GHz">i5-8259U</a> que aunque lleva una gráfica integrada <a href="https://en.wikipedia.org/wiki/Intel_Graphics_Technology#Kaby_Lake_Refresh_/_Coffee_Lake">Iris Graphics 655</a> ya es bastante más capaz y suficiente para jugar a Diablo 3 que es un juego del 2012. Me he planteado ahora más en serio comprobar si en GNU/Linux se puede jugar a juegos con la experiencia de que tal se puede jugar a Diablo 3.</p>
<p>Como los juegos son desarrollados para Windows hay que utilizar una capa que implementa la API de Windows para hacer funcionar los juegos en GNU/Linux, pueden ser juegos pero también programas como <a href="https://products.office.com/es-es/">Microsoft Word</a>. La capa de implementación de la API de Windows utilizada en GNU/Linux es <a href="https://www.winehq.org/">Wine</a>.</p>
<div class="alert alert-warning tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="como-instalar-wine-en-la-distribución-gnulinux">Como instalar Wine en la distribución GNU/Linux</h3>
<p>Como siempre he empezado por leer el artículo de la <a href="https://wiki.archlinux.org/index.php/Wine">wiki de Arch Linux dedicado a Wine</a> pra ver que paquetes son necesarios instalar además del repositorio <em>multilib</em> y que información contiene, en un primer momento hay que habilitar el repositorio <em>multilib</em> con implementaciones de librerías de 32 bits. Para juegos la opción recomendable es <a href="https://www.archlinux.org/packages/multilib/x86_64/wine-staging/">wine-staging</a> que contiene los últimos parches añadidos, <a href="https://www.archlinux.org/packages/multilib/x86_64/wine/">wine</a> es una versión más estable pero con una cadencia de versiones más lenta que no tiene los últimos parches. También son necesarios los <a href="https://www.archlinux.org/packages/multilib/x86_64/lib32-mesa/">controladores gráficos de 32 bits de la tarjeta</a>, en este caso de Intel. Y el sistema de sonido para 32 bits, si no se instala <a href="https://www.archlinux.org/packages/multilib/x86_64/lib32-libpulse/">lib32-libpulse</a>  en la terminal aparecen mensajes de que no se encuentra las librerías <em>libpulse.so.0</em> y <em>libpulse.so.2</em>. <a href="https://www.archlinux.org/packages/multilib/x86_64/wine_gecko/">wine_gecko</a> y <a href="https://www.archlinux.org/packages/community/any/wine-mono/">wine-mono</a> son unos requerimientos de Wine y los programas Windows.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># pacman -S wine-staging lib32-mesa lib32-libpulse wine_gecko wine-mono</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>install-wine.sh</span>
    </div>
</div>
<p>En otras distribuciones como Ubuntu basta con instalar su paquete desde la linea de comandos o con el centro de software.</p>
<h3 id="instalar-un-programa-y-juego-de-windows-con-wine-battlenet-y-diablo-3">Instalar un programa y juego de Windows con Wine, Battle.net y Diablo 3</h3>
<p>Por otro lado Wine posee una <a href="https://appdb.winehq.org/">base de datos con información de compatibilidad y estabilidad</a> de programas Windows sobre Wine en GNU/Linux. <a href="https://eu.diablo3.com/es/">Diablo 3</a> es un juego de <a href="https://www.blizzard.com/es-es/">Blizzard</a> que posee un sistema con una aplicación propia para descargar, instalar y controlar el uso adecuado del juego, la aplicación es <a href="https://www.blizzard.com/es-es/apps/battle.net/desktop">Battle.net</a> con la que se pueden instalar <a href="http://eu.blizzard.com/es-es/games/">todos los juegos de este estudio</a>. Para obtenerla hay que registrarse como usuario y una vez registrados se puede descargar el cliente que es un archivo ejecutable de Windows <em>.exe</em> que hay que ejecutar con Wine.</p>
<ul>
<li><a href="https://worldofwarcraft.com/">World of Warcraft</a> y <a href="https://eu.blizzard.com/es-es/games/war3/">Warcraft III</a></li>
<li><a href="https://eu.diablo3.com/es/">Diablo 3</a></li>
<li><a href="https://playoverwatch.com/">Overwatch</a></li>
<li><a href="https://eu.battle.net/sc2">Starcraft II</a> y Starcraft</li>
<li><a href="https://eu.battle.net/heroes/">Heroes of the Storm</a></li>
<li><a href="https://eu.battle.net/hearthstone/">Hearthstone</a></li>
</ul>
<p>Por lo que para instalar Diablo 3 es necesario Battle.net. La <a href="https://appdb.winehq.org/objectManager.php?sClass=version&amp;iId=28855">página de información de Battle.net de Wine</a> indica que es necesario adicionalmente las librerías <a href="https://www.archlinux.org/packages/multilib/x86_64/lib32-libldap/">lib32-libldap</a> y <a href="https://www.archlinux.org/packages/multilib/x86_64/lib32-gnutls/">lib32-gnutls</a> además de <a href="https://www.archlinux.org/packages/community/any/winetricks/">winetricks</a>. El comando de <em>winetricks</em> es necesario para resolver el problema descrito en la página de Wine sobre Battle.net, <em>Blizzard App icon keeps spinning forever</em>, para poder iniciar sesión en con el cliente.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># pacman -S lib32-libldap lib32-gnutls</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>install-libs.sh</span>
    </div>
</div>
<p>Con esto ya se puede iniciar el cliente de Battle.net con Wine y comenzar la instalación de Diablo 3, ocupa unos 17 GB que dependiendo de la conexión a internet de la que se disponga tardará más menos. Llegado a cierta cantidad de datos descargado del juego ya se puede iniciar pero se puede esperar a que se descargue completamente para tener mejor experiencia y no falte nada del contenido. En algunos momentos mientras se descarga el juego la aplicación parece que se queda congelada aunque sigue descargando, basta redimensionar un poco la ventana para activarse de nuevo y ver el progreso.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ winetrics corefonts&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>winetrics.sh</span>
    </div>
</div>
<p>Una vez instalados los paquetes necesarios y realizada la configuración se puede iniciar el cliente de Battle.net.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ chmod +x Battle.net-Setup.exe&#10;</span></span><span class="line"><span class="cl">$ wine Battle.net-Setup.exe&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>wine-battlenet.sh</span>
    </div>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/battle-net-1_hu1af337f1f432100fe28211cfcfba345a_223158_2560x1440_fit_box_3.png" data-gallery="" title="Cliente de Battle.net"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/battle-net-1_hu1af337f1f432100fe28211cfcfba345a_223158_200x150_fit_box_3.png" width="200" height="127" alt="Cliente de Battle.net" title="Cliente de Battle.net"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/battle-net-2_huea8a38413f264d96312ce2a9693571e3_48092_2560x1440_fit_box_3.png" data-gallery="" title="Cliente de Battle.net"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/battle-net-2_huea8a38413f264d96312ce2a9693571e3_48092_200x150_fit_box_3.png" width="103" height="150" alt="Cliente de Battle.net" title="Cliente de Battle.net"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/battle-net-3_hu5f811e379f7ce2577c2a8d282c7472b1_260250_2560x1440_fit_q90_box.jpg" data-gallery="" title="Cliente de Battle.net"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/battle-net-3_hu5f811e379f7ce2577c2a8d282c7472b1_260250_200x150_fit_q90_box.jpg" width="200" height="128" alt="Cliente de Battle.net" title="Cliente de Battle.net"  class="lozad "></a></p>
<figcaption>Cliente de Battle.net</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/battle-net-4_huf11a73986e214039994ef0e7bf4a303f_266343_2560x1440_fit_q90_box.jpg" data-gallery="" title="Instalación de Diablo 3"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/battle-net-4_huf11a73986e214039994ef0e7bf4a303f_266343_200x150_fit_q90_box.jpg" width="200" height="128" alt="Instalación de Diablo 3" title="Instalación de Diablo 3"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/battle-net-5_hu0a819fe368be398b4c4d99e6162ed45b_267077_2560x1440_fit_q90_box.jpg" data-gallery="" title="Instalación de Diablo 3"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/battle-net-5_hu0a819fe368be398b4c4d99e6162ed45b_267077_200x150_fit_q90_box.jpg" width="200" height="128" alt="Instalación de Diablo 3" title="Instalación de Diablo 3"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/battle-net-6_hue446743061eb0a432b132dc6dbcf9a5e_202739_2560x1440_fit_q90_box.jpg" data-gallery="" title="Instalación de Diablo 3"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/battle-net-6_hue446743061eb0a432b132dc6dbcf9a5e_202739_200x150_fit_q90_box.jpg" width="200" height="120" alt="Instalación de Diablo 3" title="Instalación de Diablo 3"  class="lozad "></a></p>
<figcaption>Instalación de Diablo 3</figcaption>
</figure>
</div>
<h3 id="ejecutar-el-programa-o-juego-de-windows-con-wine">Ejecutar el programa o juego de Windows con Wine</h3>
<p>Instalado el juego se inicia con un comando de Wine o con el acceso directo del menú de aplicaciones del juego o del cliente de Battle.net.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ wine .wine/drive_c/Program<span class="se">\ </span>Files<span class="se">\ \(</span>x86<span class="se">\)</span>/Diablo<span class="se">\ </span>III/Diablo<span class="se">\ </span>III.exe&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>wine-diablo3.sh</span>
    </div>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/menu-aplicaciones_hu23762720fc26bdd5f4021f30a4aec444_367797_2560x1440_fit_q90_box.jpg" data-gallery="" title="Menú de aplicaciones con accesos directos de Battle.net y Diablo 3"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/menu-aplicaciones_hu23762720fc26bdd5f4021f30a4aec444_367797_200x150_fit_q90_box.jpg" width="200" height="113" alt="Menú de aplicaciones con accesos directos de Battle.net y Diablo 3" title="Menú de aplicaciones con accesos directos de Battle.net y Diablo 3"  class="lozad "></a></p>
<figcaption>Menú de aplicaciones</figcaption>
</figure>
</div>
<p>Leyendo la <a href="https://appdb.winehq.org/objectManager.php?sClass=version&amp;iId=29952">página de información de Diablo 3</a> indica que hay que utilizar el cliente de 32 bits sino se utiliza la API de gráficos DirectX 11 que no ofrece buen rendimiento como he comprobado, no ofrece más de 10 fps. Con el cliente de 32 bits el rendimiento ya es el normal. El cliente de 32 bits se activa en <em>Battle.net App -&gt; Settings -&gt; Game Settings -&gt; Diablo 3 -&gt; Launch 32-bit client (instead of 64-bit)</em>.</p>
<p>Diablo 3 comienza con una cinemática introductoria que en mi caso no iba bien y tampoco las siguientes cinemáticas que se reproducen en ciertos hitos del juego. Para verlas se puede ir a Youtube, cada clase tiene una inicial distinta. Como he elegido como clase la del monje para mi primer personaje pongo la de este.</p>
<div class="media media-video">
  <iframe width="640" height="360" src="https://www.youtube.com/embed/8U-grPG5W8M" frameborder="0" class="lozad" allowfullscreen></iframe>
</div>
<div class="media media-video">
  <iframe width="640" height="360" src="https://www.youtube.com/embed/STx7Um655aw" frameborder="0" class="lozad" allowfullscreen></iframe>
</div>
<p>La trama del juego comienza con la caída de una estrella en la antigua catedral de Tristán y el personaje en el camino dirigiéndose hacia Nueva Tristán con motivo de tal acontecimiento.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/diablo-3-1_hub14f7cad927ad832ab1c483f44c3f52b_701372_2560x1440_fit_q90_box.jpg" data-gallery="" title="Personaje de clase monje"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/diablo-3-1_hub14f7cad927ad832ab1c483f44c3f52b_701372_300x200_fit_q90_box.jpg" width="300" height="169" alt="Personaje de clase monje" title="Personaje de clase monje"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/diablo-3-2_hu77eb845d42bfd677525787845cd0f45e_640813_2560x1440_fit_q90_box.jpg" data-gallery="" title="Caminio hacia Nueva Tristán"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/diablo-3-2_hu77eb845d42bfd677525787845cd0f45e_640813_300x200_fit_q90_box.jpg" width="300" height="169" alt="Caminio hacia Nueva Tristán" title="Caminio hacia Nueva Tristán"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/diablo-3-3_hu995bdb92e4e7ff882ec5b13fa47f4dbd_551707_2560x1440_fit_q90_box.jpg" data-gallery="" title="Jugando a Diablo 3"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/diablo-3-3_hu995bdb92e4e7ff882ec5b13fa47f4dbd_551707_200x150_fit_q90_box.jpg" width="200" height="113" alt="Jugando a Diablo 3" title="Jugando a Diablo 3"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/diablo-3-4_hu08a4565579a3291fe5a28cd7a2e12b7d_459463_2560x1440_fit_q90_box.jpg" data-gallery="" title="Jugando a Diablo 3"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/diablo-3-4_hu08a4565579a3291fe5a28cd7a2e12b7d_459463_200x150_fit_q90_box.jpg" width="200" height="113" alt="Jugando a Diablo 3" title="Jugando a Diablo 3"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/diablo-3-5_hu3f5cbd2a42cf434d3b17080246a9e1f4_630426_2560x1440_fit_q90_box.jpg" data-gallery="" title="Jugando a Diablo 3"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/diablo-3-5_hu3f5cbd2a42cf434d3b17080246a9e1f4_630426_200x150_fit_q90_box.jpg" width="200" height="113" alt="Jugando a Diablo 3" title="Jugando a Diablo 3"  class="lozad "></a></p>
<figcaption>Juego de Diablo 3</figcaption>
</figure>
</div>
<p>El juego se inicia y funciona correctamente, en unas poca horas que he estado jugando, no ha quedado engendro, barril ni tocón en pie &gt;:), no he tenido ningún cierre del juego inesperado ni ningún error, salvo por las cinemáticas irreproducibles de las que se sale con la tecla escape. El NUC en el que lo he ejecutado parece que no se calienta en exceso al tacto, la temperatura de la CPU se mantiene de forma estable a 75ºobservando sus sensores por software, el ventilador funcionando a esta temperatura hace mucho ruido y no se percibe en el fragor del juego, con buenos FPS aún a resolución QHD de 2560x1440. .</p>
<p>El juego permite ajustar la calidad gráfica a la capacidad del equipo para tener buenos fps, la principal es la resolución a menor resolución mejor rendimiento, también calidad de texturas y efectos gráficos. Con estas calidades gráficas estos son los fotogramas por segundo. Los fotogramas por segundo se muestran en la parte inferior derecha pulsando la combinación de teclas <em>Ctrl+R</em>. A una resolución de 1920x1080 que no es poco ya se obtienen unos muy aceptables 60 fps.</p>
<ul>
<li>A 2560x1440 va a 42 fps en el NUC8i5BEK.</li>
<li>A 1920x1080 va a 60 fps.</li>
<li>A 1600x900 va a 70 fps.</li>
</ul>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/opciones-graficas_hu7ca4fee11f109ac1ea450976f9c9e26e_349071_2560x1440_fit_q90_box.jpg" data-gallery="" title="Opciones de calidad gráfica usadas para medir el rendimiento en fps"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/opciones-graficas_hu7ca4fee11f109ac1ea450976f9c9e26e_349071_300x200_fit_q90_box.jpg" width="300" height="175" alt="Opciones de calidad gráfica usadas para medir el rendimiento en fps" title="Opciones de calidad gráfica usadas para medir el rendimiento en fps"  class="lozad "></a></p>
<figcaption>Opciones de calidad gráfica usadas para medir el rendimiento en fps</figcaption>
</figure>
</div>
<p>Por defeco en mi caso no he podido cambiar la resolución del juego desde las opciones solo me ofrece una opción la de la resolución del monitor, como 2560x1440 es una resolución alta y aún jugables los 42 fps no son muchos, a más fps se aprecia más fluidez. Para cambiar la resolución he tenido que utilizar el siguiente comando desde la terminal con el que Wine ejecuta el programa en modo explorador o en un escritorio virtual, se indica el nombre del escritorio virtual Diablo 3, 1920x1080 es la resolución deseada en este caso y el último parámetro <em>Diablo III.exe</em> es la ubiciación del ejecutable.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ wine explorer /desktop<span class="o">=</span>Diablo3,1920x1080 ~/.wine/drive_c/Program<span class="se">\ </span>Files<span class="se">\ \(</span>x86<span class="se">\)</span>/Diablo<span class="se">\ </span>III/Diablo<span class="se">\ </span>III.exe&#10;</span></span><span class="line"><span class="cl">$ wine explorer /desktop<span class="o">=</span>Diablo3,1600x900 ~/.wine/drive_c/Program<span class="se">\ </span>Files<span class="se">\ \(</span>x86<span class="se">\)</span>/Diablo<span class="se">\ </span>III/Diablo<span class="se">\ </span>III.exe&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>wine-explorer.sh</span>
    </div>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/wine-exporer-1_hu01f3569cd3bc4c74d1574636c7620dcd_312455_2560x1440_fit_q90_box.jpg" data-gallery="" title="Diablo 3 en Wine modo explorardor"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/wine-exporer-1_hu01f3569cd3bc4c74d1574636c7620dcd_312455_300x200_fit_q90_box.jpg" width="300" height="175" alt="Diablo 3 en Wine modo explorardor" title="Diablo 3 en Wine modo explorardor"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/wine-exporer-2_hu998cbd352577b5f09726b73b5d0ca8d5_404909_2560x1440_fit_q90_box.jpg" data-gallery="" title="Diablo 3 a resolución 1920x1080"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/wine-exporer-2_hu998cbd352577b5f09726b73b5d0ca8d5_404909_300x200_fit_q90_box.jpg" width="300" height="175" alt="Diablo 3 a resolución 1920x1080" title="Diablo 3 a resolución 1920x1080"  class="lozad "></a></p>
<figcaption>Diablo 3 en Wine modo explorardor a 1920x1080</figcaption>
</figure>
</div>
<p>Si soy sincero en toda mi época jugona creo que no he pagado por ningún juego de los que he tenido y he jugado a muchos de los más populares que estaban cada momento. Así que recuerde es muy posible que me decida a pagar por este Diablo 3 por primera vez por un juego viendo que puedo jugar el GNU/Linux perfectamente. Se puede mediante <a href="https://www.paypal.com/">PayPal</a> y por supuesto con tarjeta de crédito. La única duda que tengo es si ejecutar Diablo 3 sobre Wine es algo aceptable por Blizzard o si esto es motivo de expulsión y cierre de cuenta, el llamado <em>baneo</em>, hay comentados algunos casos por estos motivos. El <a href="https://eu.shop.battle.net/es-es/product/diablo-iii">juego básico de Diablo 3</a> cuesta 20 € y <a href="https://eu.shop.battle.net/es-es/product/diablo-iii-reaper-of-souls">la expansión Reaper of Souls</a> que incluye una nueva clase la de cruzado, el acto V, modo aventura y nuevas habilidades en clases otros 20 €, <a href="https://eu.shop.battle.net/es-es/product/diablo-iii-battle-chest">comprando ambos a la vez</a> son 30 €. Hay una <a href="https://eu.shop.battle.net/es-es/product/diablo-iii-rise-of-the-necromancer">segunda expansión, Despertar del Nigromante</a>, que permite jugar con una clase adicional de nigromante por 15 €.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/pago_hu23e10a14d0aec3bb84a627450b647d0f_500830_2560x1440_fit_box_3.png" data-gallery="" title="Formas de pago"><img src="https://picodotdev.github.io/blog-bitix/2018/12/como-usar-wine-para-jugar-en-gnu-linux-a-juegos-de-windows/images/pago_hu23e10a14d0aec3bb84a627450b647d0f_500830_300x200_fit_box_3.png" width="300" height="150" alt="Formas de pago" title="Formas de pago"  class="lozad "></a></p>
<figcaption>Formas de pago</figcaption>
</figure>
</div>
<p>Otros juegos que tengo en mi lista pero ya de <a href="https://picodotdev.github.io/blog-bitix/2019/09/la-aplicacion-cliente-de-steam-en-gnu-linux/">Steam que tiene un cliente ya nativo para GNU/Linux</a> con varios juegos compatibles. Aunque sea solo para probar que también se pueden jugar a muchos juegos del amplio catálogo de Steam lo probaré. Otra plataforma que posiblemente pruebe sea <a href="https://www.gog.com/">GOG</a>. Y con estas tres plataformas espero que quede demostrado que en GNU/Linux se puede jugar a juegos comerciales aceptablemente, aún alguno teniendo varios años como este Diablo 3 pero que para mi habiendo estado bastante desconectado de los juegos me parece que tiene una historia, argumento y una calidad gráfica artística impresionante.</p>
<p>Otros juegos en mi lista:</p>
<ul>
<li><a href="https://store.steampowered.com/app/310560/DiRT_Rally/">DirtRally</a></li>
<li><a href="https://store.steampowered.com/app/640820/Pathfinder_Kingmaker/">Pathfinder: Kingmaker</a></li>
<li><a href="https://www.gog.com/game/torchlight_ii">Tochligh II</a></li>
<li><a href="https://store.steampowered.com/app/271590/Grand_Theft_Auto_V/">Grand Theft Auto V</a></li>
<li><a href="https://store.steampowered.com/app/245620/Tropico_5/">Tropico 5</a></li>
<li><a href="https://store.steampowered.com/app/257350/Baldurs_Gate_II_Enhanced_Edition/">Baldur&rsquo;s Gate II: Enhanced Edition</a></li>
</ul>
<h3 id="otras-formas-de-ejecutar-juegos-y-programas-en-gnulinux">Otras formas de ejecutar juegos y programas en GNU/Linux</h3>
<p>Hay alguna utilidad que realiza algunas modificaciones a Wine, una de ellas es <a href="https://www.playonlinux.com/en/">PlayOnLinux</a> que es una colección de <em>scripts</em> que en principio mejora la experiencia y compatibilidad pero en algún comentario he leído que alguno de esos <em>scripts</em> están desactualizados y es mejor usar Wine directamente leyendo las páginas de la base de datos con la información de pasos relevantes si hay que hacer alguno. La siguiente versión de PlaynLinux se llamará <a href="https://phoenicis.org/">Phoenicis</a>, otro proyecto que estoy siguiendo es <a href="https://www.winepak.org/">Winepak</a> que es un repositorio específico para aplicaciones Windows de <a href="https://flatpak.org/">Flatpak</a>, <a href="https://picodotdev.github.io/blog-bitix/2018/11/flatpak-distribucion-e-instalacion-de-programas-de-escritorio-en-las-distribuciones-gnu-linux/">Flatpak es una nueva forma de distribuir software en GNU/Linux</a> que tiene algunas ventajas a utilizar los paquetes propios de la distribuciones GNU/Linux.</p>
<h3 id="desinstalar-wine">Desinstalar Wine</h3>
<p>Al instalar programas en Wine se crean accesos directos en el menú de aplicaciones con lo que la integración en el sistema es perfecta y una aplicación Wine se puede ejecutar como cualquier otra aplicación del sistema. Si más tarde se desea <a href="https://wiki.archlinux.org/index.php/Official_repositories#Disabling_multilib">desinstalar todos esos paquetes de <em>multilib</em></a>, Wine y <a href="https://wiki.archlinux.org/index.php/Wine#Removing_menu_entries">eliminar los accesos directos en el menú de aplicaciones creados por Wine</a> hay que ejecutar los siguientes comandos, en Arch Linux.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span><span class="lnt">8&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Eliminar todos los paquetes instalados del repositorio multilib</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># pacman -R $(comm -12 &lt;(pacman -Qq | sort) &lt;(pacman -Slq multilib | sort))</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Eliminar accesos directos creados por Winw</span>&#10;</span></span><span class="line"><span class="cl">$ rm ~/.local/share/mime/packages/x-wine*&#10;</span></span><span class="line"><span class="cl">$ rm ~/.local/share/applications/wine-extension*&#10;</span></span><span class="line"><span class="cl">$ rm ~/.local/share/icons/hicolor/*/*/application-x-wine-extension*&#10;</span></span><span class="line"><span class="cl">$ rm ~/.local/share/mime/application/x-wine-extension*</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>uninstall.sh</span>
    </div>
</div>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://linoxide.com/linux-how-to/install-blizzard-battlenet-app-linux/">How to Install Blizzard Battlenet App on Linux</a></li>
<li><a href="https://wiki.winehq.org/FAQ#How_do_I_get_Wine_to_launch_an_application_in_a_virtual_desktop.3F">How do I get Wine to launch an application in a virtual desktop?</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="gnu-linux"/>
            
                <category term="juegos"/>
            
                <category term="software"/>
            
                <category term="software-libre"/>
            
                <category term="windows"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2018/11/flatpak-distribucion-e-instalacion-de-programas-de-escritorio-en-las-distribuciones-gnu-linux/</id>
        <title>Flatpak, distribución e instalación de programas de escritorio en las distribuciones GNU/Linux</title>
        <updated>2018-11-23T17:30:00+01:00</updated>
        <published>2018-11-23T17:30:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2018/11/flatpak-distribucion-e-instalacion-de-programas-de-escritorio-en-las-distribuciones-gnu-linux/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/flatpak.svg" width="300" height="225" alt="Flatpak" title="Flatpak"  class=""></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/linux.svg" width="200" height="232" alt="Linux" title="Linux"  class=""></p>
</div>
<p>Las distribuciones GNU/Linux son la recolección de cantidad de programas de software libre, cientos o miles, con una garantía de que funcionan correctamente en esa distribución y que facilita a los usuarios una fácil utilización. Hay múltiples distribuciones GNU/Linux con diferentes intereses ya sean generalistas como <a href="https://www.ubuntu.com/">Ubuntu</a>, <a href="https://fedoraproject.org/">Fedora</a>, <a href="https://www.debian.org/">Debian</a>, <a href="https://www.archlinux.org/">Arch Linux</a>, <a href="https://elementary.io/es/">elementary</a>, <a href="https://www.opensuse.org/">openSUSE</a> entre las más populares y otras especializadas en propósitos más específicos para servidor con <a href="https://www.redhat.com/en/technologies/linux-platforms/enterprise-linux">RHEL</a>, <a href="https://www.centos.org/">CentOS</a>, <a href="https://www.zentyal.org/">Zentyal</a> o <a href="https://www.alpinelinux.org/">Alpine</a>, para equipos con pocos recursos como <a href="http://puppylinux.com/">Puppy</a> o <a href="http://www.tinycorelinux.net/">Tiny Core</a>, seguridad y privacidad como <a href="https://tails.boum.org/">Tails</a> o sin componentes privativos como <a href="https://trisquel.info/es">Trisquel</a>.</p>
<p>Cada una de estas distribuciones es creada por personas que se encargan de mantener la distribución cogiendo el código fuente que los programadores del software crean y publican, compilándolo para crear un binario o paquete utilizable e instalable en esa distribución y comprobar que funciona correctamente sin conflictos con otros paquetes. Los mantenedores se encargan de publicar nuevas versiones de paquetes con cada nueva versión de cada programas, de reportar errores y de incluso aplicar parches de seguridad cuando se descubren.</p>
<p>Esta tarea que hacen los mantenedores se hace por cada paquete, son miles los que contiene una distribución, Debian tiene más de 51000, y por cada distribución aunque algunas se basan en otras como Ubuntu se basa en Debian y otras se basan a su vez en Ubuntu. Esto es una ingente cantidad de tiempo de dedicación de muchas personas y replicado en gran parte en cada distribución que podrían ser empleado en otras tareas.</p>
<p>La tarea que hacen los mantenedores es útil para comprobar que los paquetes de cada distribución funcionan correctamente y en conjunto con el resto de paquetes y porque los autores originales del software no tenían una forma de distribuir su software para que funcionase correctamente en todas las distribuciones.</p>
<p><a href="https://flatpak.org/">Flatpak</a> se define como el futuro, aunque es ya un presente, de forma de distribuir aplicaciones de escritorio siendo <a href="https://www.flatpak.org/setup/">varias distribuciones GNU/Linux importantes que ya lo soportan</a>. Las ventajas que proporciona son:</p>
<ul>
<li>Los paquetes de flatpak son utilizables en cualquier distribución.</li>
<li>Los autores del software pueden crear el paquete sin depender de que los mantenedores lo incluyan en una distribución para que sea utilizable por sus usuarios.</li>
<li>Una nueva versión está disponible inmediatamente para todas las distribuciones que será más una buena mejora para distribuciones con ciclos de publicación más lentos.</li>
<li>Proporciona entornos consistentes.</li>
<li>Las aplicaciones son utilizables incluso en nuevas versiones de una distribución.</li>
<li>Se pueden instalar múltiples versiones de una misma aplicación.</li>
<li>Hay menos riesgo de que una actualización de un programa provoque que el sistema quede inconsistente pudiendo incluso a no llegar a iniciarse correctamente.</li>
<li>Se mejora la seguridad el ejecutarse las aplicaciones de forma aislada en una caja de arena que limita las acciones que puede realizar. Los permisos como almacenamiento, red y dispositivos se han de conceder de forma explícita.</li>
<li>Cualquiera puede publicar su aplicación y ser utilizable por los usuarios sin que necesite ganar popularidad para que los mantenedores la incluyan en la distribución.</li>
<li>Las aplicaciones Flatpak se puede instalar a nivel de sistema (por defecto) y a nivel de usuario.</li>
</ul>
<div class="media media-video">
  <iframe width="640" height="360" src="https://www.youtube.com/embed/jDVCITRWGgs" frameborder="0" class="lozad" allowfullscreen></iframe>
</div>
<p>La <a href="https://www.flatpak.org/setup/">instalación de Flatpak</a> y <a href="http://docs.flatpak.org/en/latest/using-flatpak.html">guía de uso</a> no es más complicado que utilizar el propio gestor de paquetes de cada distribución. Los desarrolladores tienen su <a href="http://docs.flatpak.org/en/latest/building.html">guía para crear paquetes</a> y <a href="http://docs.flatpak.org/en/latest/publishing.html">publicar</a> en Flatpak.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Gestionar repositorios de Flatpak</span>&#10;</span></span><span class="line"><span class="cl">$ flatpak remotes&#10;</span></span><span class="line"><span class="cl">$ flatpak remote-add --if-not-exists flathub https://dl.flathub.org/repo/flathub.flatpakrepo&#10;</span></span><span class="line"><span class="cl">$ flatpak remote-delete flathub&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Buscar programas</span>&#10;</span></span><span class="line"><span class="cl">$ flatpak search <span class="o">[</span>programas<span class="o">]</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Instalar un paquete, en este caso GIMP</span>&#10;</span></span><span class="line"><span class="cl">$ flatpak install flathub org.gimp.GIMP&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Ejecutar un programa instalado como Flatpak (aunque se integran en el sistema </span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># añadiendo un icono en el lanzador de aplicaciones)</span>&#10;</span></span><span class="line"><span class="cl">$ flatpak run org.gimp.GIMP&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Actualizar los programas</span>&#10;</span></span><span class="line"><span class="cl">$ flatpak update&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Listar los programas instalados y runtimes, o solo aplicaciones</span>&#10;</span></span><span class="line"><span class="cl">$ flatpak list&#10;</span></span><span class="line"><span class="cl">$ flatpak list --app&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Desinstalar un programa</span>&#10;</span></span><span class="line"><span class="cl">$ flatpak uninstall org.gimp.GIMP</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>flatpak.sh</span>
    </div>
</div>
<p><a href="https://flathub.org/home">Flathub</a> es un repositorio de las <a href="https://flathub.org/apps">aplicaciones Flatpak</a> que en el ejemplo se añade con el comando con <em>flatpak remote-add</em>. Las que hay se pueden <a href="https://flathub.org/apps/category/All">navegar por categoría</a> y son algunas de las más populares y que es probable querer instalar en cualquier sistema. A medida que pase el tiempo habrá más disponibles.</p>
<ul>
<li><a href="https://flathub.org/apps/category/AudioVideo">Audio y vídeo</a>: Audacity, GNOME Music, HandBrake, OpenShot, Pitivi, Rhythmbox, VLC, &hellip;</li>
<li><a href="https://flathub.org/apps/category/Development">Desarrollo</a>: Atom, gitg, Meld, Backets, Sequeler, SmartGit, Sublime Text, Visual Studio Code, &hellip;</li>
<li><a href="https://flathub.org/apps/category/Education">Educación</a>: GCompris, GeoGebra, GNU Octave, &hellip;</li>
<li><a href="https://flathub.org/apps/category/Game">Juegos</a>: 0 A.D, Battle for Wesnoth, Games, gbrainy, GNOME Chess, OpenTTD, ScummVM, Shattered Pixel Dungeon, Steam, SuperTuxKart, Teeworlds, &hellip;</li>
<li><a href="https://flathub.org/apps/category/Graphics">Gráficos y fotografía</a>: Blender, Colo , GNU Image Manipulation Program (GIMP), Image Optimizer, Inkscape, Krita, Scribus, Synfig Studio, &hellip;</li>
<li><a href="https://flathub.org/apps/category/Network">Comunicación y noticias</a>: Dropbox, FeedReader, FileZilla, Geary, JDownloader, Pidgin, Polari, Remmina, Signal, Skype, Slack, Telegram, Thunderbird, Transmission, &hellip;</li>
<li><a href="https://flathub.org/apps/category/Office">Productividad</a>: Calendar, Calibre, Contacts, Evolution, LibreOffice, Thunderbird, &hellip;</li>
<li><a href="https://flathub.org/apps/category/Science">Ciencia</a>: Elements, Genius, Stellarium, &hellip;</li>
<li><a href="https://flathub.org/apps/category/Settings">Configuración</a>: RazerGenie, &hellip;</li>
<li><a href="https://flathub.org/apps/category/Utility">Utilidades</a>: Agenda, FreeFileSync, KeePassXC, Nextcloud, Vim, &hellip;</li>
</ul>
<p>Con las ventajas de Flatpak tanto para usuarios, desarrolladores y mantenedores y a medida que gane más popularidad los desarrolladores tendrán más motivación por publicar sus aplicaciones en paquete Flatpak y en alguno de sus repositorios.</p>
<p>En la página de <a href="https://www.flatpak.org/faq/">preguntas frecuentes</a> está el curioso origen del nombre de Flatpak en relación con una de las innovaciones de paquetes planos de IKEA. Es una tecnología acoplada a Linux ya que utiliza varias de las tecnologías propias de Linux y por tanto no está para las <a href="https://es.wikipedia.org/wiki/Berkeley_Software_Distribution">distribuciones BSD</a> como ocurre en otros casos. El entorno de desarrollo <a href="https://wiki.gnome.org/Apps/Builder">GNOME Builder</a> soporta la programación para Flatpak.</p>
<p>Flatpak está más apoyada por <a href="https://www.redhat.com/es">Red Hat</a>, <a href="https://www.canonical.com/">Canonical</a> tiene su tecnología similar con <a href="https://snapcraft.io/">Snapcraft</a>. Ha ocurrido igual en anteriores casos con <a href="https://www.freedesktop.org/wiki/Software/systemd/">systemd</a> y <a href="https://es.wikipedia.org/wiki/Upstart">Upstart</a> o <a href="https://es.wikipedia.org/wiki/Wayland_%28protocolo%29">Wayland</a> y <a href="https://en.wikipedia.org/wiki/Mir_%28software%29">Mir</a> donde las tecnologías más apoyadas por Red Hat han sido las que mayor éxito han tenido y han prevalecido. Si nada cambia en <a href="https://picodotdev.github.io/blog-bitix/2018/10/ibm-adquiere-red-hat-el-gigante-de-linux-y-codigo-abierto/">Red Hat al ser adquirida por parte de IBM</a> puede que se produzca el mismo resultado no tanto por que las tecnologías de Red Hat sean mejores sino porque tiene más peso en la comunidad que Canonical. Por el momento la <a href="https://kamikazow.wordpress.com/2018/06/08/adoption-of-flatpak-vs-snap-2018-edition/">adopción para snap contra la de Flatpak</a> no produce buenos augurios para la primera donde solo en Ubuntu es buena como no podría ser de otra forma.</p>
<p>Si usas Arch Linux e instalas el entorno de escritorio GNOME con los paquetes <em>gnome</em> y <em>gnome-extra</em> ya tendrás instalado Flatpak ya que se instala como dependencia. Se puede instalar directamente con el gestor de paquetes <em>pacman</em> con el siguiente comando:</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># pacman -S flatpak</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>install.sh</span>
    </div>
</div>
<p>Las distribuciones tal y como las conocemos van a cambiar mucho, entre esos cambios están una nueva forma de sistema base inmutable y actualizaciones con <a href="https://en.wikipedia.org/wiki/OSTree">OSTree</a> o sistema de archivos con <a href="https://en.wikipedia.org/wiki/OpenZFS">OpenZFS</a>.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/05/sobre-el-futuro-de-las-distribuciones-gnu-linux-y-los-sistemas-operativos/">Sobre el futuro de las distribuciones GNU/Linux y los sistemas operativos</a></li>
</ul>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://www.reddit.com/r/linux/comments/60qdtw/flatpak_vs_snap_which_format_is_better_a_rather/">Flatpak vs Snap - Which format is &ldquo;Better&rdquo;? A rather excellent in-depth comparison</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Flatpak">Flatpak Arch Linux Wiki</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="gnu-linux"/>
            
                <category term="planeta-codigo"/>
            
                <category term="software"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2018/07/como-recuperar-arch-linux-despues-de-una-actualizacion-que-provoca-el-sistema-no-inicie/</id>
        <title>Como recuperar Arch Linux después de una actualización que provoca el sistema no inicie</title>
        <updated>2018-07-27T16:00:00+02:00</updated>
        <published>2018-07-27T16:00:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2018/07/como-recuperar-arch-linux-despues-de-una-actualizacion-que-provoca-el-sistema-no-inicie/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Instalar un sistema GNU/Linux es sencillo y está muy bien, también es importante saber como intentar recuperarlo cuando una actualización de software provoca que el sistema no se inicie con normalidad hasta el entorno de escritorio gráfico, el motivo puede ser incluso un <em>kernel panic</em>. El objetivo de la recuperación es corregir el problema del inicio, si no es posible, recuperar los valiosos documentos, imágenes, vídeos u otros archivos antes de finalmente llegar al punto de reinstalar el sistema para devolverlo a un estado correcto aunque quizá perdiendo los datos que tuviese.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/archlinux.svg" width="250" height="186" alt="Arch Linux" title="Arch Linux"  class=""></p>
</div>
<p>Estás contento con <a href="https://www.archlinux.org/">Arch Linux</a> y en gran medida despreocupado de las versiones de las aplicaciones ya que sabes que al ser una distribución <em>rolling release</em>, siempre tienes la última versión de todos los paquetes cada vez que haces una actualización completa del sistema. Un día realizas la periódica actualización o has visto una nueva versión de un paquete ya sea una nueva versión del <a href="https://www.archlinux.org/packages/core/x86_64/linux/">kernel</a> o <a href="https://www.archlinux.org/packages/extra/x86_64/mesa/">mesa</a> que pueden contener importante mejoras en el sistema gráfico que quieres aprovechar o una nueva versión de una aplicación con nuevas características relevantes como podría se <a href="https://www.archlinux.org/packages/extra/x86_64/libreoffice-fresh/">LibreOffice</a> o <a href="https://www.archlinux.org/packages/extra/x86_64/vlc/">VLC</a>. Inicias la actualización del sistema como tantas otras veces has hecho. Termina aparentemente bien con todos los paquetes actualizados y sin ningún mensaje de error. Reinicias el equipo para que la actualización de algunos paquetes tengan efecto como el caso del <em>kernel</em>. Sin embargo, ¡sorpresa! el sistema no inicia como normalmente, no llega al inicio de sesión del entorno de escritorio ni siquiera tienes acceso a una terminal basada en consola, el error parece un <a href="https://es.wikipedia.org/wiki/Kernel_panic"><em>kernel panic</em></a>. Reinicias una segunda vez, el mismo error. Parece que está todo perdido, piensas en los importantes archivos que tienes en el sistema de almacenamiento persistente, disco duro o SSD, ¡no tienes una copia completamente reciente!, el corazón te empieza a latir con fuerza.</p>
<p>Por suerte, habiendo estado usando Arch Linux de forma ininterrumpida durante los 8 años esto solo me ha pasado una vez y por culpa mía después de actualizar <a href="https://www.archlinux.org/packages/core/x86_64/grub/">Grub</a> al ejecutar un comando erróneo, durante todos esos años he tenido importantes actualizaciones como varias versiones de <a href="https://www.archlinux.org/groups/x86_64/gnome/">GNOME</a>, <a href="https://www.archlinux.org/packages/core/x86_64/systemd/">systemd</a> y el <em>kernel</em>. El caso era el que he descrito anteriormente, el sistema no iniciaba dado que Grub es de las primeras cosas necesarias para iniciar el sistema cualquier problema en él origina esta situación. Otros paquetes de especial importancia son el <em>kernel</em>, los controladores gráficos, <em>mesa</em>, systemd, una nueva versión del entorno de escritorio, &hellip; Por una actualización a una nueva versión de VLC el sistema no va a dejar de iniciarse al lo sumo será VLC el que no inicie y es de más sencillo de solucionar volviendo a una versión anterior correcta con <a href="https://picodotdev.github.io/blog-bitix/2015/02/como-hacer-un-downgrade-de-un-paquete-en-arch-linux/">un simple <em>downgrade</em> de paquete</a>.</p>
<p>Antes de una actualización conviene revisar los paquetes que se van a actualizar y fijarse en los especialmente sensibles como he comentado, también conviene estar suscrito al <a href="https://www.archlinux.org/feeds/news/"><em>feed</em> de noticias de Arch</a>, a veces la actualización del sistema requiere una intervención manual y en ese <em>feed</em> siempre comentan los detalles y en qué consiste la intervención manual incluso ponen los comandos necesarios a ejecutar. Para que el daño sea el menor posible en caso de completo desastre es imprescindible hacer copias de seguridad de forma regular, una cosa es un fallo de software otra es un fallo de hardware que si se produce en la unidad de almacenamiento los datos es muy posible que queden irrecuperables. Los fallos en el hardware no son tan extraños, el hardware es reemplazable por un módico precio pero los datos no, por todo ¡haz copias de seguridad regularmente! Avisado estás.</p>
<p>De modo que saber cómo recuperar el sistema es algo necesario llegado el caso. En Arch Linux la forma que conozco es usando una imagen de instalación de Arch Linux y montar el sistema de archivos para hacer las modificaciones necesarias para recuperar el sistema que es probable que consistan en desactualizar paquetes por versiones anteriores. Dependiendo de los mensajes de error que proporcione el sistema en el inicio fallido las acciones a realizar para arreglarlo serán unas u otras, seguramente en los <a href="https://bbs.archlinux.org/">foros de Arch Linux</a> otros usuarios ya hayan pedido ayuda con el mismo o parecido error.</p>
<p>Los comandos concretos para montar el sistema de archivos depende de la configuración propia: de las particiones creadas, de si se está utilizando LVM o de si se está usando cifrado. Cuando escribí el <a href="https://picodotdev.github.io/blog-bitix/2017/01/script-para-instalar-arch-linux-facil-rapido-desatendido-automatizado-y-personalizable/">Script para instalar Arch Linux fácil, rápido, desatendido, automatizado y personalizable</a> pensé al mismo tiempo en el caso de uso de una hipotética recuperación, escribí un <a href="https://github.com/picodotdev/alis/blob/master/alis-recovery.sh"><em>script</em> para iniciar la recuperación</a>.</p>
<p>Una vez iniciado el sistema con la imagen ISO de instalación de Arch Linux este <em>script</em> contiene los comandos para iniciar la recuperación, los pasos de su uso son los siguientes:</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># loadkeys es</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># curl -sL https://bit.ly/2F3CATp</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># vim alis-recovery.conf</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># ./alis-recovery.sh</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># arch-chroot /mnt</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>alis-recovery-start.sh</span>
    </div>
</div>
<p>En el paso <em>vim alis-recovery.conf</em> se modifica la configuración según el sistema a recuperar. Básicamente se dice en qué unidad está el sistema de archivos de Arch Linux, si utiliza LVM y está cifrado. El <em>script</em> de recuperación está adaptado al propio <em>script</em> de instalación, no cubre la infinidad de casos personalizados que cada usuario por su cuenta puede realizar o existir pero sirve en cualquier caso como guía de cómo iniciar la recuperación.</p>
<p>El contenido completo del propio <em>script</em> de recuperación es el siguiente, no es más que un <em>script</em> de <a href="https://es.wikipedia.org/wiki/Bash">bash</a> con los mismos comandos que serían necesarios para realizar la recuperación manualmente de forma interactiva.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">  1&#10;</span><span class="lnt">  2&#10;</span><span class="lnt">  3&#10;</span><span class="lnt">  4&#10;</span><span class="lnt">  5&#10;</span><span class="lnt">  6&#10;</span><span class="lnt">  7&#10;</span><span class="lnt">  8&#10;</span><span class="lnt">  9&#10;</span><span class="lnt"> 10&#10;</span><span class="lnt"> 11&#10;</span><span class="lnt"> 12&#10;</span><span class="lnt"> 13&#10;</span><span class="lnt"> 14&#10;</span><span class="lnt"> 15&#10;</span><span class="lnt"> 16&#10;</span><span class="lnt"> 17&#10;</span><span class="lnt"> 18&#10;</span><span class="lnt"> 19&#10;</span><span class="lnt"> 20&#10;</span><span class="lnt"> 21&#10;</span><span class="lnt"> 22&#10;</span><span class="lnt"> 23&#10;</span><span class="lnt"> 24&#10;</span><span class="lnt"> 25&#10;</span><span class="lnt"> 26&#10;</span><span class="lnt"> 27&#10;</span><span class="lnt"> 28&#10;</span><span class="lnt"> 29&#10;</span><span class="lnt"> 30&#10;</span><span class="lnt"> 31&#10;</span><span class="lnt"> 32&#10;</span><span class="lnt"> 33&#10;</span><span class="lnt"> 34&#10;</span><span class="lnt"> 35&#10;</span><span class="lnt"> 36&#10;</span><span class="lnt"> 37&#10;</span><span class="lnt"> 38&#10;</span><span class="lnt"> 39&#10;</span><span class="lnt"> 40&#10;</span><span class="lnt"> 41&#10;</span><span class="lnt"> 42&#10;</span><span class="lnt"> 43&#10;</span><span class="lnt"> 44&#10;</span><span class="lnt"> 45&#10;</span><span class="lnt"> 46&#10;</span><span class="lnt"> 47&#10;</span><span class="lnt"> 48&#10;</span><span class="lnt"> 49&#10;</span><span class="lnt"> 50&#10;</span><span class="lnt"> 51&#10;</span><span class="lnt"> 52&#10;</span><span class="lnt"> 53&#10;</span><span class="lnt"> 54&#10;</span><span class="lnt"> 55&#10;</span><span class="lnt"> 56&#10;</span><span class="lnt"> 57&#10;</span><span class="lnt"> 58&#10;</span><span class="lnt"> 59&#10;</span><span class="lnt"> 60&#10;</span><span class="lnt"> 61&#10;</span><span class="lnt"> 62&#10;</span><span class="lnt"> 63&#10;</span><span class="lnt"> 64&#10;</span><span class="lnt"> 65&#10;</span><span class="lnt"> 66&#10;</span><span class="lnt"> 67&#10;</span><span class="lnt"> 68&#10;</span><span class="lnt"> 69&#10;</span><span class="lnt"> 70&#10;</span><span class="lnt"> 71&#10;</span><span class="lnt"> 72&#10;</span><span class="lnt"> 73&#10;</span><span class="lnt"> 74&#10;</span><span class="lnt"> 75&#10;</span><span class="lnt"> 76&#10;</span><span class="lnt"> 77&#10;</span><span class="lnt"> 78&#10;</span><span class="lnt"> 79&#10;</span><span class="lnt"> 80&#10;</span><span class="lnt"> 81&#10;</span><span class="lnt"> 82&#10;</span><span class="lnt"> 83&#10;</span><span class="lnt"> 84&#10;</span><span class="lnt"> 85&#10;</span><span class="lnt"> 86&#10;</span><span class="lnt"> 87&#10;</span><span class="lnt"> 88&#10;</span><span class="lnt"> 89&#10;</span><span class="lnt"> 90&#10;</span><span class="lnt"> 91&#10;</span><span class="lnt"> 92&#10;</span><span class="lnt"> 93&#10;</span><span class="lnt"> 94&#10;</span><span class="lnt"> 95&#10;</span><span class="lnt"> 96&#10;</span><span class="lnt"> 97&#10;</span><span class="lnt"> 98&#10;</span><span class="lnt"> 99&#10;</span><span class="lnt">100&#10;</span><span class="lnt">101&#10;</span><span class="lnt">102&#10;</span><span class="lnt">103&#10;</span><span class="lnt">104&#10;</span><span class="lnt">105&#10;</span><span class="lnt">106&#10;</span><span class="lnt">107&#10;</span><span class="lnt">108&#10;</span><span class="lnt">109&#10;</span><span class="lnt">110&#10;</span><span class="lnt">111&#10;</span><span class="lnt">112&#10;</span><span class="lnt">113&#10;</span><span class="lnt">114&#10;</span><span class="lnt">115&#10;</span><span class="lnt">116&#10;</span><span class="lnt">117&#10;</span><span class="lnt">118&#10;</span><span class="lnt">119&#10;</span><span class="lnt">120&#10;</span><span class="lnt">121&#10;</span><span class="lnt">122&#10;</span><span class="lnt">123&#10;</span><span class="lnt">124&#10;</span><span class="lnt">125&#10;</span><span class="lnt">126&#10;</span><span class="lnt">127&#10;</span><span class="lnt">128&#10;</span><span class="lnt">129&#10;</span><span class="lnt">130&#10;</span><span class="lnt">131&#10;</span><span class="lnt">132&#10;</span><span class="lnt">133&#10;</span><span class="lnt">134&#10;</span><span class="lnt">135&#10;</span><span class="lnt">136&#10;</span><span class="lnt">137&#10;</span><span class="lnt">138&#10;</span><span class="lnt">139&#10;</span><span class="lnt">140&#10;</span><span class="lnt">141&#10;</span><span class="lnt">142&#10;</span><span class="lnt">143&#10;</span><span class="lnt">144&#10;</span><span class="lnt">145&#10;</span><span class="lnt">146&#10;</span><span class="lnt">147&#10;</span><span class="lnt">148&#10;</span><span class="lnt">149&#10;</span><span class="lnt">150&#10;</span><span class="lnt">151&#10;</span><span class="lnt">152&#10;</span><span class="lnt">153&#10;</span><span class="lnt">154&#10;</span><span class="lnt">155&#10;</span><span class="lnt">156&#10;</span><span class="lnt">157&#10;</span><span class="lnt">158&#10;</span><span class="lnt">159&#10;</span><span class="lnt">160&#10;</span><span class="lnt">161&#10;</span><span class="lnt">162&#10;</span><span class="lnt">163&#10;</span><span class="lnt">164&#10;</span><span class="lnt">165&#10;</span><span class="lnt">166&#10;</span><span class="lnt">167&#10;</span><span class="lnt">168&#10;</span><span class="lnt">169&#10;</span><span class="lnt">170&#10;</span><span class="lnt">171&#10;</span><span class="lnt">172&#10;</span><span class="lnt">173&#10;</span><span class="lnt">174&#10;</span><span class="lnt">175&#10;</span><span class="lnt">176&#10;</span><span class="lnt">177&#10;</span><span class="lnt">178&#10;</span><span class="lnt">179&#10;</span><span class="lnt">180&#10;</span><span class="lnt">181&#10;</span><span class="lnt">182&#10;</span><span class="lnt">183&#10;</span><span class="lnt">184&#10;</span><span class="lnt">185&#10;</span><span class="lnt">186&#10;</span><span class="lnt">187&#10;</span><span class="lnt">188&#10;</span><span class="lnt">189&#10;</span><span class="lnt">190&#10;</span><span class="lnt">191&#10;</span><span class="lnt">192&#10;</span><span class="lnt">193&#10;</span><span class="lnt">194&#10;</span><span class="lnt">195&#10;</span><span class="lnt">196&#10;</span><span class="lnt">197&#10;</span><span class="lnt">198&#10;</span><span class="lnt">199&#10;</span><span class="lnt">200&#10;</span><span class="lnt">201&#10;</span><span class="lnt">202&#10;</span><span class="lnt">203&#10;</span><span class="lnt">204&#10;</span><span class="lnt">205&#10;</span><span class="lnt">206&#10;</span><span class="lnt">207&#10;</span><span class="lnt">208&#10;</span><span class="lnt">209&#10;</span><span class="lnt">210&#10;</span><span class="lnt">211&#10;</span><span class="lnt">212&#10;</span><span class="lnt">213&#10;</span><span class="lnt">214&#10;</span><span class="lnt">215&#10;</span><span class="lnt">216&#10;</span><span class="lnt">217&#10;</span><span class="lnt">218&#10;</span><span class="lnt">219&#10;</span><span class="lnt">220&#10;</span><span class="lnt">221&#10;</span><span class="lnt">222&#10;</span><span class="lnt">223&#10;</span><span class="lnt">224&#10;</span><span class="lnt">225&#10;</span><span class="lnt">226&#10;</span><span class="lnt">227&#10;</span><span class="lnt">228&#10;</span><span class="lnt">229&#10;</span><span class="lnt">230&#10;</span><span class="lnt">231&#10;</span><span class="lnt">232&#10;</span><span class="lnt">233&#10;</span><span class="lnt">234&#10;</span><span class="lnt">235&#10;</span><span class="lnt">236&#10;</span><span class="lnt">237&#10;</span><span class="lnt">238&#10;</span><span class="lnt">239&#10;</span><span class="lnt">240&#10;</span><span class="lnt">241&#10;</span><span class="lnt">242&#10;</span><span class="lnt">243&#10;</span><span class="lnt">244&#10;</span><span class="lnt">245&#10;</span><span class="lnt">246&#10;</span><span class="lnt">247&#10;</span><span class="lnt">248&#10;</span><span class="lnt">249&#10;</span><span class="lnt">250&#10;</span><span class="lnt">251&#10;</span><span class="lnt">252&#10;</span><span class="lnt">253&#10;</span><span class="lnt">254&#10;</span><span class="lnt">255&#10;</span><span class="lnt">256&#10;</span><span class="lnt">257&#10;</span><span class="lnt">258&#10;</span><span class="lnt">259&#10;</span><span class="lnt">260&#10;</span><span class="lnt">261&#10;</span><span class="lnt">262&#10;</span><span class="lnt">263&#10;</span><span class="lnt">264&#10;</span><span class="lnt">265&#10;</span><span class="lnt">266&#10;</span><span class="lnt">267&#10;</span><span class="lnt">268&#10;</span><span class="lnt">269&#10;</span><span class="lnt">270&#10;</span><span class="lnt">271&#10;</span><span class="lnt">272&#10;</span><span class="lnt">273&#10;</span><span class="lnt">274&#10;</span><span class="lnt">275&#10;</span><span class="lnt">276&#10;</span><span class="lnt">277&#10;</span><span class="lnt">278&#10;</span><span class="lnt">279&#10;</span><span class="lnt">280&#10;</span><span class="lnt">281&#10;</span><span class="lnt">282&#10;</span><span class="lnt">283&#10;</span><span class="lnt">284&#10;</span><span class="lnt">285&#10;</span><span class="lnt">286&#10;</span><span class="lnt">287&#10;</span><span class="lnt">288&#10;</span><span class="lnt">289&#10;</span><span class="lnt">290&#10;</span><span class="lnt">291&#10;</span><span class="lnt">292&#10;</span><span class="lnt">293&#10;</span><span class="lnt">294&#10;</span><span class="lnt">295&#10;</span><span class="lnt">296&#10;</span><span class="lnt">297&#10;</span><span class="lnt">298&#10;</span><span class="lnt">299&#10;</span><span class="lnt">300&#10;</span><span class="lnt">301&#10;</span><span class="lnt">302&#10;</span><span class="lnt">303&#10;</span><span class="lnt">304&#10;</span><span class="lnt">305&#10;</span><span class="lnt">306&#10;</span><span class="lnt">307&#10;</span><span class="lnt">308&#10;</span><span class="lnt">309&#10;</span><span class="lnt">310&#10;</span><span class="lnt">311&#10;</span><span class="lnt">312&#10;</span><span class="lnt">313&#10;</span><span class="lnt">314&#10;</span><span class="lnt">315&#10;</span><span class="lnt">316&#10;</span><span class="lnt">317&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/env bash&#10;</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nb">set</span> -e&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Arch Linux Install Script Recovery (alis-recovery) start a recovery for an</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># failed installation or broken system.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Copyright (C) 2018 picodotdev</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># This program is free software: you can redistribute it and/or modify</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># it under the terms of the GNU General Public License as published by</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># the Free Software Foundation, either version 3 of the License, or</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># (at your option) any later version.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># This program is distributed in the hope that it will be useful,</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># GNU General Public License for more details.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># You should have received a copy of the GNU General Public License</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># This script is hosted at https://github.com/picodotdev/alis. For new features,</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># improvements and bugs fill an issue in GitHub or make a pull request.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Pull Request are welcome!</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># If you test it in real hardware please send me an email to pico.dev@gmail.com with</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># the machine description and tell me if somethig goes wrong or all works fine.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Please, don&#39;t ask for support for this script in Arch Linux forums, first read</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># the Arch Linux wiki [1], the Installation Guide [2] and the General</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Recomendations [3], later compare the commands with those of this script.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># [1] https://wiki.archlinux.org</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># [2] https://wiki.archlinux.org/index.php/Installation_guide</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># [3] https://wiki.archlinux.org/index.php/General_recommendations</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Reference:</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># * [Change root](https://wiki.archlinux.org/index.php/Change_root)</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># * [Deactivate volume group](https://wiki.archlinux.org/index.php/LVM#Deactivate_volume_group)</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Usage:</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># # loadkeys es</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># # curl https://raw.githubusercontent.com/picodotdev/alis/master/download.sh | bash, or with URL shortener curl -sL https://bit.ly/2F3CATp | bash</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># # vim alis-recovery.conf</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># # ./alis-recovery.sh</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># global variables (no configuration, don&#39;t edit)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ASCIINEMA</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">BIOS_TYPE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_BIOS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LVM_VOLUME_PHISICAL</span><span class="o">=</span><span class="s2">&#34;lvm&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LVM_VOLUME_GROUP</span><span class="o">=</span><span class="s2">&#34;vg&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LVM_VOLUME_LOGICAL</span><span class="o">=</span><span class="s2">&#34;root&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">BOOT_DIRECTORY</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ESP_DIRECTORY</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#PARTITION_BOOT_NUMBER=0</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">UUID_BOOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">UUID_ROOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTUUID_BOOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTUUID_ROOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_SATA</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_NVME</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">CPU_INTEL</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">VIRTUALBOX</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">CMDLINE_LINUX_ROOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ADDITIONAL_USER_NAMES_ARRAY</span><span class="o">=()</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ADDITIONAL_USER_PASSWORDS_ARRAY</span><span class="o">=()</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="nv">RED</span><span class="o">=</span><span class="s1">&#39;\033[0;31m&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">GREEN</span><span class="o">=</span><span class="s1">&#39;\033[0;32m&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LIGHT_BLUE</span><span class="o">=</span><span class="s1">&#39;\033[1;34m&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">NC</span><span class="o">=</span><span class="s1">&#39;\033[0m&#39;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> configuration_install<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">source</span> alis-recovery.conf&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> sanitize_variables<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$DEVICE</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> sanitize_variable<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VARIABLE</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VARIABLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$VARIABLE</span> <span class="p">|</span> sed <span class="s2">&#34;s/![^ ]*//g&#34;</span><span class="k">)</span> <span class="c1"># remove disabled</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VARIABLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$VARIABLE</span> <span class="p">|</span> sed <span class="s2">&#34;s/ {2,}/ /g&#34;</span><span class="k">)</span> <span class="c1"># remove unnecessary white spaces</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VARIABLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$VARIABLE</span> <span class="p">|</span> sed <span class="s1">&#39;s/^[[:space:]]*//&#39;</span><span class="k">)</span> <span class="c1"># trim leading</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VARIABLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$VARIABLE</span> <span class="p">|</span> sed <span class="s1">&#39;s/[[:space:]]*$//&#39;</span><span class="k">)</span> <span class="c1"># trim trailing</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$VARIABLE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;KEYS&#34;</span> <span class="s2">&#34;</span><span class="nv">$KEYS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;DEVICE&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;LVM&#34;</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_equals <span class="s2">&#34;PARTITION_ROOT_ENCRYPTION_PASSWORD&#34;</span> <span class="s2">&#34;PARTITION_ROOT_ENCRYPTION_PASSWORD_RETYPE&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_ROOT_ENCRYPTION_PASSWORD</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_ROOT_ENCRYPTION_PASSWORD_RETYPE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;PING_HOSTNAME&#34;</span> <span class="s2">&#34;</span><span class="nv">$PING_HOSTNAME</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables_value<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&#34;</span><span class="nv">$VALUE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2"> environment variable must have a value.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables_boolean<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$VALUE</span><span class="s2">&#34;</span> <span class="s2">&#34;true false&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables_list<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUES</span><span class="o">=</span><span class="nv">$3</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">REQUIRED</span><span class="o">=</span><span class="nv">$4</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$REQUIRED</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span> -o <span class="s2">&#34;</span><span class="nv">$REQUIRED</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$VALUE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VALUE</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;&#34;</span> -a -z <span class="s2">&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$VALUES</span><span class="s2">&#34;</span> <span class="p">|</span> grep -F -w <span class="s2">&#34;</span><span class="nv">$VALUE</span><span class="s2">&#34;</span><span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2"> environment variable value [</span><span class="nv">$VALUE</span><span class="s2">] must be in [</span><span class="nv">$VALUES</span><span class="s2">].&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables_equals<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME1</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME2</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE1</span><span class="o">=</span><span class="nv">$3</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE2</span><span class="o">=</span><span class="nv">$4</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VALUE1</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;</span><span class="nv">$VALUE2</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$NAME1</span><span class="s2"> and </span><span class="nv">$NAME2</span><span class="s2"> must be equal [</span><span class="nv">$VALUE1</span><span class="s2">, </span><span class="nv">$VALUE2</span><span class="s2">].&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables_size<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SIZE_EXPECT</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SIZE</span><span class="o">=</span><span class="nv">$3</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SIZE_EXPECT</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;</span><span class="nv">$SIZE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2"> array size [</span><span class="nv">$SIZE</span><span class="s2">] must be [</span><span class="nv">$SIZE_EXPECT</span><span class="s2">].&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> warning<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LIGHT_BLUE</span><span class="si">}</span><span class="s2">Welcome to Arch Linux Install Script Recovery</span><span class="si">${</span><span class="nv">NC</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Once finalized recovery tasks execute following commands: exit, umount -R /mnt, reboot.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -p <span class="s2">&#34;Do you want to continue? [y/N] &#34;</span> yn&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="nv">$yn</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">[</span>Yy<span class="o">]</span>* <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">[</span>Nn<span class="o">]</span>* <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> init<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;init_log&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;loadkeys <span class="nv">$KEYS</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> init_log<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">set</span> -o xtrace&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> facts<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -d /sys/firmware/efi <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">BIOS_TYPE</span><span class="o">=</span><span class="s2">&#34;uefi&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">BIOS_TYPE</span><span class="o">=</span><span class="s2">&#34;bios&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_SATA</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_NVME</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$DEVICE</span> <span class="p">|</span> grep <span class="s2">&#34;^/dev/sda&#34;</span><span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_SATA</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">elif</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$DEVICE</span> <span class="p">|</span> grep <span class="s2">&#34;^/dev/nvme&#34;</span><span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_NVME</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span>lscpu <span class="p">|</span> grep GenuineIntel<span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CPU_INTEL</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span>lspci <span class="p">|</span> grep -i virtualbox<span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VIRTUALBOX</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> prepare<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;prepare_partition&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> prepare_partition<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -d /mnt/boot <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;umount /mnt/boot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;umount /mnt&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -e <span class="s2">&#34;/dev/mapper/</span><span class="nv">$LVM_VOLUME_LOGICAL</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$PARTITION_ROOT_ENCRYPTION_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cryptsetup close <span class="nv">$LVM_VOLUME_LOGICAL</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -e <span class="s2">&#34;/dev/mapper/</span><span class="nv">$LVM_VOLUME_PHISICAL</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$PARTITION_ROOT_ENCRYPTION_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cryptsetup close <span class="nv">$LVM_VOLUME_PHISICAL</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> configure_network<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$WIFI_INTERFACE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cp /etc/netctl/examples/wireless-wpa /etc/netctl&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  	chmod <span class="m">600</span> /etc/netctl&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  	sed -i <span class="s1">&#39;s/^Interface=.*/Interface=&#39;</span><span class="s2">&#34;</span><span class="nv">$WIFI_INTERFACE</span><span class="s2">&#34;</span><span class="s1">&#39;/&#39;</span> /etc/netctl&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  	sed -i <span class="s1">&#39;s/^ESSID=.*/ESSID=&#39;</span><span class="s2">&#34;</span><span class="nv">$WIFI_ESSID</span><span class="s2">&#34;</span><span class="s1">&#39;/&#39;</span> /etc/netctl&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  	sed -i <span class="s1">&#39;s/^Key=.*/Key=&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;$WIFI_KEY&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;/&#39;</span> /etc/netctl&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  	<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$WIFI_HIDDEN</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  		sed -i <span class="s1">&#39;s/^#Hidden=.*/Hidden=yes/&#39;</span> /etc/netctl&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  	<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  	netctl start wireless-wpa&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;ping -c <span class="m">5</span> <span class="nv">$PING_HOSTNAME</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Network ping check failed.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> partition<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;uefi&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_SATA</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">#PARTITION_BOOT_NUMBER=1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_NVME</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">#PARTITION_BOOT_NUMBER=1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;bios&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_SATA</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BIOS</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">3&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">#PARTITION_BOOT_NUMBER=2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">3&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_NVME</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BIOS</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p3&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">#PARTITION_BOOT_NUMBER=2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p3&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$PARTITION_ROOT_ENCRYPTION_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -n <span class="s2">&#34;</span><span class="nv">$PARTITION_ROOT_ENCRYPTION_PASSWORD</span><span class="s2">&#34;</span> <span class="p">|</span> cryptsetup --key-file<span class="o">=</span>- open <span class="nv">$PARTITION_ROOT</span> <span class="nv">$LVM_VOLUME_PHISICAL</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep <span class="m">5</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT_MAPPER</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$LVM_VOLUME_GROUP</span><span class="s2">-</span><span class="nv">$LVM_VOLUME_LOGICAL</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;/dev/mapper/</span><span class="nv">$DEVICE_ROOT_MAPPER</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_OPTIONS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_TRIM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_OPTIONS</span><span class="o">=</span><span class="s2">&#34;defaults,noatime&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS</span><span class="s2">&#34;</span> <span class="nv">$DEVICE_ROOT</span> /mnt&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS</span><span class="s2">&#34;</span> <span class="nv">$PARTITION_BOOT</span> /mnt/boot&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> recovery<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> main<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;configuration_install&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;sanitize_variables&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;warning&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;init&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;facts&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;prepare&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;partition&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">#recovery</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">main</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>alis-recovery.sh</span>
    </div>
</div>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/alis/tree/master/">código fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub.</p>
</div>
]]>
        </content>
        
            
                <category term="gnu-linux"/>
            
                <category term="planeta-codigo"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2018/06/hemeroteca-13/</id>
        <title>Hemeroteca #13</title>
        <updated>2018-06-30T10:00:00+02:00</updated>
        <published>2018-06-30T10:00:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2018/06/hemeroteca-13/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        
        <![CDATA[<p>El primer semestre del 2018 ya ha pasado. Estos primeros meses he publicado 38 artículos sobre la temática habitual de esta bitácora como programación, software libre, <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> algunos de opinión relacionados con la tecnología. Las visitas e ingresos de AdSense no han crecido tanto como en ocasiones anteriores pero se han mantenido a un nivel similar sobre los 30K páginas vistas y los 30 € de ingresos en AdSense que no están nada mal.</p>
<p>Dado que desde hace unos cuantos meses no tengo ordenador propio y solo dispongo de el del trabajo normalmente solo los fines de semana no he podido investigar, probar tantas cosas que me gustaría y he publicado más artículos de opinión que de software libre y GNU/Linux. Como comento en algunos de los artículos publicados más o menos ya tengo decidido que mi siguiente equipo será un <a href="https://en.wikipedia.org/wiki/Next_Unit_of_Computing">Intel NUC</a> pero estoy esperando a que salgan esta segunda mitad los Bean Canyon para que el salto que experimente sea notable tanto en el microprocesador con un <a href="https://ark.intel.com/es-es/products/124967/Intel-Core-i5-8250U-Processor-6M-Cache-up-to-3_40-GHz">Intel Core i5 8250U</a> o <a href="https://ark.intel.com/products/135935/Intel-Core-i5-8259U-Processor-6M-Cache-up-to-3_80-GHz">i5-8259U</a>, 4 núcleos y 8 hilos, 6 MiB de caché y 32 GiB de memoria sobre lo que tenía antes un <a href="https://ark.intel.com/es-es/products/67355/Intel-Core-i5-3210M-Processor-3M-Cache-up-to-3_10-GHz-rPGA">Intel Core i5 3210M</a>, 3 MiB de caché, 2 núcleos, 4 hilos y 8 GiB de memoria. Con tal cantidad de memoria podré hacer algunas pruebas con contenedores y virtualización que con solo 8 GiB de memoria ya incluso se me quedaba escaso. Cuando adquiera este nuevo equipo publicaré varios artículos con el desempaquetado o <em>unboxing</em> y el análisis de varios de esos componentes.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/06/hemeroteca-13/images/analytics_hu8ba3bde248b5428d7e505641b1455469_257538_2560x1440_fit_box_3.png" data-gallery="" title="Evolución Analytics"><img src="https://picodotdev.github.io/blog-bitix/2018/06/hemeroteca-13/images/analytics_hu8ba3bde248b5428d7e505641b1455469_257538_650x450_fit_box_3.png" width="650" height="236" alt="Evolución Analytics" title="Evolución Analytics"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/06/hemeroteca-13/images/adsense_huc0e3ed4b9192027e33752b7087e42910_150019_2560x1440_fit_box_3.png" data-gallery="" title="Evolución AdSense"><img src="https://picodotdev.github.io/blog-bitix/2018/06/hemeroteca-13/images/adsense_huc0e3ed4b9192027e33752b7087e42910_150019_650x450_fit_box_3.png" width="650" height="183" alt="Evolución AdSense" title="Evolución AdSense"  class="lozad "></a></p>
<figcaption>Evolución Analytics y AdSense</figcaption>
</figure>
</div>
<p>Entre los artículos sobre programación han estado los habituales sobre Java, destacando las novedades de Java 10, un par sobre <a href="https://tapestry.apache.org/">Apache Tapestry</a>. Como resolver varios de los problemas clásicos de sincronización, programación concurrente en Java, <a href="https://www.webjars.org/">Webjars</a>, &hellip;</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/01/integracion-y-entrega-continua-con-gitlab-sobre-docker/">Integración y entrega continua con GitLab sobre Docker</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/">Gestión de peticiones, wiki y pages con GitLab</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/02/analisis-estatico-de-codigo-con-pmd-y-un-ejemplo/">Análisis estático de código con PMD y un ejemplo</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/02/las-6-plus-2-formas-normales-de-las-bases-de-datos-relacionales/">Las 6+2 formas normales de las bases de datos relacionales</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/02/referencias-a-grupos-de-captura-en-expresiones-regulares-y-reemplazos/">Referencias a grupos de captura en expresiones regulares y reemplazos</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/02/el-problema-de-concurrencia-de-la-cena-de-los-filosofos-resuelto-con-java/">El problema de concurrencia de la cena de los filósofos resuelto con Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/03/el-problema-de-concurrencia-del-agente-y-los-fumadores-resuelto-en-java/">El problema de concurrencia del agente y los fumadores resuelto en Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/03/novedades-de-java-10/">Novedades de Java 10</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/03/la-herramienta-jlink-para-generar-runtimes-de-java-incluyendo-exclusivamente-los-modulos-que-usa-una-aplicacion/">La herramienta jlink para generar runtimes de Java incluyendo exclusivamente los módulos que usa una aplicación</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/03/que-es-y-como-funciona-el-type-erasure-en-java/">Qué es y cómo funciona el type erasure en Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/04/introduccion-a-nio-2-el-sistema-de-entrada-salida-de-java/">Introducción a NIO.2, el sistema de entrada/salida de Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/04/la-controversia-sobre-las-excepciones-checked-y-unchecked/">La controversia sobre las excepciones checked y unchecked</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/04/la-sentencia-try-with-resources-de-java/">La sentencia try-with-resources de Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/04/la-clase-optional-de-java-para-evitar-la-excepcion-nullpointerexception/">La clase Optional de Java para evitar la excepción NullPointerException</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/05/plantillas-con-etiquetas-no-balanceadas-en-apache-tapestry/">Plantillas con etiquetas no balanceadas en Apache Tapestry</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/05/gestion-de-errores-con-either-o-try-en-vez-de-con-codigo-de-error-null-optional-checked-exception-o-unchecked-exception/">Gestión de errores con Either o Try en vez de con código de error, null, Optional, checked exception o unchecked exception</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/05/depurar-codigo-javascript-con-la-instruccion-debugger/">Depurar código JavaScript con la instrucción debugger</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/05/recuperar-datos-eficientemente-en-graphql-usando-batching/">Recuperar datos eficientemente en GraphQL usando batching</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/05/empaquetar-una-aplicacion-java-en-un-archivo-jar-ejecutable-incluyendo-sus-dependencias/">Empaquetar una aplicación Java en un archivo jar ejecutable incluyendo sus dependencias</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/06/dependencias-sobre-librerias-de-lado-de-cliente-con-webjars-en-una-aplicacion-web-java/">Dependencias sobre librerías de lado de cliente con Webjars en una aplicación web Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/06/actualizar-las-versiones-de-las-librerias-javascript-built-in-de-apache-tapestry/">Actualizar las versiones de las librerías JavaScript built-in de Apache Tapestry</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/06/soporte-para-lanzar-eventos-desde-javascript-con-ajax-en-un-componente-de-apache-tapestry/">Soporte para lanzar eventos desde JavaScript con Ajax en un componente de Apache Tapestry</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/06/java-magazine-la-publicacion-gratuita-sobre-java/">Java Magazine, la publicación gratuita sobre Java</a></li>
</ul>
<p>En la categoría de software libre o GNU/Linux como tener una consola de juegos retro con una Raspberry Pi, varias computadoras similares a la Raspberry Pi.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/">Consola de juegos retro con Lakka y una Raspberry Pi</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/03/7-plus-computadoras-baratas-del-tamano-de-una-tarjeta-de-credito-basadas-en-gnu-linux-y-arm/">7+ computadoras baratas del tamaño de una tarjeta de crédito basadas en GNU/Linux y ARM</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/04/prompt-de-la-terminal-personalizado-en-carpetas-de-git-con-el-interprete-bash/">Prompt de la terminal personalizado en carpetas de git con el intérprete Bash</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/04/personalizar-el-prompt-del-sistema-del-interprete-de-comandos-bash/">Personalizar el prompt del sistema del intérprete de comandos Bash</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/05/generador-de-paginas-web-estaticas-y-bitacoras-con-hugo/">Generador de páginas web estáticas y bitácoras Hugo</a></li>
</ul>
<p>En la categoría de opinión están el importante problema de seguridad que se hacía público a principio de año y que afectaba a todos los microprocesadores de Intel fabricados desde hace una década con <em>Meltdown</em>. <a href="https://www.intel.es">Intel</a>, <a href="https://www.amd.com/es">AMD</a> y <a href="https://www.arm.com/">ARM</a> afectados otras variantes denominadas <em>Spectre</em>. Como el hardware estos microprocesadores es defectuoso ni solucionable por microcódigo solo se ha podido mitigar mediante parches de software en los núcleos de los sistemas operativos y compiladores que en cualquier caso pueden suponer una merma en el rendimiento. Aún no se conoce un software capaz de aprovechar estos fallos de seguridad pero no quiere decir que no se descubran. Afecta aún más si cabe a entornos de computación en la nube al compartirse los recursos de computación, en estos entornos es especialmente grabe por seguridad ya que el fallo permite leer la memoria del <em>kernel</em>, aplicaciones, contenedores, datos, claves, &hellip;</p>
<p>También publiqué un artículo el ordenador con las opciones que barajaba, una opinión sobre el <a href="https://slimbook.es/aio-curve-el-all-in-one-curvo-de-gnu-linux">Slimbook AIO Curve</a> y cómo internet está transformando el sector del comercio y distribución o mi opinión de que me quedo GNU/Linux sobre un Mac. También los artículos con las opciones que estoy tomando para comprar equipo ya no a mucho tiempo tardar.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/01/articulo-5-de-yo-apoyo-al-software-libre/">Artículo #5 de Yo apoyo al software libre</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/01/explicacion-del-fallo-de-seguridad-meltdown-y-spectre-en-los-microprocesadores-intel/">Explicación del fallo de seguridad Meltdown y Spectre en los microprocesadores Intel</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/01/conferencia-bilbostack-2018/">Conferencia BilboStack 2018</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/02/8-aniversario-del-blog/">8º aniversario del blog</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/03/tu-con-mac-yo-con-mi-gnu-linux/">Tú con tu Mac, yo con mi GNU/Linux</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/04/intentando-elegir-portatil-nuc-o-mini-itx-para-comprar-nuevo-equipo/">Intentando elegir portátil, NUC o mini ITX para comprar nuevo equipo</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/04/sobre-el-slimbook-aio-curve/">Sobre el Slimbook AIO Curve</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/05/sobre-el-comercio-electronico-el-corte-ingles-y-amazon/">Sobre el comercio electrónico, El Corte Inglés y Amazon</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/06/decidido-a-comprar-un-intel-nuc-entre-las-opciones-que-he-evaluado/">Decidido a comprar un Intel NUC entre las opciones que he evaluado</a></li>
</ul>
<p>Para finalizar otro artículo fuera de tema del habitual de este blog con los plantones de roble que tengo, como han crecido y como están desde que los planté el año pasado. Aunque aún no lo he publicado algunos están mostrando síntomas de fallecimiento y lo que es peor no tengo claro por que si por la cantidad de agua, excesiva luz directa del sol, humedad, calor, &hellip;</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/05/los-plantones-de-roble/">Los plantones de roble</a></li>
</ul>
]]>
        </content>
        
            
                <category term="blog"/>
            
                <category term="java"/>
            
                <category term="planeta-codigo"/>
            
                <category term="programacion"/>
            
                <category term="software"/>
            
                <category term="software-libre"/>
            
                <category term="tapestry"/>
            
                <category term="gnu-linux"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/</id>
        <title>Consola de juegos retro con Lakka y una Raspberry Pi</title>
        <updated>2018-03-05T19:30:00+01:00</updated>
        <published>2018-02-23T23:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>El propósito original de las Raspberry Pi era educativo y se ha hecho muy popular debido a su bajo precio y un buen trabajo de <em>marketing</em>. Sin embargo, puede utilizarse para muchos otros propósitos desde aprendizaje a programación, electrónica, servidor de archivos personales, descarga de películas, series y libros con torrent y también como una consola de juegos antiguos de arcade.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/lakka.png" width="200" height="200" alt="Lakka" title="Lakka"  class=""></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/linux.svg" width="200" height="232" alt="Linux" title="Linux"  class=""></p>
</div>
<p>Desde que compré la <a href="https://www.raspberrypi.org/">Raspberry Pi</a> en el año 2012, el modelo inicial B con 256 MiB de memoria, me ha dado y me esta dando un estupendo servicio. Principalmente la he estado usando para descargar películas y libros vía <em>torrent</em> con <a href="https://transmissionbt.com/">Transmission</a> usando la distribución <a href="https://archlinuxarm.org/">Arch Linux para ARM</a>. Sin embargo, ya estoy pensando en sustituirla por algo más potente para hacer algunas pruebas con <a href="https://www.docker.com/">Docker</a>, <a href="https://www.ansible.com/">Ansible</a> y algunas pruebas más que se me ocurran aparte de seguir queriendo hacer descargas o en un futuro con la función de SmartTV. De la Raspberry Pi no se lanzará un nuevo modelo, el que sería el 4, hasta el 2019 y cuando salga no creo que sea más potente que una <a href="https://www.pine64.org/?page_id=7147">Rock64</a> que ya a día de hoy incorporan hasta 4 GiB de memoria, tienen Gigabit Ethernet y un puerto USB 3.0 con precio similar a la Raspberry Pi, lo único que le falta respecto al modelo de la RPi 3 es WiFi y Bluetooth pero a cambio se puede tener 4 veces más memoria, Gigabit Ethernet y un puerto USB 3.0. El mayor problema de la Rock64 es su soporte tanto en distribuciones, software y comunidad, en estos es donde la Raspberry Pi no tiene competidor.</p>
<p>Pero antes estoy pensando en el uso que le puedo dar a la Raspberry Pi para que no se quede en un cajón cogiendo polvo. Y he pensado en utilizarla como consola de juegos retro con <a href="https://www.lakka.tv/">Lakka</a> para mis sobrinos que ahora usan PlayStation 1 pero que ya tiene los cables de los mandos estropeados de tanto doblarlos al guardarlos, de tanto uso ya no funcionan bien.</p>
<p>Lo primero que he hecho es comprar unos <a href="http://amzn.to/2Cg6035">mandos similares a los de la antigua Super NES</a>, aunque con un teclado USB también se puede jugar es más cómodo con los mandos, además de poder jugar a dos jugadores. En muchos juegos de <em>arcade</em> antiguos es posible incluso a tres o cuatro jugadores.</p>
<div class="media">
<figure>
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/retroarch.svg" width="300" height="200" alt="RetroArch" title="RetroArch"  class="lozad "></p>
</figure>
</div>
<p>Los elementos necesarios para tener tener una consola retro son los siguientes: una <a href="https://amzn.to/2MXH57Q">Raspberry Pi</a>, un <a href="https://amzn.to/2YvYMRw">cargador USB</a> adecuado, una <a href="https://amzn.to/3ecB3wp">tarjeta microSD de 64 GiB</a> o más, <a href="http://amzn.to/2Cg6035">dos mandos para consola USB</a> o un <a href="http://amzn.to/2ou0QHD">teclado USB</a>, un <a href="http://amzn.to/2sPcjqz">cable HDMI</a> y si se quiere una <a href="http://amzn.to/2Fvtyjy">caja</a>. Por unos 65 € se pueden adquirir los elementos imprescindibles en la tienda de <a href="https://amzn.to/2flFhHA">Amazon</a>.</p>
<ul>
<li><a href="https://amzn.to/2MXH57Q">Raspberry Pi</a></li>
<li><a href="https://amzn.to/2YvYMRw">Cargador USB</a></li>
<li><a href="https://amzn.to/3ecB3wp">Tarjeta microSD de 64 GiB</a></li>
<li><a href="https://amzn.to/2UCN0n6">Cable HDMI</a></li>
<li><a href="http://amzn.to/2Cg6035">Mandos USB</a></li>
<li><a href="http://amzn.to/2ou0QHD">Teclado USB</a></li>
<li><a href="https://www.lakka.tv/">Software Lakka</a></li>
<li><a href="https://archive.org/details/datomatic.no-intro.org">ROMs de juegos</a></li>
</ul>
<div class="media media-amazon">
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B0899VXM8F&amp;linkId=d5f0684371c6b5b8fa5cbd472b276ba4" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07VD5L1VY&amp;linkId=f7a5d402571fb5dd48fa2311dc169469" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B01566WOAG&amp;linkId=1c7d89fa46e38c81f0e35cb1518e80ea" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07CXXBTST&amp;linkId=aee5521403e014f5b256191d116ac4b3" title="Amazon" class="lozad"></iframe>
</div>
<div class="media media-amazon">
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B01N59IUV5&amp;linkId=0bcc896ec870ce504e2c4c0acfaa8870" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B00564GWEI&amp;linkId=2264c2741c0914e881d4e70b36b927da" title="Amazon" class="lozad"></iframe>
</div>
<p>El software para usar la Raspberry Pi como consola retro que he utilizado es Lakka que es una distribución <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> especifica para convertir un ordenador en una consola de juegos retro. Para instalarlo en la tarjeta microSD hay que <a href="http://www.lakka.tv/get/">descargar la imagen de Lakka</a> y una forma simple de grabarla en la tarjeta microSD es utilizando <a href="https://www.balena.io/etcher/">Etcher</a>, basta instalarlo, iniciarlo, seleccionar la imagen de Lakka una vez descomprimido su archivo zip, seleccionar la unidad de la tarjeta SD (si es necesario ya que Etcher puede seleccionarla automáticamente) y pulsar el botón <em>Flash!</em>, después de unos pocos minutos la imagen está grabada y la tarjeta microSD lista para usarla en la Raspberry Pi y efectuar el primer inicio.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/etcher_huf9f2630e663feee1d2eb7938a2d085bb_110546_2560x1440_fit_box_3.png" data-gallery="" title="Etcher"><img src="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/etcher_huf9f2630e663feee1d2eb7938a2d085bb_110546_300x200_fit_box_3.png" width="300" height="162" alt="Etcher" title="Etcher"  class="lozad "></a></p>
<figcaption>Etcher</figcaption>
</figure>
</div>
<p>Los juegos se distribuyen en archivos denominados ROM y estos se pueden descargar de ciertas páginas, una de ellas es de <a href="https://archive.org/">Internet Archive</a> donde está una <a href="https://archive.org/details/datomatic.no-intro.org">colección de juegos</a> de las consolas más populares o si sabemos el nombre del juego de <em>arcade</em> descargarlo individualmente de <a href="http://coolrom.com/">CoolROM</a>. Hay miles de juegos por lo que es importante conocer su nombre para hacer la búsqueda. En otro artículo hice una pequeña <a href="https://picodotdev.github.io/blog-bitix/2016/08/jugar-a-videojuegos-clasicos-y-miticos-de-arcade-con-mame-en-gnu-linux/">recopilación de juegos míticos de arcade</a> y en otros blog están recopilados otra selección de juegos:</p>
<ul>
<li><a href="http://mundogeek.net/archivos/2009/11/16/los-10-mejores-juegos-de-mame-para-nostalgicos/">Los 10 mejores juegos de MAME para nostálgicos</a></li>
<li><a href="http://lopezpino.com/2010/08/24/los-mejores-juegos-de-mame/">Los mejores juegos de MAME</a></li>
<li><a href="https://www.taringa.net/comunidades/mame-arcade/4629126/Los-Mejores-234-Juegos-de-Mame-Por-Mediafire.html">Los Mejores 234 Juegos de Mame Por Mediafire</a></li>
<li><a href="https://www.hobbyconsolas.com/reportajes/100-juegos-miticos-nes-49310">Los 100 juegos míticos de NES</a></li>
</ul>
<p>Algunas de las consolas emuladas son:</p>
<ul>
<li>Nintendo Entertainment System, Super Nintendo Entertainment System, Nintendo 64, Nintendo GameCube, Game Boy</li>
<li>Sega Master System, Genesis, Saturn, Dreamcast, Game Gear</li>
<li>MSX, MSX 2</li>
<li>Atari 2600, 5200, 7800, Lynx, Jaguar</li>
<li>Varias más y juegos de máquinas recreativas con FBA Alpha y MAME</li>
</ul>
<p>En el primer inicio Lakka debe hacer una serie de tareas para inicializar el sistema durante unos minutos, recomiendo no conectar el cable de red  ni ningún mando o teclado en este paso. Una vez se completa este primer inicio el siguiente paso es copiar las ROMs, hay varias formas una de ellas es desde un equipo con GNU/Linux y copiar los archivos al directorio <em>/storage/ROMs/</em> directamente a la tarjeta microSD desde un ordenador. En otros sistemas que no saben como acceder a las particiones <em>ext4</em> de Linux la más sencilla es activando el protocolo SAMBA en Lakka y copiarlos por la red, aunque tarda más. SAMBA se activa desde el menú <em>Settings &gt; Services &gt; SAMBA Enable</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/lakka_hu78451ee42d9f0aae4d1fe724b0e434d2_901934_2560x1440_fit_q90_box.jpg" data-gallery="" title="Lakka"><img src="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/lakka_hu78451ee42d9f0aae4d1fe724b0e434d2_901934_300x200_fit_q90_box.jpg" width="160" height="200" alt="Lakka" title="Lakka"  class="lozad "></a></p>
<figcaption>Raspberry Pi ejecutando Lakka (La televisión va acorde con los juegos XD)</figcaption>
</figure>
</div>
<p>Con el cable de red conectado a la Raspberry Pi al <em>router</em> y desde un equipo con Windows, macOS o GNU/Linux y probando la dirección IP que el <em>router</em> le ha asignado a la Raspberry Pi se accede a los directorios compartidos por red poniendo en el explorador de archivos <em>\\192.168.0.2</em>, <em>\\192.168.0.3</em> o <em>\\192.168.0.4</em>, &hellip; o posteriores números dependiendo de los dispositivos conectados en la red, también podría ser <em>\\192.168.1.2</em>, <em>\\192.168.1.3</em>, <em>\\192.168.1.4</em>, &hellip; Con acceso en el explorador de archivos ya solo queda copiar las ROMs a la carpeta compartida ROMs. En macOS macOS con <em>Finder</em> en la opción <em>Ir &gt; Conectar al servidor</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/lakka-samba-1_hu385d4d54b02ae23fe0c9b8e510fc62d4_197807_2560x1440_fit_box_3.png" data-gallery="" title="Carpetas compartidas por Lakka mediante SAMBA"><img src="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/lakka-samba-1_hu385d4d54b02ae23fe0c9b8e510fc62d4_197807_300x200_fit_box_3.png" width="300" height="168" alt="Carpetas compartidas por Lakka mediante SAMBA" title="Carpetas compartidas por Lakka mediante SAMBA"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/lakka-samba-2_huf0d9cd3b33c234685afc7cab18a8bffa_194063_2560x1440_fit_box_3.png" data-gallery="" title="Archivos de ROMs vía SAMBA"><img src="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/lakka-samba-2_huf0d9cd3b33c234685afc7cab18a8bffa_194063_300x200_fit_box_3.png" width="300" height="169" alt="Archivos de ROMs vía SAMBA" title="Archivos de ROMs vía SAMBA"  class="lozad "></a></p>
<figcaption>Carpetas compartidas por Lakka mediante SAMBA</figcaption>
</figure>
</div>
<p>Copiados los archivos de las ROMs a la Raspberry Pi desde la opción <em>Import Content &gt; Scan Directory</em> de Lakka esta detectará todos los juegos que encuentre en su base de datos añadiéndolos en varios menús según el sistema emulado del juego en las últimas opciones del menú horizontal de Lakka.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/lakka-games_hu824323f784df132c0c33e217641840f9_818081_2560x1440_fit_q90_box.jpg" data-gallery="" title="Juegos Lakka"><img src="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/lakka-games_hu824323f784df132c0c33e217641840f9_818081_300x200_fit_q90_box.jpg" width="160" height="200" alt="Juegos Lakka" title="Juegos Lakka"  class="lozad "></a></p>
<figcaption>Juegos Lakka</figcaption>
</figure>
</div>
<p>Detectadas las ROMS iniciar un juego basta con seleccionarlo desde los menús e iniciarlo. La mayoría funcionará con un rendimiento óptimo tanto el fluidez de imagen como en sonido, la Raspberry Pi es mucho más potente que los sistemas antiguos que emula, el modelo Raspberry Pi 3 incluso funcionará mejor. Aún asi algunos pueden ir un poco lentos o el sonido no ser completamente fiel al original.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/the-legend-of-zelda_hu39ca57807f5ed283640e80028a620925_139916_2560x1440_fit_box_3.png" data-gallery="" title="The Legend of Zelda"><img src="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/the-legend-of-zelda_hu39ca57807f5ed283640e80028a620925_139916_300x200_fit_box_3.png" width="140" height="200" alt="The Legend of Zelda" title="The Legend of Zelda"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/zelda-II-the-adventure-of-link_hu63f0e922d615f71d9710fba25de4ede9_84794_2560x1440_fit_box_3.png" data-gallery="" title="Zelda-II: The Adventure of Link"><img src="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/zelda-II-the-adventure-of-link_hu63f0e922d615f71d9710fba25de4ede9_84794_300x200_fit_box_3.png" width="146" height="200" alt="Zelda-II: The Adventure of Link" title="Zelda-II: The Adventure of Link"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/super-mario-bros-3_hua1ca64094a72c2e8cf3bf9808d6805a1_110980_2560x1440_fit_box_3.png" data-gallery="" title="Super Mario Bros 3"><img src="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/super-mario-bros-3_hua1ca64094a72c2e8cf3bf9808d6805a1_110980_300x200_fit_box_3.png" width="146" height="200" alt="Super Mario Bros 3" title="Super Mario Bros 3"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/mega-man-5_hua9e290a0024e55d79ec8b3048eaf5dd1_197813_2560x1440_fit_box_3.png" data-gallery="" title="Mega Man 5"><img src="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/mega-man-5_hua9e290a0024e55d79ec8b3048eaf5dd1_197813_300x200_fit_box_3.png" width="142" height="200" alt="Mega Man 5" title="Mega Man 5"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/1943_huaef99bddb12e1c97134ab2fb50de5614_557885_2560x1440_fit_box_3.png" data-gallery="" title="1943"><img src="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/1943_huaef99bddb12e1c97134ab2fb50de5614_557885_300x200_fit_box_3.png" width="144" height="200" alt="1943" title="1943"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/sonic-the-hedgehog_hub9781e6ba4310f33e0f23e679799bf12_169500_2560x1440_fit_box_3.png" data-gallery="" title="Sonic The Hedgehog"><img src="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/sonic-the-hedgehog_hub9781e6ba4310f33e0f23e679799bf12_169500_300x200_fit_box_3.png" width="141" height="200" alt="Sonic The Hedgehog" title="Sonic The Hedgehog"  class="lozad "></a></p>
<figcaption>Varios juegos de la NES y Sega</figcaption>
</figure>
</div>
<p>Tenía dudas por la calidad de los mandos por si eran demasiado frágiles, sin embargo, cuando me han llegado y los he visto me han parecido muy decentes y creo que tratándolos bien van a aguantar mucho tiempo. Además, la Raspberry Pi y Lakka los han reconocido sin ningún tipo de problema tanto conectando uno individualmente o los dos al mismo tiempo reconociendo correctamente todos los botones. Lo único que he tenido que hacer es configurar en el menú <em>Input &gt; Menu Toggle Gamepad Combo</em> (se elige con la cruceta a derecha e izquierda) un botón para salir de un juego pulsando a la vez los botones <em>Start + Select</em>.</p>
<p>Tampoco he tenido ningún problema para que me funcione por el HDMI como también por la salida de vídeo RCA y el sonido por el jack de 3.5mm que posee la Raspberry Pi 1 original que tengo, todo me ha funcionado sin haya tenido que realizar ninguna acción.</p>
<p>Si añadimos algunos juegos de <em>arcade</em> que Lakka no reconoce es posible crear una <a href="http://www.lakka.tv/doc/Playlists/">lista personalizada de juegos</a>, el nombre de la lista determina los iconos de los juegos y las <a href="https://forums.libretro.com/t/megathread-which-roms-work-with-lakka/5566">rutas de los <em>cores</em></a> dependen del sistema a emular, es probable que funcionen con <em>FB Alpha - Arcade Games</em> o <em>MAME</em>. Es importante no renombrar los nombres de los archivos zip de las ROMs ya que es necesario que tengan el nombre original para funcionar bien.</p>
<p>También es posible crear una lista de juegos favoritos (muy útil si tenemos muchos juegos), para ello hay que una vez iniciado el juego salir al menú con la combinación de teclas configurada en <em>Settings &gt; Input &gt; Menu Toggle Gamepad Combo</em> y usar la opción <em>Add to favorites</em>. Desde el mismo menú es posible salir del juego u obtener una captura de pantalla. La lista de favoritos se guarda en <em>Configfiles &gt; retroarch &gt; content_favorites.lpl</em> y el historial en <em>Configfiles &gt; retroarch &gt; content_history.lpl</em> por si se quiere editar manualmente.</p>
<p>Como son muchas ROMs reconocer una entre las muchas que hay o ver como es el juego sin entrar en él está la opción de descargar imágenes del juego y elegir ver una imagen de como es el juego, su portada o su pantalla inicial. Las imágenes se pueden descargar desde la opción <em>Main Menu &gt; Online Updater &gt; Thumbnails Updater</em>.</p>
<p>Al obtener ROMs de forma individual a veces es difícil dar con una que funcione, de algunos juegos hay varias versiones y es posible que algunas de ellas fallen al cargarse, hay que tener un poco de paciencia para encontrar la correcta.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/the-legend-of-zelda-screenshot_hu66fed8df68f46fcc35f3677e2ef44d56_3185_2560x1440_fit_box_3.png" data-gallery="" title="The Legend of Zelda"><img src="https://picodotdev.github.io/blog-bitix/2018/02/consola-de-juegos-retro-con-lakka-y-una-raspberry-pi/images/the-legend-of-zelda-screenshot_hu66fed8df68f46fcc35f3677e2ef44d56_3185_300x200_fit_box_3.png" width="229" height="200" alt="The Legend of Zelda" title="The Legend of Zelda"  class="lozad "></a></p>
<figcaption>Juego The Legend of Zelda de NES</figcaption>
</figure>
</div>
<p>Ya solo queda pasar algunos buenos momentos con estos juegos antiguos pero entretenidos, nosotros o los más pequeños de la casa. Otra opción alternativa a Lakka para el mismo propósito es <a href="https://retropie.org.uk">RetroPie</a> aunque la primera soporta algunos modelos mas de placas similares a la Raspberry Pi.</p>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://elblogdepicodev.blogspot.com.es/2012/05/raspberry-pi-desempaquetado-unboxing.html">Raspberry Pi, desempaquetado</a></li>
<li><a href="http://thumbnailpacks.libretro.com/">Imágenes juegos</a></li>
<li><a href="https://en.wikipedia.org/wiki/Nintendo_video_game_consoles">Nintendo video game consoles</a></li>
<li><a href="https://en.wikipedia.org/wiki/List_of_Sega_video_game_consoles">Sega video game consoles</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="gnu-linux"/>
            
                <category term="juegos"/>
            
                <category term="planeta-codigo"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/</id>
        <title>Gestión de peticiones, wiki y pages con GitLab</title>
        <updated>2018-01-20T10:00:00+01:00</updated>
        <published>2018-01-20T10:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/gitlab.svg" width="200" height="184" alt="GitLab" title="GitLab"  class=""></p>
</div>
<p>Una de las cosas que me gustan de <a href="https://about.gitlab.com/">GitLab</a> es que se puede usar en un servidor propio, la otra cosa que me gusta es que incluye varias herramientas casi imprescindibles para cualquier proyecto como gestión de peticiones para recoger las historias, wiki como documentación e información y <em>pages</em> para generar pequeños sitios web además de los repositorios de <a href="https://git-scm.com/">Git</a> o el servidor de integración y entrega continua. Que GitLab incluya por defecto todas estas herramientas hace innecesario recurrir en la mayoría de los casos a varias herramientas especializadas que cubran estas necesidades como <a href="https://www.atlassian.com/software/jira">JIRA</a>, <a href="https://jenkins.io/">Jenkins</a>, <a href="https://www.mediawiki.org/">MediaWiki</a> o un servidor web para los sitios web.</p>
<p>Después de <a href="https://picodotdev.github.io/blog-bitix/2017/12/gitlab-la-completa-herramienta-integrada-para-desarrollo-de-software/">instalar GitLab usando Docker</a> o de alguna de sus otras formas, creado un usuario no administrador y un proyecto se puede empezar a usar las herramientas de gestión de incidencias, wiki y <em>pages</em>. Estas son solo tres de sus herramientas incluidas, además incluye <a href="https://picodotdev.github.io/blog-bitix/2018/01/integracion-y-entrega-continua-con-gitlab-sobre-docker/">integración y entrega continua</a>.</p>
<h3 id="gestión-de-peticiones">Gestión de peticiones</h3>
<p>La herramienta de gestión de peticiones permite crear historias que recojan las tareas a realizar, las historias pueden ser de diferente tipo como nuevas funcionalidades, mejoras técnicas o errores, es posible asignarlas a diferentes usuarios, relacionar peticiones entre si o incluir documentos adjuntos. Las historias también se pueden mostrar en un panel <a href="https://es.wikipedia.org/wiki/Kanban_%28desarrollo%29">Kanban</a> para visualizar el estado de las peticiones, las que están realizándose, las desplegadas en producción, las siguientes peticiones y donde puede haber cuellos de botella en los procesos. El flujo y el panel Kanban que siguen las peticiones desde que se crean hasta que se dan por terminadas es personalizable.</p>
<p>Para crear una nueva petición hay que acceder en el proyecto a <em>Issues</em> y pulsar el botón <em>New Issue</em>. Rellenados los datos del formulario de creación se puede consultar desde <em>Issues &gt; List</em> para verlas en formato lista o <em>Issues &gt; Board</em> para verlas en formato panel Kanban. El panel Kanban se puede modificar y asignando etiquetas a las peticiones crear columnas adaptado al flujo de trabajo de una organización. Con <a href="https://docs.gitlab.com/ee/user/markdown.html">formato de las descripciones de las peticiones</a> permite hacer referencia a otras o incluir menciones a otros usuarios.</p>
<ul>
<li><a href="https://docs.gitlab.com/ee/user/project/issues/issues_functionalities.html#11-reference">Issues Functionalities</a></li>
<li><a href="https://docs.gitlab.com/ee/user/project/issues/crosslinking_issues.html">Crosslinking Issues</a></li>
<li><a href="https://about.gitlab.com/product/issueboard/">Issue Board</a></li>
</ul>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/images/new-issue-1_hu39cda9bb77c6776898ba6dc3bdb94e84_286600_2560x1440_fit_box_3.png" data-gallery="" title="Nueva petición A"><img src="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/images/new-issue-1_hu39cda9bb77c6776898ba6dc3bdb94e84_286600_300x200_fit_box_3.png" width="300" height="163" alt="Nueva petición A" title="Nueva petición A"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/images/new-issue-2_hu39cda9bb77c6776898ba6dc3bdb94e84_285620_2560x1440_fit_box_3.png" data-gallery="" title="Nueva petición B"><img src="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/images/new-issue-2_hu39cda9bb77c6776898ba6dc3bdb94e84_285620_300x200_fit_box_3.png" width="300" height="163" alt="Nueva petición B" title="Nueva petición B"  class="lozad "></a></p>
<figcaption>Nueva petición</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/images/issues_hua9fb50b63579c6550c6f5d00c5abbfce_218131_2560x1440_fit_box_3.png" data-gallery="" title="Lista de peticiones"><img src="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/images/issues_hua9fb50b63579c6550c6f5d00c5abbfce_218131_300x200_fit_box_3.png" width="300" height="163" alt="Lista de peticiones" title="Lista de peticiones"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/images/labels_hucf4845fc7964e54d76e32fedbafd0a71_293277_2560x1440_fit_box_3.png" data-gallery="" title="Etiquetas"><img src="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/images/labels_hucf4845fc7964e54d76e32fedbafd0a71_293277_300x200_fit_box_3.png" width="300" height="163" alt="Etiquetas" title="Etiquetas"  class="lozad "></a></p>
<figcaption>Lista de peticiones y etiquetas</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/images/board_hubcbec4cba09a225e060715df5c1b7a3b_161725_2560x1440_fit_box_3.png" data-gallery="" title="Panel Kanban"><img src="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/images/board_hubcbec4cba09a225e060715df5c1b7a3b_161725_300x200_fit_box_3.png" width="300" height="163" alt="Panel Kanban" title="Panel Kanban"  class="lozad "></a></p>
<figcaption>Panel Kanban</figcaption>
</figure>
</div>
<h3 id="wiki">Wiki</h3>
<p>Una wiki ayuda a recoger información útil en el mismo proyecto pero no en el repositorio de código fuente, por ejemplo, cómo iniciar la aplicación de un proyecto a partir del repositorio de código fuente, qué dependencias tiene como el JDK o una base de datos. También puede recoger información general de lógica de negocio que no cambien tan a menudo como el código como pudiera ser un esquema de alto nivel de arquitectura o por que se han tomado algunas decisiones en la arquitectura y los requerimientos.</p>
<p>Cuando se accede por primera vez a la wiki se crea la página de inicio que se puede editar o crear nuevas páginas. Las páginas de la wiki se escriben en formato <a href="https://es.wikipedia.org/wiki/Markdown">Markdown</a> y se guarda un historial de las ediciones que se han realizado a cada página.</p>
<ul>
<li><a href="https://docs.gitlab.com/ce/user/project/wiki/index.html">GitLab Wiki</a></li>
</ul>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/images/new-page_hucf4845fc7964e54d76e32fedbafd0a71_224040_2560x1440_fit_box_3.png" data-gallery="" title="Nueva página"><img src="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/images/new-page_hucf4845fc7964e54d76e32fedbafd0a71_224040_300x200_fit_box_3.png" width="300" height="163" alt="Nueva página" title="Nueva página"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/images/page_hucf4845fc7964e54d76e32fedbafd0a71_160172_2560x1440_fit_box_3.png" data-gallery="" title="Página"><img src="https://picodotdev.github.io/blog-bitix/2018/01/gestion-de-peticiones-wiki-y-pages-con-gitlab/images/page_hucf4845fc7964e54d76e32fedbafd0a71_160172_300x200_fit_box_3.png" width="300" height="163" alt="Página" title="Página"  class="lozad "></a></p>
<figcaption>Nueva página y página</figcaption>
</figure>
</div>
<h3 id="pages">Pages</h3>
<p>La herramienta de <em>pages</em> o páginas permite crear un pequeño sitio web. Se pueden utilizar varias de las herramientas generadoras de sitios web estáticos como <a href="https://jekyllrb.com/">Jekyll</a> o <a href="https://gohugo.io/">Hugo</a>. Para crear un sitio web hay que crear un repositorio de código fuente con un archivo <em>.gitlab-ci.yml</em> y una tarea de nombre <em>pages</em> que contiene los comandos para construir el sitio web.</p>
<p>Es posible asignar a los sitios web de <em>pages</em> un dominio propio y añadirles seguridad con el protocolo HTTPS. En <a href="https://gitlab.com/pages">estos repositorios</a> hay ejemplos de como generar un sitio web del proyecto con varios de los más populares generadores de sitios web estáticos. Dependiendo de si el sitio web es para el proyecto o del usuario o grupo el sitio estará accesible en la dirección u otra.</p>
<ul>
<li><a href="https://docs.gitlab.com/ee/user/project/pages/index.html#gitlab-pages-documentation">GitLab Pages</a></li>
</ul>
<p>En resumen, ya con esta pequeña serie de artículos queda claro que GitLab es una herramienta muy completa y que incluye las funcionalidades de varias que son suficientes para la mayoría de los casos sin tener que recurrir a Jira, Jenkins, MediaWiki o un servidor web. Además, con la muy completa <a href="https://docs.gitlab.com/ce/api/">API de GitLab</a> es posible hacer desarrollos a medida y según las necesidades que se tengan.</p>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/GitLab">código fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub y probarlo en tu equipo ejecutando siguiente comando:<br><code>docker-compose -f docker-compose-all.yml up</code></p>
</div>
]]>
        </content>
        
            
                <category term="planeta-codigo"/>
            
                <category term="software"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2018/01/integracion-y-entrega-continua-con-gitlab-sobre-docker/</id>
        <title>Integración y entrega continua con GitLab sobre Docker</title>
        <updated>2018-01-13T10:30:00+01:00</updated>
        <published>2018-01-13T10:30:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2018/01/integracion-y-entrega-continua-con-gitlab-sobre-docker/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/gitlab.svg" width="200" height="184" alt="GitLab" title="GitLab"  class=""></p>
</div>
<p><a href="https://about.gitlab.com/">GitLab</a> es una herramienta muy completa, una de las necesidades de los proyectos es tener teses y que estos se ejecuten con cada <em>commit</em> para asegurar que los cambios no introducen errores en las funcionalidades cubiertas por los teses, esto es la integración continua. La entrega inmediata es una vez que los teses se han ejecutado correctamente hacer el despliegue en los servidores de forma pasa el tiempo mínimo entre que una funcionalidad está desarrollada y esta se puede utilizar.</p>
<p>GitLab proporciona integración continua (<em>Continuos Integration</em>, CI) y entrega continua (<em>Continuos Delivery</em>, CD) sin necesidad de una herramienta externa más especializada como es <a href="https://jenkins.io/">Jenkins</a>. En el siguiente ejemplo muestro como configurar GitLab para crear uno o varios <em>runner</em> que son los que realizan las acciones de integración y entrega continua y el archivo descriptor <em>.gitlab-ci.yml</em> en formato <em>yaml</em> que define las acciones específicas del proyecto que se ejecutarán con cada <em>commit</em> en el repositorio <a href="https://git-scm.com/">Git</a>.</p>
<p>Jenkins es una herramienta más especializada que también sirve para realizar integración y entrega continua. En la página <a href="https://about.gitlab.com/comparison/gitlab-vs-jenkins.html">GitLab vs Jenkins</a> se comparan las características de ambas herramientas, aunque en esa página de comparación GitLab está indicando que tiene algunas características más y aunque no tuviera tantas para la mayoría de los casos de uso es más que suficiente con la ventaja de no necesitar una herramienta más al estar estar ya integrado en GitLab que ofrece además del repositorio de código fuente, una wiki o un páginas para un sitio web.</p>
<p>Para realizar integración y entrega continua hay definir las acciones, tareas y comandos de los que se componen del <em>pipeline</em> específico para el proyecto, la descripción del <em>pipeline</em> se define en un archivo <em>.gitlab-ci.yml</em> que se añade en el directorio raíz del código fuente del proyecto en su repositorio de Git. El <em>pipeline</em> según las necesidades del proyecto consta de varios pasos o <em>steps</em> que se ejecutan de forma secuencial. Si en un mismo paso hay varias acciones estas se ejecutan de forma paralela. En el ejemplo de proyecto <em>test</em> con un programa <em>Hola Mundo</em> con Java y usando la herramienta de construcción <a href="https://gradle.org/">Gradle</a> el <em>pipeline</em> consta de las acciones de compilación y de ejecución de pruebas unitarias y <a href="https://picodotdev.github.io/blog-bitix/2017/09/como-generar-la-documentacion-javadoc-con-gradle/">creación de documentación <em>javadoc</em></a>. La tarea de Gradle <em>build</em> en un proyecto Java realiza la compilación, ejecución de pruebas unitarias y genera el artefacto resultado el el directorio <em>build/distributions</em> y la librería <em>jar</em> con las clases compiladas en <em>build/libs</em>, la tarea <em>javadoc</em> genera la <a href="https://docs.oracle.com/javase/9/docs/api/overview-summary.html">documentación Javadoc</a> de las clases del proyecto.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">openjdk:8-jdk-alpine</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">stages</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="l">build</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">build</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">stage</span><span class="p">:</span><span class="w"> </span><span class="l">build</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">script</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span>- <span class="l">./gradlew --no-daemon build javadoc</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">artifacts</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">paths</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">build/distributions/gradle.zip</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">build/docs/javadoc/</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>gitlab-ci.yml</span>
    </div>
</div>
<p>Añadido el archivo del <em>pipeline</em> al código fuente del proyecto hay que definir un <em>runner</em> que se encargará de ejecutarlo con cada <em>commit</em> que se envíe al repositorio de código fuente. Hay que registrarlo y se necesita un <em>token</em> que se puede obtener desde el área de administración en <em>Overview &gt; Runners</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/01/integracion-y-entrega-continua-con-gitlab-sobre-docker/images/gitlab-runners_hu4e48bd46d630c15053f13e201276a889_258822_2560x1440_fit_box_3.png" data-gallery="" title="Runners"><img src="https://picodotdev.github.io/blog-bitix/2018/01/integracion-y-entrega-continua-con-gitlab-sobre-docker/images/gitlab-runners_hu4e48bd46d630c15053f13e201276a889_258822_300x200_fit_box_3.png" width="300" height="164" alt="Runners" title="Runners"  class="lozad "></a></p>
<figcaption>GitLab Runners</figcaption>
</figure>
</div>
<p>Al registrarlo hay que especificar el tipo de <em>runner</em>, hay varios tipos, en este caso se usa el de <em>docker</em> para ejecutar el <em>pipeline</em> dentro de un contenedor de <a href="https://www.docker.com/">Docker</a>. En en archivo de <a href="https://docs.docker.com/compose/">Docker Compose</a> es necesario que el <em>runner</em> pueda comunicarse con el servicio de Docker, para ello como punto de montaje del contenedor de <em>gitlab-runner</em> se especificar el archivo <em>docker.sock</em>.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker <span class="nb">exec</span> -it gitlab-runner gitlab-runner register --url <span class="s2">&#34;https://gitlab&#34;</span> --registration-token <span class="s2">&#34;RhoFva9z8Ri6cuDYbXN1&#34;</span> --tag-list <span class="s2">&#34;gitlab-runner-01&#34;</span> --run-untagged <span class="s2">&#34;true&#34;</span> --locked <span class="s2">&#34;false&#34;</span> --executor <span class="s2">&#34;docker&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>add-gitlab-runner.sh</span>
    </div>
</div>
<p>En este ejemplo y con este <em>pipeline</em> el artefacto distribuible de la aplicación y el Javadoc se almacena en GitLab estando accesible para su descarga desde el panel lateral una vez finalizado el <em>pipeline</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/01/integracion-y-entrega-continua-con-gitlab-sobre-docker/images/pipelines_hu3f62b1b8d4d7ea188729501f507f909e_98907_2560x1440_fit_box_3.png" data-gallery="" title="Pipelines"><img src="https://picodotdev.github.io/blog-bitix/2018/01/integracion-y-entrega-continua-con-gitlab-sobre-docker/images/pipelines_hu3f62b1b8d4d7ea188729501f507f909e_98907_300x200_fit_box_3.png" width="300" height="164" alt="Pipelines" title="Pipelines"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/01/integracion-y-entrega-continua-con-gitlab-sobre-docker/images/pipeline_huedfef20b9fb22617dbc80afe0102ced6_359504_2560x1440_fit_box_3.png" data-gallery="" title="Pipeline"><img src="https://picodotdev.github.io/blog-bitix/2018/01/integracion-y-entrega-continua-con-gitlab-sobre-docker/images/pipeline_huedfef20b9fb22617dbc80afe0102ced6_359504_300x200_fit_box_3.png" width="281" height="200" alt="Pipeline" title="Pipeline"  class="lozad "></a></p>
<figcaption>Pipeline</figcaption>
</figure>
</div>
<p>El descriptor usando <a href="https://docs.docker.com/compose/">Docker Compose</a> que define el servicio de GitLab y otro para GitLab Runner es el siguiente. El nombre de dominio que he utilizado para el servidor es <em>gitlab</em> y ha de añadirse al archivo <em>/etc/hosts</em> para que sea resuelto localmente.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span><span class="lnt">43&#10;</span><span class="lnt">44&#10;</span><span class="lnt">45&#10;</span><span class="lnt">46&#10;</span><span class="lnt">47&#10;</span><span class="lnt">48&#10;</span><span class="lnt">49&#10;</span><span class="lnt">50&#10;</span><span class="lnt">51&#10;</span><span class="lnt">52&#10;</span><span class="lnt">53&#10;</span><span class="lnt">54&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3.4&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gitlab</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;gitlab/gitlab-ce:latest&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">gitlab</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;gitlab&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">environment</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span class="nt">GITLAB_OMNIBUS_CONFIG</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">&#10;</span></span></span><span class="line"><span class="cl"><span class="sd">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gitlab_rails[&#39;gitlab_shell_ssh_port&#39;] = 8022&#10;</span></span></span><span class="line"><span class="cl"><span class="sd">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;external_url &#39;https://gitlab&#39;&#10;</span></span></span><span class="line"><span class="cl"><span class="sd">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nginx[&#39;ssl_certificate&#39;] = &#39;/etc/gitlab/ssl/gitlab.crt&#39;&#10;</span></span></span><span class="line"><span class="cl"><span class="sd">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nginx[&#39;ssl_certificate_key&#39;] = &#39;/etc/gitlab/ssl/gitlab.key&#39;&#10;</span></span></span><span class="line"><span class="cl"><span class="sd">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pages_external_url &#39;https://gitlab&#39;&#10;</span></span></span><span class="line"><span class="cl"><span class="sd">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pages_nginx[&#39;redirect_http_to_https&#39;] = true&#10;</span></span></span><span class="line"><span class="cl"><span class="sd">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pages_nginx[&#39;ssl_certificate&#39;] = &#34;/etc/gitlab/ssl/gitlab.crt&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="sd">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pages_nginx[&#39;ssl_certificate_key&#39;] = &#34;/etc/gitlab/ssl/gitlab.key&#34;</span><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">networks</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span class="nt">gitlab</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">aliases</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">gitlab</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">ports</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s1">&#39;8022:22&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s1">&#39;8080:80&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s1">&#39;8443:443&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">volumes</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s1">&#39;gitlab-config-volume:/etc/gitlab&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s1">&#39;gitlab-log-volume:/var/log/gitlab&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s1">&#39;gitlab-data-volume:/var/opt/gitlab&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s1">&#39;./docker-volumes/gitlab/ssl:/etc/gitlab/ssl&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gitlab-runner</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;gitlab/gitlab-runner:latest&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">container_name</span><span class="p">:</span><span class="w"> </span><span class="l">gitlab-runner</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">environment</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s1">&#39;DOCKER_NETWORK_MODE=gitlab_gitlab&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">links</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">gitlab</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">networks</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">gitlab</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">volumes</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s1">&#39;gitlab-runner-config-volume:/etc/gitlab&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s1">&#39;./docker-volumes/gitlab/ssl/gitlab.crt:/etc/gitlab-runner/certs/ca.crt&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s1">&#39;/var/run/docker.sock:/var/run/docker.sock&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">volumes</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gitlab-config-volume</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gitlab-log-volume</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gitlab-data-volume</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gitlab-runner-config-volume</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">networks</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">gitlab</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">driver</span><span class="p">:</span><span class="w"> </span><span class="l">bridge</span><span class="w">&#10;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-compose-all.yml</span>
    </div>
</div>
<p>En la sección de referencia hay unos buenos enlaces de documentación de GitLab sobre la integración continua, despliegue continuo y entrega continua.</p>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/GitLab">código fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub y probarlo en tu equipo ejecutando siguiente comando:<br><code>docker-compose -f docker-compose-all.yml up</code></p>
</div>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://docs.gitlab.com/ce/ci/">GitLab Continuous Integration (GitLab CI/CD)</a></li>
<li><a href="https://docs.gitlab.com/ce/ci/quick_start/README.html">Getting started with GitLab CI/CD</a></li>
<li><a href="https://docs.gitlab.com/ce/ci/yaml/README.html">Configuration of your jobs with .gitlab-ci.yml</a></li>
<li><a href="https://gist.github.com/daicham/5ac8461b8b49385244aa0977638c3420">A sample of .gitlab-ci.yml for a gradle project</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="planeta-codigo"/>
            
                <category term="software"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2018/01/articulo-5-de-yo-apoyo-al-software-libre/</id>
        <title>Artículo #5 de Yo apoyo al software libre</title>
        <updated>2018-01-03T13:00:00+01:00</updated>
        <published>2018-01-03T10:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2018/01/articulo-5-de-yo-apoyo-al-software-libre/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        
        <![CDATA[<p>La última donación que hice a algún proyecto de software libre fue en mayo del 2017, desde entonces he recibido algunos ingresos por la publicidad AdSense que incluyó en el blog. Los ingresos por AdSense están empezando a ser bastantes constantes de al menos 1 € al día con lo que al mes se convierten en 30 €, un més bueno en 50 €, con lo que cada dos o tres meses recibo un ingreso.</p>
<p>También hace unos meses escribí un artículo patrocinado con enlaces de afiliación sobre varios <a href="https://picodotdev.github.io/blog-bitix/2017/02/cursos-de-formacion-de-keepcoding/">cursos de formación de KeepCoding</a>, la mayoría de usuarios se registran en los cursos gratuitos y ya cuando había perdido las esperanzas de que alguien comprase algún curso pagando un par de usuarios se registraron usando mis códigos de afiliado.</p>
<p>En esta ocasión los proyectos a los que he hecho una donación han sido <a href="https://lineageos.org/">LineageOS</a> y <a href="https://www.replicant.us/">Replicant</a>, dos distribuciones de <a href="https://www.android.com/">Android</a> que permiten dar una segunda o tercera vida a móviles que desde hace tiempo se han quedado sin soporte oficial del fabricante ni de Google ni parches de seguridad con lo que ello supone en estos dispositivos que se están convirtiendo en cada vez más imprescindibles. Esto genera dispositivos no actualizados, tarde o temprano potencialmente inseguros y la conocida fragmentación en la plataforma Android.</p>
<div class="media">
<figure>
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/lineageos.svg" width="200" height="200" alt="Replicant" title="Replicant"  class="lozad ">
<img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/replicant.svg" width="200" height="200"  class="lozad "></p>
</figure>
</div>
<p>Muchos móviles siguen siendo perfectamente útiles aún pasados más de dos años. En mi móvil, un Samsung Galaxy S3 (i9300) del año 2012 con 4 núcleos y un solo <em>giga</em> de memoria RAM con no tantos años de vida pero que ya podría considerarse obsoleto debido al gran avance en capacidades que experimentado los <em>smartphones</em> usaba la extinta CyanogenMod en su versión 10.2 que incorporaba Android 4.4 (KitKat) cuando de fábrica tenía 4.1 o 4.2 (Jelly Bean). En alguna ocasión he pensado en actualizarlo a alguna versión más reciente de Android aunque por el poco uso que hago del móvil ya me era suficiente con la versión 4.4 de Android, también porque me daba un poco de pereza hacer la actualización aún no siendo demasiado complicado y no tardando mucho sabiendo lo que hay que hacer. En estas dos distribuciones de Android el Samsung Galaxy S3 está soportado.</p>
<h3 id="lineageos">LineageOS</h3>
<p>Se trata de la versión heredera de CyanogenMod, soporta una gran cantidad de terminales que con el paso del tiempo va aumentando aunque hasta el momento no he visto que se haya lanzado una versión estable de alguno de ellos, en cualquier caso en el estado actual funcionará bastante bien en cualquiera de los terminales.</p>
<p>Finalmente, ayer precisamente me decidí a instalar LineageOS 14.1 que incorpora una de las últimas versiones de Android, 7.1, y mucho más reciente que la que tenía, no lo había hecho hasta el momento por eso de no tener una versión estable y no estaba seguro de que tal funcionaría en un móvil tan «antiguo». Después de haberlo hecho he comprobado que funciona de forma perfectamente fluida aún con la poca cantidad de RAM que tiene para los tiempos actuales en los que los móviles ya incorporan entre 2 y 4 GiB, incluso mejor ya que funciona la cámara frontal que antes con CyanogenMod no.</p>
<ul>
<li><a href="https://wiki.lineageos.org/devices/i9300/install">Guía de instalación LineageOS para Samsung Galaxy S3</a></li>
<li><a href="https://www.youtube.com/watch?v=icVFJdBL60w">Vídeo de instalación LineageOS</a></li>
<li><a href="https://download.lineageos.org/">Dispositivos soportados</a></li>
</ul>
<p>Se ofrece de forma gratuita pero los servidores que son necesarios para el desarrollo y el mantenimiento de los sitios web tienen unos costes, este es el detalle de los <a href="https://wiki.lineageos.org/costs/">costes de LineageOS</a>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/01/articulo-5-de-yo-apoyo-al-software-libre/images/cyanogenmod-10.2_huf3a84ec940d0e4a07e9ca5cf0a2732a5_86598_2560x1440_fit_q90_box.jpg" data-gallery="" title="CynogenMod 10.2"><img src="https://picodotdev.github.io/blog-bitix/2018/01/articulo-5-de-yo-apoyo-al-software-libre/images/cyanogenmod-10.2_huf3a84ec940d0e4a07e9ca5cf0a2732a5_86598_300x200_fit_q90_box.jpg" width="113" height="200" alt="CynogenMod 10.2" title="CynogenMod 10.2"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2018/01/articulo-5-de-yo-apoyo-al-software-libre/images/lineageos-14.1_hu5d1bf970dbec1af605def033c54a0ed9_87661_2560x1440_fit_q90_box.jpg" data-gallery="" title="LineageOS 14.1"><img src="https://picodotdev.github.io/blog-bitix/2018/01/articulo-5-de-yo-apoyo-al-software-libre/images/lineageos-14.1_hu5d1bf970dbec1af605def033c54a0ed9_87661_300x200_fit_q90_box.jpg" width="113" height="200" alt="LineageOS 14.1" title="LineageOS 14.1"  class="lozad "></a></p>
<figcaption>CynogenMod 10.2 y LineageOS 14.1</figcaption>
</figure>
</div>
<h3 id="replicant">Replicant</h3>
<p>Es la distribución de Android recomendada por la <a href="https://www.fsf.org/">FSF</a>. Uno de sus objetivos es los teléfonos móviles respeten la privacidad de los usuarios no realizando seguimiento, posicionamiento y no compartiendo datos e incluyendo en el sistema operativo solo elementos libres. Y es que prácticamente todas las aplicaciones quieren acceder a los contactos, fotos, mensajes SMS, llamadas y otros varios permisos que las aplicaciones solicitan y hay que conceder. Esta distribución de Android es para aquellos le dan gran importancia a la seguridad, privacidad y libertad en estos dispositivos que podrían calificarse de seguimiento y vigilancia. Y por ello esta distribución es importante.</p>
<p>Está basado en LineageOS 13 y Android 6 quitándole los componentes que no mantienen la privacidad y proporcionándole sustitutos. No soporta tantos dispositivos como LineageOS aunque están varios que fueron y son muy populares.</p>
<ul>
<li><a href="https://www.replicant.us/supported-devices.php">Dispositivos soportados</a></li>
<li><a href="https://redmine.replicant.us/projects/replicant/wiki/ReplicantStatus">Estado de soporte en los dispositivos</a></li>
<li><a href="https://www.replicant.us/freedom-privacy-security-issues.php">Motivaciones del uso de Replicant, Freedom and privacy/security issues</a></li>
<li><a href="https://redmine.replicant.us/projects/replicant/wiki#Replicant-installation">Guías de instalación</a></li>
</ul>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/01/articulo-5-de-yo-apoyo-al-software-libre/images/replicant-6_huf9e3f77883367cad80fcc02422b90b7a_435737_2560x1440_fit_box_3.png" data-gallery="" title="Replicant 6"><img src="https://picodotdev.github.io/blog-bitix/2018/01/articulo-5-de-yo-apoyo-al-software-libre/images/replicant-6_huf9e3f77883367cad80fcc02422b90b7a_435737_300x200_fit_box_3.png" width="120" height="200" alt="Replicant 6" title="Replicant 6"  class="lozad "></a></p>
<figcaption>Replicant 6</figcaption>
</figure>
</div>
<h3 id="comprobantes-de-las-donaciones">Comprobantes de las donaciones</h3>
<p>En ambos casos las donaciones que he hecho han sido de 15 €.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/01/articulo-5-de-yo-apoyo-al-software-libre/images/donacion-lineageos_hu363323e9a26d548b6782c5dc77f42687_59453_2560x1440_fit_box_3.png" data-gallery="" title="Donación LineageOS"><img src="https://picodotdev.github.io/blog-bitix/2018/01/articulo-5-de-yo-apoyo-al-software-libre/images/donacion-lineageos_hu363323e9a26d548b6782c5dc77f42687_59453_650x450_fit_box_3.png" width="318" height="450" alt="Donación LineageOS" title="Donación LineageOS"  class="lozad "></a></p>
<figcaption>Donación LineageOS</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2018/01/articulo-5-de-yo-apoyo-al-software-libre/images/donacion-replicant_hua90b6e38f84426edcfd021dbfc02199c_107406_2560x1440_fit_box_3.png" data-gallery="" title="Donación Replicant"><img src="https://picodotdev.github.io/blog-bitix/2018/01/articulo-5-de-yo-apoyo-al-software-libre/images/donacion-replicant_hua90b6e38f84426edcfd021dbfc02199c_107406_650x450_fit_box_3.png" width="291" height="450" alt="Donación Replicant" title="Donación Replicant"  class="lozad "></a></p>
<figcaption>Donación Replicant</figcaption>
</figure>
</div>
<table class="table">
    <thead>
        <tr class="thead-dark">
            <th colspan="4">Donaciones que he realizado hasta la última fecha</th>
        </tr>
        <tr class="thead-light">
            <th>#</th>
            <th>Fecha</th>
            <th>Proyecto</th>
            <th>Donación</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>2015/12</td>
            <td>Free Software Foundation Europe (FSFE)</td>
            <td>40 €</td>
        </tr>
        <tr>
            <td>2</td>
            <td>2016/09</td>
            <td>Wikipedia, Mozilla/Firefox</td>
            <td>10 €, 10 €</td>
        </tr>
        <tr>
            <td>3</td>
            <td>2017/01</td>
            <td>elementaryOS, Libre Office, Arch Linux ARM</td>
            <td>10 €, 10 €, 10 €</td>
        </tr>
        <tr>
            <td>4</td>
            <td>2017/05</td>
            <td>GNOME, VideoLAN (VLC), Arch Linux</td>
            <td>15,31 €, 10 €, 0,31 €</td>
        </tr>
        <tr>
            <td>5</td>
            <td>2018/01</td>
            <td>LineageOS, Replicant</td>
            <td>15 €, 15 €</td>
        </tr>
        <tr>
            <td>6</td>
            <td>2018/12</td>
            <td>Wine</td>
            <td>$20</td>
        </tr>
        <tr>
            <td>7</td>
            <td>2019/12</td>
            <td>Calibre</td>
            <td>$10</td>
        </tr>
        <tr>
            <td>8</td>
            <td>2020/12</td>
            <td>Phoronix, Mozilla/Firefox, GnuPG</td>
            <td>$12, 10 €, 10 €</td>
        </tr>
        <tr>
            <td>9</td>
            <td>2022/01</td>
            <td>KeePassXC</td>
            <td>15 €</td>
        </tr>
        <tr>
            <td colspan="3">Total</td>
            <td>180 €, $42</td>
        </tr>
    </tbody>
</table>
]]>
        </content>
        
            
                <category term="planeta-codigo"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    
</feed>