<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title type="text">Blog Bitix</title>
    <subtitle type="text">Blog sobre al lenguaje de programaci칩n Java y la distribuci칩n GNU/Linux que uso habitualmente, Arch Linux, lo que aprendo sobre el software libre, la programaci칩n web y otros temas relacionados con la tecnolog칤a y la inform치tica. El contenido puede contener trazas de asuntos fuera de tema.</subtitle>
    <link rel="self" href="https://picodotdev.github.io/blog-bitix/index.xml"/>
    <link href="https://picodotdev.github.io/blog-bitix/" />
    <id>https://picodotdev.github.io/blog-bitix/tags/planeta-codigo/</id>
    <updated>2022-11-17T20:30:00+02:00</updated>
    <author><name>picodotdev</name></author>
    <generator>Hugo</generator>
    <icon>https://picodotdev.github.io/blog-bitix/assets/favicon.ico</icon>
    <logo>https://picodotdev.github.io/blog-bitix/assets/images/blog-bitix.svg</logo>
    <rights>https://creativecommons.org/licenses/by-sa/4.0/</rights>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2021/01/analitica-web-en-el-servidor-sin-javascript-en-el-cliente-con-goaccess/</id>
        <title>Anal칤tica web en el servidor sin JavaScript en el cliente con GoAccess</title>
        <updated>2021-01-07T10:30:00+01:00</updated>
        <published>2021-01-07T10:30:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2021/01/analitica-web-en-el-servidor-sin-javascript-en-el-cliente-con-goaccess/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Google Analytics es la herramienta m치s utilizada para implementar la funcionalidad de anal칤tica en un sitio web. Es f치cil de usar, de implementar, no requiere mantenimiento de infraestructura propia, es gratuita, ofrece numerosas funcionalidades que ayudan enormemente a obtener informaci칩n del sitio web, de los usuarios, obtener informes. Sin embargo, Google Analytics es una tercera parte con la que se comparte la informaci칩n del sitio web que supone una p칠rdida de privacidad y protecci칩n de datos del sitio web y requiere instalar un <em>script</em> de JavaScript que ralentiza la carga de las p치ginas web. GoAccess ofrece anal칤tica web en tiempo real que al contrario que Analytics obtiene los datos 칰nicamente desde el lado del servidor bas치ndose en los archivos del log del servidor web, es software libre y es utilizable sin necesidad de involucrar a terceras partes.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/goaccess.png" width="250" height="67" alt="GoAccess" title="GoAccess"  class=""></p>
</div>
<p>La anal칤tica web es una funcionalidad imprescindible en la mayor칤a de sitios p칰blicos accesibles desde internet web incluso en aquellos privados. La anal칤tica web es una funcionalidad que proporciona valiosa informaci칩n acerca del sitio web, desde n칰mero de visitas en determinados periodos de tiempo as칤 como informaci칩n de los usuarios y la interacci칩n de estos con el sitio web.</p>
<p>La informaci칩n proporcionada por la anal칤tica web ayuda a la toma de decisiones basadas en datos observando el comportamiento de los usuarios en el sitio web con m칠tricas que permiten conocer cuales son las p치ginas m치s visitas, en cuales permanecen m치s tiempo, que versi칩n de navegador web usan, cuales son los pa칤ses de los usuarios, cu치l es el tr치fico por hora del d칤a, las fuentes del tr치fico, sitios web de referencia, tr치fico seg칰n d칤as de la semana, ciertas fechas se침aladas, periodos de vacaciones u cualesquiera otras formas de conocimiento interesantes para el negocio.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del art칤culo</h2><toc></toc></div>
<h3 id="google-analytics-la-herramienta-m치s-utilizada-para-hace-anal칤tica-web">Google Analytics, la herramienta m치s utilizada para hace anal칤tica web</h3>
<p>La herramienta m치s utilizada para hacer anal칤tica web es <a href="https://www.google.es/intl/es/analytics/">Google Analytics</a>, es gratuita, f치cil de instalar en un sitio web y tiene gran cantidad de funcionalidades b치sicas y avanzadas que cubren las necesidades de cualesquiera usuarios. Almacena la informaci칩n recogida a lo largo del tiempo que es consultable con posterioridad incluso pasados varios a침os de forma muy flexible con diferentes criterios de b칰squeda y filtros, tambi칠n ofrece varios paneles para observar el tr치fico en tiempo real.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2021/01/analitica-web-en-el-servidor-sin-javascript-en-el-cliente-con-goaccess/images/google-analytics_hu026987c7702469555a2b5282cc642ea7_264800_2560x1440_fit_box_3.png" data-gallery="" title="Goolge Analytics"><img src="https://picodotdev.github.io/blog-bitix/2021/01/analitica-web-en-el-servidor-sin-javascript-en-el-cliente-con-goaccess/images/google-analytics_hu026987c7702469555a2b5282cc642ea7_264800_300x200_fit_box_3.png" width="290" height="200" alt="Goolge Analytics" title="Goolge Analytics"  class="lozad "></a></p>
<figcaption>Goolge Analytics</figcaption>
</figure>
</div>
<p>Basta con tener una cuenta de Google para tener acceso a Google Analytics. Para integrarlo en un sitio web 칰nicamente requiere insertar el <em>script</em> de JavaScript proporcionado por Google Analytics al configurar el sitio web en todas las p치ginas del sitio web. Este <em>script</em> se ejecuta en el navegador del usuario, recopila informaci칩n y la env칤a a Google para su procesamiento y generaci칩n de la anal칤tica web.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span><span class="lnt">8&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="c">&lt;!-- Google Analytics --&gt;</span>&#10;</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nb">window</span><span class="p">.</span><span class="nx">ga</span><span class="o">=</span><span class="nb">window</span><span class="p">.</span><span class="nx">ga</span><span class="o">||</span><span class="kd">function</span><span class="p">(){(</span><span class="nx">ga</span><span class="p">.</span><span class="nx">q</span><span class="o">=</span><span class="nx">ga</span><span class="p">.</span><span class="nx">q</span><span class="o">||</span><span class="p">[]).</span><span class="nx">push</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)};</span><span class="nx">ga</span><span class="p">.</span><span class="nx">l</span><span class="o">=+</span><span class="k">new</span> <span class="nb">Date</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nx">ga</span><span class="p">(</span><span class="s1">&#39;create&#39;</span><span class="p">,</span> <span class="s1">&#39;UA-XXXXX-Y&#39;</span><span class="p">,</span> <span class="s1">&#39;auto&#39;</span><span class="p">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="nx">ga</span><span class="p">(</span><span class="s1">&#39;send&#39;</span><span class="p">,</span> <span class="s1">&#39;pageview&#39;</span><span class="p">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">script</span> <span class="na">async</span> <span class="na">src</span><span class="o">=</span><span class="s">&#39;https://www.google-analytics.com/analytics.js&#39;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- End Google Analytics --&gt;</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>google-analytics-script.html</span>
    </div>
</div>
<p>El principal inconveniente de Google Analytics es introducir una tercera parte en la relaci칩n entre el sitio web y el usuario, una tercera parte que recoge m칠tricas del sitio web e informaci칩n de los usuarios. Los sitios web han de tener en cuenta que han de cumplir con las regulaciones y leyes como la <a href="https://en.wikipedia.org/wiki/General_Data_Protection_Regulation">GDPR</a> en Europa en el tratamiento de la informaci칩n de los usuarios para para proteger la privacidad de los usuarios que algunas empresas ponen en riesgo si no fuera por esas leyes que impiden o ponen l칤mites a la recopilaci칩n de datos bajo penas de importantes multas, utilizar <em>cookies</em> de seguimiento que permiten identificar a los usuarios de forma inequ칤voca o el tratamiento de informaci칩n personal. Leyes que afectan tambi칠n a la propia Google junto a otras empresas como Amazon, Facebook o Twitter de EEUU con unas regulaciones m치s permisivas, las leyes les afecta por ejemplo impidiendo transferir los datos de los usuarios europeos fuera de Europa.</p>
<p>La privacidad del los usuarios ya es un buen motivo para utilizar una alternativa a Google Analytics. Otro motivo es que el <em>script</em> de Google Analytics se ejecuta en el navegador del usuario y afecta en una peque침a medida al rendimiento en la carga de la p치gina web.</p>
<p>Otros sitios web privados de una intranet u aquellos que tienen inter칠s en proteger la privacidad de sus usuarios prefieren utilizar otras herramientas para realizar anal칤tica del sitio web que no involucren terceras partes.</p>
<h3 id="goaccess-una-alternativa-de-anal칤tica">GoAccess, una alternativa de anal칤tica</h3>
<p><a href="https://goaccess.io/">GoAccess</a> es una peque침a utilidad que cubre una peque침a parte de la funcionalidad de anal칤tica de un sitio web, en concreto ofrece la anal칤tica en tiempo real de uno o m칰ltiples sitios web, <a href="https://matomo.org/">Matomo</a> es una <a href="https://picodotdev.github.io/blog-bitix/2021/01/analitica-web-con-matomo-como-alternativa-a-google-analytics/">alternativa equivalente a Google Analytics</a> que ofrece las funcionalidades de <em>tracking</em> de eventos y <em>tag manager</em>. Sus caracter칤sticas principales son que es una herramienta sencilla y peque침a, no requiere insertar ning칰n <em>script</em> en las p치ginas del sitio web, no involucra terceras partes y es software libre.</p>
<p>Para realizar la anal칤tica web no requiere insertar ning칰n <em>script</em> de JavaScript en el cliente lo que mejora el tiempo de carga de las p치ginas. La anal칤tica la hace completamente en el lado del servidor analizando los archivos de <em>log</em> de acceso y errores del servidor web. Soporta los servidores web m치s utilizados como <a href="https://nginx.org/">Nginx</a> y <a href="https://httpd.apache.org/">Apache HTTPD</a>.</p>
<p>GoAccess permite obtener informaci칩n de anal칤tica en tiempo real del n칰mero de usuarios, que navegadores utilizan, URLs solicitadas, distribuci칩n de las peticiones en el tiempo, navegadores y sistemas operativos de los usuarios, sitios y URLs de referencia, palabras clave de b칰squeda, c칩digos de estado HTTP, geolocalizaci칩n, &hellip; Ofrece dos interfaces distintas, una basada en una interfaz de terminal y otra basada en una interfaz web.</p>
<h3 id="anal칤tica-de-sitio-web-con-goaccess-en-un-servidor-web-nginx">Anal칤tica de sitio web con GoAccess en un servidor web Nginx</h3>
<p>En el ejemplo de uso de GoAccess para realizar anal칤tica web de un servidor web y acceder a las dos interfaces que ofrece utilizo la herramienta <a href="https://www.docker.com/">Docker</a> que evita tener que instalar estas herramientas de forma directa en la computadora, hace f치cil su instalaci칩n, prueba, uso y eliminaci칩n de la computadora local una vez evaluada la herramienta. En el ejemplo el servidor web que he utilizado ha sido Nginx para Apache HTTPD se sigue el mismo principio de proporcionar a GoAccess los archivos de <em>log</em> de acceso al servidor web.</p>
<p>Para realizar el ejemplo son de utilidad los siguientes otros art칤culos en los que me he apoyado para crear este.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2014/10/introduccion-y-caracteristicas-de-docker/">Introducci칩n y caracter칤sticas de Docker</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2014/11/como-crear-una-imagen-para-docker-usando-un-dockerfile/">C칩mo crear una imagen para Docker usando un Dockerfile</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2015/07/aplicaciones-multicontenedor-con-docker-compose/">Aplicaciones multicontenedor con Docker Compose</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/07/como-crear-un-proxy-inverso-entre-el-servidor-web-nginx-y-un-servidor-de-aplicaciones-java/">C칩mo crear un proxy inverso entre el servidor web Nginx y un servidor de aplicaciones Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/08/configurar-un-servidor-web-virtual-en-nginx-y-apache/">Configurar un servidor web virtual en Nginx y Apache</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/07/obtener-un-nombre-de-dominio-para-una-direccion-ip-privada/">Obtener un nombre de dominio para una direcci칩n IP privada</a></li>
</ul>
<p>Lo primero es crear una imagen de Docker con GoAccess, la imagen oficial de Docker para GoAccess es <a href="https://hub.docker.com/r/allinurl/goaccess">allinurl/goaccess</a>, sin embargo esta no me ha funcionado y he tenido que crear una propia basada en <a href="https://www.ubuntu.com/">Ubuntu</a>. El archivo <em>Dockerfile</em> para crear la imagen de Docker con GoAccess y el comando para construirla son los siguientes.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span><span class="lnt">8&#10;</span><span class="lnt">9&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="k">FROM</span><span class="s"> ubuntu:20.04</span><span class="err">&#10;</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">MAINTAINER</span><span class="s"> picodotdev &lt;pico.dev@gmail.com&gt;</span><span class="err">&#10;</span></span></span><span class="line"><span class="cl"><span class="err">&#10;</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> apt-get -y update <span class="o">&amp;&amp;</span> apt-get -y install goaccess<span class="err">&#10;</span></span></span><span class="line"><span class="cl"><span class="err">&#10;</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">VOLUME</span><span class="s"> /var/www/goaccess</span><span class="err">&#10;</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">EXPOSE</span><span class="s"> 7890</span><span class="err">&#10;</span></span></span><span class="line"><span class="cl"><span class="err">&#10;</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">CMD</span> <span class="p">[</span><span class="s2">&#34;/bin/goaccess&#34;</span><span class="p">]</span><span class="err">&#10;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Dockerfile</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/env bash&#10;</span></span></span><span class="line"><span class="cl"><span class="cp"></span>docker build -t <span class="s2">&#34;picodotdev/goaccess:1.0&#34;</span> docker/&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-build.sh</span>
    </div>
</div>
<p>Una vez construida la imagen de GoAccess se almacena en el repositorio local de im치genes.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker images&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-images.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">REPOSITORY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TAG&nbsp;&nbsp;&nbsp;&nbsp;   IMAGE ID&nbsp;&nbsp;&nbsp;&nbsp;   CREATED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  SIZE&#10;</span></span><span class="line"><span class="cl">picodotdev/goaccess   1.0&nbsp;&nbsp;&nbsp;&nbsp;   677276d5bc0d   <span class="m">37</span> minutes ago   102MB&#10;</span></span><span class="line"><span class="cl">allinurl/goaccess&nbsp;&nbsp;&nbsp;&nbsp; latest&nbsp;&nbsp;&nbsp;&nbsp;e48d0ac2f6d1   <span class="m">11</span> hours ago&nbsp;&nbsp;&nbsp;&nbsp; 14.3MB&#10;</span></span><span class="line"><span class="cl">nginx&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; latest&nbsp;&nbsp;&nbsp;&nbsp;ae2feff98a0c   <span class="m">3</span> weeks ago&nbsp;&nbsp;&nbsp;&nbsp;  133MB&#10;</span></span><span class="line"><span class="cl">ubuntu&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;20.04&nbsp;&nbsp;&nbsp;&nbsp; f643c72bc252   <span class="m">6</span> weeks ago&nbsp;&nbsp;&nbsp;&nbsp;  72.9MB</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-images.out</span>
    </div>
</div>
<p>Nginx tambi칠n tiene su propia imagen de Docker, en este caso utilizo la imagen oficial del servidor web. Se requiere iniciar dos contenedores de Docker, uno para el servidor web Nginx con varios vol칰menes de datos configurados enlazados con los directorios de la m치quina anfitri칩n para proporcionarle los archivos de configuraci칩n para los servidores web virtuales de un sitio web a analizar, el servidor virtual de la interfaz web de GoAccess y para compartir con GoAccess los archivos de <em>log</em> dal servidor web. El segundo contenedor es el de GoAccess utilizando la imagen propia tambi칠n con varios vol칰menes de datos configurados, entre ellos el del directorio con los archivos de <em>log</em> de acceso del servidor web.</p>
<p>La configuraci칩n de Nginx incluye servidores web virtuales y configuraci칩n de <em>proxy</em> con <em>WebSockets</em> para ofrecer las m칠tricas en tiempo real desde la interfaz web.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">log_format</span> <span class="s">nginx_vcombined</span> <span class="s">&#39;</span><span class="nv">$host:$server_port</span> <span class="s">&#39;</span> <span class="s">&#39;</span><span class="nv">$remote_addr</span> <span class="s">-</span> <span class="nv">$remote_user</span> <span class="s">[</span><span class="nv">$time_local]</span> <span class="s">&#39;</span> <span class="s">&#39;&#34;</span><span class="nv">$request&#34;</span> <span class="nv">$status</span> <span class="nv">$body_bytes_sent</span> <span class="s">&#39;</span> <span class="s">&#39;&#34;</span><span class="nv">$http_referer&#34;</span> <span class="s">&#34;</span><span class="nv">$http_user_agent&#34;&#39;</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">server_name</span> <span class="s">www.127.0.0.1.xip.io</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">access_log</span> <span class="s">/var/log/nginx/nginx-access.log</span> <span class="s">nginx_vcombined</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">error_log</span> <span class="s">/var/log/nginx/nginx-error.log</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">root</span>   <span class="s">/usr/share/nginx/html</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">index</span>  <span class="s">index.html</span> <span class="s">index.htm</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="p">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>www.127.0.0.1.xip.io.conf</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">log_format</span> <span class="s">goaccess_vcombined</span> <span class="s">&#39;</span><span class="nv">$host:$server_port</span> <span class="s">&#39;</span> <span class="s">&#39;</span><span class="nv">$remote_addr</span> <span class="s">-</span> <span class="nv">$remote_user</span> <span class="s">[</span><span class="nv">$time_local]</span> <span class="s">&#39;</span> <span class="s">&#39;&#34;</span><span class="nv">$request&#34;</span> <span class="nv">$status</span> <span class="nv">$body_bytes_sent</span> <span class="s">&#39;</span> <span class="s">&#39;&#34;</span><span class="nv">$http_referer&#34;</span> <span class="s">&#34;</span><span class="nv">$http_user_agent&#34;&#39;</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">server_name</span> <span class="s">goaccess.127.0.0.1.xip.io</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">access_log</span> <span class="s">/var/log/nginx/goaccess-access.log</span> <span class="s">goaccess_vcombined</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">error_log</span> <span class="s">/var/log/nginx/goaccess-error.log</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">location</span> <span class="s">/report.html</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">root</span>   <span class="s">/usr/share/goaccess/html</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">	<span class="kn">proxy_pass</span> <span class="s">http://goaccess:7890</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_http_version</span> <span class="mi">1</span><span class="s">.1</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">Upgrade</span> <span class="nv">$http_upgrade</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">Connection</span> <span class="s">&#34;Upgrade&#34;</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">	<span class="kn">proxy_set_header</span> <span class="s">Host</span> <span class="nv">$host</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">	<span class="kn">proxy_set_header</span> <span class="s">X-Real-IP</span> <span class="nv">$remote_addr</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">	<span class="kn">proxy_set_header</span> <span class="s">X-Forwarded-Proto</span> <span class="s">https</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="p">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>goaccess.127.0.0.1.xip.io.conf</span>
    </div>
</div>
<p>En el <a href="https://github.com/allinurl/goaccess/blob/master/config/goaccess.conf">archivo de configuraci칩n de GoAccess</a> o en la <a href="https://goaccess.io/man#configuration">configuraci칩n desde la linea de comandos</a> se especifican varias propiedades de configuraci칩n.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">port 7890&#10;</span></span><span class="line"><span class="cl">ws-url goaccess.127.0.0.1.xip.io:80&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">log-format VCOMBINED&#10;</span></span><span class="line"><span class="cl">log-file /var/log/nginx/nginx-access.log&#10;</span></span><span class="line"><span class="cl">log-file /var/log/nginx/goaccess-access.log&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">output /usr/share/goaccess/html/report.html&#10;</span></span><span class="line"><span class="cl">real-time-html true&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>goaccess.conf</span>
    </div>
</div>
<p>Ambos contenedores est치n definidos en un archivo de <a href="https://docs.docker.com/compose/">Docker Compose</a>.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;3.9&#34;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">goaccess</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">picodotdev/goaccess</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">ports</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s2">&#34;7890&#34;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">volumes</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">${PWD}/goaccess.conf:/etc/goaccess/goaccess.conf</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">${PWD}/nginx/log:/var/log/nginx:ro</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">${PWD}/nginx/goaccess:/usr/share/goaccess/html</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;--no-global-config&#34;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;--config-file=/etc/goaccess/goaccess.conf&#34;</span><span class="p">]</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">nginx</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">ports</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s2">&#34;80:80&#34;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">volumes</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">${PWD}/www.127.0.0.1.xip.io.conf:/etc/nginx/conf.d/www.127.0.0.1.xip.io.conf:ro</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">${PWD}/goaccess.127.0.0.1.xip.io.conf:/etc/nginx/conf.d/goaccess.127.0.0.1.xip.io.conf:ro</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">${PWD}/nginx/log:/var/log/nginx</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">${PWD}/nginx/goaccess:/usr/share/goaccess/html:ro</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">depends_on</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="l">goaccess</span><span class="w">&#10;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-compose.yml</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker-compose up&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-compose-up.sh</span>
    </div>
</div>
<p>Una vez los contenedores est치n en ejecuci칩n es posible acceder a las interfaces que ofrece GoAccess y observar las m칠tricas que ofrece del acceso a los sitios web.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker ps&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-ps.sh</span>
    </div>
</div>
<h4 id="interfaz-de-terminal">Interfaz de terminal</h4>
<p>La interfaz de terminal o consola no requiere herramientas adicionales, desde la propia terminal es posible acceder a la informaci칩n de anal칤tica. Hay que ejecutar el comando de GoAccess, al usar Docker desde dentro de su contenedor. GoAccess se puede iniciar individualmente para acceder a su interfaz basada en la terminal.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker run -it --rm <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;-v <span class="s2">&#34;</span><span class="si">${</span><span class="nv">PWD</span><span class="si">}</span><span class="s2">/nginx/log:/var/log/nginx&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;picodotdev/goaccess:1.0 goaccess --no-global-config --log-format<span class="o">=</span>VCOMBINED /var/log/nginx/nginx-access.log /var/log/nginx/goaccess-access.log&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>goaccess-run.sh</span>
    </div>
</div>
<p>Es posible navegar entre los diferentes paneles de anal칤tica pulsando varias teclas, la tecla de navegaci칩n est치n documentadas en una ventana de ayuda a la que se accede con la tecla <em>?</em>, en la ayuda est치n indicadas el reto de teclas de navegaci칩n en la interfaz.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2021/01/analitica-web-en-el-servidor-sin-javascript-en-el-cliente-con-goaccess/images/goaccess-terminal-1_hu2554bbca88496b84526c89a4df6e8075_101015_2560x1440_fit_box_3.png" data-gallery="" title="Interfaz consola de anal칤tica GoAccess"><img src="https://picodotdev.github.io/blog-bitix/2021/01/analitica-web-en-el-servidor-sin-javascript-en-el-cliente-con-goaccess/images/goaccess-terminal-1_hu2554bbca88496b84526c89a4df6e8075_101015_300x200_fit_box_3.png" width="210" height="200" alt="Interfaz consola de anal칤tica GoAccess" title="Interfaz consola de anal칤tica GoAccess"  class="lozad "></a></p>
<figcaption>Interfaz consola de anal칤tica GoAccess</figcaption>
</figure>
</div>
<h4 id="interfaz-de-navegador-web">Interfaz de navegador web</h4>
<p>La interfaz de terminal no es la m치s c칩moda de usar ni m치s accesible de forma remota, por ello GoAccess tambi칠n proporciona una interfaz web accesible con un navegador web.</p>
<p>Para ello genera un archivo html de informe con los datos que se ha de servir desde un servidor web y ofrece un servidor con <em>WebSockets</em> para las m칠tricas en tiempo real. En el ejemplo su direcci칩n de acceso con el navegador <em>http://goaccess.127.0.0.1.xip.io/report.html</em>, la interfaz se actualiza con anal칤tica de acceso del servidor web Nginx del sitio web <em>http://www.127.0.0.1.xip.io/</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2021/01/analitica-web-en-el-servidor-sin-javascript-en-el-cliente-con-goaccess/images/nginx_hu83fe2a6570b41e852a6ef81df997167b_54839_2560x1440_fit_box_3.png" data-gallery="" title="Sitio web con Nginx"><img src="https://picodotdev.github.io/blog-bitix/2021/01/analitica-web-en-el-servidor-sin-javascript-en-el-cliente-con-goaccess/images/nginx_hu83fe2a6570b41e852a6ef81df997167b_54839_200x150_fit_box_3.png" width="200" height="118" alt="Sitio web con Nginx" title="Sitio web con Nginx"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2021/01/analitica-web-en-el-servidor-sin-javascript-en-el-cliente-con-goaccess/images/goaccess-web-1_huad900b61096d893a836c8c25e10e722f_215570_2560x1440_fit_box_3.png" data-gallery="" title="Interfaz web de anal칤tica GoAccess"><img src="https://picodotdev.github.io/blog-bitix/2021/01/analitica-web-en-el-servidor-sin-javascript-en-el-cliente-con-goaccess/images/goaccess-web-1_huad900b61096d893a836c8c25e10e722f_215570_200x150_fit_box_3.png" width="141" height="150" alt="Interfaz web de anal칤tica GoAccess" title="Interfaz web de anal칤tica GoAccess"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2021/01/analitica-web-en-el-servidor-sin-javascript-en-el-cliente-con-goaccess/images/goaccess-web-2_hue0d9fe6f1684f40e7cfd3c5ada4a4134_542160_2560x1440_fit_box_3.png" data-gallery="" title="Interfaz web de anal칤tica GoAccess"><img src="https://picodotdev.github.io/blog-bitix/2021/01/analitica-web-en-el-servidor-sin-javascript-en-el-cliente-con-goaccess/images/goaccess-web-2_hue0d9fe6f1684f40e7cfd3c5ada4a4134_542160_200x150_fit_box_3.png" width="48" height="150" alt="Interfaz web de anal칤tica GoAccess" title="Interfaz web de anal칤tica GoAccess"  class="lozad "></a></p>
<figcaption>Sitio web e interfaz web de anal칤tica GoAccess</figcaption>
</figure>
</div>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/GoAccess">c칩digo fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub y probarlo en tu equipo ejecutando siguiente comando:<br><code>./docker-compose up</code></p>
</div>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/">Add analytics.js to Your Site</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="planeta-codigo"/>
            
                <category term="web"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/12/hemeroteca-18/</id>
        <title>Hemeroteca #18</title>
        <updated>2020-12-30T12:00:00+01:00</updated>
        <published>2020-12-30T12:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/12/hemeroteca-18/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/blogbitix.svg" width="200" height="200" alt="Blog Bitix" title="Blog Bitix"  class=""></p>
</div>
<p>Una cosa es escribir art칤culos de ejemplo y otra usarlos en una empresa que factura unos cuantos cientos de millones de euros cuyo servicio es considerado cr칤tico en producci칩n. Por ejemplo por citar algunos art칤culos de este a침o, algo como la autenticaci칩n de los usuarios con <a href="https://www.keycloak.org/">Keycloak</a> no es sencillo implementarlo e integrarlo en una organizaci칩n con numerosos sistemas ya funcionando, o implementar un segundo factor de autenticaci칩n, o un sistema para realizar las traducciones, o trazabilidad con <a href="https://spring.io/projects/spring-cloud-sleuth">Sleuth</a> y <a href="https://zipkin.io/">Zipkin</a>, o tener una herramienta para consultas SQL en producci칩n con <a href="https://sqlpad.github.io/sqlpad/#/">SQLPad</a>, o definir una autoridad de certificaci칩n, o disponer de una arquitectura de referencia en grado de producci칩n de las aplicaciones <a href="https://www.consul.io/">Consul</a>, <a href="https://www.vaultproject.io/">Vault</a> y <a href="https://www.nomadproject.io/">Nomad</a> de <a href="https://www.hashicorp.com/">HashiCorp</a>. No solo es usarlo hay que mantenerlo, definir un plan para intervenciones comunes como realizar copias de seguridad de las bases de datos o actualizaciones a nuevas versiones sin que afecte al servicio. As칤 que los art칤culos quiz치 est칠n muy bien pero hay algunas cosas m치s a tener en cuenta para aplicarlos en un caso de producci칩n en un organizaci칩n.</p>
<p>Quiz치 alguien piense que escribo 칰nicamente sobre herramientas y las herramientas no son de inter칠s. Pero realmente m치s que escribir sobre herramientas escribo sobre problemas, una herramienta concreta la veo como el medio para resolver un problema t칠cnico o de negocio, el medio no es el fin pero no es irrelevante para conseguir el fin, tener y usar el medio adecuado influye en el 칠xito, fracaso u ocasionar otros problemas. Con lo que en algunos art칤culos escribo sobre una herramienta pero con la intenci칩n de dar soluci칩n a un problema.</p>
<p>Aunque se comenta en la frase corta lapidaria 춺con esfuerzo todo se consigue췉, el libro completo es que el esfuerzo y trabajo no siempre te permite conseguir lo que propongas, el fracaso o un 칠xito pobre es lo normal. El esfuerzo, trabajo, dedicaci칩n, constancia, perseverancia y cosas parecidas ayudan pero tambi칠n est치 el factor suerte o simplemente tener el amigo, conocido, contacto, enchufe adecuado o simplemente caerle bien a la persona correcta. Algunas oportunidades no dependen de uno mismo ni del esfuerzo sino tambi칠n de las oportunidades en una organizaci칩n en la que esos art칤culos cobren vida.</p>
<p>Tendr칠 varios defectos, pero tambi칠n otras virtudes y tengo que valorar m치s de lo que soy capaz si tengo oportunidad. En lo que depende de m칤 dos ejemplos de eso que soy capaz es el propio blog que al menos lo considero cuanto menos uno bueno en habla hispana sobre Java, software libre y programaci칩n de lo que recibido alg칰n comentario, otro ejemplo es el <a href="https://github.com/picodotdev/alis/"><em>script</em> alis</a> para instalar <a href="https://www.archlinux.org/">Arch Linux</a> que es posiblemente (sino convenceme de lo contrario) el mejor <em>script</em> en el mundo para instalar Arch Linux de forma sencilla y r치pida.</p>
<p>En vez de compartir conocimiento podr칤a estar leyendo libros y form치ndome m치s, cada art칤culo supone gran parte de mi tiempo libre fuera del horario de trabajo. En alg칰n momento estar de vacaciones tener la <a href="https://www.playstation.com/es-es/">PlayStation</a> con algunos juegazos comprados y por jugar como <em>The Last of Us</em>, <em>God of War</em>, la serie <em>Uncharted</em>, los varios <em>Trine</em>, <em>The Witcher 3</em>, un gran libro por leer como <em>The Unicorn Project</em>, alguna pel칤cula por ver del estudio Ghibli o dar un paseo durante algunas horas pero en algunos momentos casi me apetece m치s escribir alg칰n art칤culo para el blog.</p>
<p>No recibo muchos, aunque algunos que recibo son <a href="https://picodotdev.github.io/blog-bitix/2015/12/informacion-y-metricas-de-la-aplicacion-con-spring-boot-actuator/">como en este art칤culo con un comentario de agradecimiento</a> que me alegra y me anima a seguir escribiendo. Algunos blogueros y m치s <em>youtubers</em> comentan que en sus comentarios tiene alg칰n <em>troll</em> que comenta para criticar, que recuerde solo una persona me critic칩 algo por twitter con cierta parte de raz칩n pero por otra no sobre algo del pirateo de Windows que coment칠.</p>
<p>Todav칤a no tengo un <em>troll</em> ni lo deseo, ser치 que mi blog no es de pol칤tica ni hablo de los fascistas dirigentes de V游뱙X o los corruptos dirigentes del PP los de ambos miserables, hip칩critas y mentirosos igual que sus lacayos mercenarios en las redes sociales u otros que se hacen llamar periodistas.</p>
<p>Como cada a침o hago un repaso del <em>blog</em> con los art칤culos que he publicado, cifras de visitas, ingresos de AdSense y algunos otros asuntos.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del art칤culo</h2><toc></toc></div>
<h3 id="retrospectiva-2020">Retrospectiva 2020</h3>
<h4 id="evoluci칩n-visitas">Evoluci칩n visitas</h4>
<p>Durante este a침o at칤pico de confinamiento y en muchos casos trabajo desde casa las visitas se han mantenido constantes, alrededor de unas 50K visitas mensuales. A pesar de escribir nuevo contenido que deber칤a a침adir a칰n m치s tr치fico el caso es que algunos art칤culos antiguos tambi칠n lo pierden con lo que el tr치fico de los nuevos art칤culos solo compensan la p칠rdida del tr치fico de los antiguos. Algunos art칤culos van perdiendo visitas, porque hay otros <em>blogs</em> que tambi칠n crean contenido y los art칤culos van perdiendo posiciones en la clasificaci칩n de los buscadores.</p>
<p>Para este 2020 uno de mis objetivos para el blog era seguir aumentando el n칰mero de visitas, no se si lo que conseguido porque el tr치fico de los art칤culos nuevos solo se empieza apreciar pasados unos meses e incluso el primer a침o, este a침o 2020 he intentando planificar y seleccionar mejor sobre lo que he ido escribiendo, intentando que fuesen art칤culos interesantes pero que pudieran atraer m치s visitas. El art칤culo arquitectura de referencia en grado de producci칩n de las aplicaciones Consul, Vault y Nomad de HashiCorp puede estar muy bien y ser muy avanzado pero su cuota de b칰squeda es muy peque침a, por lo que he escrito algunos art칤culos b치sicos que la gente busca m치s.</p>
<p>Tengo muy poco tr치fico de referencia, la mayor parte viene del buscador Google con lo que tambi칠n he seguido intentando mejorar el SEO, analizar mejor el contenido, incluir palabras clave, poner mejores t칤tulos a los art칤culos y a침adir t칤tulos de secci칩n a los art칤culos.</p>
<p>El tr치fico de visitas durante este 2020 ha sido el siguiente.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/hemeroteca-18/images/google-analytics_hu3e46d7828eab3b3f25c0c507479bd2f7_41393_2560x1440_fit_box_3.png" data-gallery="" title="Evoluci칩n visitas 2020"><img src="https://picodotdev.github.io/blog-bitix/2020/12/hemeroteca-18/images/google-analytics_hu3e46d7828eab3b3f25c0c507479bd2f7_41393_650x450_fit_box_3.png" width="650" height="244" alt="Evoluci칩n visitas 2020" title="Evoluci칩n visitas 2020"  class="lozad "></a></p>
<figcaption>Evoluci칩n visitas 2020</figcaption>
</figure>
</div>
<h4 id="evoluci칩n-ingresos">Evoluci칩n ingresos</h4>
<p>Aunque los ingresos por publicidad AdSense, afiliados de Amazon y algunos enlaces patrocinados no compensa el tiempo que hay que invertir en el blog por cada art칤culo eso no quiere decir que sean despreciables. Mi blog no creo que sea muy grande, algunas p치ginas especializadas en noticias y tecnolog칤a con alg칰n mill칩n de visitas semanales o mensuales si creo que pueden generar unos ingresos respetables de las diferentes fuentes de ingresos que utilizan, como de esos art칤culos que dedican en exclusiva una selecci칩n de productos de Amazon y sus respectivos enlaces de afiliaci칩n. Noto en mi peque침o blog el <em>Black Friday</em> y la 칠poca navide침a esos medios lo deben notar a칰n m치s.</p>
<p>Por insertar un enlace contextual relevante para el contenido he recibido el pago de 20 , de otros dos enlaces en otros dos art칤culos a raz칩n de otros 20  por enlace con un total de 40  que insert칠 hace un par de a침os y que con cierto esfuerzo e insistencia por mi parte he conseguido finalmente cobrar con satisfacci칩n. Por AdSense este 2020 he recibido 250  y por Amazon con una facturaci칩n de 3160  que les he generado a trav칠s de los enlaces que incluyo he recibido 110 . En total unos 410  de este 2020, cuando en el 2019 solo por AdSense fueron de 415 , que me dar치 para comprar alg칰n juego de la PlayStation y para hacer una donaci칩n a varios proyectos de software libre que uso o me parecen importantes. Me gustar칤a saber para comparar cu치ntos ingresos generan por publicidad algunos <em>youtubers</em> con un canal medio o peque침o con unos 10K, 5K y 1K suscriptores.</p>
<p>Hay quien cree que a침adir un enlace a un art칤culo me lleva 20 minutos y que 20  por ese tiempo equivalente a 60  la hora es un buen precio. Pues no, no es un buen precio, cada art칤culo son entre 4 y 8+ horas de tiempo, multiplica esto por 550 art칤culos y 7 a침os de constancia escribiendo todas las semanas un art칤culo y muchas dos. Realmente el precio no es por el tiempo de insertar el enlace sino por conseguir en base a esfuerzo y trabajo que sea interesante insertarlo.</p>
<p>Recibir esos ingresos durante el 2020 es la parte buena, en este a침o especial han sido significativamente menores a los de a침os anteriores al menos por AdSense, la otra parte como digo es que para eso ha hecho falta una constancia de 7 a침os en los que he escrito casi 550 art칤culos a raz칩n de entre 4 y 8+ horas por art칤culo, algunas semanas escribiendo dos art칤culos y otras cuantas horas m치s para pensar y organizar ideas de nuevos art칤culos.</p>
<p>A esa cantidad hay que sumarle la donaci칩n de una persona de 100  游땸游땸游땸游땸游땸 por lo 칰til le ha resultado el mencionado <em>script</em> alis que hice para instalar Arch Linux. No creo que las donaciones por este <em>script</em> sea habitual, ni mucho menos en esas cifras pero muy espor치dicamente tambi칠n puedo recibir alg칰n ingreso con el enlace de donaci칩n que a침ad칤 a trav칠s de <a href="https://www.paypal.com/">PayPal</a>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/hemeroteca-18/images/google-adsense_hu3d04e2daaa820400e7a4e72e3fc44500_37161_2560x1440_fit_box_3.png" data-gallery="" title="Evoluci칩n ingresos AdSense 2020"><img src="https://picodotdev.github.io/blog-bitix/2020/12/hemeroteca-18/images/google-adsense_hu3d04e2daaa820400e7a4e72e3fc44500_37161_650x450_fit_box_3.png" width="650" height="248" alt="Evoluci칩n ingresos AdSense 2020" title="Evoluci칩n ingresos AdSense 2020"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/hemeroteca-18/images/amazon-afiliados_huc1523108c944cd818d1bc86065d61ac1_64454_2560x1440_fit_box_3.png" data-gallery="" title="Evoluci칩n ingresos Amazon Afiliados 2020"><img src="https://picodotdev.github.io/blog-bitix/2020/12/hemeroteca-18/images/amazon-afiliados_huc1523108c944cd818d1bc86065d61ac1_64454_650x450_fit_box_3.png" width="650" height="314" alt="Evoluci칩n ingresos Amazon Afiliados 2020" title="Evoluci칩n ingresos Amazon Afiliados 2020"  class="lozad "></a></p>
<figcaption>Evoluci칩n ingresos AdSense y Amazon Afiliados 2020</figcaption>
</figure>
</div>
<p>Entre una cosa y otra el saldo de mi cuenta de PayPal ha llegado a 164 .</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/hemeroteca-18/images/paypal-saldo_hubd4d22fb4fc105809710c2de47fb00c8_11901_2560x1440_fit_box_3.png" data-gallery="" title="Saldo cuenta PayPal"><img src="https://picodotdev.github.io/blog-bitix/2020/12/hemeroteca-18/images/paypal-saldo_hubd4d22fb4fc105809710c2de47fb00c8_11901_650x450_fit_box_3.png" width="242" height="247" alt="Saldo cuenta PayPal" title="Saldo cuenta PayPal"  class="lozad "></a></p>
<figcaption>Saldo cuenta PayPal</figcaption>
</figure>
</div>
<h4 id="mejoras-realizadas">Mejoras realizadas</h4>
<p>He seguido aplicando algunas mejoras al <em>blog</em> como dividir y poner t칤tulos a las secciones del contenido en el art칤culo. A mi me ayuda para estructurar el contenido del que voy a escribir, es mejor para el lector que puede ir directamente a la secci칩n que m치s le interese, e incluso quiz치 tambi칠n mejor en cuanto a SEO para los buscadores.</p>
<p>En muchos art칤culos he a침adido un 칤ndice del contenido que quiz치 a algunos usuarios les sea de utilidad, el 칤ndice del art칤culo est치 basado en los t칤tulos de las secciones. Los t칤tulos de las secciones e 칤ndice del art칤culo creo que mejora los art칤culos que en vez de ser un bloque grande de texto sin forma est치 dividido en varias secciones con t칤tulos destacados que resumen sus pocos p치rrafos.</p>
<p>Un objetivo que me he planteado para este a침o es hacer tareas de SEO y escribir algunos art칤culos con los que atraer m치s visitas, esto no quiere decir que no sean art칤culos interesantes pero s칤 algunos art칤culos b치sicos sobre programaci칩n o muy buscados. Principalmente programaci칩n sobre Java, un poco de <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> y algunos relacionados con <a href="https://www.microsoft.com/es-es/windows/">Windows</a>. El 2021 es mi intenci칩n escribir art칤culos que aumenten las visitas y si es posible tambi칠n los ingresos por publicidad y afiliaci칩n, ver que estas m칠tricas aumentan me anima y motiva para seguir escribiendo.</p>
<p>Otro objetivo ha sido reescribir y mejorar algunos art칤culos antiguos ya publicados empezando por los que reciben la mayor parte de visitas aunque tambi칠n cualquier otro al que a침adirle alguna informaci칩n adicional que lo complete. Esto tambi칠n en l칤nea con tareas de hacer SEO, no solo en el contenido sino en el t칤tulo de los art칤culos. Este es un objetivo para el 2021 ya que algunos se van quedando antiguos o simplemente cuando los escrib칤 me faltaba algo de conocimiento.</p>
<p>Los art칤culos los escribo en primera instancia como un borrador que guardo en <a href="https://www.google.es/intl/es/docs/about/">Google Docs</a> d칩nde est칠 ya marca varias correcciones en palabras mal escritas y con errores, al editar los art칤culos que hago en formato <em>markdown</em> con el editor <a href="https://code.visualstudio.com/">Code</a> reviso algunas partes para mejorar la calidad del art칤culo quitando estos errores. Un paso que realizo siempre antes de publicarlos es una correcci칩n gramatical, la hac칤a con el editor de texto <a href="https://www.vim.org/">Vim</a> basado en consola porque no conoc칤a otra forma mejor. Utilizar Vim para la correcci칩n gramatical me supon칤a salir de Code entrar en Vim realizar la edici칩n cuya navegaci칩n por el documento no es lo m치s r치pido y volver al editor Code, esto en ocasiones lo ten칤a que hacer un par de veces.</p>
<p>Para la funcionalidad de correcci칩n gramatical he instalado en Code una extensi칩n con el diccionario de palabras en espa침ol que me permite corregir a medida que escribo, esto es m치s sencillo, me ahorra algo de tiempo y encuentro m치s errores que con Vim alguno se me escapaba. He revisado todos los art칤culos que ya ten칤a publicados, los 500, con esta extensi칩n y la verdad es que en la mayor칤a ten칤a m칤nimo dos o tres gazapos que he corregido.</p>
<h4 id="otras-contribuciones">Otras contribuciones</h4>
<p>Tambi칠n he seguido mejorando el <em>script</em> alis de instalaci칩n automatizado, desatendido, y personalizable de Arch Linux. He a침adido la posibilidad de instalar paquetes de <a href="https://flatpak.org/">Flatpak</a> y de <a href="https://sdkman.io/">SDKMAN</a>, he a침adido soporte para los sistemas de archivos F2FS, ReiserFS y btrfs con <em>subvols</em> la posibilidad de configurar un int칠rprete de comandos alternativo a <a href="https://es.wikipedia.org/wiki/Bash">bash</a> como <a href="https://zsh.sourceforge.net/">zsh</a>, <a href="https://fishshell.com/">fish</a> o <a href="https://wiki.archlinux.org/index.php/Dash">dash</a>, poder hacer que alis solicite las contrase침as durante la instalaci칩n en vez de <em>hardcodearlas</em> en el archivo de configuraci칩n para evitar que alguien las ponga y suba a GitHub si hace un <em>fork</em>, a침adido el soporte para los entornos de escritorios alternativos <a href="https://i3wm.org/">i3-wm</a> e i3m-gaps, soporte para <em>reflector</em>, posibilidad de habilitar o deshabilitar <em>units</em> de <a href="https://www.freedesktop.org/wiki/Software/systemd/">systemd</a>, soporte para probar con <a href="https://www.packer.io/">Packer</a> que me permite automatizar las pruebas en <a href="https://www.virtualbox.org/">VirtualBox</a>, adem치s he a침adido la posibilidad de hacer una peque침a donaci칩n a trav칠s de PayPal si alguien considera que el <em>script</em> le es de utilidad.</p>
<p>Tambi칠n he seguido mejorando las traducciones al espa침ol de la aplicaci칩n gestor de contrase침as <a href="https://keepassxc.org/">KeePassXC</a>, del cliente <em>torrent</em> <a href="https://transmissionbt.com/">Transmission</a> y el reproductor multimedia <a href="https://www.videolan.org/vlc/">VLC</a>.</p>
<h3 id="prop칩sitos-para-el-2021">Prop칩sitos para el 2021</h3>
<p>Los 칰ltimos meses he estado publicando los art칤culos que he ido escribiendo esa misma semana casi con ideas sobre la marcha. En otros momentos entre que apuntaba la idea, escrib칤a el borrador y lo publicaba pasaba incluso varios meses o alg칰n a침o entre cada uno de esos pasos. Y a칰n tengo muchos art칤culos escritos como borrador hace algunos a침os pendientes de publicar.</p>
<p>En el 2021 no creo que cambie mucho, espero seguir publicando al menos un art칤culo por semana, continuar con la intenci칩n de este 2020 de publicar art칤culos que aumenten las visitas al mismo tiempo de que sean interesantes y cambiar, reescribir o actualizar algunos art칤culos antiguos. Aumentar las visitas es algo que no he conseguido durante este at칤pico 2020.</p>
<p>Alguna vez me he planteado migrar el blog a <a href="https://aws.amazon.com/es/">AWS</a>, <a href="https://www.digitalocean.com/">Digital Ocean</a> o <a href="https://www.linode.com/">Linode</a>. El blog me genera ingresos de sobra para cubrir el coste con cualquiera de esa infraestructura. Si lo hago ser치 m치s que por necesidad por aprender y tener un dominio propio. No lo he hecho hasta el momento por la comodidad de <a href="https://pages.github.com/">GitHub Pages</a> ni tener que dedicar tiempo al mantenimiento de esa infraestructura. Tambi칠n requiere un plan de migraci칩n para que tenga el menor impacto posible en cuanto a tr치fico o SEO, ya buscar칤a la mejor soluci칩n.</p>
<p>Es posible que este 2021 me lo plantee en serio, administrar mi propio servidor en la nube con <a href="https://www.ubuntu.com/">Ubuntu</a>, usar <a href="https://nginx.org/">Nginx</a>, <a href="https://aws.amazon.com/es/cloudfront/">CloudFront</a> o un CDN, <a href="https://letsencrypt.org/">Let&rsquo;s Encrypt</a>, <a href="https://www.terraform.io/">Terraform</a>, copias de seguridad, <em>deployments</em> y actualizaciones de seguridad todos esos temas interesantes de DevOps en los que no tengo tanto conocimiento al menos en la pr치ctica. 쯋n blog est치tico necesita todo esto? La respuesta es no, pero como digo el objetivo no es la soluci칩n m칤nima m치s sencilla para el problema que ya tengo resuelto con GitHub Pages sino aprender en la pr치ctica de lo que me interesa de DevOps con este problema.</p>
<h3 id="art칤culos-publicados">Art칤culos publicados</h3>
<p>Estos son los 45 art칤culos que he escrito durante el segundo semestre con un total de 90 art칤culos publicados durante el 2020, de las tem치ticas habituales Java, GNU/Linux o software libre.</p>
<p>춰Qu칠 el 2021 sea mejor!</p>
<h4 id="art칤culos-sobre-java">Art칤culos sobre Java</h4>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/07/tareas-programadas-de-forma-periodica-con-quartz-y-spring-en-java/">Tareas programadas de forma peri칩dica con Quartz y Spring en Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/08/renombrar-campos-del-esquema-en-las-consultas-graphql/">Renombrar campos del esquema en las consultas GraphQL</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/08/anadir-descripciones-y-documentar-los-campos-de-graphql/">A침adir descripciones y documentar los campos de GraphQL</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/08/introduccion-a-grpc-y-ejemplo-con-java/">Introducci칩n a gRPC y ejemplo con Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/09/novedades-de-java-15/">Novedades de Java 15</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/10/3-formas-de-gestionar-errores-en-los-lenguajes-de-programacion/">3 formas de gestionar errores en los lenguajes de programaci칩n</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/10/implementar-un-bus-de-eventos-de-dominio-en-java/">Implementar un bus de eventos de dominio en Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/10/implementar-un-bus-de-comandos-y-consultas-en-java/">Implementar un bus de comandos y consultas en Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/10/como-deduplicar-eventos-de-dominio/">C칩mo deduplicar eventos de dominio</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/10/entorno-de-desarrollo-java-para-editar-compilar-y-ejecutar-programas/">Entorno de desarrollo Java para editar, compilar y ejecutar programas</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/10/como-depurar-una-aplicacion-java-con-un-ide/">C칩mo depurar una aplicaci칩n Java con un IDE</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/11/emitir-trazas-de-las-peticiones-y-respuestas-http-con-clientes-java/">Emitir trazas de las peticiones y respuestas HTTP con clientes Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/11/crear-un-archivo-zip-con-java-comprimir-y-descomprimir-datos/">Crear un archivo Zip con Java, comprimir y descomprimir datos</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/">Autenticaci칩n con OpenID/OAuth en cualquier web con Nginx y de forma nativa con Spring Boot</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/11/5-formas-de-implementar-el-patron-singleton-en-java/">5 formas de implementar el patr칩n Singleton en Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/11/las-formas-de-guardar-relaciones-jerarquicas-en-bases-de-datos-relacionales/">Las formas de guardar relaciones jer치rquicas en bases de datos relacionales</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/12/tipos-de-arquitecturas-de-aplicaciones-de-software/">Tipos de arquitecturas de aplicaciones de software</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/12/internacionalizar-localizar-y-dar-formato-a-cadenas-numeros-importes-y-fechas-en-java/">Internacionalizar, localizar y dar formato a cadenas, n칰meros, importes y fechas en Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/12/para-que-sirve-la-palabra-clave-final-en-el-codigo-fuente-java/">Para qu칠 sirve la palabra clave final en el c칩digo fuente Java</a></li>
</ul>
<h4 id="art칤culos-sobre-gnulinux-o-software-libre">Art칤culos sobre GNU/Linux o software libre</h4>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/07/las-diferencias-entre-gnu-linux-bsd-y-sus-distribuciones/">Las diferencias entre GNU/Linux, BSD y sus distribuciones</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/07/que-son-para-que-sirven-formato-y-ejemplos-de-las-expresiones-cron/">Qu칠 son, para qu칠 sirven, formato y ejemplos de las expresiones cron</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/07/comunicaciones-seguras-autenticacion-mutua-y-autorizaciones-con-intenciones-entre-servicios-usando-consul-connect-y-nomad/">Comunicaciones seguras, autenticaci칩n mutua y autorizaciones con intenciones entre servicios usando Consul Connect y Nomad</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/07/revertir-a-una-version-anterior-de-un-servicio-con-nomad/">Revertir un servicio a una versi칩n anterior con Nomad</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/07/obtener-un-nombre-de-dominio-para-una-direccion-ip-privada/">Obtener un nombre de dominio para una direcci칩n IP privada</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/08/configurar-autenticacion-basica-en-los-servidores-web-nginx-y-apache/">Configurar autenticaci칩n b치sica en los servidores web Nginx y Apache</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/08/comandos-para-crear-una-autoridad-de-certificacion-ca-con-openssl/">Comandos para crear una autoridad de certificaci칩n (CA) con OpenSSL</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/08/configurar-un-servidor-web-virtual-en-nginx-y-apache/">Configurar un servidor web virtual en Nginx y Apache</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/08/arquitectura-de-referencia-de-consul-vault-y-nomad-para-un-centro-de-datos/">Arquitectura de referencia de Consul, Vault y Nomad para un centro de datos</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/09/centralizar-y-consultar-las-trazas-de-las-aplicaciones-con-elasticsearch-logstash-y-kibana/">Centralizar y consultar las trazas de las aplicaciones con Elasticsearch, Logstash y Kibana</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/09/funcionalidades-que-necesitan-las-aplicaciones-basadas-en-microservicios-y-herramientas-que-las-proporcionan/">Funcionalidades que necesitan las aplicaciones basadas en microservicios y herramientas que las proporcionan</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/10/trazabilidad-en-servicios-distribuidos-con-sleuth-y-zipkin/">Trazabilidad en servicios distribuidos con Sleuth y Zipkin</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/11/herramienta-para-ejecutar-consultas-sql-en-la-base-de-datos-de-produccion/">Herramienta para ejecutar consultas SQL en la base de datos de producci칩n</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/">La herramienta Weblate para traducir una aplicaci칩n a m칰ltiples idiomas</a></li>
</ul>
<h4 id="art칤culos-sobre-javascript-y-web">Art칤culos sobre JavaScript y web</h4>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/07/las-3-formas-de-guardar-datos-en-el-navegador-con-javascript/">Las 3 formas de guardar datos en el navegador con JavaScript</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/07/un-comando-y-aplicaciones-graficas-para-descargar-todo-el-contenido-de-un-sitio-web/">Un comando y aplicaciones gr치ficas para descargar todo el contenido de un sitio web</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/08/que-hace-y-ventajas-de-un-preprocesador-de-estilos-css/">Qu칠 hace y ventajas de un preprocesador de estilos CSS</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/">Qu칠 es, por qu칠 y c칩mo activar un segundo factor de autenticaci칩n en Google, Amazon, PayPal y otros servicios</a></li>
</ul>
<h4 id="otros-temas">Otros temas</h4>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/09/1-decada-en-la-misma-empresa-20-anos-trabajando/">1 d칠cada en la misma empresa, 20 a침os trabajando</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/09/como-comprar-una-licencia-y-activar-windows-10-y-office-2019/">C칩mo comprar una licencia y activar Windows 10 y Office 2019</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/10/sobre-la-generacion-de-consolas-playstation-5-y-xbox-series-x-s-antes-de-que-se-comercialice-y-la-renovacion-del-hardware-de-pc/">Sobre la generaci칩n de consolas PlayStation 5 y Xbox Series X/S antes de que se comercialice y la renovaci칩n del hardware de PC</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/10/analisis-y-guia-completa-del-juego-horizon-zero-dawn/">An치lisis y gu칤a completa del juego Horizon Zero Dawn</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/11/como-encontrar-las-mejores-ofertas-de-juegos-para-consola-y-pc/">C칩mo encontrar las mejores ofertas de juegos para consola y PC</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/">Gu칤a b치sica sobre teclados mec치nicos para ordenador</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/12/articulo-8-de-yo-apoyo-al-software-libre/">Art칤culo #8 de Yo apoyo al software libre</a></li>
</ul>
]]>
        </content>
        
            
                <category term="blog"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/12/articulo-8-de-yo-apoyo-al-software-libre/</id>
        <title>Art칤culo #8 de Yo apoyo al software libre</title>
        <updated>2020-12-24T09:00:00+01:00</updated>
        <published>2020-12-24T09:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/12/articulo-8-de-yo-apoyo-al-software-libre/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Con este art칤culo contin칰o haciendo de vez en cuando una peque침a donaci칩n a algunos programas que utilizo habitualmente y proyectos que me parecen import치ntes e 칰tiles con la intenci칩n de apoyar su desarrollo aunque sean cantidades peque침as. Este es ya el octavo art칤culo de donaci칩n que escribo y poco a poco las cantidades que he donado ya empiezan a ser respetables.</strong></p>]]>
        <![CDATA[<p>Los ingresos que me genera el blog por la publicidad de <a href="https://www.google.com/adsense/">AdSense</a> y enlaces de afiliado de <a href="https://amzn.to/2flFhHA">Amazon</a> me permiten dedicar una peque침a parte de los mismos a estas donaciones. Mi blog hasta el momento no tiene ning칰n gasto ni por hospedaje ya que uso <a href="https://pages.github.com/">GitHub Pages</a> ni siquiera por tener un dominio propio ya que hasta el momento tampoco tengo. Si necesitase, una parte de los ingresos de publicidad ser칤an para el <em>hosting</em> a unos 5 /mes m칤nimo m치s el coste anual de unos 10 /a침o del dominio.</p>
<p>Aunque este a침o 2020 no ha sido normal y lo he notado significativamente en los ingresos de AdSense respecto a los a침os anteriores son suficientes para contribuir aunque sea un poco con estas donaciones.</p>
<h3 id="phoronix">Phoronix</h3>
<p><a href="https://www.phoronix.com/">Phoronix</a> es un sitio web dedicado a noticias relacionadas con el software y hardware libre o de c칩digo abierto. Un medio que da noticias sobre los progresos desde en el <em>kernel</em> de Linux, avances en los controladores gr치ficos pero tambi칠n de las distribuciones BSD y otra multitud de programas junto con detallados an치lisis de rendimiento.</p>
<p>Es uno de los medios que utilizan como fuente otros medios como varios de habla hispana. En Phoronix est치n suscritos a las lista de distribuci칩n y blogs de desarrolladores de muchos de los proyectos de software libre. Por ello suelen ser los primeros en dar la noticia de la que otros medios se hacen eco. Phoronix no es un medio como otros que tiene una decena de editores par publicar noticias sino que a tiempo completo est치 compuesto de una o dos personas, por la cantidad de noticias que publican y calidad de las mismas el trabajo de informaci칩n que hacen es notable.</p>
<p>Un sitio web recomendable al que suscribirse para estar informado sobre los avances en el mundo del software libre. Aunque no es un programa sigo este medio desde hace tiempo ya que la cantidad de noticias y calidad de las mismas es muy alto, es merecedor tambi칠n de gratificar su dedicaci칩n, constancia y esfuerzo por difundir el software libre.</p>
<div class="media">
<figure>
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/phoronix.png" width="300" height="200" alt="Phoronix" title="Phoronix"  class="lozad "></p>
</figure>
</div>
<h3 id="mozilla-firefox">Mozilla, Firefox</h3>
<p>En esta ocasi칩n repito en la donaci칩n de hace unos a침os a la fundaci칩n <a href="https://www.mozilla.org/">Mozilla</a> que desarrolla el navegador web <a href="https://www.mozilla.org/es-ES/firefox/new/">Firefox</a>. Es mi navegador web preferido y que sigo usando para uso personal. Un navegador que le da importancia a la privacidad y seguridad para que sitios web malintencionados no puedan rastrear, recolectar ni abusar de los datos de los usuarios sin su consentimiento o desconocimiento al navegar por internet.</p>
<p>Es la alternativa m치s usada al navegador <a href="https://www.google.es/chrome/browser/desktop/">Chrome</a> y <a href="https://www.chromium.org/Home">Chromium</a> desarrollado por <a href="https://www.google.es/">Google</a> con sus intereses comerciales al que se ha unido <a href="https://www.microsoft.com/">Microsoft</a> con su nuevo navegador <a href="https://www.microsoft.com/es-es/windows/microsoft-edge/">Edge</a> utilizando el mismo <a href="https://webkit.org/">WebKit</a> que utiliza Chrome desde que abandon칩 su propio motor de navegador web.</p>
<div class="media">
<figure>
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/mozilla.svg" width="300" height="200" alt="Mozilla" title="Mozilla"  class="lozad "></p>
</figure>
</div>
<h3 id="gnupg">GnuPG</h3>
<p><a href="https://www.gnupg.org/index.html">GnuPG</a> permite mantener comunicaciones seguras y proteger la privacidad de los usuarios, no solo permite cifrar y descifrar correos electr칩nicos sino tambi칠n cualquier otro archivo. El correo electr칩nico <a href="https://www.google.com/intl/es/gmail/about/">Gmail</a> de <a href="https://www.google.es/">Google</a> lee y analiza el contenido de los correos electr칩nicos que reciben y env칤an sus usuarios e incluye algunos enlaces de publicidad. Algunas alternativas a Gmail centradas en la seguridad y privacidad son <a href="https://protonmail.com/es/">ProtonMail</a> y <a href="https://tutanota.com/es/">Tutanota</a>, por otro lado el cliente de correo electr칩nico <a href="https://www.thunderbird.net/es-ES/">Thunderbird</a> ha a침adido soporte para OpenPGP sin necesidad de complementos adicionales, se puede usar como alternativa a la interfaz web de Gmail que no incluye esta funcionalidad.</p>
<p>Hace tiempo que no hago uso habitual de GnuPG, pero es uno de esos proyectos que me parecen importantes, y quiz치 uno de esos proyectos en los que algunas organizaciones con un volumen de facturaci칩n grande basan su negocio cuando el proyecto es mantenido por un peque침o n칰mero de personas que lo hacen de forma casi voluntaria sin mucha financiaci칩n por parte de esas empresas, esto mismo seguro que ocurre con otros muchos proyectos de software libre o c칩digo abierto.</p>
<div class="media">
<figure>
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/gnupg.svg" width="300" height="200" alt="GnuPG" title="GnuPG"  class="lozad "></p>
</figure>
</div>
<h3 id="comprobantes-de-las-donaciones">Comprobantes de las donaciones</h3>
<p>Me gusta pensar que realmente los que hacen posible estas donaciones aun con su desconocimiento son las personas que acceden a este blog en busca de los art칤culos que escribo, los que lo siguen de forma habitual y la mayor칤a que llegan de rebote a trav칠s del buscador de Google. No acepto <a href="https://picodotdev.github.io/blog-bitix/pages/donate/">donaciones</a>, al menos no de forma directa pero si ofrezco como alternativa que cuando alguien haga <a href="https://amzn.to/2flFhHA">una compra en Amazon</a> utilice uno de los enlaces de afiliado de este blog, el precio es el mismo al hacer la compra pero yo recibo una peque침a comisi칩n que cada cierto tiempo adem치s de AdSense me permite hacer estas donaciones a proyectos
como estos adem치s ser una forma de motivarme para continuar escribiendo en el blog.</p>
<p><a href="https://www.gnu.org/">Yo apoyo al software libre</a></p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/articulo-8-de-yo-apoyo-al-software-libre/images/donacion-phoronix_hu679c1e1c7eabf08bb3f30dc16c668eba_114842_2560x1440_fit_box_3.png" data-gallery="" title="Donaci칩n Phoronix"><img src="https://picodotdev.github.io/blog-bitix/2020/12/articulo-8-de-yo-apoyo-al-software-libre/images/donacion-phoronix_hu679c1e1c7eabf08bb3f30dc16c668eba_114842_650x450_fit_box_3.png" width="267" height="450" alt="Donaci칩n Phoronix" title="Donaci칩n Phoronix"  class="lozad "></a></p>
<figcaption>Donaci칩n Phoronix</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/articulo-8-de-yo-apoyo-al-software-libre/images/donacion-mozilla_hu4c2ad4e8a671dacfd138653b272eb864_141454_2560x1440_fit_box_3.png" data-gallery="" title="Donaci칩n Firefox"><img src="https://picodotdev.github.io/blog-bitix/2020/12/articulo-8-de-yo-apoyo-al-software-libre/images/donacion-mozilla_hu4c2ad4e8a671dacfd138653b272eb864_141454_650x450_fit_box_3.png" width="257" height="450" alt="Donaci칩n Firefox" title="Donaci칩n Firefox"  class="lozad "></a></p>
<figcaption>Donaci칩n Mozilla</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/articulo-8-de-yo-apoyo-al-software-libre/images/donacion-gnupg_hufd37e3a5f075c79c74f511f77c7e51d6_146087_2560x1440_fit_box_3.png" data-gallery="" title="Donaci칩n GnuPG"><img src="https://picodotdev.github.io/blog-bitix/2020/12/articulo-8-de-yo-apoyo-al-software-libre/images/donacion-gnupg_hufd37e3a5f075c79c74f511f77c7e51d6_146087_650x450_fit_box_3.png" width="252" height="450" alt="Donaci칩n GnuPG" title="Donaci칩n GnuPG"  class="lozad "></a></p>
<figcaption>Donaci칩n GnuPG</figcaption>
</figure>
</div>
<table class="table">
    <thead>
        <tr class="thead-dark">
            <th colspan="4">Donaciones que he realizado hasta la 칰ltima fecha</th>
        </tr>
        <tr class="thead-light">
            <th>#</th>
            <th>Fecha</th>
            <th>Proyecto</th>
            <th>Donaci칩n</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>2015/12</td>
            <td>Free Software Foundation Europe (FSFE)</td>
            <td>40 </td>
        </tr>
        <tr>
            <td>2</td>
            <td>2016/09</td>
            <td>Wikipedia, Mozilla/Firefox</td>
            <td>10 , 10 </td>
        </tr>
        <tr>
            <td>3</td>
            <td>2017/01</td>
            <td>elementaryOS, Libre Office, Arch Linux ARM</td>
            <td>10 , 10 , 10 </td>
        </tr>
        <tr>
            <td>4</td>
            <td>2017/05</td>
            <td>GNOME, VideoLAN (VLC), Arch Linux</td>
            <td>15,31 , 10 , 0,31 </td>
        </tr>
        <tr>
            <td>5</td>
            <td>2018/01</td>
            <td>LineageOS, Replicant</td>
            <td>15 , 15 </td>
        </tr>
        <tr>
            <td>6</td>
            <td>2018/12</td>
            <td>Wine</td>
            <td>$20</td>
        </tr>
        <tr>
            <td>7</td>
            <td>2019/12</td>
            <td>Calibre</td>
            <td>$10</td>
        </tr>
        <tr>
            <td>8</td>
            <td>2020/12</td>
            <td>Phoronix, Mozilla/Firefox, GnuPG</td>
            <td>$12, 10 , 10 </td>
        </tr>
        <tr>
            <td>9</td>
            <td>2022/01</td>
            <td>KeePassXC</td>
            <td>15 </td>
        </tr>
        <tr>
            <td colspan="3">Total</td>
            <td>180 , $42</td>
        </tr>
    </tbody>
</table>
]]>
        </content>
        
            
                <category term="planeta-codigo"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/12/para-que-sirve-la-palabra-clave-final-en-el-codigo-fuente-java/</id>
        <title>Para qu칠 sirve la palabra clave final en el c칩digo fuente Java</title>
        <updated>2020-12-18T18:00:00+01:00</updated>
        <published>2020-12-18T18:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/12/para-que-sirve-la-palabra-clave-final-en-el-codigo-fuente-java/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/java.svg" width="200" height="366" alt="Java" title="Java"  class=""></p>
</div>
<p>Algunas personas y en algunos proyectos Java a침aden en la declaraci칩n de cada par치metro de un m칠todo o variable local la palabra reservada <em>final</em>.</p>
<p>La palabra <em>final</em> tiene su utilidad pero hacerlo de forma indiscriminada y en la totalidad de cada par치metro y variable local de cada m칠todo hace m치s verboso el c칩digo sin proporcionar una utilidad significativa porque Java ya en ciertas circunstancias considera a muchas variables efectivamente como <em>final</em>, si al escribir el c칩digo se sigue la recomendaci칩n de no hacer nunca asignaciones sobre variables que son par치metros y se prefiere crear una nueva variable local en vez de modificar el valor de una existente.</p>
<h3 id="qu칠-hace-la-palabra-clave-_final_">쯈u칠 hace la palabra clave <em>final</em>?</h3>
<p>La palabra clave reservada <em>final</em> hace que el compilador genere un error de compilaci칩n cuando a una variable <em>final</em> se le intenta asignar un nuevo valor. El error de compilaci칩n quiz치 en alg칰n caso evita un <em>bug</em> ya que no deber칤a haber intenci칩n de asignar un nuevo valor a una variable <em>final</em>.</p>
<p>La palabra clave reservada <em>final</em> se usa en diferentes contextos:</p>
<ul>
<li>En la declaraci칩n de variables: permite declarar constantes, no se puede asignar un nuevo valor a la variable una vez inicializada.</li>
<li>En la declaraci칩n de un m칠todo: en este contexto una clase que herede un m칠todo <em>final</em> no puede redefinirlo en la clase hija, no se puede hacer un <em>override</em>.</li>
<li>En la declaraci칩n de una clase: impide extender de la clase.</li>
</ul>
<p>Las tres formas de inicializar una variable declarada como <em>final</em> son:</p>
<ul>
<li>En su declaraci칩n.</li>
<li>En el constructor.</li>
<li>En el contexto est치tico si la variable es est치tica.</li>
</ul>
<p>Los constructores no pueden declararse como <em>final</em> ya que no se heredan.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Bike</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">protected</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">MAX_SPEED</span> <span class="o">=</span> <span class="n">50</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">protected</span> <span class="kt">int</span> <span class="n">speed</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSpeed</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">speed</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="k">this</span><span class="o">.</span><span class="na">speed</span> <span class="o">=</span> <span class="n">speed</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">   <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="kd">final</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;running&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">   <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span> </span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Bike.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span><span class="lnt">8&#10;</span><span class="lnt">9&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Honda</span> <span class="kd">extends</span> <span class="n">Bike</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl"> &#10;</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">Honda</span> <span class="n">honda</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Honda</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">honda</span><span class="o">.</span><span class="na">run</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">  <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Honda.java</span>
    </div>
</div>
<h3 id="deber칤a-a침adirse-la-palabra-clave-_final_-a-cada-uno-de-los-argumentos-de-un-m칠todo-y-variables-locales">쮻eber칤a a침adirse la palabra clave <em>final</em> a cada uno de los argumentos de un m칠todo y variables locales?</h3>
<p>En teor칤a, s칤. En la pr치ctica, no. S칩lo es 칰til en m칠todos cuyo c칩digo es largo y complicado, y en ese caso el m칠todo deber칤a simplificarse, o cuando el argumento tiene la posibilidad de confundirse con una variable local o miembro de la clase con la posibilidad de reasignaci칩n.</p>
<p>Aunque un argumento de un m칠todo se declare como <em>final</em> e impide asignarle un valor no se impide modificar su estado si esa variable es una referencia a un objeto como es modificar los elementos de una colecci칩n. Para evitar modificaciones en colecciones hay que hacerlas inmutables.</p>
<p>La palabra <em>final</em> en un argumento sirve para capturar un error en el que el nombre de la variable del argumento se llama igual que una propiedad de la clase en un constructor o un <em>setter</em>, pero usarlo de forma indiscriminada para todos los argumentos puede hacer el c칩digo a칰n m치s verboso sin proporcionar nada significativo, en los constructores y m칠todos <em>setter</em>  puede ser 칰til como en el siguiente caso pero en el resto de m칠todos no es significativamente 칰til con el coste de legibilidad del c칩digo que genera.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Bike</span> <span class="o">{</span> &#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSpeed</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">speed</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="n">speed</span> <span class="o">=</span> <span class="n">speed</span><span class="o">;</span> <span class="c1">// Compiler error: Cannot assign a value to final variable &#39;speed&#39;&#10;</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMaxSpeed</span><span class="o">(</span><span class="kd">final</span> <span class="kt">int</span> <span class="n">speed</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">MAX_SPEED</span> <span class="o">=</span> <span class="n">speed</span><span class="o">;</span> <span class="c1">// Compiler error: Cannot assign a value to final variable &#39;MAX_SPEED&#39;&#10;</span></span></span><span class="line"><span class="cl"><span class="c1"></span>   <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span> </span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Bike-setter.java</span>
    </div>
</div>
<p>Aunque una variable no se indique como <em>final</em> Java la considera efectivamente como <em>final</em> si se dan las siguientes circunstancias en el caso de que tenga inicializador:</p>
<ul>
<li>No est치 declarada como <em>final</em>.</li>
<li>No aparece en la parte izquierda de una expresi칩n de asignaci칩n (la asignaci칩n en la declaraci칩n no se considera una expresi칩n de asignaci칩n).</li>
<li>No aparece nunca como un operando de un operador <em>pre</em> o <em>post</em> incremento o decremento.</li>
</ul>
<p>Una variable que no tenga inicializador se considera efectivamente como <em>final</em> si:</p>
<ul>
<li>No est치 declarada como <em>final</em>.</li>
<li>Cuando aparece como una expresi칩n de asignaci칩n, est치 sin asignar.</li>
<li>No aparece nunca como un operando de un operador <em>pre</em> o <em>post</em> incremento o decremento.</li>
</ul>
<p>Si una variable es efectivamente <em>final</em> a침adir el modificador <em>final</em> no genera ning칰n error en tiempo de compilaci칩n. Una variable o par치metro que es declarado como <em>final</em> en un programa v치lido se convierte en efectivamente <em>final</em> si se elimina el modificador <em>final</em>.</p>
<p>Tambi칠n suele comentarse que una variable <em>final</em> ofrece mejor rendimiento, la diferencia de rendimiento no es significativa y si el rendimiento del programa depende de optimizarlo con palabras clave <em>final</em> seguramente haya muchas otras cosas a mejorar primero que el uso de palabras reservadas <em>final</em>. Otra justificaci칩n para el uso indiscriminado de la palabra <em>final</em> es en programas concurrentes con varios hilos con la intenci칩n de que los hilos no vean objetos parcialmente construidos, casos avanzados en los que quiz치 las primitivas de sincronizaci칩n sea m치s adecuado.</p>
<ul>
<li><a href="https://www.baeldung.com/java-final-performance">The Java final Keyword  Impact on Performance</a></li>
</ul>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://www.javatpoint.com/final-keyword">Final Keyword In Java</a></li>
<li><a href="https://www.geeksforgeeks.org/final-keyword-java/">final keyword in java</a></li>
<li><a href="https://stackoverflow.com/questions/4279420/does-use-of-final-keyword-in-java-improve-the-performance">Does use of final keyword in Java improve the performance?</a></li>
<li><a href="https://softwareengineering.stackexchange.com/questions/98691/excessive-use-final-keyword-in-java">Excessive use 랁inal keyword in Java</a></li>
<li><a href="https://dzone.com/articles/final-keyword-and-jvm-memory-impact">Final Keyword and JVM Memory Impact</a></li>
<li><a href="https://www.javamex.com/tutorials/synchronization_final.shtml">Thread-safety with the Java final keyword</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="java"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/12/internacionalizar-localizar-y-dar-formato-a-cadenas-numeros-importes-y-fechas-en-java/</id>
        <title>Internacionalizar, localizar y dar formato a cadenas, n칰meros, importes y fechas en Java</title>
        <updated>2020-12-12T16:00:00+01:00</updated>
        <published>2020-12-12T16:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/12/internacionalizar-localizar-y-dar-formato-a-cadenas-numeros-importes-y-fechas-en-java/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>La internacionalizaci칩n y localizaci칩n son funcionalidades habitualmente necesarias de implementar en una aplicaci칩n. La localizaci칩n ha de tener en cuenta los diferentes literales para cada idioma y no <em>hardcodearlos</em> en el c칩digo fuente de la aplicaci칩n, las diferentes formas plurales de los lenguajes, el formato de n칰meros e importes, fechas e incluso utilizar la forma correcta para ordenar cadenas alfab칠ticamente.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/java.svg" width="200" height="366" alt="Java" title="Java"  class=""></p>
</div>
<p>Muchas aplicaciones necesitan soportar m칰ltiples idiomas, es imprescindible en aquellas multinacionales dirigidas a usuarios con diferentes idiomas, pa칤s, cultura o regi칩n. Aunque la aplicaci칩n no sea multinacional tambi칠n se necesita si en el mismo pa칤s hay m칰ltiples idiomas oficiales en diferentes regiones como en Espa침a que el idioma oficial es el espa침ol pero comparte oficialidad con Euskera en el Pa칤s Vasco, con el catal치n en Catalunya y el gallego en Galicia. Y aunque no sea imprescindible soportar m칰ltiples idiomas es aconsejable usar las facilidades del lenguaje, librer칤as o <em>framework</em> para no <em>hardcodear</em> en el c칩digo cadenas de literales, no cuesta mucho hacerlo si es desde un principio pero que a침adirlo con posterioridad significa revisar el c칩digo fuente completo de la aplicaci칩n.</p>
<p>A침adir la funcionalidad de internacionalizaci칩n (i18n) a una aplicaci칩n requiere de c칩digo espec칤fico, la internacionalizaci칩n genera uno o varios archivos de recursos que posteriormente con el proceso de localizaci칩n (l10n) genera archivos de recursos adicionales para los diferentes idiomas, pa칤ses, culturas y regiones. Por otro lado, la funcionalidad de localizaci칩n est치 relacionada con la funcionalidad de dar formato a cadenas, n칰meros, importes y fechas.</p>
<p>Para generar los archivos localizados se suele utilizar una <a href="https://picodotdev.github.io/blog-bitix/2018/10/ibm-adquiere-red-hat-el-gigante-de-linux-y-codigo-abierto/">herramienta especializada en realizar traducciones como Weblate</a> de software libre que permite coordinar el trabajo de internacionalizaci칩n de los desarrolladores proporcionando el archivo de recurso de la aplicaci칩n con las cadenas originales a localizar y con el trabajo de localizaci칩n de los traductores que proporcionan los recursos localizados.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del art칤culo</h2><toc></toc></div>
<h3 id="archivos-de-cadenas-y-recursos-localizados-con-java">Archivos de cadenas y recursos localizados con Java</h3>
<p>El lenguaje Java ofrece soporte para la internacionalizaci칩n y localizaci칩n con varias clases incluidas en el JDK y la API. La clase <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Locale.html">Locale</a> identifica un idioma, pa칤s, regi칩n y cultura. La clase <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ResourceBundle.html">ResourceBundle</a> ofrece acceso a los archivos de recursos y <em>properties</em> adecuado seg칰n el <em>Locale</em> para el que se quieran obtener los recursos.</p>
<p>Los archivos de recursos de Java en formato <em>properties</em> son archivos de texto con una cadena por l칤nea, cada cadena est치 identificada con una clave. La clave de la cadena es la misma en todos los archivos localizados de la cadena, var칤a el literal asociado de la cadena. Es recomendable que los archivos de recursos utilicen el formato de caracteres UTF-8 par soportar los caracteres de todos los alfabetos como cir칤licos, kanji y 치rabes.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">message=Hello World!&#10;</span></span><span class="line"><span class="cl">message_0=Hello {0}!&#10;</span></span><span class="line"><span class="cl">elements=0#There are {0} elements.|1#There is {0} element.|1&lt;There are {0} elements.&#10;</span></span><span class="line"><span class="cl">fallback=Fallback</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>resource.properties</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">message=Hello World!&#10;</span></span><span class="line"><span class="cl">message_0=Hello {0}!&#10;</span></span><span class="line"><span class="cl">elements=0#There are {0} elements.|1#There is {0} element.|1&lt;There are {0} elements.</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>resource_en.properties</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">message=춰Hola mundo!&#10;</span></span><span class="line"><span class="cl">message_0=춰Hola {0}!&#10;</span></span><span class="line"><span class="cl">elements=0#Hay {0} elementos.|1#Hay {0} elemento.|1&lt;Hay {0} elementos.</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>resource_es.properties</span>
    </div>
</div>
<h3 id="la-clase-locale-y-locales-soportados-por-java">La clase Locale y Locales soportados por Java</h3>
<p>El JDK de Java proporciona soporte para m칰ltiples <em>locales</em> con los idiomas mayoritarios en el mundo. La lista completa de locales para los que Java incluye soporte en el JDK se obtiene con la clase <em>Locale</em>. En caso de que el <em>Locale</em> no tenga una variable con el <em>locale</em> est치tica se ofrece un constructor para indicar el c칩digo del lenguaje, el pa칤s y su variante.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span><span class="lnt">8&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">Locale</span> <span class="n">enLocale</span> <span class="o">=</span> <span class="n">Locale</span><span class="o">.</span><span class="na">ENGLISH</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">Locale</span> <span class="n">esLocale</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Locale</span><span class="o">(</span><span class="s">&#34;es&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">locales</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">Locale</span><span class="o">.</span><span class="na">getAvailableLocales</span><span class="o">()).</span><span class="na">map</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">it</span><span class="o">.</span><span class="na">toLanguageTag</span><span class="o">()).</span><span class="na">sorted</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;, &#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">locales</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-locales-1.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span><span class="lnt">43&#10;</span><span class="lnt">44&#10;</span><span class="lnt">45&#10;</span><span class="lnt">46&#10;</span><span class="lnt">47&#10;</span><span class="lnt">48&#10;</span><span class="lnt">49&#10;</span><span class="lnt">50&#10;</span><span class="lnt">51&#10;</span><span class="lnt">52&#10;</span><span class="lnt">53&#10;</span><span class="lnt">54&#10;</span><span class="lnt">55&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl"># Supported locales&#10;</span></span><span class="line"><span class="cl">af, af-NA, af-ZA, agq, agq-CM, ak, ak-GH, am, am-ET, ar, ar-001, ar-AE, ar-BH, ar-DJ, ar-DZ, ar-EG,&#10;</span></span><span class="line"><span class="cl">ar-EH, ar-ER, ar-IL, ar-IQ, ar-JO, ar-KM, ar-KW, ar-LB, ar-LY, ar-MA, ar-MR, ar-OM, ar-PS, ar-QA,&#10;</span></span><span class="line"><span class="cl">ar-SA, ar-SD, ar-SO, ar-SS, ar-SY, ar-TD, ar-TN, ar-YE, as, as-IN, asa, asa-TZ, ast, ast-ES, az,&#10;</span></span><span class="line"><span class="cl">az-Cyrl, az-Cyrl-AZ, az-Latn, az-Latn-AZ, bas, bas-CM, be, be-BY, bem, bem-ZM, bez, bez-TZ, bg,&#10;</span></span><span class="line"><span class="cl">bg-BG, bm, bm-ML, bn, bn-BD, bn-IN, bo, bo-CN, bo-IN, br, br-FR, brx, brx-IN, bs, bs-Cyrl,&#10;</span></span><span class="line"><span class="cl">bs-Cyrl-BA, bs-Latn, bs-Latn-BA, ca, ca-AD, ca-ES, ca-ES-VALENCIA, ca-FR, ca-IT, ccp, ccp-BD,&#10;</span></span><span class="line"><span class="cl">ccp-IN, ce, ce-RU, cgg, cgg-UG, chr, chr-US, ckb, ckb-IQ, ckb-IR, cs, cs-CZ, cu, cu-RU, cy, cy-GB,&#10;</span></span><span class="line"><span class="cl">da, da-DK, da-GL, dav, dav-KE, de, de-AT, de-BE, de-CH, de-DE, de-IT, de-LI, de-LU, dje, dje-NE,&#10;</span></span><span class="line"><span class="cl">dsb, dsb-DE, dua, dua-CM, dyo, dyo-SN, dz, dz-BT, ebu, ebu-KE, ee, ee-GH, ee-TG, el, el-CY, el-GR,&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">en, en-001, en-150, en-AG, en-AI, en-AS, en-AT, en-AU, en-BB, en-BE, en-BI, en-BM, en-BS, en-BW, en-BZ,&#10;</span></span><span class="line"><span class="cl">en-CA, en-CC, en-CH, en-CK, en-CM, en-CX, en-CY, en-DE, en-DG, en-DK, en-DM, en-ER, en-FI, en-FJ, en-FK,&#10;</span></span><span class="line"><span class="cl">en-FM, en-GB, en-GD, en-GG, en-GH, en-GI, en-GM, en-GU, en-GY, en-HK, en-IE, en-IL, en-IM, en-IN, en-IO,&#10;</span></span><span class="line"><span class="cl">en-JE, en-JM, en-KE, en-KI, en-KN, en-KY, en-LC, en-LR, en-LS, en-MG, en-MH, en-MO, en-MP, en-MS, en-MT,&#10;</span></span><span class="line"><span class="cl">en-MU, en-MW, en-MY, en-NA, en-NF, en-NG, en-NL, en-NR, en-NU, en-NZ, en-PG, en-PH, en-PK, en-PN, en-PR,&#10;</span></span><span class="line"><span class="cl">en-PW, en-RW, en-SB, en-SC, en-SD, en-SE, en-SG, en-SH, en-SI, en-SL, en-SS, en-SX, en-SZ, en-TC, en-TK,&#10;</span></span><span class="line"><span class="cl">en-TO, en-TT, en-TV, en-TZ, en-UG, en-UM, en-US, en-US-POSIX, en-VC, en-VG, en-VI, en-VU, en-WS, en-ZA,&#10;</span></span><span class="line"><span class="cl">en-ZM, en-ZW,&#10;</span></span><span class="line"><span class="cl">eo, eo-001,&#10;</span></span><span class="line"><span class="cl">es, es-419, es-AR, es-BO, es-BR, es-BZ, es-CL, es-CO, es-CR, es-CU, es-DO, es-EA, es-EC, es-ES, es-GQ,&#10;</span></span><span class="line"><span class="cl">es-GT, es-HN, es-IC, es-MX, es-NI, es-PA, es-PE, es-PH, es-PR, es-PY, es-SV, es-US, es-UY, es-VE,&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">et, et-EE, eu, eu-ES, ewo, ewo-CM, fa, fa-AF, fa-IR, ff, ff-CM, ff-GN, ff-MR, ff-SN, fi, fi-FI, fil,&#10;</span></span><span class="line"><span class="cl">fil-PH, fo, fo-DK, fo-FO, fr, fr-BE, fr-BF, fr-BI, fr-BJ, fr-BL, fr-CA, fr-CD, fr-CF, fr-CG, fr-CH,&#10;</span></span><span class="line"><span class="cl">fr-CI, fr-CM, fr-DJ, fr-DZ, fr-FR, fr-GA, fr-GF, fr-GN, fr-GP, fr-GQ, fr-HT, fr-KM, fr-LU, fr-MA,&#10;</span></span><span class="line"><span class="cl">fr-MC, fr-MF, fr-MG, fr-ML, fr-MQ, fr-MR, fr-MU, fr-NC, fr-NE, fr-PF, fr-PM, fr-RE, fr-RW, fr-SC, fr-SN,&#10;</span></span><span class="line"><span class="cl">fr-SY, fr-TD, fr-TG, fr-TN, fr-VU, fr-WF, fr-YT, fur, fur-IT, fy, fy-NL, ga, ga-IE, gd, gd-GB, gl, gl-ES,&#10;</span></span><span class="line"><span class="cl">gsw, gsw-CH, gsw-FR, gsw-LI,&#10;</span></span><span class="line"><span class="cl">gu, gu-IN, guz, guz-KE, gv, gv-IM, ha, ha-GH, ha-NE, ha-NG, haw, haw-US, he, he-IL, hi, hi-IN, hr, hr-BA,&#10;</span></span><span class="line"><span class="cl">hr-HR, hsb, hsb-DE, hu, hu-HU, hy, hy-AM, id, id-ID, ig, ig-NG, ii, ii-CN, is, is-IS, it, it-CH, it-IT,&#10;</span></span><span class="line"><span class="cl">it-SM, it-VA, ja, ja-JP, ja-JP-u-ca-japanese-x-lvariant-JP, jgo, jgo-CM, jmc, jmc-TZ, ka, ka-GE, kab,&#10;</span></span><span class="line"><span class="cl">kab-DZ, kam, kam-KE, kde, kde-TZ, kea, kea-CV, khq, khq-ML, ki, ki-KE, kk, kk-KZ, kkj, kkj-CM, kl, kl-GL,&#10;</span></span><span class="line"><span class="cl">kln, kln-KE, km, km-KH, kn, kn-IN, ko, ko-KP, ko-KR, kok, kok-IN, ks, ks-IN, ksb, ksb-TZ, ksf, ksf-CM, ksh,&#10;</span></span><span class="line"><span class="cl">ksh-DE, kw, kw-GB, ky, ky-KG, lag, lag-TZ, lb, lb-LU, lg, lg-UG, lkt, lkt-US, ln, ln-AO, ln-CD, ln-CF,&#10;</span></span><span class="line"><span class="cl">ln-CG, lo, lo-LA, lrc, lrc-IQ, lrc-IR, lt, lt-LT, lu, lu-CD, luo, luo-KE, luy, luy-KE, lv, lv-LV, mas,&#10;</span></span><span class="line"><span class="cl">mas-KE, mas-TZ, mer, mer-KE, mfe, mfe-MU, mg, mg-MG, mgh, mgh-MZ, mgo, mgo-CM, mk, mk-MK, ml, ml-IN, mn,&#10;</span></span><span class="line"><span class="cl">mn-MN, mr, mr-IN, ms, ms-BN, ms-MY, ms-SG, mt, mt-MT, mua, mua-CM, my, my-MM, mzn, mzn-IR, naq, naq-NA,&#10;</span></span><span class="line"><span class="cl">nb, nb-NO, nb-SJ, nd, nd-ZW, nds, nds-DE, nds-NL, ne, ne-IN, ne-NP, nl, nl-AW, nl-BE, nl-BQ, nl-CW, nl-NL,&#10;</span></span><span class="line"><span class="cl">nl-SR, nl-SX, nmg, nmg-CM, nn, nn-NO, nn-NO, nnh, nnh-CM, no, no-NO, nus, nus-SS, nyn, nyn-UG, om, om-ET,&#10;</span></span><span class="line"><span class="cl">om-KE, or, or-IN, os, os-GE, os-RU, pa, pa-Arab, pa-Arab-PK, pa-Guru, pa-Guru-IN, pl, pl-PL, prg, prg-001,&#10;</span></span><span class="line"><span class="cl">ps, ps-AF, pt, pt-AO, pt-BR, pt-CH, pt-CV, pt-GQ, pt-GW, pt-LU, pt-MO, pt-MZ, pt-PT, pt-ST, pt-TL, qu,&#10;</span></span><span class="line"><span class="cl">qu-BO, qu-EC, qu-PE, rm, rm-CH, rn, rn-BI, ro, ro-MD, ro-RO, rof, rof-TZ, ru, ru-BY, ru-KG, ru-KZ, ru-MD,&#10;</span></span><span class="line"><span class="cl">ru-RU, ru-UA, rw, rw-RW, rwk, rwk-TZ, sah, sah-RU, saq, saq-KE, sbp, sbp-TZ, sd, sd-PK, se, se-FI, se-NO,&#10;</span></span><span class="line"><span class="cl">se-SE, seh, seh-MZ, ses, ses-ML, sg, sg-CF, shi, shi-Latn, shi-Latn-MA, shi-Tfng, shi-Tfng-MA, si, si-LK,&#10;</span></span><span class="line"><span class="cl">sk, sk-SK, sl, sl-SI, smn, smn-FI, sn, sn-ZW, so, so-DJ, so-ET, so-KE, so-SO, sq, sq-AL, sq-MK, sq-XK, sr,&#10;</span></span><span class="line"><span class="cl">sr-BA, sr-CS, sr-Cyrl, sr-Cyrl-BA, sr-Cyrl-ME, sr-Cyrl-RS, sr-Cyrl-XK, sr-Latn, sr-Latn-BA, sr-Latn-ME,&#10;</span></span><span class="line"><span class="cl">sr-Latn-RS, sr-Latn-XK, sr-ME, sr-RS, sv, sv-AX, sv-FI, sv-SE, sw, sw-CD, sw-KE, sw-TZ, sw-UG, ta, ta-IN,&#10;</span></span><span class="line"><span class="cl">ta-LK, ta-MY, ta-SG, te, te-IN, teo, teo-KE, teo-UG, tg, tg-TJ, th, th-TH, th-TH-u-nu-thai-x-lvariant-TH,&#10;</span></span><span class="line"><span class="cl">ti, ti-ER, ti-ET, tk, tk-TM, to, to-TO, tr, tr-CY, tr-TR, tt, tt-RU, twq, twq-NE, tzm, tzm-MA, ug, ug-CN,&#10;</span></span><span class="line"><span class="cl">uk, uk-UA, und, ur, ur-IN, ur-PK, uz, uz-Arab, uz-Arab-AF, uz-Cyrl, uz-Cyrl-UZ, uz-Latn, uz-Latn-UZ, vai,&#10;</span></span><span class="line"><span class="cl">vai-Latn, vai-Latn-LR, vai-Vaii, vai-Vaii-LR, vi, vi-VN, vo, vo-001, vun, vun-TZ, wae, wae-CH, wo, wo-SN,&#10;</span></span><span class="line"><span class="cl">xog, xog-UG, yav, yav-CM, yi, yi-001, yo, yo-BJ, yo-NG, yue, yue-Hans, yue-Hans-CN, yue-Hant, yue-Hant-HK,&#10;</span></span><span class="line"><span class="cl">zgh, zgh-MA, zh, zh-CN, zh-HK, zh-Hans, zh-Hans-CN, zh-Hans-HK, zh-Hans-MO, zh-Hans-SG, zh-Hant, zh-Hant-HK,&#10;</span></span><span class="line"><span class="cl">zh-Hant-MO, zh-Hant-TW, zh-SG, zh-TW, zu, zu-ZA</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System-locales-1.out</span>
    </div>
</div>
<p>La clase <em>Locale</em> est치 formada por el identificador de dos letras del idioma y opcionalmente adicionalmente por el identificador del pa칤s y opcionalmente adicionalmente un c칩digo de variante. Estos tres identificadores separados por un gui칩n forman el identificador del <em>Locale</em>. En los archivos de recursos los guiones se ponen con barras bajas.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">es -&gt; espa침ol&#10;</span></span><span class="line"><span class="cl">es-ES -&gt; espa침ol de Espa침a&#10;</span></span><span class="line"><span class="cl">es-MX -&gt; espa침ol de M칠xico&#10;</span></span><span class="line"><span class="cl">es-AR -&gt; espa침ol de Argentina</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-locales-2.txt</span>
    </div>
</div>
<h3 id="localizaci칩n-de-cadenas">Localizaci칩n de cadenas</h3>
<p>La clase <em>ResourceBundle</em> busca y devuelve el literal adecuando seg칰n la clave que lo identifica y el <em>Locale</em> deseado.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">ResourceBundle</span> <span class="n">enBundle</span> <span class="o">=</span> <span class="n">ResourceBundle</span><span class="o">.</span><span class="na">getBundle</span><span class="o">(</span><span class="s">&#34;resource&#34;</span><span class="o">,</span> <span class="n">enLocale</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">ResourceBundle</span> <span class="n">esBundle</span> <span class="o">=</span> <span class="n">ResourceBundle</span><span class="o">.</span><span class="na">getBundle</span><span class="o">(</span><span class="s">&#34;resource&#34;</span><span class="o">,</span> <span class="n">esLocale</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1">// Literales&#10;</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;# Literals&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Message (en): &#34;</span> <span class="o">+</span> <span class="n">enBundle</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&#34;message&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Message (es): &#34;</span> <span class="o">+</span> <span class="n">esBundle</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&#34;message&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-literals-1.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl"># Literals&#10;</span></span><span class="line"><span class="cl">Message (en): Hello World!&#10;</span></span><span class="line"><span class="cl">Message (es): 춰Hola mundo!</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System-literals-1.out</span>
    </div>
</div>
<h4 id="cadenas-con-argumentos">Cadenas con argumentos</h4>
<p>Algunas cadenas tienen datos o <em>placeholders</em> que son insertados en tiempo de ejecuci칩n como un n칰mero, fecha, importe u otra peque침a cadena como un nombre, para insertar estos datos se utiliza la clase <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/MessageFormat.html">MessageFomat</a> que sustituye los argumentos o <em>placeholders</em> por los valores proporcionados.</p>
<p>Los argumentos o <em>placeholders</em> est치n numerados entre llaves.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Message with argument (en): &#34;</span> <span class="o">+</span> <span class="n">MessageFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">enBundle</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&#34;message_0&#34;</span><span class="o">),</span> <span class="s">&#34;picodotdev&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Message with argument (es): &#34;</span> <span class="o">+</span> <span class="n">MessageFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">esBundle</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&#34;message_0&#34;</span><span class="o">),</span> <span class="s">&#34;picodotdev&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-literals-2.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">Message with argument (en): Hello picodotdev!&#10;</span></span><span class="line"><span class="cl">Message with argument (es): 춰Hola picodotdev!&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System-literals-2.out</span>
    </div>
</div>
<h4 id="herencia-de-cadenas">Herencia de cadenas</h4>
<p>La clase <em>ResourceBundle</em> implementa un mecanismo de herencia por el que si no existe el archivo o clave de la cadena de la clave solicitada en el archivo de recursos del <em>locale</em> indicado se obtiene la cadena del siguiente <em>locale</em> m치s general. Por ejemplo, si se desea obtener una cadena para el <em>Locale</em> <em>es_ES</em> (espa침ol de Espa침a) o <em>es_MX</em> (espa침ol de M칠xico) para el que no existe su propio archivo de recursos o la clave de la cadena entonces se obtiene la cadena del archivo de recurso espa침ol (<em>es</em>), si incluso no existiese en el <em>locale</em> <em>es</em> se obtendr칤a la cadena del recurso base <em>resource.properties</em>.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">Locale</span> <span class="n">esesLocale</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Locale</span><span class="o">(</span><span class="s">&#34;es&#34;</span><span class="o">,</span> <span class="s">&#34;ES&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">ResourceBundle</span> <span class="n">esesBundle</span> <span class="o">=</span> <span class="n">ResourceBundle</span><span class="o">.</span><span class="na">getBundle</span><span class="o">(</span><span class="s">&#34;resource&#34;</span><span class="o">,</span> <span class="n">esesLocale</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Fallback (es-ES): &#34;</span> <span class="o">+</span> <span class="n">esesBundle</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&#34;fallback&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-literals-3.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">Fallback (es-ES): Fallback&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System-literals-3.out</span>
    </div>
</div>
<h4 id="localizaci칩n-de-cadenas-con-m칰ltiples-formas-plurales">Localizaci칩n de cadenas con m칰ltiples formas plurales</h4>
<p>La localizaci칩n de las cadenas tambi칠n ha de tener en cuenta que los lenguajes usan varias formas plurales, cada lenguaje tiene su propio n칰mero de formas plurales. El espa침ol tiene dos formas plurales, la de un elemento y m치s de un elemento. Otros lenguajes tiene tres o m치s formas plurales seg칰n las propias reglas del lenguaje y n칰mero de elementos a los que se refiera la expresi칩n, por ejemplo el ruso tiene tres formas plurales y el chino una sola forma plural.</p>
<p>En espa침ol dependiendo del n칰mero de elementos a los que nos referimos se utiliza el singular o el plural.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">Hay 0 archivos.&#10;</span></span><span class="line"><span class="cl">Hay 1 archivo.&#10;</span></span><span class="line"><span class="cl">Hay 2 archivos.</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-pluralforms-1.txt</span>
    </div>
</div>
<p>Las aplicaciones que no soportan diferentes normas plurales en las cadenas suelen utilizar expresiones como las siguientes, la cadena es la misma tanto para el singular como para el plural.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">Hay 0 archivo(s).&#10;</span></span><span class="line"><span class="cl">Hay 1 archivo(s).&#10;</span></span><span class="line"><span class="cl">Hay 2 archivo(s).</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-pluralforms-2.txt</span>
    </div>
</div>
<p>En Java la clase que permite utilizar diferentes formas plurales es <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/ChoiceFormat.html">ChoiceFormat</a>. Utiliza un formato especial para que cadena elegir seg칰n la forma plural, est치 formada por una colecci칩n de n칰mero de forma plural y la cadena a utilizar. Para elegir la cadena adecuada seg칰n la forma plural se ha de proporcionar el n칰mero de elementos a los que se refiere la expresi칩n, este n칰mero selecciona la cadena de la forma plural.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;# Plural forms&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">enPluralForm</span> <span class="o">=</span> <span class="n">enBundle</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&#34;elements&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">esPluralForm</span> <span class="o">=</span> <span class="n">esBundle</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&#34;elements&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">ChoiceFormat</span> <span class="n">enChoiceFormat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ChoiceFormat</span><span class="o">(</span><span class="n">enPluralForm</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">ChoiceFormat</span> <span class="n">esChoiceFormat</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ChoiceFormat</span><span class="o">(</span><span class="n">esPluralForm</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">enPluralForm0</span> <span class="o">=</span> <span class="n">enChoiceFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">enPluralForm1</span> <span class="o">=</span> <span class="n">enChoiceFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">enPluralForm2</span> <span class="o">=</span> <span class="n">enChoiceFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">2</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">esPluralForm0</span> <span class="o">=</span> <span class="n">esChoiceFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">0</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">esPluralForm1</span> <span class="o">=</span> <span class="n">esChoiceFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">1</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">String</span> <span class="n">esPluralForm2</span> <span class="o">=</span> <span class="n">esChoiceFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">2</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Plural form (en, &#34;</span> <span class="o">+</span> <span class="n">0</span> <span class="o">+</span> <span class="s">&#34;): &#34;</span> <span class="o">+</span> <span class="n">MessageFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">enPluralForm0</span><span class="o">,</span> <span class="n">0</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Plural form (en, &#34;</span> <span class="o">+</span> <span class="n">1</span> <span class="o">+</span> <span class="s">&#34;): &#34;</span> <span class="o">+</span> <span class="n">MessageFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">enPluralForm1</span><span class="o">,</span> <span class="n">1</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Plural form (en, &#34;</span> <span class="o">+</span> <span class="n">2</span> <span class="o">+</span> <span class="s">&#34;): &#34;</span> <span class="o">+</span> <span class="n">MessageFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">enPluralForm2</span><span class="o">,</span> <span class="n">2</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Plural form (es, &#34;</span> <span class="o">+</span> <span class="n">0</span> <span class="o">+</span> <span class="s">&#34;): &#34;</span> <span class="o">+</span> <span class="n">MessageFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">esPluralForm0</span><span class="o">,</span> <span class="n">0</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Plural form (es, &#34;</span> <span class="o">+</span> <span class="n">1</span> <span class="o">+</span> <span class="s">&#34;): &#34;</span> <span class="o">+</span> <span class="n">MessageFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">esPluralForm1</span><span class="o">,</span> <span class="n">1</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Plural form (es, &#34;</span> <span class="o">+</span> <span class="n">2</span> <span class="o">+</span> <span class="s">&#34;): &#34;</span> <span class="o">+</span> <span class="n">MessageFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">esPluralForm2</span><span class="o">,</span> <span class="n">2</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-pluralforms-3.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl"># Plural forms&#10;</span></span><span class="line"><span class="cl">Plural form (en, 0): There are 0 elements.&#10;</span></span><span class="line"><span class="cl">Plural form (en, 1): There is 1 element.&#10;</span></span><span class="line"><span class="cl">Plural form (en, 2): There are 2 elements.&#10;</span></span><span class="line"><span class="cl">Plural form (es, 0): Hay 0 elementos.&#10;</span></span><span class="line"><span class="cl">Plural form (es, 1): Hay 1 elemento.&#10;</span></span><span class="line"><span class="cl">Plural form (es, 2): Hay 2 elementos.</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System-pluralforms-3.out</span>
    </div>
</div>
<h3 id="localizaci칩n-de-fechas">Localizaci칩n de fechas</h3>
<p>Las fechas tambi칠n son textos que var칤an seg칰n el <em>Locale</em> ya sea seg칰n el formato que se utilicen para convertir las fechas a texto como por incluir nombres de semana, nombres de los meses e intercalar algunas preposiciones. Tambi칠n seg칰n el pa칤s var칤a el formato, en Estados Unidos el mes se indica antes que el d칤a, con el formato <em>MM/dd/yyyy</em> cuando en Espa침a y muchos otros pa칤ses se utiliza el formato <em>dd/MM/yyyy</em> con el d칤a primero.</p>
<p>Al usar fechas tambi칠n suele ser necesario <a href="https://picodotdev.github.io/blog-bitix/2015/01/convertir-fechas-y-husos-horarios-en-java/">convertir fechas y husos horarios</a> y es recomendable <a href="https://picodotdev.github.io/blog-bitix/2016/08/por-que-guardar-las-fechas-en-utc-en-la-base-de-datos/">guardar las fechas en formato UTC en la base de datos</a> porque este huso horario no var칤a con el horario de verano e invierno.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;# Dates&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Date (iso): &#34;</span> <span class="o">+</span> <span class="n">DateTimeFormatter</span><span class="o">.</span><span class="na">ISO_ZONED_DATE_TIME</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">ZonedDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">()));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Date (en): &#34;</span> <span class="o">+</span> <span class="n">DateTimeFormatter</span><span class="o">.</span><span class="na">ofPattern</span><span class="o">(</span><span class="s">&#34;EEEE d, LLLL YYYY&#34;</span><span class="o">,</span> <span class="n">enLocale</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="n">ZonedDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">()));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Date (es): &#34;</span> <span class="o">+</span> <span class="n">DateTimeFormatter</span><span class="o">.</span><span class="na">ofPattern</span><span class="o">(</span><span class="s">&#34;EEEE d, LLLL YYYY&#34;</span><span class="o">,</span> <span class="n">esLocale</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="n">ZonedDateTime</span><span class="o">.</span><span class="na">now</span><span class="o">()));</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-dates-1.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl"># Dates&#10;</span></span><span class="line"><span class="cl">Date (iso): 2020-12-12T18:17:54.305805+01:00[Europe/Madrid]&#10;</span></span><span class="line"><span class="cl">Date (en): Saturday 12, December 2020&#10;</span></span><span class="line"><span class="cl">Date (es): s치bado 12, diciembre 2020</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System-dates-1.out</span>
    </div>
</div>
<h3 id="localizaci칩n-de-n칰meros-e-importes">Localizaci칩n de n칰meros e importes</h3>
<p>Al igual que con las fechas hay que tener algunas <a href="https://picodotdev.github.io/blog-bitix/2019/03/varias-consideraciones-importantes-para-trabajar-con-importes-correctamente-tipo-de-datos-precision-y-guardado/">consideraciones al trabajar con importes</a> como utilizar la clase <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/BigDecimal.html">BigDecimal</a> en vez de un <em>float</em> o <em>double</em> y en ocasiones es necesario realizar <a href="https://picodotdev.github.io/blog-bitix/2015/07/como-trabajar-con-importes-ratios-y-divisas-en-java/">conversiones de importes entre diferentes divisas con ratios de conversi칩n</a>. Java tiene una especificaci칩n que define una API para tareas monetarias, la <a href="https://javamoney.github.io/">librer칤a Moneta</a> es la implementaci칩n de referencia.</p>
<p>Los n칰meros e importes tambi칠n var칤an en formato seg칰n el <em>Locale</em>. En los n칰meros en algunos pa칤ses se utiliza el punto para separar los millares y la coma para los decimales y en otros es al rev칠s se utiliza la coma para separar los millares y el punto para los decimales.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="kt">long</span> <span class="n">millionNumber</span> <span class="o">=</span> <span class="n">1_000_000</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kt">double</span> <span class="n">decimalNumber</span> <span class="o">=</span> <span class="n">1000</span><span class="o">.</span><span class="na">35d</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;# Numbers&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Number (en): &#34;</span> <span class="o">+</span> <span class="n">NumberFormat</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">enLocale</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="n">millionNumber</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Decimal number (en): &#34;</span> <span class="o">+</span> <span class="n">NumberFormat</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">enLocale</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="n">decimalNumber</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Number (es): &#34;</span> <span class="o">+</span> <span class="n">NumberFormat</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">esLocale</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="n">millionNumber</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Decimal number (es): &#34;</span> <span class="o">+</span> <span class="n">NumberFormat</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">esLocale</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="n">decimalNumber</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-numbers-1.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl"># Numbers&#10;</span></span><span class="line"><span class="cl">Number (en): 1,000,000&#10;</span></span><span class="line"><span class="cl">Decimal number (en): 1,000.35&#10;</span></span><span class="line"><span class="cl">Number (es): 1.000.000&#10;</span></span><span class="line"><span class="cl">Decimal number (es): 1.000,35</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System-numbers-1.out</span>
    </div>
</div>
<p>Los importes suelen incluir el s칤mbolo de la moneda y dependiendo del <em>Locale</em> el s칤mbolo puede estar antes de la cifra, despu칠s de la cifra, con el c칩digo de la moneda o el s칤mbolo de la moneda.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.javamoney.moneta.Money</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.javamoney.moneta.format.CurrencyStyle</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">javax.money.format.AmountFormatQueryBuilder</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">javax.money.format.MonetaryAmountFormat</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;# Money&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">Money</span> <span class="n">millionUSD</span> <span class="o">=</span> <span class="n">Money</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">&#34;1000000&#34;</span><span class="o">),</span> <span class="s">&#34;USD&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">Money</span> <span class="n">millionEUR</span> <span class="o">=</span> <span class="n">Money</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">&#34;1000000&#34;</span><span class="o">),</span> <span class="s">&#34;EUR&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">Money</span> <span class="n">decimalUSD</span> <span class="o">=</span> <span class="n">Money</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">&#34;1000.35&#34;</span><span class="o">),</span> <span class="s">&#34;USD&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">Money</span> <span class="n">decimalEUR</span> <span class="o">=</span> <span class="n">Money</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="n">BigDecimal</span><span class="o">(</span><span class="s">&#34;1000.35&#34;</span><span class="o">),</span> <span class="s">&#34;EUR&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">MonetaryAmountFormat</span> <span class="n">enMonetaryFormat</span> <span class="o">=</span> <span class="n">MonetaryFormats</span><span class="o">.</span><span class="na">getAmountFormat</span><span class="o">(</span><span class="n">AmountFormatQueryBuilder</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">enLocale</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="n">CurrencyStyle</span><span class="o">.</span><span class="na">SYMBOL</span><span class="o">).</span><span class="na">build</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">MonetaryAmountFormat</span> <span class="n">esMonetaryFormat</span> <span class="o">=</span> <span class="n">MonetaryFormats</span><span class="o">.</span><span class="na">getAmountFormat</span><span class="o">(</span><span class="n">AmountFormatQueryBuilder</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">esLocale</span><span class="o">).</span><span class="na">set</span><span class="o">(</span><span class="n">CurrencyStyle</span><span class="o">.</span><span class="na">SYMBOL</span><span class="o">).</span><span class="na">build</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Million USD (en): &#34;</span> <span class="o">+</span> <span class="n">enMonetaryFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">millionUSD</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Million EUR (es): &#34;</span> <span class="o">+</span> <span class="n">esMonetaryFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">millionEUR</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Decimal USD (en): &#34;</span> <span class="o">+</span> <span class="n">enMonetaryFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">decimalUSD</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Decimal EUR (es): &#34;</span> <span class="o">+</span> <span class="n">esMonetaryFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">decimalEUR</span><span class="o">));</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-money-1.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl"># Money&#10;</span></span><span class="line"><span class="cl">Million USD (en): $1,000,000.00&#10;</span></span><span class="line"><span class="cl">Million EUR (es): 1.000.000,00 &#10;</span></span><span class="line"><span class="cl">Decimal USD (en): $1,000.35&#10;</span></span><span class="line"><span class="cl">Decimal EUR (es): 1.000,35 </span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System-money-1.out</span>
    </div>
</div>
<h3 id="ordenar-cadenas-correctamente-de-forma-alfab칠tica">Ordenar cadenas correctamente de forma alfab칠tica</h3>
<p>Incluso ordenar cadenas alfab칠ticamente correctamente no es una tarea tan simple como parece a primera vista. Para ordenar correctamente cadenas hay que tener en cuenta o considerar como iguales ciertos caracteres c칩mo la letra <em>a</em> o la letra <em>치</em> con tilde. Si la ordenaci칩n se hace 칰nicamente por el c칩digo num칠rico del caracter dependiendo de la lista de cadenas la lista supuestamente ordenada quiz치 no sea la que deber칤a.</p>
<p>Al ordenar cadenas tambi칠n es posible diferenciar las letras en may칰sculas o considerarlas como iguales al ordenarlas. En el art칤culo <a href="https://picodotdev.github.io/blog-bitix/2017/11/la-forma-correcta-de-ordenar-alfabeticamente-cadenas-en-java/">la forma correcta de ordenar alfab칠ticamente cadenas en Java</a> explico esta funcionalidad y que soporte ofrece Java.</p>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/JavaInternacionalizationLocalization">c칩digo fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub y probarlo en tu equipo ejecutando siguiente comando:<br><code>./gradlew run</code></p>
</div>
]]>
        </content>
        
            
                <category term="java"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/</id>
        <title>La herramienta Weblate para traducir una aplicaci칩n a m칰ltiples idiomas</title>
        <updated>2020-12-10T23:00:00+01:00</updated>
        <published>2020-12-10T23:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>La internacionalizaci칩n (i18n) y localizaci칩n (i10n) en un proyecto de software es muy habitual y necesario cuando la aplicaci칩n ha de soportar m칰ltiples lenguajes, pa칤ses, regiones, culturas o en el mismo pa칤s diferentes idiomas oficiales seg칰n la regi칩n. La traducci칩n necesita un flujo de trabajo coordinado entre los desarrolladores de la aplicaci칩n que realizan la internacionalizaci칩n y los traductores que realizan la localizaci칩n. Para facilitar el flujo de trabajo y funcionalidades 칰tiles para los traductores hay herramientas espec칤ficas para la tarea, una herramienta para traducciones de software libre es Weblate.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/weblate.svg" width="200" height="200" alt="Weblate" title="Weblate"  class=""></p>
</div>
<p>En el desarrollo de un producto internacional destinado a los usuarios de m칰ltiples lenguajes, pa칤ses, regiones, culturas o en un mismo pa칤s en el que hay varias lenguas oficiales es un requerimiento ofrecer el producto o aplicaci칩n en el lenguaje preferido por los usuarios. Esto significa que la aplicaci칩n ha de soportar m칰ltiples lenguajes y mostrar las cadenas de texto en la interf치z gr치fica en el lenguaje preferido por el usuario.</p>
<p>Para que una aplicaci칩n soporte m칰ltiples lenguajes ha de implementar internacionalizaci칩n (i18n) y la localizaci칩n (i10n), la internacionalizaci칩n y localizaci칩n son los procesos implementados en el c칩digo fuente de la aplicaci칩n que le habilita para mostrar las cadenas en un determinado lenguaje.  La localizaci칩n consiste en traducir las cadenas de texto a cada uno de los lenguajes que soporte la aplicaci칩n.</p>
<p>La internacionalizaci칩n y localizaci칩n no es simplemente traducir una cadena a otro idioma, es un proceso con cierta complejidad en el que hay que tener en cuenta numerosos aspectos:</p>
<ul>
<li>Formas plurales. El espa침ol tiene dos formas plurales, uno y m치s de uno, pero otros lenguajes tienen m치s formas plurales algunos hasta seis formas plurales y otros lenguajes solo una forma plural.</li>
<li>El formato de los horarios.</li>
<li>El formato de las fechas. En espa침ol las fechas se escriben siguiendo el patr칩n d칤a/mes/a침o pero en Estados Unidos se escribe mes/d칤a/a침o.</li>
<li>Monedas internacionales. Seg칰n el pa칤s, regi칩n o cantidad monetaria el formato y s칤mbolo que representa la moneda es distinto.</li>
<li>Sistema de pesos y medidas (pulgadas/cent칤metros, libras/gramos, etc.).</li>
<li>C칩digos de caracteres (cir칤lico, kanji, 치rabe, &hellip;).</li>
<li>Formato de n칰meros. El formato de escribir los n칰meros var칤a para los separadores decimales, separadores de miles, etc.</li>
<li>Las im치genes no es un formato de texto pero tambi칠n es un recurso susceptible de ser localizado.</li>
<li>Seg칰n el alfabeto y caracteres las reglas para <a href="https://picodotdev.github.io/blog-bitix/2017/11/la-forma-correcta-de-ordenar-alfabeticamente-cadenas-en-java/">ordenar alfab칠ticamente correctamente cadenas de texto</a>.</li>
<li>Algunos valores ha de insertarse en las cadenas como fechas, n칰meros u palabras.</li>
</ul>
<p>En los puntos anteriores tambi칠n hay que tener en cuenta que las traducciones y localizaci칩n han de realizarlas m칰ltiples personas o traductores, quiz치 tantos traductores como idiomas haya de soportar la aplicaci칩n que entiendan tanto el idioma original en el que se entregan las cadenas para traducir como el idioma, regi칩n y cultura a la que hay que localizar.</p>
<p>Para coordinar y facilitar el proceso de localizaci칩n de una aplicaci칩n a los m칰ltiples idiomas se suele utilizar una herramienta espec칤fica para esta tarea de traducci칩n y localizaci칩n. Los recursos localizados son utilizados en la aplicaci칩n para <a href="https://picodotdev.github.io/blog-bitix/2020/12/internacionalizar-localizar-y-dar-formato-a-cadenas-numeros-importes-y-fechas-en-java/">localizar y formatear cadenas, cadenas con m칰ltiples formas plurales, fechas, n칰meros e importes en un idioma</a>.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del art칤culo</h2><toc></toc></div>
<h3 id="c칩mo-funciona-el-proceso-de-internacionalizaci칩n-i18n">C칩mo funciona el proceso de internacionalizaci칩n (i18n)</h3>
<p>El proceso de internacionalizaci칩n realiza cambios en el c칩digo fuente de la aplicaci칩n para que la aplicaci칩n pueda ser localizada a m칰ltiples lenguajes, pa칤ses, regiones o culturas. Se ha de tener en cuenta los n칰meros aspectos de la internacionalizaci칩n y localizaci칩n de la lista anterior como formas plurales, formato de fechas, formatos monetarios, formato de n칰meros, etc.</p>
<p>El proceso de internacionalizaci칩n genera como resultado un archivo fuente de cadenas originales que es proporcionado a la herramienta de traducci칩n para su localizaci칩n por los traductores. A lo largo del tiempo habr치 cadenas que se modifiquen y requieran una nueva traducci칩n, nuevas cadenas que se a침adan y cadenas que se eliminen. Las cadenas originales suelen estar en ingl칠s por ser el lenguaje compartido en los lenguajes de programaci칩n y el m치s com칰n entendido por los posibles traductores.</p>
<h3 id="c칩mo-funciona-el-proceso-de-localizaci칩n-i10n">C칩mo funciona el proceso de localizaci칩n (i10n)</h3>
<p>El proceso de localizaci칩n consisten en traducir el archivo fuente de cadenas originales generado en el proceso de internacionalizaci칩n a un lenguaje, pa칤s, regi칩n o cultura. El traductor es la persona que tiene conocimiento para realizar correctamente la localizaci칩n, la herramienta de traducci칩n y localizaci칩n es la que facilita la traducci칩n.</p>
<p>La herramienta de traducci칩n y localizaci칩n ofrece al traductor varias funcionalidades que facilitan su tarea.</p>
<h3 id="herramientas-de-traducci칩n-y-localizaci칩n">Herramientas de traducci칩n y localizaci칩n</h3>
<p>Para facilitar la tarea de los traductores con diferentes funcionalidades y gestionar el ciclo de vida de las cadenas se utiliza una herramienta u aplicaci칩n especializada en la tarea. El archivo fuente de cadenas originales generadas en el proceso de internacionalizaci칩n se importan en la herramienta de traducci칩n par que los traductores realicen la traducci칩n, una vez los traductores completan la traducci칩n la aplicaci칩n genera como resultado un archivo localizado que se importa en la aplicaci칩n para su uso en el lenguaje, pa칤s, regi칩n o cultura adecuado.</p>
<p>Las funcionalidades que ofrecen las herramientas de traducciones facilitan la tarea a los traductores y permiten gestionar las cadenas cuando se modifica alguna existente, se a침aden nuevas o se eliminan. Algunas funcionalidades que ofrecen son:</p>
<ul>
<li>Glosario: un glosario de t칠rminos para emplear siempre el mismo t칠rmino en todas las cadenas en el que algunas palabras hay varias posibilidades de traducci칩n y que la localizaci칩n sea consiste en toda la localizaci칩n.</li>
<li>Estado de la traducci칩n: una de las principales funcionalidades es permitir encontrar f치cilmente las cadenas que faltan por traducir y obtener m칠tricas y estad칤sticas de las cadenas totales, cuantas est치n traducidas en cada lenguaje, cuantas faltan por traducir o cuantas est치n traducidas pero marcadas a revisar. Las estad칤sticas permiten conocer el estado de la localizaci칩n en cada uno de los idiomas a localizar. En los flujos de trabajo m치s complejos se soporta un proceso de revisi칩n y aprobaci칩n de traducciones.</li>
<li>Historial: con un historial el traductor tiene cuales son las traducciones que han sido empleadas para una cadena para volver a una anterior o conocer cual era la traducci칩n en una determinada fecha.</li>
<li>Comentarios: los comentarios permiten a침adir notas explicativas.</li>
<li>Cadenas iguales y similares: en las cadenas originales la cadena puede estar repetida lo que evita repetir la misma traducci칩n o proporciona parte y aumenta la consistencia.</li>
<li>B칰squedas con filtros: otra funcionalidad es poder buscar cadenas por el texto en la cadena original, en la cadena traducida, por su estado o por filtros de fecha en la que se ha realizado la traducci칩n o 칰ltima modificaci칩n. Otra funcionalidad es buscar y reemplazar cuando se cambia un t칠rmino o para hacer una correcci칩n de forma masiva.</li>
<li>Formatos de archivos de cadenas originales: seg칰n el lenguaje de programaci칩n o tecnolog칤a se utilizan diferentes formatos de archivo para los recursos que contienen las cadenas originales como los recursos localizados. Las aplicaciones han de soportar m칰ltiples formatos de archivos de recursos, en Java por ejemplo se suelen utilizar los archivos <em>properties</em>, las aplicaciones de Android  e iOS tienen su propio formato.</li>
<li>Imagen de contexto: para que el traductor comprenda el contexto en el que se muestra la cadena se puede adjuntar una imagen.</li>
<li>Notificaciones: enviar notificaciones a los traductores cuando se a침adan nuevas cadenas o se modifiquen de forma que sean traducidas de manera m치s r치pida y automatizando la comunicaci칩n, o cuando se completa una traducci칩n.</li>
<li>Integraciones: las herramientas ofrecen una API para integrarlas en los procesos de desarrollo y automatizar las tareas de importaci칩n de nuevas cadenas o de exportaci칩n de las cadenas e incluso con los repositorios de c칩digo fuente de <a href="https://git-scm.com/">Git</a> como <a href="https://github.com/">GitHub</a> o <a href="https://about.gitlab.com/">GitLab</a>.</li>
<li>Autenticaci칩n: la herramienta ser치 utilizada tanto por desarrolladores como por m칰ltiples traductores, esto hace necesario que posea un sistema de autenticaci칩n y permisos.</li>
</ul>
<h4 id="alternativas-de-herramientas">Alternativas de herramientas</h4>
<p>Dos de las herramientas m치s conocidas con <a href="https://www.transifex.com/">Transifex</a> y <a href="https://crowdin.com/">Crowdin</a>, son herramientas comerciales ofrecidas como SaaS aunque para proyectos de software libre permiten su uso sin ning칰n coste. Otra alternativa a estas de software libre es <a href="https://weblate.org/es/">Weblate</a> que adem치s de ofrecerse como SaaS con un coste por el servicio permite autoalojarlo.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/transifex_huc0c275fdf01c78a514b45baff8805270_276922_2560x1440_fit_box_3.png" data-gallery="" title="Web de Transifex"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/transifex_huc0c275fdf01c78a514b45baff8805270_276922_300x200_fit_box_3.png" width="300" height="158" alt="Web de Transifex" title="Web de Transifex"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/crowdin_hu9daa5a129846979a2e6ce949452e2457_342699_2560x1440_fit_box_3.png" data-gallery="" title="Web de Crowdin"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/crowdin_hu9daa5a129846979a2e6ce949452e2457_342699_300x200_fit_box_3.png" width="300" height="158" alt="Web de Crowdin" title="Web de Crowdin"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate_hufdf0abc6e5f3578837117b921f2a5b5b_569278_2560x1440_fit_box_3.png" data-gallery="" title="Web de Weblate"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate_hufdf0abc6e5f3578837117b921f2a5b5b_569278_300x200_fit_box_3.png" width="300" height="158" alt="Web de Weblate" title="Web de Weblate"  class="lozad "></a></p>
<figcaption>Webs de Transifex, Crowdin y Weblate</figcaption>
</figure>
</div>
<h4 id="costes">Costes</h4>
<p>Los costes de las herramientas suelen varia en funci칩n del n칰mero de cadenas o palabras originales a traducir, algunas funcionalidades solo est치 disponibles en funci칩n del plan contratado y algunos tienen limitaciones en el n칰mero de proyectos. No tiene un coste insignificante que pueden partir de unos 100  al mes pero llegar a 600  o 1000  en proyectos de tama침o medio y grande.</p>
<p>Weblate permite autoalojarlo sin coste por el servicio salvo por el coste que tenga gestionar el servicio uno mismo. Las herramientas de traducciones son usadas de forma intensiva en el proceso inicial de traducci칩n, una vez las traducciones est치n completadas la tarea de traducci칩n es de mantenimiento con unas pocas cadenas a traducir o modificar cada cierto tiempo de forma espor치dica, est치r afrontando sus costes mensuales para esos momentos quiz치 no compensa o cuando se pretenden ahorrar costes o ser m치s eficiente en los mismos.</p>
<p>Dependiendo del caso Weblate es una opci칩n m치s econ칩mica que Transifex y Crowdin.</p>
<ul>
<li><a href="https://www.transifex.com/pricing/">Precios Transifex</a></li>
<li><a href="https://crowdin.com/pricing#annual">Precios Crowdin</a></li>
<li><a href="https://weblate.org/es/hosting/">Precios Weblate</a></li>
</ul>
<h3 id="la-herramienta-para-traducciones-weblate">La herramienta para traducciones Weblate</h3>
<p>Weblate es una de las herramientas disponibles para realizar traducciones de aplicaciones de software. Su caracter칤stica diferenciadora con respecto a Transifex y Crowdin es que es software libre, esto permite hospedarlo uno mismo y un coste m치s econ칩mico por la funcionalidad.</p>
<p>Posee las m칰ltiples funcionalidades que tienen estas herramientas de utilidad para los traductores y para gestionar las traducciones en la aplicaci칩n. Posee una API para integrar Weblate y automatizar los procesos de desarrollo y autenticaci칩n con cuentas OpenID/OAuth con los que gestionar de forma centraliza las m칰ltiples cuentas y accesos de los usuarios que usen la herramienta.</p>
<p>En la extensa y detallada <a href="https://docs.weblate.org/en/latest/">documentaci칩n de Weblate</a> se ofrece un manual de usuario y administraci칩n de la herramienta tanto para instalarla con <a href="https://www.docker.com/">Docker</a>, configurarla como para realizar copias de seguridad y actualizaciones a nuevas versiones.</p>
<h3 id="formatos-de-archivos-de-traducciones">Formatos de archivos de traducciones</h3>
<p>Weblate soporta numerosos <a href="https://docs.weblate.org/en/latest/formats.html">formatos de archivos</a>. Cada formato de archivo soporta diferentes caracter칤sticas, el formato de archivo a utilizar dependen del lenguaje de programaci칩n utilizado en la aplicaci칩n, librer칤as o <em>framework</em> de desarrollo. Algunos formatos de archivo soportan m칰ltiples idiomas en el mismo archivo de recurso, m칰ltiples formas normales, comentarios, contexto, ubicaci칩n dela cadena en el c칩digo fuente o indicadores para las cadenas como no traducida, traducida o por revisar.</p>
<p>El formato de archivo para los recursos de traducciones en Java son los archivos <em>properties</em>. Los archivos <em>properties</em> empleados en Java para los recursos de traducciones son un archivo de texto con una linea por cadena compuesta por la clave o identificador de la cadena y el texto de la cadena. Los archivos <em>properties</em> no soportan m칰ltiples formas plurales. Para implementar m칰ltiples formas plurales se ha de utilizar la clase <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/ChoiceFormat.html">ChoiceFormat</a>, las cadenas con m칰ltiples formas plurales necesitan un formato de cadena especial. Por otro lado las cadenas pueden tener ciertos datos o <em>placeholders</em> que son proporcionadas por la aplicaci칩n en el momento de ejecuci칩n al construir la cadena definitiva que ve el usuario, los datos son un nombre, n칰mero o un importe, la clase <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/text/MessageFormat.html">MessageFormat</a> permite realizar la inserci칩n de estas palabras en los <em>placeholders</em> de las cadenas.</p>
<p>Otros formatos de archivos de recursos son para las aplicaciones Android, iOS, PHP, i18next para JavaScript entre otros muchos.</p>
<h4 id="inicio-usando-docker">Inicio usando Docker</h4>
<p>Weblate proporciona un archivo de <a href="https://docs.docker.com/compose/">Docker Compose</a> con el que iniciar la herramienta f치cilmente. Weblate utiliza una base de datos <a href="https://www.postgresql.org/">PostgreSQL</a> y <a href="https://redis.io/">Redis</a> que en el archivo de Docker Compose se inician al mismo tiempo que el contenedor de Weblate. En el archivo de Docker Compose se indica en nombre de usuario y contrase침a entre otras muchas <a href="https://docs.weblate.org/en/latest/admin/install/docker.html">variables de entorno de configuraci칩n</a> con el que realizar la autenticaci칩n en la p치gina <em>http://localhost</em> de inicio de sesi칩n.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ git clone https://github.com/WeblateOrg/docker-compose.git weblate-docker&#10;</span></span><span class="line"><span class="cl">$ <span class="nb">cd</span> weblate-docker&#10;</span></span><span class="line"><span class="cl">$ docker-compose up</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>weblate-docker.sh</span>
    </div>
</div>
<p>Es necesario crear un archivo <em>docker-compose.override.yml</em>, dos de ellas se utilizan para el inicio de sesi칩n con el nombre de usuario administrador y su contrase침a.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">weblate</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">ports</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="m">80</span><span class="p">:</span><span class="m">8080</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">environment</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span class="nt">WEBLATE_SITE_DOMAIN</span><span class="p">:</span><span class="w"> </span><span class="l">weblate.127.0.0.1.xip.io</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span class="nt">WEBLATE_ADMIN_EMAIL</span><span class="p">:</span><span class="w"> </span><span class="l">weblate.admin@weblate.127.0.0.1.xip.io</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span class="nt">WEBLATE_ADMIN_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l">password</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&#10;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-compose.override.yml</span>
    </div>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-authentication_hu4be762018011bed221104a683fba417c_121655_2560x1440_fit_box_3.png" data-gallery="" title="Autenticaci칩n en Weblate"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-authentication_hu4be762018011bed221104a683fba417c_121655_300x200_fit_box_3.png" width="300" height="186" alt="Autenticaci칩n en Weblate" title="Autenticaci칩n en Weblate"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-start_huc39fa1b15cfd2d057e6b7f47c7d27771_62315_2560x1440_fit_box_3.png" data-gallery="" title="P치gina de inicio de Weblate"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-start_huc39fa1b15cfd2d057e6b7f47c7d27771_62315_300x200_fit_box_3.png" width="300" height="186" alt="P치gina de inicio de Weblate" title="P치gina de inicio de Weblate"  class="lozad "></a></p>
<figcaption>Autenticaci칩n en Weblate</figcaption>
</figure>
</div>
<p>Los diferentes recursos de una aplicaci칩n se agrupan en proyectos y componentes. El primer paso es crear un proyecto y los componentes como sean necesarios para realizar la traducci칩n de cada uno de los recursos a traducir. Los componentes son los recursos a traducir, es posible obtener el archivo de traducciones desde el repositorio de c칩digo fuente o crearlo desde un archivo. Al crear el componente desde un archivo hay que especificar los par치metros <em>Plantilla para traducciones nuevas</em>, <em>M치scara de archivos</em>, <em>Formato de archivo</em> y <em>Archivo de base monoling칲e</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-create-project_hu3136b7d4f86b9eb36e9d3c6fad23e05f_98486_2560x1440_fit_box_3.png" data-gallery="" title="Crear un proyecto en Weblate"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-create-project_hu3136b7d4f86b9eb36e9d3c6fad23e05f_98486_300x200_fit_box_3.png" width="292" height="200" alt="Crear un proyecto en Weblate" title="Crear un proyecto en Weblate"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-components_hue1ebb78b951c48e260dec85060d8e126_73062_2560x1440_fit_box_3.png" data-gallery="" title="Componentes en Weblate"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-components_hue1ebb78b951c48e260dec85060d8e126_73062_300x200_fit_box_3.png" width="292" height="200" alt="Componentes en Weblate" title="Componentes en Weblate"  class="lozad "></a></p>
<figcaption>Creaci칩n de un proyecto en Weblate</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-create-component-01_hua23196935a0036805aa6a0ee1135496e_131010_2560x1440_fit_box_3.png" data-gallery="" title="Crear un componente en Weblate"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-create-component-01_hua23196935a0036805aa6a0ee1135496e_131010_300x200_fit_box_3.png" width="292" height="200" alt="Crear un componente en Weblate" title="Crear un componente en Weblate"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-create-component-02_hufc9df35ecd08845b4f570eaebfeb8151_108388_2560x1440_fit_box_3.png" data-gallery="" title="Crear un componente en Weblate"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-create-component-02_hufc9df35ecd08845b4f570eaebfeb8151_108388_300x200_fit_box_3.png" width="292" height="200" alt="Crear un componente en Weblate" title="Crear un componente en Weblate"  class="lozad "></a></p>
<figcaption>Creaci칩n de un componente en Weblate</figcaption>
</figure>
</div>
<p>Este es un ejemplo de archivo original <em>properties</em> de Java con varias cadenas a traducir.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">key1=Hello World&#10;</span></span><span class="line"><span class="cl">key2=Hello World&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>web.properties</span>
    </div>
</div>
<p>El siguiente paso es definir los idiomas deseados en los que realizar la traducci칩n del componente con el bot칩n <em>Comenzar una traducci칩n nueva</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-component-01_hu9772a45d7ed417061e1b7d692f2e3ac3_80053_2560x1440_fit_box_3.png" data-gallery="" title="Componente en Weblate"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-component-01_hu9772a45d7ed417061e1b7d692f2e3ac3_80053_300x200_fit_box_3.png" width="292" height="200" alt="Componente en Weblate" title="Componente en Weblate"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-component-02_hua7147cfc8426c4e80237fdb6d6fbabe2_82029_2560x1440_fit_box_3.png" data-gallery="" title="Componente en Weblate"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-component-02_hua7147cfc8426c4e80237fdb6d6fbabe2_82029_300x200_fit_box_3.png" width="292" height="200" alt="Componente en Weblate" title="Componente en Weblate"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-start-translation_hu3554153bd5b74437c67986df42d40ea8_102543_2560x1440_fit_box_3.png" data-gallery="" title="Iniciar una traducci칩n en Weblate"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-start-translation_hu3554153bd5b74437c67986df42d40ea8_102543_300x200_fit_box_3.png" width="292" height="200" alt="Iniciar una traducci칩n en Weblate" title="Iniciar una traducci칩n en Weblate"  class="lozad "></a></p>
<figcaption>Componente e iniciar una traducci칩n en Weblate</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-component-03_hud853787990e00023427caa78440cc02a_92077_2560x1440_fit_box_3.png" data-gallery="" title="Componente en Weblate"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-component-03_hud853787990e00023427caa78440cc02a_92077_300x200_fit_box_3.png" width="292" height="200" alt="Componente en Weblate" title="Componente en Weblate"  class="lozad "></a></p>
<figcaption>Componente en Weblate</figcaption>
</figure>
</div>
<p>La herramienta de traducci칩n muestra la cadena a traducir del archivo fuente de traducciones, lac clave de la cadena y m칰ltiples herramientas para asistir en la traducci칩n. Algunas de estas herramientas de asistencia en la traducci칩n son un glosario de t칠rminos para que la traducci칩n sea consistente, sugerencias a partir de otras cadenas iguales o similares ya traducidas, comentarios, un historial o como se ha traducido en otros idiomas adem치s de permitir adjuntar una captura de pantalla con el contexto en el que se muestra la cadena.</p>
<p>Se ofrecen tambi칠n un filtro para buscar cadenas por su estado o por coincidencias en la traducci칩n de la cadena origen o en las cadenas traducidas de los diferentes idiomas o seg칰n la fecha de traducci칩n.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-translation_hu75bbb25127ce4a9ed2e65655e7ff0600_177014_2560x1440_fit_box_3.png" data-gallery="" title="Traducci칩n en Weblate"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-translation_hu75bbb25127ce4a9ed2e65655e7ff0600_177014_300x200_fit_box_3.png" width="292" height="200" alt="Traducci칩n en Weblate" title="Traducci칩n en Weblate"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-search_hua0d0c87edda07561a11e92e98dfdab26_169649_2560x1440_fit_box_3.png" data-gallery="" title="B칰squeda en Weblate"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-search_hua0d0c87edda07561a11e92e98dfdab26_169649_300x200_fit_box_3.png" width="292" height="200" alt="B칰squeda en Weblate" title="B칰squeda en Weblate"  class="lozad "></a></p>
<figcaption>Traducci칩n en Weblate</figcaption>
</figure>
</div>
<p>Una vez las cadenas se han traducido y localizado es posible descargar los archivos de recursos localizados a importar en el c칩digo fuente de la aplicaci칩n, tambi칠n es posible hacerlo de forma manual o de forma automatizada. Los archivos <em>properties</em> siguen una convenci칩n en los nombres de archivos de recursos compuesta por el nombre del recurso, idioma, opcionalmente pa칤s y variante separados por una barra baja con el siguiente formato <em>resource_es_ES.properties</em>. La descarga manual se realiza desde <em>Archivos &gt; Descargar archivos de traducci칩n en archivador ZIP</em>.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">key1=Hola mundo&#10;</span></span><span class="line"><span class="cl">key2=Hola mundo&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>web_es.properties</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">key1=Hola mundo&#10;</span></span><span class="line"><span class="cl">key2=Hola mundo&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>web_es-ES.properties</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">key1=Hola mundo&#10;</span></span><span class="line"><span class="cl">key2=Hola mundo&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>web_es-MX.properties</span>
    </div>
</div>
<p>La operaci칩n final para completar el flujo de trabajo de traducci칩n es actualizar las cadenas a traducir cuando por modificaciones en la aplicaci칩n haya nuevas cadenas por traducir, se hayan modificado existentes o se haya eliminado alguna. La carga del nuevo archivo fuente de traducciones se realiza desde <em>Archivos &gt; Cargar traducci칩n</em> en el idioma base de la traducci칩n, para el caso de que el archivo fuente tenga nuevas cadenas a traducir hay que seleccionar la opci칩n <em>Reemplazar traducci칩n existente</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-update-translations_hud2f558406dce55d8ce30d570478b02d3_144943_2560x1440_fit_box_3.png" data-gallery="" title="Actualizar traducciones en Weblate"><img src="https://picodotdev.github.io/blog-bitix/2020/12/la-herramienta-weblate-para-traducir-una-aplicacion-a-multiples-idiomas/images/weblate-update-translations_hud2f558406dce55d8ce30d570478b02d3_144943_300x200_fit_box_3.png" width="292" height="200" alt="Actualizar traducciones en Weblate" title="Actualizar traducciones en Weblate"  class="lozad "></a></p>
<figcaption>Actualizar traducciones en Weblate</figcaption>
</figure>
</div>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Localization/Localization_and_Plurals">Localization and Plurals</a></li>
<li><a href="https://unicode-org.github.io/cldr-staging/charts/37/supplemental/language_plural_rules.html">Language Plural Rules</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="planeta-codigo"/>
            
                <category term="programacion"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/12/tipos-de-arquitecturas-de-aplicaciones-de-software/</id>
        <title>Tipos de arquitecturas de aplicaciones de software</title>
        <updated>2020-12-06T13:00:00+01:00</updated>
        <published>2020-12-06T00:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/12/tipos-de-arquitecturas-de-aplicaciones-de-software/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Con el paso de los a침os las arquitectura recomendadas han cambiado. En el caso de las aplicaciones web pasando por la arquitectura <em>spaghetti</em>, a la por capas y finalmente con una mezcla de hexagonal, <em>domain-driven-design</em> o DDD y dependiendo del caso siendo RESTful, utilizando CQRS, est치ndo dirigida por eventos o <em>event-driven</em> y en los casos en los que su aplicaci칩n es 칰til usando <em>event sourcing</em>.</strong></p>]]>
        <![CDATA[<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del art칤culo</h2><toc></toc></div>
<h3 id="qu칠-es-arquitectura-en-una-aplicaci칩n-de-software">쯈u칠 es arquitectura en una aplicaci칩n de software?</h3>
<p>La arquitectura en una aplicaci칩n de software son los aspectos comunes a las diferentes implementaciones concretas. La arquitectura de software define la estructura y comportamiento de los elementos relevantes, balanceando las necesidades de sus interesados, aplica decisiones de forma racional, definiendo estilos de arquitectura aplicables a m칰ltiples aplicaciones con necesidades similares, est치 influenciada por su entorno de aplicaci칩n, influencia la estructura de los equipos, est치 presente en cada sistema y tiene un 치mbito particular.</p>
<ul>
<li><a href="https://www.ibm.com/developerworks/rational/library/feb06/eeles/index.html">What is a software architecture?</a></li>
</ul>
<p>Seg칰n alguna de la organizaci칩n de est치ndar IEEE la definici칩n de arquitectura de software es:</p>
<blockquote>
<p>Architecture is the fundamental <strong>organization</strong> of a <strong>system</strong> embodied in its <strong>components</strong>, their <strong>relationships</strong> to each other, and to the <strong>environment</strong>, and the principles guiding its design and evolution.</p>
</blockquote>
<p>El est치ndar define los siguientes t칠rminos de la definici칩n:</p>
<blockquote>
<p>A <strong>system</strong> is a collection of components organized to accomplish a specific function or set of functions. The term system encompasses individual applications, systems in the traditional sense, subsystems, systems of systems, product lines, product families, whole enterprises, and other aggregations of interest. A system exists to fulfill one or more <strong>missions</strong> in its environment.</p>
</blockquote>
<blockquote>
<p>The <strong>environment</strong>, or context, determines the setting and circumstances of developmental, operational, political, and other influences upon that system.</p>
</blockquote>
<blockquote>
<p>A <strong>mission</strong> is a use or operation for which a system is intended by one or more <strong>stakeholders</strong> to meet some set of objectives.</p>
</blockquote>
<blockquote>
<p>A <strong>stakeholder</strong> is an individual, team, or organization (or classes thereof) with interests in, or concerns relative to, a system.</p>
</blockquote>
<h3 id="tipos-de-arquitecturas">Tipos de arquitecturas</h3>
<h4 id="arquitectura-spaghetti">Arquitectura Spaghetti</h4>
<p>En los inicios de las aplicaciones web con la aparici칩n de las p치ginas programadas en en lado del servidor con <em>servlets</em> y JSP en Java, ASP de <a href="https://www.microsoft.com/">Microsoft</a> y <a href="https://secure.php.net/">PHP</a> la arquitectura de las mismas se caracterizaba por que no hab칤a arquitectura. En el mismo <em>servlet</em> o JSP, ASP o PHP el mismo c칩digo ten칤a diferentes responsabilidades sin ninguna separaci칩n entre ellas.</p>
<p>En el mismo archivo se codificaba desde el acceso a la base de datos como a la generaci칩n del resultado, la l칩gica para obtener los par치metros de una petici칩n y la l칩gica de negocio.</p>
<p>Esta no arquitectura de las aplicaciones <em>spaghetti</em> se denomina as칤 porque  mezcla todo tipo de funcionalidades que genera dificultades en la programaci칩n, legibilidad y mantenimiento cuando las aplicaciones empiezan a tener un tama침o mediano.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span><span class="lnt">43&#10;</span><span class="lnt">44&#10;</span><span class="lnt">45&#10;</span><span class="lnt">46&#10;</span><span class="lnt">47&#10;</span><span class="lnt">48&#10;</span><span class="lnt">49&#10;</span><span class="lnt">50&#10;</span><span class="lnt">51&#10;</span><span class="lnt">52&#10;</span><span class="lnt">53&#10;</span><span class="lnt">54&#10;</span><span class="lnt">55&#10;</span><span class="lnt">56&#10;</span><span class="lnt">57&#10;</span><span class="lnt">58&#10;</span><span class="lnt">59&#10;</span><span class="lnt">60&#10;</span><span class="lnt">61&#10;</span><span class="lnt">62&#10;</span><span class="lnt">63&#10;</span><span class="lnt">64&#10;</span><span class="lnt">65&#10;</span><span class="lnt">66&#10;</span><span class="lnt">67&#10;</span><span class="lnt">68&#10;</span><span class="lnt">69&#10;</span><span class="lnt">70&#10;</span><span class="lnt">71&#10;</span><span class="lnt">72&#10;</span><span class="lnt">73&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Book Query<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>Another E-Bookstore<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Choose Author(s):<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">&#34;get&#34;</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;author&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;Tan Ah Teck&#34;</span><span class="p">&gt;</span>Tan&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;author&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;Mohd Ali&#34;</span><span class="p">&gt;</span>Ali&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;author&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;Kumar&#34;</span><span class="p">&gt;</span>Kumar&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;Query&#34;</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl"> &#10;</span></span><span class="line"><span class="cl">  <span class="err">&lt;</span>%&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;String[] authors = request.getParameterValues(&#34;author&#34;);&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;if (authors != null) {&#10;</span></span><span class="line"><span class="cl">  %&gt;&#10;</span></span><span class="line"><span class="cl">  <span class="err">&lt;</span>%@ page import = &#34;java.sql.*&#34; %&gt;&#10;</span></span><span class="line"><span class="cl">  <span class="err">&lt;</span>%&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  Connection conn = DriverManager.getConnection(&#34;jdbc:mysql://localhost:8888/ebookshop&#34;, &#34;myuser&#34;, &#34;xxxx&#34;);&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  Statement stmt = conn.createStatement();&#10;</span></span><span class="line"><span class="cl"> &#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  String sqlStr = &#34;SELECT * FROM books WHERE author IN (&#34;;&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  sqlStr += &#34;&#39;&#34; + authors[0] + &#34;&#39;&#34;;  // First author&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  for (int i = 1; i <span class="p">&lt;</span> <span class="nt">authors.length</span><span class="err">;</span> <span class="err">++</span><span class="na">i</span><span class="err">)</span> <span class="err">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="na">sqlStr</span> <span class="err">+=</span> <span class="err">&#34;,</span> <span class="err">&#39;&#34;</span> <span class="err">+</span> <span class="na">authors</span><span class="err">[</span><span class="na">i</span><span class="err">]</span> <span class="err">+</span> <span class="err">&#34;&#39;&#34;;</span>  <span class="err">//</span> <span class="na">Subsequent</span> <span class="na">authors</span> <span class="na">need</span> <span class="na">a</span> <span class="na">leading</span> <span class="na">commas</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="err">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="na">sqlStr</span> <span class="err">+=</span> <span class="err">&#34;)</span> <span class="na">AND</span> <span class="na">qty</span> <span class="p">&gt;</span> 0 ORDER BY author ASC, title ASC&#34;;&#10;</span></span><span class="line"><span class="cl"> &#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  // for debugging&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  System.out.println(&#34;Query statement is &#34; + sqlStr);&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  ResultSet rset = stmt.executeQuery(sqlStr);&#10;</span></span><span class="line"><span class="cl">  %&gt;&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="p">&lt;</span><span class="nt">hr</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="p">&lt;</span><span class="nt">form</span> <span class="na">method</span><span class="o">=</span><span class="s">&#34;get&#34;</span> <span class="na">action</span><span class="o">=</span><span class="s">&#34;order.jsp&#34;</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">table</span> <span class="na">border</span><span class="o">=</span><span class="s">1</span> <span class="na">cellpadding</span><span class="o">=</span><span class="s">5</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Order<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Author<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Title<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Price<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">th</span><span class="p">&gt;</span>Qty<span class="p">&lt;/</span><span class="nt">th</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">  <span class="err">&lt;</span>%&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  while (rset.next()) {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int id = rset.getInt(&#34;id&#34;);&#10;</span></span><span class="line"><span class="cl">  %&gt;&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="p">&lt;</span><span class="nt">tr</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;checkbox&#34;</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;id&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;&lt;%= id %&gt;&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span><span class="err">&lt;</span>%= rset.getString(&#34;author&#34;) %&gt;<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span><span class="err">&lt;</span>%= rset.getString(&#34;title&#34;) %&gt;<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span>$<span class="err">&lt;</span>%= rset.getInt(&#34;price&#34;) %&gt;<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">td</span><span class="p">&gt;</span><span class="err">&lt;</span>%= rset.getInt(&#34;qty&#34;) %&gt;<span class="p">&lt;/</span><span class="nt">td</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="p">&lt;/</span><span class="nt">tr</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">  <span class="err">&lt;</span>%&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">  %&gt;&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;/</span><span class="nt">table</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">br</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;submit&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;Order&#34;</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;reset&#34;</span> <span class="na">value</span><span class="o">=</span><span class="s">&#34;Clear&#34;</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;&lt;%= request.getRequestURI() %&gt;&#34;</span><span class="p">&gt;&lt;</span><span class="nt">h3</span><span class="p">&gt;</span>Back<span class="p">&lt;/</span><span class="nt">h3</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl">  <span class="err">&lt;</span>%&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  rset.close();&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  stmt.close();&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  conn.close();&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">  %&gt;&#10;</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>&#10;</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>spaghetti.jsp</span>
    </div>
</div>
<h4 id="arquitectura-por-capas">Arquitectura por capas</h4>
<p>Para suplir las carencias de la arquitectura <em>spaghetti</em> surge la arquitectura por capas. En la arquitectura por capas cada capa tiene una responsabilidad definida, una capa se encarga de la visualizaci칩n de los datos y la interacci칩n con el usuario, otra capa se encarga de la l칩gica de negocio y otra capa del acceso a la base de datos. Esta distribuci칩n de responsabilidades pone cierto orden a la organizaci칩n del c칩digo y estructura de las aplicaciones. Las capas superiores dependen de las capas inferiores, ya sea en un modelo estricto donde la superior depende 칰nicamente de la inmediatamente inferior o en un modelo m치s permisivo donde una capa superior puede depender de cualquiera de las inferiores.</p>
<p>La aparici칩n de los <em>frameworks</em> de desarrollo facilitan la creaci칩n de los componentes que constituyen la aplicaci칩n utilizando el patr칩n modelo-vista-controlador o MVC basados en acciones como <a href="https://struts.apache.org/">Struts</a>, de componentes como JSF y <a href="https://tapestry.apache.org/">Apache Tapestry</a> u otros similares en otros lenguajes.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/tipos-de-arquitecturas-de-aplicaciones-de-software/images/layer-architecture.svg" data-gallery="" title="Arquitectura por capas"><img src="https://picodotdev.github.io/blog-bitix/2020/12/tipos-de-arquitecturas-de-aplicaciones-de-software/images/layer-architecture.svg" width="300" height="200" alt="Arquitectura por capas" title="Arquitectura por capas"  class="lozad "></a></p>
<figcaption>Arquitectura por capas</figcaption>
</figure>
</div>
<h4 id="arquitectura-hexagonal">Arquitectura hexagonal</h4>
<p>En la arquitectura hexagonal o tambi칠n conocida como puertos-adaptadores a칤sla las entradas y salidas de la aplicaci칩n de la l칩gica interna de la aplicaci칩n. Este aislamiento de las partes exteriores hace que la aplicaci칩n no requiera pr치cticamente ning칰n cambio que est칠 influenciado por cambios externos ya sea una nueva base de datos para persistir los datos o un nuevo tipo de cliente como un dispositivo m칩vil.</p>
<p>Cada entrada ya sea desde una petici칩n REST o desde la linea de comandos o salida ya sea a una base de datos o un sistema de mensajer칤a es un tipo diferente de puerto para su interacci칩n. Una gran ventaja de la arquitectura hexagonal es que los puertos y adaptadores son f치cilmente desarrollables para un entorno de pruebas hasta tener los definitivos, la aplicaci칩n se puede desarrollar y probar antes de que los clientes y los sistemas de persistencia existan.</p>
<p>Una de las tecnolog칤as que habilitan la arquitectura hexagonal es la inversi칩n de dependencias o IoC mediante la cual se consigue que al contrario que en la arquitectura por capas donde una capa superior depende de la interior la capa inferior dependa de la superior. Si en una aplicaci칩n se est치 utilizando inversi칩n de dependencias es probable que se est칠 utilizando una arquitectura hexagonal m치s que una por capas.</p>
<p>Si en la arquitectura por capas la capa de l칩gica de negocio depende de la capa de acceso a base de datos, en la arquitectura hexagonal es la capa de acceso a base de datos la que depende de la capa de l칩gica de negocio. Este cambio de dependencias es lo que le da nombre a la inversi칩n de dependencias. La inversi칩n de dependencias se consigue creando en la capa de l칩gica de negocio una interfaz que es la que implementa la capa de acceso a datos.</p>
<p>En la <em>Figura 1</em> el paquete A depende del paquete B para invertir la dependencia se crea una interfaz de la que depende el paquete A un칤camente depende, en la <em>Figura 2</em> es el paquete B el que depende de esa interfaz al implementarla.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/tipos-de-arquitecturas-de-aplicaciones-de-software/images/hexagonal-architecture_hu79c70f94820287721d8bd0d7de5d44f7_156177_2560x1440_fit_box_3.png" data-gallery="" title="Arquitectura hexagonal"><img src="https://picodotdev.github.io/blog-bitix/2020/12/tipos-de-arquitecturas-de-aplicaciones-de-software/images/hexagonal-architecture_hu79c70f94820287721d8bd0d7de5d44f7_156177_300x200_fit_box_3.png" width="267" height="200" alt="Arquitectura hexagonal" title="Arquitectura hexagonal"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/tipos-de-arquitecturas-de-aplicaciones-de-software/images/dependency-inversion_hu07b11f6f4f86183ad4c4577f8db57c54_17298_2560x1440_fit_box_3.png" data-gallery="" title="Inversi칩n de dependencias"><img src="https://picodotdev.github.io/blog-bitix/2020/12/tipos-de-arquitecturas-de-aplicaciones-de-software/images/dependency-inversion_hu07b11f6f4f86183ad4c4577f8db57c54_17298_300x200_fit_box_3.png" width="300" height="118" alt="Inversi칩n de dependencias" title="Inversi칩n de dependencias"  class="lozad "></a></p>
<figcaption>Arquitectura hexagonal e inversi칩n de dependencias <br>Fuente: herbertograca.com</figcaption>
</figure>
</div>
<h3 id="metodolog칤as-relacionadas">Metodolog칤as relacionadas</h3>
<h4 id="_domain-driven-design_"><em>Domain Driven Design</em></h4>
<p>La metodolog칤a <em>domain-driven-design</em> o DDD promueve que la aplicaci칩n ha de estar desarrollada bas치ndose en los aspectos del negocio y del dominio de la aplicaci칩n, esto afecta tanto al lenguaje compartido denominado lenguaje ubicuo tanto en la aplicaci칩n como por todos <em>stakeholders</em> de cada contexto de la aplicaci칩n, tambi칠n afecta a como se modulariza en subdominios la aplicaci칩n con las diferentes funcionalidades. El dise침o estrat칠gico define los aspectos de an치lisis de la aplicaci칩n el dise침o estrat칠gico los de implementaci칩n con los agregados, entidades, <em>value objects</em>, repositorios o eventos de dominio.</p>
<p>La arquitectura hexagonal se complementa perfectamente con la metodolog칤a y principios de DDD ya que ambos casos tienen inter칠s en aislar la l칩gica de negocio de las partes exteriores de la aplicaci칩n de modo que un cambio en el exterior no suponga cambios importantes en la l칩gica de negocio.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2021/02/introduccion-a-ddd-y-arquitectura-hexagonal-con-un-ejemplo-de-aplicacion-en-java/">Introducci칩n a DDD y arquitectura hexagonal con un ejemplo de aplicaci칩n en Java</a></li>
</ul>
<h4 id="apis-rest-o-graphql">APIs, REST o GraphQL</h4>
<p>Con la aparici칩n de m칰ltiples dispositivos ya sean navegadores, tel칠fonos inteligentes, aplicaciones nativas de tel칠fonos inteligentes, tabletas o incluso otras aplicaciones, para dar soporte a todos estos clientes las aplicaciones se desarrollan desde el primer momento con el objetivo de ofrecer una API que todos los dispositivos comparten y posteriormente cada dispositivo adapta su interfaz gr치fica a sus necesidades.</p>
<p>Muchas aplicaciones utilizan una API denominada REST basada en los principios de la web y la sem치ntica del protocolo HTTP y como formato de intercambio de datos se suele utilizar JSON. Las aplicaciones basadas en REST que siguen los principios de HATEOAS permiten a los clientes obtener en los los datos devueltos las ubicaciones de los recursos relacionados.</p>
<p>Otra forma de implementaci칩n de un API es mediante <a href="https://graphql.org/">GraphQL</a> que a diferencia de REST no se basa en los principios del protocolo HTTP y la sem치ntica de la web aunque lo utiliza. A diferencia de REST que siempre se devuelven los mismos datos GrapqhQL permite realizar consultas indicando 칰nicamente los datos deseados como respuesta.</p>
<h4 id="cqrs">CQRS</h4>
<p>La metodolog칤a CQRS separa las operaciones de consulta que solicitan datos de las operaciones que modifican datos o comandos incluso utilizando diferentes bases de datos. El modelo necesario para la consulta puede ser distinto del necesario para la modificaci칩n y variar en diferentes casos de uso, por eso la necesidad o ventaja de separar el modelo de consulta del modelo de modificaci칩n. El modelo de consulta puede estar desnormalizado para ser m치s sencillo o eficiente a las necesidades de consulta que utilizando un 칰nico modelo para ambas operaciones.</p>
<p>El modelo de consulta se actualiza de forma as칤ncrona con el modelo de modificaci칩n utilizando consistencia eventual. Para manejar esta consistencia eventual en la interfaz del usuario hay varias opciones, una de ellas mostrar los datos en la interfaz como si se hubieran modificado inmediatamente a칰n est치ndo pendientes de modificarse. Otra posibilidad es mostrar la fecha y hora de la 칰ltima actualizaci칩n de los datos o simplemente indicar al usuario que su petici칩n ha sido aceptada y su procesamiento requiere algo de tiempo en procesarse.</p>
<h4 id="_event-driven_"><em>Event-Driven</em></h4>
<p>En las aplicaciones dirigidas por eventos o <em>event-driven</em> las aplicaciones reaccionan a los eventos que se producen en el sistema. El procesamiento de un evento devuelve una respuesta o genera nuevos eventos en el sistema.</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Event-driven_architecture">Event-driven architecture</a></li>
</ul>
<h4 id="_event-sourcing_"><em>Event Sourcing</em></h4>
<p>En vez de realizar modificaciones sobre los datos existentes simplemente se a침aden nuevos eventos en el sistema, el estado actual del sistema se obtiene al procesar todos los eventos.</p>
<ul>
<li><a href="https://martinfowler.com/eaaDev/EventSourcing.html">Event Sourcing</a></li>
</ul>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://herbertograca.com/2017/11/16/explicit-architecture-01-ddd-hexagonal-onion-clean-cqrs-how-i-put-it-all-together/">DDD, Hexagonal, Onion, Clean, CQRS, &hellip; How I put it all together</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="programacion"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/</id>
        <title>Gu칤a b치sica sobre teclados mec치nicos para ordenador</title>
        <updated>2020-12-04T18:00:00+01:00</updated>
        <published>2020-12-04T18:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Los teclados mec치nicos son un producto de mayor calidad que los teclados de membrana m치s baratos. Los teclados mec치nicos son apreciados por sus usuarios por la diferencia de tacto en la pulsaci칩n de las teclas, durabilidad, personalizaci칩n y formatos de tama침os. Los teclados mec치nicos son m치s caros pero para los usuarios que hacen un uso intensivo de ellos durante muchas horas son una mejora significativa en la escritura y pulsaci칩n de teclas.</strong></p>]]>
        <![CDATA[<p>Los teclados m치s comunes por ser m치s baratos son de membrana, en estos teclados hay una membrana que al presionarla cierra el circuito electr칩nico que registra la pulsaci칩n de la tecla. Al presionar la tecla la membrana ha de presionar correctamente para registrar la escritura del caracter pudiendo ocurrir que se pulsa una tecla pero no se registra. Otra desventaja es que las teclas se suelen disponer en serie lo que limita el n칰mero de teclas que se pueden pulsar simult치neamente sin que el teclado deje de responder a las pulsaciones. Otra desventaja es su tacto, al pulsar realizar la pulsaci칩n se utiliza la membrana como medio para ofrecer resistencia al pulsar la tecla como para hacerla subir una vez se ha dejado de pulsar.</p>
<p>Los teclados mec치nicos son una alternativa a los teclados de membrana, aunque tienen un precio mayor que los de membrana son apreciados por los usuarios que utilizan el teclado y el ordenador de forma intensiva por su calidad, precisi칩n, sonido, respuesta t치ctil, personalizaci칩n y durabilidad.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del art칤culo</h2><toc></toc></div>
<h3 id="caracter칤sticas-de-los-teclados-mec치nicos">Caracter칤sticas de los teclados mec치nicos</h3>
<p>En los teclados mec치nicos cada tecla tiene su propio interruptor o <em>switch</em> lo que hace las pulsaciones de teclas m치s precisas, tambi칠n cada tecla tiene su propio mecanismo para hacer subir la tecla una vez se ha dejado de pulsar. Al tener cada tecla su propio interruptor el n칰mero de teclas que se puede pulsar simult치neamente es mayor sin que el teclado deje de registrar las teclas.</p>
<p>Los teclados mec치nicos se ofrecen con diferentes tipos de interruptores seg칰n las preferencias del usuario, ya sea con <em>switches</em> que ofrecen una respuesta sonora y t치ctil al pulsar la tecla, s칩lo una respuesta t치ctil al pulsar la tecla o una respuesta lineal. Los materiales de las teclas de los teclados mec치nicos son de mayor calidad que los que se encuentran en los teclados de membrana ofreciendo mayor duraci칩n al desgaste.</p>
<p>Los teclados mec치nicos son sensiblemente m치s caros que los de membrana, a칰n as칤 son apreciados por los usuarios m치s exigentes que hacen un uso intensivo del ordenador y del teclado. Al igual que en los de membrana hay teclados mec치nicos retroiluminados con colores RGB y en algunos casos el cable es desacoplable del teclado. Otra ventaja de los teclados mec치nicos es que las telas o <em>keycaps</em> son desmontables del <em>switch</em> lo que facilita la limpieza profunda del teclado, con el tiempo se suele acumular restos de polvo y suciedad.</p>
<p>Tambi칠n hay teclados mec치nicos en diferentes formatos ya sea completos con teclado num칠rico, sin teclado num칠rico y a칰n m치s compactos con algunas teclas menos.</p>
<h3 id="los-_switches_">Los <em>switches</em></h3>
<p>En los teclados mec치nicos se emplean diferentes tipos de interruptores o <em>switches</em>, los <em>switches</em> son el mecanismo mec치nico y electr칩nico que registra las pulsaciones de las teclas. Para diferenciar los tipos de interruptores tiene asignado un c칩digo de color, los tres grandes tipos de <em>switches</em> son en funci칩n de la respuesta t치ctil que usan <em>clicky</em>, t치ctil o lineal, dentro de cada tipos algunos <em>switches</em> se diferencian en la presi칩n que hay que ejercer para presionarlos.</p>
<p>El que <em>switches</em> utilizar depende del usuario y sus preferencias. Algunas personas <em>gamers</em> que utilizan teclado optan por los lineales o los que tiene una respuesta t치ctil, los que mayormente utilizan el teclado para escribir suelen optar por los que tiene una respuesta t치ctil o <em>clicky</em> si les gusta el sonido y trabajan en un entorno aislado que no moleste a otras personas.</p>
<ul>
<li><a href="https://www.cherrymx.de/en/cherry-mx/mx-original/mx-brown.html"><em>Swtiches</em> Cherry MX mec치nicos</a></li>
<li><a href="https://www.gateron.co/products/gateron-switch-set"><em>Switches</em> Gateron mec치nicos</a></li>
<li><a href="https://www.gateron.co/products/gateron-optical-switch?variant=39534911684815"><em>Switches</em> Gateron 칩pticos</a></li>
</ul>
<p>En la siguiente tabla se comparan los diferentes tipos de <em>switches</em> seg칰n la fuerza que hay que emplear para activarlos, el recorrido hasta el punto de activaci칩n en el que se registra la pulsaci칩n de la tecla y el recorrido total.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switches-cherrymx_hu35c1e7432e882114e2b4f122086aaa9f_86219_2560x1440_fit_q90_box.jpg" data-gallery="" title="Switches Cherry MX"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switches-cherrymx_hu35c1e7432e882114e2b4f122086aaa9f_86219_300x200_fit_q90_box.jpg" width="200" height="200" alt="Switches Cherry MX" title="Switches Cherry MX"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switches-cherrymx-comparation-table_hu9f8d711bf3e038b4bdc88f2a3852fb11_138875_2560x1440_fit_box_3.png" data-gallery="" title="Tabla comparaci칩n switches Cherry MX"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switches-cherrymx-comparation-table_hu9f8d711bf3e038b4bdc88f2a3852fb11_138875_300x200_fit_box_3.png" width="267" height="200" alt="Tabla comparaci칩n switches Cherry MX" title="Tabla comparaci칩n switches Cherry MX"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switches-gateron-comparation-table_hu69d9c80d9c06d726cdf3f808b4d9f483_212477_2560x1440_fit_box_3.png" data-gallery="" title="Tabla comparaci칩n switches Gateron"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switches-gateron-comparation-table_hu69d9c80d9c06d726cdf3f808b4d9f483_212477_300x200_fit_box_3.png" width="300" height="170" alt="Tabla comparaci칩n switches Gateron" title="Tabla comparaci칩n switches Gateron"  class="lozad "></a></p>
<figcaption>Switches Cherry MX y tablas de comparaci칩n Cherry MX y Gateron</figcaption>
</figure>
</div>
<h4 id="_clicky_"><em>Clicky</em></h4>
<p>Los <em>switches</em> sonoros o <em>clicky</em> emiten un sonido al ser pulsados adem치s de ofrecer una respuesta t치ctil que mejora su precisi칩n y saber cuando se ha pulsado la tecla por el sonido. Son un tanto ruidosos pero algunos usuarios aprecian su sonido como respuesta cuando una tecla se pulsa.</p>
<p>Los c칩digos de colores asignados para estos <em>switches clicky</em> son el azul o <em>blue</em> y verde o <em>green</em>, los verde requieren algo m치s de fuerza para ser pulsados.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-blue_hu6f929c6090a0ca4c158b9865c96c74e9_35041_2560x1440_fit_q90_box.jpg" data-gallery="" title="Switches Cherry MX Clicky"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-blue_hu6f929c6090a0ca4c158b9865c96c74e9_35041_300x200_fit_q90_box.jpg" width="200" height="200" alt="Switches Cherry MX Clicky" title="Switches Cherry MX Clicky"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-green_hu7c02c5a48449c5e68169567e19399857_36823_2560x1440_fit_q90_box.jpg" data-gallery="" title="Switches Cherry MX Clicky"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-green_hu7c02c5a48449c5e68169567e19399857_36823_300x200_fit_q90_box.jpg" width="200" height="200" alt="Switches Cherry MX Clicky" title="Switches Cherry MX Clicky"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-blue_hu8981dabc7435c0e2727bb2b530786f38_107528_2560x1440_fit_box_1.gif" data-gallery="" title="Switch Cherry MX Clicky"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-blue_hu8981dabc7435c0e2727bb2b530786f38_107528_300x200_fit_box_1.gif" width="200" height="200" alt="Switch Cherry MX Clicky" title="Switch Cherry MX Clicky"  class="lozad "></a></p>
<figcaption>Switches Cherry MX Clicky</figcaption>
</figure>
</div>
<h4 id="t치ctiles">T치ctiles</h4>
<p>Los <em>switches</em> con respuesta t치ctil ofrecen una resistencia al ser pulsados una vez superado un nivel de presi칩n se disparan y se registra la pulsaci칩n. Son como los <em>switches clicky</em> pero sin la respuesta sonora que los hace algo menos ruidosos.</p>
<p>Los c칩digos de colores asignados para estos <em>switches</em> con respuesta t치ctil son el marr칩n o <em>brown</em>, <em>clear</em> y gris o <em>gray</em>, de menor a mayor presi칩n que hay que ejercer.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-brown_hud30c9928d7bd9c8be2521673f99f3561_33537_2560x1440_fit_q90_box.jpg" data-gallery="" title="Switches Cherry MX T치ctil"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-brown_hud30c9928d7bd9c8be2521673f99f3561_33537_300x200_fit_q90_box.jpg" width="200" height="200" alt="Switches Cherry MX T치ctil" title="Switches Cherry MX T치ctil"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-gray_hu1024f134c62626fb0b08012df6245127_35192_2560x1440_fit_q90_box.jpg" data-gallery="" title="Switches Cherry MX T치ctil"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-gray_hu1024f134c62626fb0b08012df6245127_35192_300x200_fit_q90_box.jpg" width="200" height="200" alt="Switches Cherry MX T치ctil" title="Switches Cherry MX T치ctil"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-brown_hu2428ff7dca223808f2065c7c28bcd025_52904_2560x1440_fit_box_1.gif" data-gallery="" title="Switch Cherry MX T치ctil"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-brown_hu2428ff7dca223808f2065c7c28bcd025_52904_300x200_fit_box_1.gif" width="200" height="200" alt="Switch Cherry MX T치ctil" title="Switch Cherry MX T치ctil"  class="lozad "></a></p>
<figcaption>Switches Cherry MX T치ctil</figcaption>
</figure>
</div>
<h4 id="lineales">Lineales</h4>
<p>Los <em>switches</em> lineales no ofrecen respuesta t치ctil ni la sonora de los <em>clicky</em>, la presi칩n que hay que ejercer para pulsar la tecla es constante durante todo su recorrido.</p>
<p>Los c칩digos de colores asignados para estos <em>switches</em> con respuesta t치ctil son el rojo o <em>red</em>, <em>silent red</em>, <em>speed silver</em> y negro o <em>back</em>. El m치s com칰n de los lineales son lo de color rojo, los de color negro requieren mayor presi칩n, los <em>speed silver</em> requieren menor recorrido de la tecla para registrar la pulsaci칩n y los <em>silent red</em> son m치s silenciosos.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-red_hub807dad154889508359cb617acd777d0_30490_2560x1440_fit_q90_box.jpg" data-gallery="" title="Switches Cherry MX Lineales"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-red_hub807dad154889508359cb617acd777d0_30490_300x200_fit_q90_box.jpg" width="200" height="200" alt="Switches Cherry MX Lineales" title="Switches Cherry MX Lineales"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-black_hu4b3b9ed30967cc5161b45cdf562c4b42_32732_2560x1440_fit_q90_box.jpg" data-gallery="" title="Switches Cherry MX Lineales"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-black_hu4b3b9ed30967cc5161b45cdf562c4b42_32732_300x200_fit_q90_box.jpg" width="200" height="200" alt="Switches Cherry MX Lineales" title="Switches Cherry MX Lineales"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-red_hu978966566f6766c415e3be3c67e0866a_84526_2560x1440_fit_box_1.gif" data-gallery="" title="Switch Cherry MX Lineales"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/switch-cherrymx-red_hu978966566f6766c415e3be3c67e0866a_84526_300x200_fit_box_1.gif" width="200" height="200" alt="Switch Cherry MX Lineales" title="Switch Cherry MX Lineales"  class="lozad "></a></p>
<figcaption>Switches Cherry MX Lineales</figcaption>
</figure>
</div>
<h4 id="marcas-de-_switches_">Marcas de <em>switches</em></h4>
<p>La marca m치s conocida de <em>switches</em>  son los <a href="https://www.cherrymx.de/en">Cherry MX</a> y son los que se encuentran en la mayor칤a de teclados mec치nicos. Una alternativa a los Cherry MX e imitaci칩n de estos que no peores son los <a href="https://www.gateron.co">Gateron</a>, Outemu, <a href="https://www.kailhswitch.com">Kaihl</a> que se encuentran en los teclados mec치nicos algo m치s econ칩micos.</p>
<h4 id="probador-de-_switches_">Probador de <em>switches</em></h4>
<p>Para probar que tipo de <em>switch</em> es el que m치s nos agrada en <a href="https://amzn.to/2flFhHA">Amazon</a> se venden unos <a href="https://amzn.to/2WW3U4j">probadores con diferentes tipos de <em>switches</em></a>. No son baratos pero pueden compensar para acertar mejor al comprar un teclado mec치nico.</p>
<p>Usando uno he aprendido que los <em>switches</em> t치ctiles Cherry MX Brown son mucho menos t치ctiles que los Cherry MX Blue, los Cherry MX Clear son m치s parecidos a los Blue con una percepci칩n t치ctil m치s pronunciada. Los Cherry MX Brown tienen una sensaci칩n t치ctil muy ligera aunque suficiente para notar la diferencia con los lineales Red, para una sensaci칩n t치ctil mayor est치n los Clear aunque los Brown son m치s comunes y f치ciles de encontrar en los teclados.</p>
<p>El probador tambi칠n permite apreciar las diferencias en las fuerzas de actuaci칩n de las teclas, se percibe f치cilmente la diferencia de la fuerza de actuaci칩n de los Grey con 80 cN y los Brown con 55 cN. El sonido y la experiencia usando una sola tecla de cada tipo es diferente de usar un teclado con todas las teclas del mismo tiempo pero el probador permite hacerse una idea mejor de cada uno de los <em>switches</em> antes de comprar un teclado mec치nico que pase de los 80  si no se tiene claro c칰al es el tipo de <em>switch</em> preferido.</p>
<p>En las im치genes del probador los switches est치n ordenados de la siguiente manera, fila superior est치n los <em>clicky</em> Green, Blue y White, en la segunda fila est치n los lineales Linear Grey, Red y Black y en la fila inferior est치n los t치ctiles Tactile Grey, Brown y Clear.</p>
<p>El probador incluye un extractor de <em>keycaps</em> y aros de goma para probar la diferencia de sonido un recorrido de las teclas.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/akwox-1_hu0b26b2162a64867ba5bf38bf5f7f7e5b_126458_2560x1440_fit_q90_box.jpg" data-gallery="" title="Probador de switches Cherry MX"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/akwox-1_hu0b26b2162a64867ba5bf38bf5f7f7e5b_126458_300x200_fit_q90_box.jpg" width="126" height="200" alt="Probador de switches Cherry MX" title="Probador de switches Cherry MX"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/akwox-2_hue815119a38afe7e693dad6aac9a4152e_106589_2560x1440_fit_q90_box.jpg" data-gallery="" title="Probador de switches Cherry MX"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/akwox-2_hue815119a38afe7e693dad6aac9a4152e_106589_300x200_fit_q90_box.jpg" width="124" height="200" alt="Probador de switches Cherry MX" title="Probador de switches Cherry MX"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/akwox-3_hub67247c1ad388385ada8a258e0be3049_195382_2560x1440_fit_q90_box.jpg" data-gallery="" title="Probador de switches Cherry MX"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/akwox-3_hub67247c1ad388385ada8a258e0be3049_195382_300x200_fit_q90_box.jpg" width="179" height="200" alt="Probador de switches Cherry MX" title="Probador de switches Cherry MX"  class="lozad "></a></p>
<figcaption>Probador de switches Cherry MX</figcaption>
</figure>
</div>
<div class="media media-amazon">
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B01GZHU1EG&amp;linkId=0805e80584facbae53611545e724ca20" title="Amazon" class="lozad"></iframe>
</div>
<p>En este v칤deo se muestran los diferentes tipos de <em>switches</em> y el sonido caracter칤stico de los <em>clicky</em>, de los t치ctiles y lineales.</p>
<div class="media media-video">
  <iframe width="640" height="360" src="https://www.youtube.com/embed/zlSPH3HvxhQ" frameborder="0" class="lozad" allowfullscreen></iframe>
</div>
<div class="media media-video">
  <iframe width="640" height="360" src="https://www.youtube.com/embed/DZzsR1u493M" frameborder="0" class="lozad" allowfullscreen></iframe>
</div>
<h3 id="los-_keycaps_">Los <em>keycaps</em></h3>
<p>Las tapas de las teclas o <em>keycaps</em> es la pieza de pl치stico que da forma a la tecla y que pulsamos para activar el interruptor, se montan encima del interruptor. La ventaja de los teclados mec치nicos es que estos permiten personalizar el teclado con el dise침o y disposici칩n que quiera el usuario, incluso de cambiarlo con posterioridad en cualquier momento. Para algunos usuarios con afici칩n los <em>keycaps</em> no son vistas como simplemente caras piezas de pl치stico sino una forma de arte y expresi칩n.</p>
<h4 id="materiales">Materiales</h4>
<p>Los materiales que se emplean para las teclas de los teclados mec치nicos son de pl치stico ABS o PBT. Las teclas PBT tiene mayor durabilidad y se consideran de mayor calidad aunque son m치s comunes las ABS ya que est치s son m치s econ칩micas. La textura de las ABS es m치s suave y con el tiempo adquieren brillo por el aceite de los dedos mientras que las PBT tienen un tacto con una ligera rugosidad, un color m치s mate sin ser tan propensas a adquirir brillo. El sonido tambi칠n cambia ligeramente, las teclas PBT al ser m치s gruesas tiene un sonido m치s grave.</p>
<p>En algunos casos para la fabricaci칩n de la teclas se utiliza un proceso de manufactura de doble disparo o <em>double shot</em> el que las teclas est치n formadas por dos materiales pl치sticos diferentes, a veces para diferenciar la superficie de la tecla del caracter, esta diferencia de materiales es utilizando en los teclados retroiluminados para dejar pasar la luz e iluminar la tecla, las teclas ABS ofrecen mejor retroiluminaci칩n.</p>
<ul>
<li><a href="https://switchandclick.com/2020/03/17/abs-vs-pbt-keycaps-whats-the-difference/">ABS vs PBT Keycaps: What뗩 the Difference?</a></li>
<li><a href="https://www.wikiversus.com/gaming/teclados/keycaps/">쮺u치les son las mejores keycaps?</a></li>
<li><a href="https://drop.com/talk/108/massdrop-101-intro-to-keycaps">Intro to Keycaps</a></li>
<li><a href="https://rowsofkeys.com/keycap-types/">Keycap Types, Keycap Sizes, Profile and other characteristics</a></li>
</ul>
<h4 id="impresi칩n-de-la-leyenda">Impresi칩n de la leyenda</h4>
<p>Los fabricantes emplean diferentes t칠cnicas para imprimir en el <em>keycap</em> la leyenda del caracter o s칤mbolo. La t칠cnica empleada determina el coste del <em>keycap</em> y tambi칠n la durabilidad de la leyenda al desgaste.</p>
<ul>
<li><em>Pad printing</em> es el m칠todo m치s utilizado por la simple raz칩n de que es el m치s r치pido y barato. Sin embargo, su durabilidad es escasa ante el uso continuado que con el paso del tiempo algunas leyendas de las teclas m치s utiizadas desaparece, lo que las hace poco deseables en teclados de gama alta.</li>
<li><em>Laser etching</em> en esta t칠cnica un l치ser marca la leyenda en el <em>keycap</em>, esta t칠cnica tambien adolece el problema del de la desaparici칩n de la leyenda en las teclas m치s utilizadas con el paso del tiempo y el uso intenso..</li>
<li><em>Dye sublimation</em> en esta t칠cnica la leyenda se fusiona en el <em>keycap</em> que se convierte en parte del pl치stico del <em>keycap</em>. Ofrece mayor durabilidad que las dos t칠cnicas anteriores soportando el uso intenso sin que las leyendas desaparezcan.</li>
<li><em>Double-shot</em> en esta t칠cnica el proceso de fabricaci칩n se realiza en dos pasos de moldeado, un paso forma el cuero del <em>keycap</em> y otro la leyenda del car치cter. Su ventaja que es las leyendas nuca van a desparecer y son <em>keycaps</em> m치s gruesas que ofrecen un sonido m치s robusto.</li>
</ul>
<div class="media media-video">
  <iframe width="640" height="360" src="https://www.youtube.com/embed/HqyrpQrjZ4k" frameborder="0" class="lozad" allowfullscreen></iframe>
</div>
<h3 id="disposici칩n-de-los-teclados">Disposici칩n de los teclados</h3>
<p>En los teclados hay dos organizaciones que definen el tama침o y posici칩n de las teclas, seg칰n la organizaci칩n var칤a ligeramente el n칰mero de teclas y la orientaci칩n de la tecla <em>Enter</em>. Por un lado est치 la organizaci칩n ANSI m치s utilizada en Estados Unidos y por otro la ISO m치s utilizada en los pa칤ses europeos.</p>
<p>La disposici칩n de las teclas var칤a la ubicaci칩n de los caracteres seg칰n el alfabeto de cada lenguaje. Por ejemplo, en la disposici칩n espa침ola hay una tecla para el caracter <em>침</em> y la ubicaci칩n para otros var칤a como el signo de interrogaci칩n de apertura <em></em> o la tilde <em>췂</em>.</p>
<p>Los teclados m치s comunes son los <em>QUERTY</em> que toman el nombre de los caracteres de las teclas de la fila superior izquierda. Hay otras disposiciones como <em>QUERTZ</em> o <em>DVORAK</em> utilizadas en algunos pa칤ses que se ajustan mejor al alfabeto y caracteres de las palabras del lenguaje que emplean.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/keyboard-ansi-iso_hu757a95043b9338fb3e91948d78a32a4e_39311_2560x1440_fit_box_3.png" data-gallery="" title="Teclado ISO (es)"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/keyboard-ansi-iso_hu757a95043b9338fb3e91948d78a32a4e_39311_300x200_fit_box_3.png" width="254" height="200" alt="Teclado ISO (es)" title="Teclado ISO (es)"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/keyboard-ansi-en_hu1783946e8f9b1d11ca0f31f5b68ed12b_60652_2560x1440_fit_box_3.png" data-gallery="" title="Teclado ANSI (en)"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/keyboard-ansi-en_hu1783946e8f9b1d11ca0f31f5b68ed12b_60652_300x200_fit_box_3.png" width="300" height="133" alt="Teclado ANSI (en)" title="Teclado ANSI (en)"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/keyboard-iso-es_hue7a87b9646def56b61579aede5755908_130161_2560x1440_fit_box_3.png" data-gallery="" title="Teclado ISO (es)"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/keyboard-iso-es_hue7a87b9646def56b61579aede5755908_130161_300x200_fit_box_3.png" width="300" height="128" alt="Teclado ISO (es)" title="Teclado ISO (es)"  class="lozad "></a></p>
<figcaption>Teclados ANSI (en) e ISO (es)</figcaption>
</figure>
</div>
<p>En funci칩n de la disposici칩n del teclado y formato el tama침o de los <em>keycaps</em> varia, el tama침o de los <em>keycaps</em> y el tama침o soportado por el teclado para los <em>keycpas</em> ha de conincidir para que encajen al colocarlas. Hay que tenerno en cuenta al comprar unos <em>keycaps</em> si estos no est치n premontados por el fabricante en el teclado.</p>
<p>Como referencia una tecla del alfabeto se considera que tiene un tama침o de 1x, el tama침o de otras teclas se especifica tomando como referencia el 1x pudiendo ser 1.25x, 1.75x, 2.25x, 6.25x para algunas teclas como la barra espaciadora y otras teclas de funci칩n.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/keyboard-keycaps-size_hu40077b4d5fea7d226c9a1faac1623499_114150_2560x1440_fit_box_3.png" data-gallery="" title="Tama침o keycaps en teclados ISO"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/keyboard-keycaps-size_hu40077b4d5fea7d226c9a1faac1623499_114150_300x200_fit_box_3.png" width="300" height="89" alt="Tama침o keycaps en teclados ISO" title="Tama침o keycaps en teclados ISO"  class="lozad "></a></p>
<figcaption>Tama침o keycaps en teclados ISO</figcaption>
</figure>
</div>
<h3 id="formato-de-los-teclados">Formato de los teclados</h3>
<p>Los teclados t칤picos son los completos de entre unas 102 y 105 teclas. Algunos otros tienen menos teclas que los hace m치s peque침os y ocupan menos espacio en la superficie de la mesa.</p>
<h4 id="completo">Completo</h4>
<p>Los teclados completo tienen entre 102 y 105 teclas e incluyen teclas espec칤ficas para el teclado num칠rico, teclas de funci칩n, de desplazamiento y de utilidad. Son los de mayor n칰mero de teclas lo que hace que sean los m치s grandes.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/ducky-one-2-fullsized_hudd9108b6e86fd67fd3f1990a652d73ce_383584_2560x1440_fit_box_3.png" data-gallery="" title="Teclado Ducky One 2 completo"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/ducky-one-2-fullsized_hudd9108b6e86fd67fd3f1990a652d73ce_383584_300x200_fit_box_3.png" width="300" height="145" alt="Teclado Ducky One 2 completo" title="Teclado Ducky One 2 completo"  class="lozad "></a></p>
<figcaption>Teclado Ducky One 2 completo</figcaption>
</figure>
</div>
<h4 id="sin-teclado-num칠rico">Sin teclado num칠rico</h4>
<p>Los teclados sin teclado num칠rico prescinden de las teclas del teclado num칠rico, tambi칠n se les conoce como <em>ten key less</em> o por sus siglas TKL. Al tener menos teclas hace que sean m치s compactos y peque침os. El teclado num칠rico no es de uso habitual para muchos usuarios, si es el caso prescindir de estas teclas permite tener m치s espacio en la mesa.</p>
<p>Aunque no poseen teclado num칠rico conservan la funci칩n de las teclas del teclado num칠rico con las teclas de funci칩n. Con la funci칩n de teclado num칠rico activada ciertas teclas de escritura de caracteres pasan a actuar como teclado num칠rico.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/ducky-one-2-tkl_hu354ab0c3d09f385c997f31ff19e237d6_461539_2560x1440_fit_box_3.png" data-gallery="" title="Teclado Ducky One 2 TKL"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/ducky-one-2-tkl_hu354ab0c3d09f385c997f31ff19e237d6_461539_300x200_fit_box_3.png" width="300" height="145" alt="Teclado Ducky One 2 TKL" title="Teclado Ducky One 2 TKL"  class="lozad "></a></p>
<figcaption>Teclado Ducky One 2 TKL</figcaption>
</figure>
</div>
<h4 id="compactos">Compactos</h4>
<p>Hay algunos modelos de teclados que tienen a칰n menos teclas ya que prescinden de las teclas de funci칩n, de desplazamiento y de utilidad. A algunos se les conoce como 75%, 65%, 60% o 40%. Dependiendo de cada uno prescinden de algunas teclas de utilidad, de las de funci칩n, de desplazamiento o de n칰meros.</p>
<p>La versi칩n SF de Ducky tiene como ventaja tener las fechas de desplazamiento y de funci칩n m치s, sin embargo como desventaja tiene que las teclas <em>Ctrl derecho</em> y <em>Shift derecho</em> no est치n en su posici칩n habitual alineadas con la tecla <em>Enter</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/ducky-one-2-sf_hua7ae42a5b88ee37c615015e6d2cd5ca8_425385_2560x1440_fit_box_3.png" data-gallery="" title="Teclado Ducky One 2 SF"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/ducky-one-2-sf_hua7ae42a5b88ee37c615015e6d2cd5ca8_425385_300x200_fit_box_3.png" width="300" height="145" alt="Teclado Ducky One 2 SF" title="Teclado Ducky One 2 SF"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/ducky-one-2-mini_hue35dd0801b195ef6846c36d1b1ca7eea_421612_2560x1440_fit_box_3.png" data-gallery="" title="Teclado Ducky One 2 Mini"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/ducky-one-2-mini_hue35dd0801b195ef6846c36d1b1ca7eea_421612_300x200_fit_box_3.png" width="300" height="145" alt="Teclado Ducky One 2 Mini" title="Teclado Ducky One 2 Mini"  class="lozad "></a></p>
<figcaption>Teclado Ducky One 2 SF y Mini</figcaption>
</figure>
</div>
<h4 id="retroiluminado">Retroiluminado</h4>
<p>Los teclados retroiluminados poseen un LED debajo del teclado o en cada tecla que iluminan el teclado para su visi칩n en situaciones de poca luz o de noche con la luz apagada. Algunos teclados son monocromo que emiten una luz de un 칰nico color, otros son RGB que permiten variar el color seg칰n la preferencia. En algunos casos tambi칠n permiten variar la intensidad de la luz.</p>
<p>Los teclados que tienen un LED en cada tecla permiten establecer animaciones de colores con diferentes secuencias de funcionamiento.</p>
<h4 id="inal치mbrico">Inal치mbrico</h4>
<p>Los teclados normales se conectan al ordenador mediante un cable USB, los inal치mbricos no tienen necesidad del cable lo que permite eliminar un cable encima de la mesa y permite mover el teclado sin la atadura del cable o desplazarse a unos pocos metros de distancia. La forma de conectarse al ordenador es mediante radiofrecuencia con un adaptador conectado al ordenador en un puerto USB que recibe la se침al del teclado o mediante Bluetooth que no requieren adaptador si el ordenador dispone de hardware Bluetooth.</p>
<p>Los teclados inal치mbricos utilizan dos pilas AA o AAAA para su funcionamiento que con un uso normal llegan a durar incluso un a침o sin tener que cambiarlas, con pilas recargables no hace falta estar comprando pilas cada cierto tiempo. Dado que los inal치mbricos utilizan pilas para una mayor duraci칩n de las mismas no suelen ser retroiluminados.</p>
<h3 id="caracteres-del-teclado-en-espa침ol-en-teclados-no-espa침ol">Caracteres del teclado en espa침ol en teclados no espa침ol</h3>
<p>Muchos de los teclados mec치nicos se ofrecen en formato ANSI y con disposici칩n de teclas de Estados Unidos o US. En algunos otros casos son el formato ISO pero con una disposici칩n de caracteres diferente a la normalizada del teclado espa침ol.</p>
<p>El formato y la disposici칩n hace que algunas teclas con caracteres propios del lenguaje espa침ol no tengan tecla espec칤fica como la <em>침</em>, <em></em>, <em>춰</em>, <em>췂</em>, <em>치칠칤칩칰</em> o <em>췈</em>. Si se opta por un teclado con disposici칩n US para escribir estos caracteres en espa침ol es posible pero utilizando una combinaci칩n de teclas. Por ejemplo, la e침e en el teclado con disposici칩n US internacional se escribe con la combinaci칩n de teclas <em>Alt Gr+n</em> y las vocales con tilde <em>Alt Gr+a</em>.</p>
<p>En caso necesario, en GNOME alternar entre las disposiciones de teclado configuradas es t치n f치cil como usar el men칰 que aparece al congurar varias distribuciones de teclado o con el atajo de teclado <em>Super+Barra espaciadora</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/keyboard-iso-us-alt_hufdc311f272c4200e9e82e5a4fd493a7e_118678_2560x1440_fit_box_3.png" data-gallery="" title="Teclado ISO (en, alt)"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/keyboard-iso-us-alt_hufdc311f272c4200e9e82e5a4fd493a7e_118678_300x200_fit_box_3.png" width="300" height="128" alt="Teclado ISO (en, alt)" title="Teclado ISO (en, alt)"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/gnome-keyboard-layout-selector_huac2d7c1a5f20e8ddea90c7039ad23949_39961_2560x1440_fit_box_3.png" data-gallery="" title="Selector de disposici칩n de teclado GNOME"><img src="https://picodotdev.github.io/blog-bitix/2020/12/guia-basica-sobre-teclados-mecanicos-para-ordenador/images/gnome-keyboard-layout-selector_huac2d7c1a5f20e8ddea90c7039ad23949_39961_300x200_fit_box_3.png" width="300" height="146" alt="Selector de disposici칩n de teclado GNOME" title="Selector de disposici칩n de teclado GNOME"  class="lozad "></a></p>
<figcaption>Teclado ISO (en, alt) y selector de disposici칩n de teclado GNOME</figcaption>
</figure>
</div>
<h3 id="marcas-y-modelos-de-teclados-mec치nicos">Marcas y modelos de teclados mec치nicos</h3>
<p>En la siguiente <a href="https://mechanicalkeyboard.com/">web de teclados mec치nicos</a> tiene filtros para encontrar modelos de teclado con las caracter칤sticas deseadas en cuando a marca, tipos de <em>switches</em>, tipo retroiluminaci칩n, color, tama침o y tipo de conexi칩n.</p>
<h3 id="precios-d칩nde-comprar-y-recomendaci칩n-teclados-mec치nicos">Precios, d칩nde comprar y recomendaci칩n teclados mec치nicos</h3>
<h4 id="dierya-dk61e">DIERYA DK61E</h4>
<p>Un teclado mec치nico muy interesante es el <a href="https://amzn.to/3fXBlJR">DIERYA DK61E</a> o el <a href="https://amzn.to/3KLHt6d">DIERYA DK63</a>. Son de un formato 60% sin las teclas de funci칩n, uno con y otro sin flechas de desplazammiento y el bloque superior ni teclado num칠rico que lo hacen muy compacto, por lo que ocupa muy poco en el espacio en la mesa y resulta muy c칩modo de utilizar. Con disposici칩n ANSI y teclas en ingl칠s, algunas personas prefieren con esta disposici칩n ya que para ciertas tareas la disposici칩n de los caracteres es m치s adecuada en vez de la ISO en espa침ol, aunque su disposici칩n de f치brica no es mayor problema ya que como cualquier teclado mec치nico permite cambiar los <em>keycaps</em> por cualquier otra disposici칩n incluyendo la espa침ol y configurar la entrada de teclado en el sistema para adaptarlo a nuestra preferencias. Uno es con conexi칩n con cable y otro adem치s ofrece conexi칩n inal치mbrica por <em>bluetooth</em>.</p>
<p>Pasado un tiempo de escribir el art칤culo la marca me envi칩 un ejemplar de este modelo.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/01/desempaquetado-y-analisis-de-teclado-mecanico-compacto-dierya-dk61e/">Desempaquetado y an치lisis de teclado mec치nico compacto DIERYA DK61E</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/03/desempaquetado-y-analisis-de-teclado-mecanico-compacto-e-inalambrico-dierya-dk63/">Desempaquetado y an치lisis de teclado mec치nico compacto e inal치mbrico DIERYA DK63</a></li>
</ul>
<p>Los <em>switches</em> son <em>hot swappable</em> que permite cambiarlos por otros en caso de m치s tarde preferir o probar otros tipos, la sensaci칩n de escritira var칤a significativamente entre unos y otros, son notablemente muy diferentes unos lineales de unos t치ctiles o <em>clicky</em>. Que los <em>switches</em> sean <em>hot swappable</em> es algo que tiene muy significativo de gama alta para su categor칤a de precio. Se ofrece en una variedad de tipos de <em>switches</em> de la marca Gateron y destacar que son 칩pticos, nuevamente muy destacable, que ofrece mejor detecci칩n de las pulsaciones. Los <em>keycaps</em> son de pl치stico PBT <em>double shot</em> tambi칠n algo muy significativo de gama alta para su categor칤a de precio. Finalmente, dispone de iluminaci칩n RGB personalizable con varias configuraciones de iluminaci칩n y un cable mallado, acodado y desmontable con conexi칩n USB-C, tambi칠n dispone de una aplicaci칩n para Windows para personalizalo y programar las teclas, la iluminaci칩n y macros.</p>
<p>Este teclado por sus caracter칤sticas no es que tenga caracter칤sticas de teclado mec치nico de gama alta, es que es un teclado mec치nico de gama alta a un precio muy atractivo para todo lo que ofrece con una excelente relaci칩n calidad/precio que lo hace una opci칩n muy recomendable.</p>
<p>La marca tiene otros modelos como el <a href="https://amzn.to/3ttgSo6">DIERYA DK61 Pro</a> que adem치s de con cable es inal치mbrico Bluetooth mediante bater칤a recargable y el <a href="https://amzn.to/3KLHt6d">DIERYA DK63</a> tambi칠n cableado e inal치mbrico Bluetooth con teclas de desplazamiento dedicadas.</p>
<ul>
<li><a href="https://www.dieryatech.com/item/dk61e-wired-mechanical-keyboard">P치gina del fabricante del teclado DIERYA DK61E</a></li>
<li><a href="https://www.dieryatech.com/item/dk61-pro-wireless-wired-mechanical-keyboard">P치gina del fabricante del teclado DIERYA DK61 Pro</a></li>
<li><a href="https://www.dieryatech.com/item/dk63-wireless-wired-mechanical-keyboard">P치gina del fabricante del teclado DIERYA DK63</a></li>
</ul>
<div class="media media-amazon">
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B08372Y4KT&amp;linkId=cdd8116f96dca12b3093345c1e65180c" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07W5PD6VS&amp;linkId=06ca1e820d80f720658f8c74322b8fce" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B082PDM3FG&amp;linkId=7387f80c99b51e39bf5d5479abb14581" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B091TQYTT3&amp;linkId=82d726468e9ed79d257999b6c437c1c6" title="Amazon" class="lozad"></iframe>
</div>
<div class="media media-video">
  <iframe width="640" height="360" src="https://www.youtube.com/embed/2siY3SO3ATY" frameborder="0" class="lozad" allowfullscreen></iframe>
</div>
<h4 id="drevo-calibur-v2-te">DREVO Calibur V2 TE</h4>
<p>El teclado <a href="https://amzn.to/3n7cfwP">DREVO Calibur V2 TE</a> ofrece un interedio entre TKL y SF, no posee teclas de funci칩n pero si las que se enuentran arriba de los TKL muy 칰tiles al programar que permiten seleccionar el texto de una linea y cortar y pegar de forma alternativa a utilizar <em>Ctrl+X</em> y <em>Ctrl+V</em>, al estar cerca de las teclas de desplazamiento evita tener que desplazar la mano para posicionar el cursor al escribir texto. El DREVO Calibur no tiene la calidad de los Ducky pero es m치s econ칩mico, compacto y con una disposici칩n de teclas intermedia entre el SF y TKL sin perder ninguna de esas teclas de funci칩n de la parte superior de las flechas.</p>
<ul>
<li><a href="https://www.drevo.net/product/keyboard/calibur-v2-te">P치gina del fabricante del teclado DREVO Calibur V2 TE</a></li>
</ul>
<div class="media media-amazon">
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07TLMYKWK&amp;linkId=bd7e81798a9d04ab4943e6f9754d0072" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07TKM6DZ4&amp;linkId=aaa5f003821ff164674045386933a0a9" title="Amazon" class="lozad"></iframe>
</div>
<div class="media media-video">
  <iframe width="640" height="360" src="https://www.youtube.com/embed/nD42ZkgvhTs" frameborder="0" class="lozad" allowfullscreen></iframe>
</div>
<h4 id="glorious-gmmk-tkl">Glorious GMMK TKL</h4>
<p>Otra opci칩n muy interesante es el <a href="https://amzn.to/3vEzfpt">Glorious PC Gaming Race GMMK TKL</a>, es un teclado en formato ISO con la caracter칤stica destacada de ser personalizable tanto en los interruptores como en las teclas, los interruptores son intercambiables compatibles con los de la marca Cherry como Gateron y Kailh. Aparte Glorious ofrece como producto independiente los interruptores Gateron y los <em>keykaps</em> del material ABS con la disposici칩n de teclado espa침ola. Se vende tanto en Amazon como en <a href="https://www.coolmod.com">Coolmod</a> y algunos elementos en PcComponentes. Soporta macros y pefiles configurados por software y personalizaci칩n de varios efectos de luz.</p>
<ul>
<li><a href="https://www.pcgamingrace.com/products/gmmk-tkl-tenkeyless-brown-switch">P치gina del fabricante del teclado Glorious PC Gaming Race GMMK TKL</a></li>
</ul>
<p>Depu칠s de analizar las opciones esta es el teclado mec치nico que he comprado.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2021/11/desempaquetado-de-teclado-mecanico-glorious-gmmk-tkl/">Desempaquetado de teclado mec치nico Glorious GMMK TLK</a></li>
</ul>
<div class="media media-amazon">
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07L31V1K4&amp;linkId=3d3b8d145711c74c4cdb01715a21c5b4" title="Amazon" class="lozad"></iframe>
</div>
<div class="media media-amazon">
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B0716ZNZ1P&amp;linkId=2cdc77ae7cc6c546d85c6e99ecd2bbf5" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07CVQ7ZRL&amp;linkId=819c1e81da9f0cd7f92f795b41926582" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07CVT9ZH3&amp;linkId=09b7be21445b0ea3514d006335302f6f" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07CVQ8NGR&amp;linkId=04543405ab88e2ce7474674867279243" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07CVR26ZF&amp;linkId=31c3dd925e5cc8a5ce452d81ab581c3a" title="Amazon" class="lozad"></iframe>
</div>
<div class="media media-amazon">
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B09KH2NX42&amp;linkId=1782acdd31579fd3e7142a3cd55da957" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B0932D1NWB&amp;linkId=04ba4b14347d2dbcebb49565cc5c362c" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B09JGRLZ4N&amp;linkId=2098b45660eec3688b64a1f5cb133840" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B07ZBVTWHP&amp;linkId=d8141e2dd7a142a5d796693df2351938" title="Amazon" class="lozad"></iframe>
</div>
<ul>
<li><a href="https://www.coolmod.com/glorious-pc-gaming-race-gmmk-tkl-iso-layout-teclado/">Glorious PC Gaming Race GMMK TKL ISO en Coolmod</a></li>
<li><a href="https://www.coolmod.com/glorious-pc-gaming-race-gateron-brown-switches-120-piezas-interruptores-teclado/">Glorious PC Gaming Race Gateron Brown Switches en Coolmod</a></li>
<li><a href="https://www.coolmod.com/glorious-pc-gaming-race-abs-keycaps-105-es-layout-negro-teclas/">Glorious PC Gaming Race ABS Keycaps 105 ES Layout en Coolmod</a></li>
<li><a href="https://es.aliexpress.com/item/4000395759765.html"><em>Keycaps</em> disposici칩n espa침ol, ABS, doble disparo, RGB, Cherry MX, perf칤l OEM en AliExpress</a></li>
<li><a href="https://es.aliexpress.com/item/1005002662013875.html"><em>Keycaps</em> disposici칩n ingl칠s, PBT, doble disparo, RGB, Cherry MX, perf칤l OEM en AliExpress</a></li>
</ul>
<h4 id="ducky-one-2">Ducky One 2</h4>
<p>De los teclados mec치nicos una marca reconocida es <a href="https://www.duckychannel.com.tw/">Ducky</a> que ofrece modelos completos, TKL y compactos en diferente tama침o, n칰mero de teclas, tipos de <em>switches</em> y retroiluminados. Su precio suele estar a partir de 100  y se pueden encontrar en la tienda <a href="https://www.vsgamers.es/">Versus Gamers</a> y tambi칠n en Coolmod con el formato ISO con la disposici칩n en espa침ol y diferentes tipos de <em>switches</em> <em>blue</em>, <em>brown</em> y <em>red</em>. A diferencia del Glorious soporta macros y perfiles por hardware sin necesidad de un software que normalmente solo est치 disponible para Windows, este soporte por hardware para macros y perfiles permite no perder estas funcionalidades si se usa macOS o GNU/Linux.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/links">P치gina del fabricante del teclado Ducky One 2</a></li>
<li><a href="https://www.vsgamers.es/product/teclado-gaming-mecanico-ducky-one-2-rgb-cherry-mx-red">Ducky One 2 Cherry MX Red RGB en Versus Gamers</a></li>
<li><a href="https://www.vsgamers.es/product/teclado-gaming-mecanico-ducky-one-2-rgb-tkl-cherry-mx-brown">Ducky One 2 Cherry MX Brown TKL RGB en Versus Gamers</a></li>
<li><a href="https://www.vsgamers.es/product/teclado-gaming-mecanico-ducky-one-2-rgb-cherry-mx-brown">Ducky One 2 Cherry MX Brown RGB en Versus Gamers</a></li>
<li><a href="https://www.vsgamers.es/product/teclado-gaming-mecanico-ducky-one-2-rgb-tkl-cherry-mx-blue">Ducky One 2 Cherry MX Blue TKL RGB en Versus Gamers</a></li>
<li><a href="https://www.vsgamers.es/product/teclado-gaming-mecanico-ducky-one-2-rgb-cherry-mx-blue">Ducky One 2 Cherry MX Blue RGB en Versus Gamers</a></li>
<li><a href="https://www.coolmod.com/ducky-one-2-tkl-rgb-mx-brown-abs-es-teclado/">Ducky One 2 TKL RGB MX Brown ABS (ES) en Versus Gamers</a></li>
</ul>
<h4 id="otros">Otros</h4>
<p>Teclados mec치nicos econ칩micos. En <a href="https://www.pccomponentes.com/">PcComponentes</a> tambi칠n hay algunos modelos de teclado mec치nico econ칩micos de las marcas Newskill y Krom entre otras, otras marcas reconocidas son <a href="https://en.akkogear.com/">Akko</a>, <a href="https://www.keychron.com/">Keychron</a> y <a href="https://rkgamingstore.com/">Royal Kludge</a>.</p>
<ul>
<li><a href="https://www.pccomponentes.com/teclado-mecanico">Teclados mec치nicos en PcComponentes</a></li>
<li><a href="https://es.aliexpress.com/item/4000130061265.html"><em>Keycaps</em> disposici칩n espa침ol, PBT, <em>laser etched</em>, Cherry MX, perf칤l OEM en AliExpress</a></li>
<li><a href="https://es.aliexpress.com/item/1005003516268627.html"><em>Keycaps</em> disposici칩n espa침ol, PBT, dye sub, Cherry MX, perf칤l OEM en AliExpress</a></li>
<li><a href="https://gist.github.com/henfiber/a17c7b2a7053473fe37b1a6f80e58efd">Buying keyboards and keyboard components from EU</a></li>
</ul>
<p>El precio de los teclados mec치nicos son superiores a los teclados m치s baratos de membrana. Un teclado de membrana como el <a href="https://amzn.to/33FoXIN">Logitech MK120</a> cuesta unos 20 , los teclados mec치nicos baratos a partir de 40  y los teclados mec치nicos de calidad a partir de los 70 .</p>
<p>En <a href="https://amzn.to/2flFhHA">Amazon</a> hay gran cantidad de modelos de membrana como el citado MK120 o su modelo inal치mbrico <a href="https://amzn.to/37v7rrK">Logitech MK270</a>. Mec치nicos buscando bien hay algunos de buena calidad aunque muchos de los que hay no tienen la disposici칩n de tecldado en espa침ol.</p>
<p>Teclados de membrana con cable e inal치mbrico.</p>
<div class="media media-amazon">
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B00564GWEI&amp;linkId=92beec3c8e4c12addd6aad92e670067a" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B00CHHDY66&amp;linkId=d45488e9f6f3e0fae914e06262b99644" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B08PPHFLPK&amp;linkId=fb4b44441150840983cf27698c454c85" title="Amazon" class="lozad"></iframe>
</div>
]]>
        </content>
        
            
                <category term="hardware"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/11/las-formas-de-guardar-relaciones-jerarquicas-en-bases-de-datos-relacionales/</id>
        <title>Las formas de guardar relaciones jer치rquicas en bases de datos relacionales</title>
        <updated>2020-11-27T15:00:00+01:00</updated>
        <published>2020-11-27T15:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/11/las-formas-de-guardar-relaciones-jerarquicas-en-bases-de-datos-relacionales/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Para implementar relaciones jer치rquicas en base de datos relacionales hay varias soluciones conocidas. En este art칤culo comento las m치s conocidas con sus desventajas y cual elegir en funci칩n de si la base de datos soporta consultas recursivas o en caso de que no las soporte.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/postgresql.svg" width="200" height="206" alt="PostgreSQL" title="PostgreSQL"  class=""></p>
</div>
<p>Las bases de datos relacionales guardan los datos en tablas, filas y columnas. Los datos de unas tablas se relacionan con los de otras a trav칠s de las claves primarias y claves for치neas. Este modelo relacional permite guardar datos y es suficiente para muchos casos, habitualmente utilizando la tercera forma normal de <a href="https://picodotdev.github.io/blog-bitix/2018/02/las-6-plus-2-formas-normales-de-las-bases-de-datos-relacionales/">las 6+2 formas normales de las bases de datos relacionales</a>.</p>
<p>Sin embargo, el modelo relacional en principio no se ajusta a guardar relaciones jer치rquicas, hay varias soluciones para implementar este tipo de relaciones en los datos en una base de datos relacional. Algunas soluciones aunque v치lidas en la teor칤a tiene importantes limitaciones en su uso pr치ctico. Algunas soluci칩n depende de que la base de datos ofrezcan el soporte para implementarla en caso contrario hay que elegir otra opci칩n.</p>
<p>En el libro <a href="https://amzn.to/2G2oRN1">SQL Antipatterns</a> se trata con detalle las diferentes las formas de guardar relaciones jer치rquicas en bases de datos relacionales entre otros diversos aspectos y buenas pr치cticas.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del art칤culo</h2><toc></toc></div>
<h3 id="ejemplo-de-relaci칩n-jer치rquica">Ejemplo de relaci칩n jer치rquica</h3>
<p>Las relaciones jer치rquicas establecen unas normas en las relaciones de los elementos, los elementos se organizan en niveles en el que los elementos se relacionan como nivel por encima, por debajo o en el mismo nivel que otro. El n칰mero de niveles que tiene una estructura jer치rquica es indefinido pudiendo tener cualquier profundidad.</p>
<p>Esta es una estructura peque침a jer치rquica de productos con dos niveles de profundidad.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">Componentes (id: 1)&#10;</span></span><span class="line"><span class="cl">較럭較 Placas base (id: 2)&#10;</span></span><span class="line"><span class="cl">較   較럭較 ATX (id: 3)&#10;</span></span><span class="line"><span class="cl">較   較덕較 ITX (id: 4)&#10;</span></span><span class="line"><span class="cl">較럭較 Procesadores (id: 5)&#10;</span></span><span class="line"><span class="cl">較   較럭較 Intel (id: 6)&#10;</span></span><span class="line"><span class="cl">較   較덕較 AMD (id: 7)&#10;</span></span><span class="line"><span class="cl">較럭較 Memoria RAM (id: 8)&#10;</span></span><span class="line"><span class="cl">較럭較 Almacenamiento SSD (id: 9)&#10;</span></span><span class="line"><span class="cl">較덕較 Tarjetas gr치ficas (id: 10)&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;較럭較 NVIDIA (id: 11)&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;較덕較 AMD (id: 12)&#10;</span></span><span class="line"><span class="cl">Perif칠ricos&#10;</span></span><span class="line"><span class="cl">較럭較 Monitores&#10;</span></span><span class="line"><span class="cl">較   較럭較 FHD&#10;</span></span><span class="line"><span class="cl">較   較럭較 QHD&#10;</span></span><span class="line"><span class="cl">較   較덕較 UHD&#10;</span></span><span class="line"><span class="cl">較럭較 Teclados&#10;</span></span><span class="line"><span class="cl">較   較럭較 Mec치nicos&#10;</span></span><span class="line"><span class="cl">較   較덕較 Membrana&#10;</span></span><span class="line"><span class="cl">較럭較 Ratones&#10;</span></span><span class="line"><span class="cl">較덕較 Altavoces</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>hierarchy.txt</span>
    </div>
</div>
<h3 id="formas-de-guardar-relaciones-jer치rquicas">Formas de guardar relaciones jer치rquicas</h3>
<h4 id="adjacency-list">Adjacency List</h4>
<p>La soluci칩n de listas adyacentes o <em>adjacency list</em> se basa en a침adir un campo adicional a la tabla en el que cada fila guarda el identificador del elemento por encima en la estructura jer치rquica.</p>
<p>Esta soluci칩n utiliza un modelo de datos sencillo, es f치cil de a침adir nuevos elementos a la estructura jer치rquica adem치s de mantener la integridad referencial.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products_categories</span><span class="p">;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&#10;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>adjacency-list-data.sql</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">select * from products_categories;&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>adjacency-list-data.sql</span>
    </div>
</div>
<p>Sus desventajas son que las consultas para obtener los ascendientes o descendientes de un elemento son complicadas e ineficientes adem치s de no soportar cualesquiera niveles de profundidad.</p>
<p>Las consultas para obtener los ascendientes y los descendientes son las siguientes.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">p3</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">p4</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="n">p1</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">LEFT</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="n">category_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="n">parent_id</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">LEFT</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="n">p3</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">p3</span><span class="p">.</span><span class="n">category_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="n">parent_id</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">LEFT</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="n">p4</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">p4</span><span class="p">.</span><span class="n">category_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p3</span><span class="p">.</span><span class="n">parent_id</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">WHERE</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="n">category_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>adjacency-list-ancestors.sql</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl"> category_id | name | parent_id | category_id |&nbsp;&nbsp;&nbsp;&nbsp; name&nbsp;&nbsp;&nbsp;&nbsp; | parent_id | category_id |&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp; | parent_id | category_id | name | parent_id &#10;</span></span><span class="line"><span class="cl">-------------+------+-----------+-------------+--------------+-----------+-------------+-------------+-----------+-------------+------+-----------&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   7 | AMD  |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   5 | Procesadores |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   1 | Componentes |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;  |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &#10;</span></span><span class="line"><span class="cl">(1 row)</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>adjacency-list-ancestors.out</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">p3</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">p4</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="n">p1</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">LEFT</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="n">parent_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="n">category_id</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">LEFT</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="n">p3</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">p3</span><span class="p">.</span><span class="n">parent_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="n">category_id</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">LEFT</span><span class="w"> </span><span class="k">OUTER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="n">p4</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">p4</span><span class="p">.</span><span class="n">parent_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p3</span><span class="p">.</span><span class="n">category_id</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">WHERE</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="n">category_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>adjacency-list-descendants.sql</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl"> category_id | name | parent_id | category_id |&nbsp;&nbsp;&nbsp;&nbsp; name&nbsp;&nbsp;&nbsp;&nbsp; | parent_id | category_id |&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp; | parent_id | category_id | name | parent_id &#10;</span></span><span class="line"><span class="cl">-------------+------+-----------+-------------+--------------+-----------+-------------+-------------+-----------+-------------+------+-----------&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   7 | AMD  |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   5 | Procesadores |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1 |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   1 | Componentes |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;  |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &#10;</span></span><span class="line"><span class="cl">(1 row)</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>adjacency-list-ancestors.out</span>
    </div>
</div>
<p>Para este caso y con consultas recursivas el ejemplo se puede probar con <a href="https://www.docker.com/">Docker</a> y la base de datos PostgreSQL.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">$ docker run --name postgres -e POSTGRES_PASSWORD=password postgres&#10;</span></span><span class="line"><span class="cl">$ docker exec -it postgres /bin/bash&#10;</span></span><span class="line"><span class="cl">root@9e6463f25eaf:/# psql --username=postgres&#10;</span></span><span class="line"><span class="cl">psql (13.1 (Debian 13.1-1.pgdg100+1))&#10;</span></span><span class="line"><span class="cl">Type &#34;help&#34; for help.&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">postgres=#</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-run.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="p">(</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="n">category_id</span><span class="w"> </span><span class="nb">integer</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="n">name</span><span class="w"> </span><span class="nb">character</span><span class="w"> </span><span class="nb">varying</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="n">parent_id</span><span class="w"> </span><span class="nb">integer</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="p">(</span><span class="n">category_id</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">parent_id</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Componentes&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">null</span><span class="p">),</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Placas base&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ATX&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ITX&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Procesadores&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Intel&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">),</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;AMD&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">),</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Memoria RAM&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Almacenamiento SSD&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Tarjetas gr치ficas&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">),</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;NVIDIA&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">),</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;AMD&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>insert-data.sql</span>
    </div>
</div>
<h4 id="consultas-recursivas">Consultas recursivas</h4>
<p>Las otras implementaciones est치n originadas a la limitaci칩n del modelo relacional y del lenguaje SQL. En las 칰ltimas versiones de las bases de datos el lenguaje SQL soporta consultas recursivas o <em>recursive queries</em> con las que implementar la sencilla soluci칩n de <em>adjacency list</em> sin sus desventajas. <a href="https://www.mysql.com/">MySQL</a> soporta consultas recursivas desde la versi칩n 8 y <a href="https://www.postgresql.org/">PostgreSQL</a> ya era posible en la versi칩n 9.</p>
<p>Las consultas para obtener los ascendientes y los descendientes son las siguientes.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">WITH</span><span class="w"> </span><span class="k">RECURSIVE</span><span class="w"> </span><span class="n">ancestors</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">SELECT</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">category_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">UNION</span><span class="w"> </span><span class="k">ALL</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">SELECT</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">depth</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ancestors</span><span class="w"> </span><span class="n">a</span><span class="w"> &#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">INNER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">parent_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">category_id</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ancestors</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">category_id</span><span class="p">;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>recursive-queries-ancestors.sql</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl"> category_id |&nbsp;&nbsp;&nbsp;&nbsp; name&nbsp;&nbsp;&nbsp;&nbsp; | parent_id&#10;</span></span><span class="line"><span class="cl">-------------+--------------+----------&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   1 | Componentes  |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  &#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   5 | Procesadores |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   7 | AMD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&#10;</span></span><span class="line"><span class="cl">(3 rows)</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>recursive-queries-ancestors.out</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">WITH</span><span class="w"> </span><span class="k">RECURSIVE</span><span class="w"> </span><span class="n">descendants</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="p">(</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">SELECT</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">category_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">UNION</span><span class="w"> </span><span class="k">ALL</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">SELECT</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="o">*</span><span class="k">FROM</span><span class="w"> </span><span class="n">descendants</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">INNER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">category_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">parent_id</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w"> &#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">descendants</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">category_id</span><span class="p">;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>recursive-queries-descendants.sql</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl"> category_id |&nbsp;&nbsp;&nbsp;&nbsp; name&nbsp;&nbsp;&nbsp;&nbsp; | parent_id&#10;</span></span><span class="line"><span class="cl">-------------+--------------+----------&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   5 | Procesadores |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   6 | Intel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   7 | AMD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&#10;</span></span><span class="line"><span class="cl">(3 rows)</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>recursive-queries-descendants.out</span>
    </div>
</div>
<h4 id="closure-table">Closure Table</h4>
<p>Cuando la base de datos no soporta consultas recursivas una soluci칩n alternativa es la de <em>closure table</em>, esta se basa en guardar las relaciones entre los nodos en una tabla adicional, se guardan la relaci칩n de un nodo con todos sus descendientes o las de un nodo con todos sus ascendientes adem치s de consigo mismo.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products_categories</span><span class="p">;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&#10;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>closure-table-data-1.sql</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">category_id | name&#10;</span></span><span class="line"><span class="cl">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Componentes&#10;</span></span><span class="line"><span class="cl">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Placas base&#10;</span></span><span class="line"><span class="cl">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | ATX&#10;</span></span><span class="line"><span class="cl">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | ITX&#10;</span></span><span class="line"><span class="cl">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Procesadores&#10;</span></span><span class="line"><span class="cl">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Intel &#10;</span></span><span class="line"><span class="cl">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | AMD&#10;</span></span><span class="line"><span class="cl">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Memoria RAM&#10;</span></span><span class="line"><span class="cl">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Almacenamiento SSD&#10;</span></span><span class="line"><span class="cl">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | Tarjetas gr치ficas&#10;</span></span><span class="line"><span class="cl">11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | NVIDIA&#10;</span></span><span class="line"><span class="cl">12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | AMD</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>closure-table-data-1.out</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products_categories_hierarchy</span><span class="p">;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&#10;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>closure-table-data-2.sql</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">ancestor_id | descendant_id&#10;</span></span><span class="line"><span class="cl">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 1&#10;</span></span><span class="line"><span class="cl">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 2&#10;</span></span><span class="line"><span class="cl">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 2&#10;</span></span><span class="line"><span class="cl">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 3&#10;</span></span><span class="line"><span class="cl">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 3&#10;</span></span><span class="line"><span class="cl">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 3&#10;</span></span><span class="line"><span class="cl">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 4&#10;</span></span><span class="line"><span class="cl">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 4&#10;</span></span><span class="line"><span class="cl">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 4&#10;</span></span><span class="line"><span class="cl">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 5&#10;</span></span><span class="line"><span class="cl">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 5&#10;</span></span><span class="line"><span class="cl">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 6&#10;</span></span><span class="line"><span class="cl">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 6&#10;</span></span><span class="line"><span class="cl">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 6&#10;</span></span><span class="line"><span class="cl">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 7&#10;</span></span><span class="line"><span class="cl">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 7&#10;</span></span><span class="line"><span class="cl">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 7&#10;</span></span><span class="line"><span class="cl">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 8&#10;</span></span><span class="line"><span class="cl">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 8&#10;</span></span><span class="line"><span class="cl">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 9&#10;</span></span><span class="line"><span class="cl">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 9&#10;</span></span><span class="line"><span class="cl">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 10&#10;</span></span><span class="line"><span class="cl">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | 10&#10;</span></span><span class="line"><span class="cl">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 11&#10;</span></span><span class="line"><span class="cl">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | 11&#10;</span></span><span class="line"><span class="cl">11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | 11&#10;</span></span><span class="line"><span class="cl">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | 12&#10;</span></span><span class="line"><span class="cl">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | 12&#10;</span></span><span class="line"><span class="cl">12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | 12</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>closure-table-data-2.out</span>
    </div>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/las-formas-de-guardar-relaciones-jerarquicas-en-bases-de-datos-relacionales/images/closure-table-hierarchy_hu3a1de4842cd1d2e4851fbe0449ed6601_62863_2560x1440_fit_box_3.png" data-gallery="" title="Esquema de las relaciones entre los nodos"><img src="https://picodotdev.github.io/blog-bitix/2020/11/las-formas-de-guardar-relaciones-jerarquicas-en-bases-de-datos-relacionales/images/closure-table-hierarchy_hu3a1de4842cd1d2e4851fbe0449ed6601_62863_300x200_fit_box_3.png" width="243" height="200" alt="Esquema de las relaciones entre los nodos" title="Esquema de las relaciones entre los nodos"  class="lozad "></a></p>
<figcaption>Esquema de las relaciones entre los nodos</figcaption>
</figure>
</div>
<p>En este caso las consultas de b칰squeda son eficientes, las de inserci칩n son sencillas y hay integridad referencial. Esta soluci칩n permite a la misma fila formar parte de varias estructuras jer치rquicas al mismo tiempo. Su desventaja es que requiere una tabla adicional.</p>
<p>Las consultas para obtener los ascendientes, los descendientes son las siguientes.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">p</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">INNER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">products_categories_hierachy</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">product_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="n">ancestor_id</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">WHERE</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="n">descendant_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>closure-table-ancestors.sql</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">p</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">INNER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">products_categories_hierarchy</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">product_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="n">descendant_od</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">WHERE</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="n">ancestor_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>closure-table-descendants.sql</span>
    </div>
</div>
<p>La de inserci칩n.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="p">(</span><span class="n">category_id</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">parent_id</span><span class="p">)</span><span class="w"> </span><span class="k">VALUES</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ARM&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">null</span><span class="p">);</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">products_categories_hierarchy</span><span class="w"> </span><span class="p">(</span><span class="n">ancestor</span><span class="p">,</span><span class="w"> </span><span class="n">descendant</span><span class="p">)</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">SELECT</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="n">ancestor_id</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">products_categories_hierarchy</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">h</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">WHERE</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="n">descendant_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">UNION</span><span class="w"> </span><span class="k">ALL</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">SELECT</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="p">;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>closure-table-insert.sql</span>
    </div>
</div>
<p>Y para eliminar una rama del 치rbol.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">products_categories_hierarchy</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">WHERE</span><span class="w"> </span><span class="n">descendant_id</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">descendant_id</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">FROM</span><span class="w"> </span><span class="n">products_categories_hierarchy</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">WHERE</span><span class="w"> </span><span class="n">ancestor_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="p">);</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>closure-table-delete-subtree.sql</span>
    </div>
</div>
<h3 id="otras-implementaciones">Otras implementaciones</h3>
<p>Estas otras soluciones son v치lidas para implementar estructuras jer치rquicas en bases de datos relacionales. aunque en algunos aspectos con desventajas sobre las recomendadas de consultas recursivas si est치n soportadas por la base de datos o la soluci칩n de <em>closure table</em>.</p>
<h4 id="path-enumeration">Path Enumeration</h4>
<p>La soluci칩n <em>path enumeration</em> se basa en a침adir una columna que contiene en una cadena la colecci칩n de identificadores de sus ascendientes incluido el propio nodo.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products_categories</span><span class="p">;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&#10;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>path-enumeration-data.sql</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">category_id | name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | path_enumeration&#10;</span></span><span class="line"><span class="cl">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Componentes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1,&#10;</span></span><span class="line"><span class="cl">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Placas base&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1,2,&#10;</span></span><span class="line"><span class="cl">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | ATX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1,2,3,&#10;</span></span><span class="line"><span class="cl">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | ITX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1,2,4,&#10;</span></span><span class="line"><span class="cl">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Procesadores&nbsp;&nbsp;&nbsp;&nbsp;   | 1,5,&#10;</span></span><span class="line"><span class="cl">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Intel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | 1,5,6,&#10;</span></span><span class="line"><span class="cl">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | AMD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1,5,7,&#10;</span></span><span class="line"><span class="cl">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Memoria RAM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1,8,&#10;</span></span><span class="line"><span class="cl">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Almacenamiento SSD | 1,9,&#10;</span></span><span class="line"><span class="cl">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | Tarjetas gr치ficas  | 1,10,&#10;</span></span><span class="line"><span class="cl">11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | NVIDIA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 1,10,11,&#10;</span></span><span class="line"><span class="cl">12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | AMD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1,10,12,</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>path-enumeration-data.out</span>
    </div>
</div>
<p>Su desventaja es que al igual que la soluci칩n de <em>nested set</em> no ofrece integridad referencial en los identificadores incluidos en la cadena que guarda la jerarqu칤a. Sin embargo, las consultas para obtener los ascendientes, descendientes y realizar una inserci칩n son sencillas.</p>
<p>Las consultas para obtener los ascendientes y los descendientes.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">p</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">WHERE</span><span class="w"> </span><span class="s1">&#39;1,5,7,&#39;</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">path</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;%&#39;</span><span class="p">;</span><span class="w">&#10;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>path-enumeration-ancestors.sql</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">p</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">WHERE</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">path</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;1,5,&#39;</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s1">&#39;%&#39;</span><span class="p">;</span><span class="w">&#10;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>path-enumeration-descendants.sql</span>
    </div>
</div>
<h4 id="nested-set">Nested Set</h4>
<p>La soluci칩n de <em>nested set</em> es una soluci칩n a las limitaciones del modelo relacional para guardar relaciones jer치rquicas. Se basa en a침adir a la tabla dos nuevos campos con el rango de nodos contenidos en el nivel inferior.</p>
<p>Esta soluci칩n tambi칠n tiene un modelo de datos sencillo, no requiere tablas adicionales, es f치cil de a침adir un nuevo nodo a la jerarqu칤a y las consultas para buscar los ascendientes y descendientes son r치pidas.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products_categories</span><span class="p">;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&#10;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>nested-set-data.sql</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">category_id | name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | left | right&#10;</span></span><span class="line"><span class="cl">1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Componentes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 1&nbsp;&nbsp;&nbsp;&nbsp;| 25&#10;</span></span><span class="line"><span class="cl">2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Placas base&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 2&nbsp;&nbsp;&nbsp;&nbsp;| 7&#10;</span></span><span class="line"><span class="cl">3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | ATX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 3&nbsp;&nbsp;&nbsp;&nbsp;| 4&#10;</span></span><span class="line"><span class="cl">4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | ITX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 5&nbsp;&nbsp;&nbsp;&nbsp;| 6&#10;</span></span><span class="line"><span class="cl">5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Procesadores&nbsp;&nbsp;&nbsp;&nbsp;   | 8   | 14&#10;</span></span><span class="line"><span class="cl">6&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Intel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | 10   | 11&#10;</span></span><span class="line"><span class="cl">7&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | AMD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 12   | 13&#10;</span></span><span class="line"><span class="cl">8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Memoria RAM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 15   | 16&#10;</span></span><span class="line"><span class="cl">9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   | Almacenamiento SSD | 17   | 18&#10;</span></span><span class="line"><span class="cl">10&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | Tarjetas gr치ficas  | 19   | 24&#10;</span></span><span class="line"><span class="cl">11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | NVIDIA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | 20   | 21&#10;</span></span><span class="line"><span class="cl">12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  | AMD&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 22   | 23&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>nested-set-data.out</span>
    </div>
</div>
<p>Sus desventajas es que no mantiene la integridad referencial. Es m치s adecuada cuando la estructura de datos no cambia con frecuencia ya que las inserciones y eliminaciones requieren actualizar los valores de los rangos de gran cantidad de nodos. Si se inserta un nuevo nodo en la categor칤a de procesadores, por ejemplo ARM, su <em>left</em> y <em>right</em> ser치n 14 y 15 y a todos los <em>right</em> mayor o igual que 14 hay que sumarle m치s 2.</p>
<p>Para hacer eficientes las consultas que busque nodos inmediatamente inferiores a un determinado nodo requiere a침adir una una columna adicional para guardar el nivel del nodo.</p>
<p>Las consultas para obtener los ascendientes, los descendientes y de inserci칩n de un nodo son las siguientes.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">p1</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">INNER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="k">left</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="k">left</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="k">right</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">WHERE</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="n">category_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>nested-set-ancestors.sql</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">products_categories</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">p1</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">INNER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">products_categories_hierachy</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">p2</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="k">left</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="k">left</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="k">right</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="k">WHERE</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="n">category_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>nested-set-descendants.sql</span>
    </div>
</div>
<h3 id="c칰al-es-la-mejor-soluci칩n-para-estructuras-jer치rquicas-en-bases-de-datos-relacionales">쮺칰al es la mejor soluci칩n para estructuras jer치rquicas en bases de datos relacionales?</h3>
<p>Si la base de datos soporta consultas recursivas la mejor soluci칩n para estructuras jer치rquicas en bases de datos relacionales es la de consultas recursivas. Si la base de datos no soporta consultas recursivas la soluci칩n de <em>closure table</em> ofrece integridad referencial y es sencilla.</p>
<p><em>Nested set</em> es adecuada solo sin la estructura de datos jer치rquica no cambia con frecuencia y la de <em>adjacency list</em> sin consultas recursivas es adecuada si el rendimiento no es significativo para la aplicaci칩n y el nivel de profundidad m치ximo de la estructura es conocido y est치 limitado a unos pocos.</p>
<p>Esta es una peque침a comparaci칩n entre cada una de las soluciones en su dificultad de implementaci칩n y si soporta integridad referencial.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/las-formas-de-guardar-relaciones-jerarquicas-en-bases-de-datos-relacionales/images/hierarchy-comparation_huec25234624a11d02906af4d3ecdf7887_90792_2560x1440_fit_box_3.png" data-gallery="" title="Comparaci칩n entre las diferentes soluciones"><img src="https://picodotdev.github.io/blog-bitix/2020/11/las-formas-de-guardar-relaciones-jerarquicas-en-bases-de-datos-relacionales/images/hierarchy-comparation_huec25234624a11d02906af4d3ecdf7887_90792_600x450_fit_box_3.png" width="600" height="144" alt="Comparaci칩n entre las diferentes soluciones" title="Comparaci칩n entre las diferentes soluciones"  class="lozad "></a></p>
<figcaption>Comparaci칩n entre las diferentes soluciones</figcaption>
</figure>
</div>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Adjacency_list">Adjacency list</a></li>
<li><a href="https://en.wikipedia.org/wiki/Nested_set_model">Nested set model</a></li>
<li><a href="https://en.wikipedia.org/wiki/Hierarchical_and_recursive_queries_in_SQL">Hierarchical and recursive queries in SQL</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="planeta-codigo"/>
            
                <category term="programacion"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/11/5-formas-de-implementar-el-patron-singleton-en-java/</id>
        <title>5 formas de implementar el patr칩n Singleton en Java</title>
        <updated>2020-11-21T23:00:00+01:00</updated>
        <published>2020-11-21T23:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/11/5-formas-de-implementar-el-patron-singleton-en-java/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>El patr칩n <em>Singleton</em> es un patr칩n de dise침o muy utilizado, este patr칩n garantiza que de una clase solo haya una 칰nica instancia. En Java hay varias formas de implementar el patr칩n, algunas son m치s sencillas otras no son <em>thread-safe</em> o con evaluaci칩n <em>lazy</em>.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/java.svg" width="200" height="366" alt="Java" title="Java"  class=""></p>
</div>
<p>Los lenguajes orientados a objetos modelan los programas utilizando clases, estas clases contienen tanto los datos como las operaciones que tratan esos datos que solo pueden ser modificados a trav칠s de esas operaciones. Este principio de encapsulaci칩n tiene como beneficio garantizar que los datos no sean modificados por cualquier otro c칩digo distinto a las operaciones y que los datos no queden en un estado inconsistente.</p>
<p>En un lenguaje orientado a objetos de cada clase se crean tantas instancias u objetos como se necesiten en el programa. En algunos casos de una clase en concreto s칩lo se desea que haya una 칰nica instancia, normalmente hacer que de una clase en concreto haya una 칰nica instancia se implementa con el patr칩n <em>Singleton</em>.</p>
<p>En Java hay varias formas de implementar el patr칩n <em>Singleton</em>, aunque todas son posibles cada una tiene diferentes propiedades, algunas tiene m치s beneficios sin las debilidades de otras. En este art칤culo incluyo 5 formas de c칩mo implementar el patr칩n <em>Singleton</em> con un ejemplo de c칩digo de cada una de ellas e indico cuales de ellas son las mejores opciones de entre estas.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del art칤culo</h2><toc></toc></div>
<h3 id="qu칠-es-el-patr칩n-singleton">Qu칠 es el patr칩n Singleton</h3>
<p>El <a href="https://en.wikipedia.org/wiki/Singleton_pattern">patr칩n Singleton</a> es un patr칩n de dise침o que restringe a una 칰nica instancia de objeto el n칰mero instancias de una clase que se pueden crear durante la ejecuci칩n del programa. Es 칰til en ciertas clases donde su 칰nica instancia es compartida en todo el c칩digo como si de una variable global se tratase. Si el m칠todo que permite obtener la referencia a la instancia es un m칠todo est치tico la instancia es como si fuese una variable global dado que es posible acceder a ella desde cualquier parte del programa siempre que lo permitan <a href="https://picodotdev.github.io/blog-bitix/2020/01/los-modificadores-de-acceso-de-clases-propiedades-y-metodos-en-java/">los modificadores de acceso</a>.</p>
<p>Los casos de uso de las clases <em>singleton</em> son mantener un estado compartido, permitir inicializaci칩n bajo demanda o <em>lazy</em>, tambi칠n es usado en otros patrones como el patr칩n <em>abstract factory</em>, <em>factory method</em>, <a href="https://picodotdev.github.io/blog-bitix/2015/09/ejemplo-del-patron-de-diseno-builder/">el patr칩n <em>builder</em></a> o <em>facade</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/5-formas-de-implementar-el-patron-singleton-en-java/images/singleton-pattern_hub16f4295a5a92f817e50c27d51e7a139_58421_2560x1440_fit_box_3.png" data-gallery="" title="Diagrama de clases del patr칩n de dise침o Singleton"><img src="https://picodotdev.github.io/blog-bitix/2020/11/5-formas-de-implementar-el-patron-singleton-en-java/images/singleton-pattern_hub16f4295a5a92f817e50c27d51e7a139_58421_650x450_fit_box_3.png" width="650" height="390" alt="Diagrama de clases del patr칩n de dise침o Singleton" title="Diagrama de clases del patr칩n de dise침o Singleton"  class="lozad "></a></p>
<figcaption>Diagrama de clases del patr칩n de dise침o Singleton</figcaption>
</figure>
</div>
<h3 id="formas-de-implementar-el-patr칩n-singleton-en-java">Formas de implementar el patr칩n Singleton en Java</h3>
<p>En Java hay varias formas de implementar el patr칩n <em>Singleton</em> en una clase, el objetivo y resultado es el mismo pero la implementaci칩n hace que tengan algunas diferencias como que no sea <em>thread-safe</em>, no sea <em>lazy</em>, otras implementaciones igualmente sencillas son <em>thread-safe</em> y <em>lazy</em> al mismo tiempo.</p>
<p>Esta son las implementaciones m치s comunes, dependiendo de las necesidades de la aplicaci칩n todas son v치lidas simplemente la implementaci칩n con la clase <em>inner</em> y <em>enum</em> son las que proporcionan <em>thread-safe</em> y evaluaci칩n <em>lazy</em> que algunas de las otras no tienen.</p>
<h4 id="forma-tradicional">Forma tradicional</h4>
<p>La forma tradicional de implementar el patr칩n <em>Singleton</em> es utilizando una variable est치tica privada para guardar la referencia de la 칰nica instancia, hacer el constructor privado de modo que el resto de clases no tengan la posibilidad de crear m치s instancias y un m칠todo que crea la instancia si no ha sido creada con anterioridad con una sentencia condicional y devuelve la referencia si ya existe la instancia.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Singleton</span> <span class="n">instance</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">private</span> <span class="nf">Singleton</span><span class="o">()</span> <span class="o">{}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="k">if</span> <span class="o">(</span><span class="n">instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="k">return</span> <span class="n">instance</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">   <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Singleton-1.java</span>
    </div>
</div>
<p>Esta implementaci칩n es muy utilizada, aunque es <em>lazy</em> ya que la instancia no se crea hasta que se realiza la primera solicitud su inconveniente es que no es <em>thread-safe</em> si varios hilos intentan obtener una instancia cuando a칰n no hay ninguna creada.</p>
<h4 id="m칠todo-sincronizado">M칠todo sincronizado</h4>
<p>Para implementar el patr칩n <em>Singleton</em> con la propiedad de que sea <em>thread-safe</em> en el caso anterior la forma m치s sencilla es hacer el m칠todo <em>synchronized</em> de modo que Java garantiza que si varios hilos intentan obtener la referencia de la instancia cuando a칰n no est치 creada s칩lo uno de ellos la cree.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Singleton</span> <span class="n">instance</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">private</span> <span class="nf">Singleton</span><span class="o">()</span> <span class="o">{}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="kd">synchronized</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="k">if</span> <span class="o">(</span><span class="n">instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="k">return</span> <span class="n">instance</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">   <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Singleton-2.java</span>
    </div>
</div>
<p>El inconveniente de esta implementaci칩n con <em>synchronized</em> hace que el m칠todo para obtener la instancia sea m치s lento debido a la propia sincronizaci칩n y a la contenci칩n que se produce si hay m칰ltiples hilos en ejecuci칩n que hacen uso del m칠todo, si el rendimiento es una consideraci칩n importante hay otras formas de implementar el patr칩n <em>Singleton</em> no mucho m치s dif칤ciles que tienen mejor rendimiento.</p>
<h4 id="variable-est치tica-final">Variable est치tica final</h4>
<p>La siguiente forma de implementar el patr칩n <em>Singleton</em> es crear la instancia en la inicializaci칩n de la clase ya sea como una asignaci칩n en la variable o con el constructor est치tico.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Singleton</span> <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">private</span> <span class="nf">Singleton</span><span class="o">()</span> <span class="o">{}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="k">return</span> <span class="n">instance</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">   <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Singleton-3a.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Singleton</span> <span class="n">instance</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">static</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">   <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">private</span> <span class="nf">Singleton</span><span class="o">()</span> <span class="o">{}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="k">return</span> <span class="n">instance</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">   <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Singleton-3b.java</span>
    </div>
</div>
<p>Esta implementaci칩n no requiere utilizar una sentencia condicional <em>if</em> para comprobar si la instancia ya ha sido creada y es <em>thread-safe</em>, sin embargo, no es <em>lazy</em> ya que la instancia se crea cuando se inicializa la clase antes de que se haga el primer uso.</p>
<h4 id="clase-_inner_">Clase <em>inner</em></h4>
<p>Esta implementaci칩n es <em>thread-safe</em> y tiene evaluaci칩n <em>lazy</em> que algunas de las anteriores no tienen. Lo que hace es utilizar una clase anidada o <em>inner</em> para mantener la referencia a la instancia de la clase que la contiene.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">SingletonHolder</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">   <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">private</span> <span class="nf">Singleton</span><span class="o">()</span> <span class="o">{}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">   <span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="nf">getInstance</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="k">return</span> <span class="n">SingletonHolder</span><span class="o">.</span><span class="na">instance</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">   <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Singleton-4.java</span>
    </div>
</div>
<p>Este caso tampoco hace uso de la sentencia condicional <em>if</em> y el propio lenguaje Java por la inicializaci칩n de las clases y propiedades <em>static</em> garantiza que es <em>thread-safe</em>.</p>
<h4 id="clases-_enum_">Clases <em>enum</em></h4>
<p>Las clases <em>enum</em> son por definici칩n clases cuyos enumerados son <em>singleton</em> y <em>thread-safe</em>. La particularidad de los <em>enum</em> es que no se pueden crear nuevas instancias adicionales a las que se definan en el c칩digo en tiempo de compilaci칩n, el n칰mero de instancias es constante, por lo dem치s los <em>enum</em> al igual que las clases pueden implementar interfaces, declarar m칠todos y constructores de uso en el propio <em>enum</em>.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span><span class="lnt">8&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">enum</span> <span class="n">Singleton</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">INSTANCE</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Singleton-5.java</span>
    </div>
</div>
<h3 id="conclusi칩n">Conclusi칩n</h3>
<p>Si el Singleton debe extender una clase la mejor opci칩n de crearlo es con la clase <em>inner</em>, la implementaci칩n con una clase <em>enum</em> tambi칠n es v치lida. Estas son las dos implementaciones aconsejadas para implementar el patr칩n <em>Singleton</em>. La forma tradicional sigue siendo muy utilizada con n칰meros ejemplos de c칩digo en art칤culos y es posible utilizarla, sin embargo, dadas sus desventajas es preferible utilizar alguna de las dos aconsejadas que son igual de sencillas de implementar.</p>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="http://www.learn4master.com/algorithms/java-singleton-pattern">Five ways to implement Singleton pattern in Java</a></li>
<li><a href="https://dzone.com/articles/java-singletons-using-enum">Java Singletons Using Enum</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="java"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/</id>
        <title>Autenticaci칩n con OpenID/OAuth en cualquier web con Nginx y de forma nativa con Spring Boot</title>
        <updated>2020-11-20T16:00:00+01:00</updated>
        <published>2020-11-20T16:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>La autenticaci칩n permite identificar a los usuarios en una aplicaci칩n, en muchas es una necesidad para no permitir accesos no autorizados a la informaci칩n que proporcionan o realizar las acciones que ofrecen. Las aplicaciones heredadas o <em>legacy</em> en ocasiones no es posible modificarlas y cuando una organizaci칩n tiene varias aplicaciones gestionar los usuarios en cada una de ellas de forma individual se convierte en un problema. OpenID Connect proporciona la autenticaci칩n en el protocolo OAuth 2, con este protocolo las aplicaciones pueden delegar la autenticaci칩n a un proveedor de autenticaci칩n y ser este la que identifique a los usuarios y los gestione de forma forma centralizada adem치s de proporcionar un inicio de sesi칩n 칰nico o <em>single-sing-on</em> a varias aplicaciones. El servidor web Nginx tiene <em>proxys</em> que permiten a침adir autenticaci칩n OAuth 2 a cualquier servicio web y las aplicaciones de Spring Boot pueden implementarlo de forma nativa.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/oauth.svg" width="200" height="200" alt="OAuth" title="OAuth"  class=""></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/java.svg" width="200" height="366" alt="Java" title="Java"  class=""></p>
</div>
<p>La funcionalidad de autenticaci칩n y autorizaci칩n es b치sica en la mayor칤a de aplicaciones web y servicios REST. La forma de implementar la autenticaci칩n y autorizaci칩n es posible de varias formas. Sin embargo, con los m칠todos anteriores las aplicaciones gestionan sus propios usuarios y cada aplicaci칩n ha de implementar la autenticaci칩n y autorizaci칩n. Otras formas comunes de autenticaci칩n son emplear <a href="https://picodotdev.github.io/blog-bitix/2020/08/configurar-autenticacion-basica-en-los-servidores-web-nginx-y-apache/">autenticaci칩n b치sica en el servidor web</a>, <a href="https://picodotdev.github.io/blog-bitix/2017/06/autenticacion-mutua-de-cliente-y-servidor-con-certificados/">autenticaci칩n mutua entre el servidor y el cliente</a> o con una implementaci칩n espec칤fica en la que una parte importante es <a href="https://picodotdev.github.io/blog-bitix/2015/04/guardar-contrasenas-usando-salted-password-hashing-y-otras-formas-correctas/">guardar las contrase침a de forma segura con salted-password-hashing</a>.</p>
<p>Gestionar los usuarios de en cada una aplicaci칩n se convierte en un problema cuando el n칰mero de aplicaciones y servicios son varios, ya que a lo largo del tiempo hay que dar de alta a los usuarios nuevos y de baja a los usuarios que ya no deben acceder a la aplicaci칩n por ejemplo porque ya no forman parte de una organizaci칩n. Por otro, lado hay aplicaciones heredadas o <em>legacy</em> que no se pueden modificar para a침adirles la autenticaci칩n que necesitan.</p>
<p>Para administrar de forma centralizada los usuarios o credenciales de las aplicaciones y que el sistema de autenticaci칩n y autorizaci칩n sea uno compartido para cualesquiera usuarios y aplicaciones una forma de implementarlo es usando un proveedor que implemente el est치ndar <a href="https://openid.net/connect/">OpenID Connect</a>. Para las aplicaciones heredadas la opci칩n es a침adir un <em>proxy</em> que proteja la aplicaci칩n con autenticaci칩n y en el caso de una aplicaci칩n Java con <a href="https://projects.spring.io/spring-boot/">Spring Boot</a> el proyecto de <a href="https://spring.io/projects/spring-security">Spring Security</a> permite a침adir autenticaci칩n f치cilmente para cualquier proveedor de OpenID.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del art칤culo</h2><toc></toc></div>
<h3 id="qu칠-es-openid-connect">Qu칠 es OpenID Connect</h3>
<p>OpenID Connect es una capa de identidad que funciona sobre el <a href="https://oauth.net/">protocolo OAuth</a> 2.0. Permite a los clientes verificar la identidad del usuario bas치ndose en la autenticaci칩n realizada por el servidor de autorizaci칩n, as칤 como obtener informaci칩n b치sica del perfil del usuario. El protocolo funciona con principios similares a REST lo que lo hace interoperable con cualquier sistema.</p>
<p>Son varios los proveedores que ofrecen autenticaci칩n con sus cuentas, algunos de ellos son <a href="https://www.google.es/">Google</a>, <a href="https://github.com/">GitHub</a>, <a href="https://azure.microsoft.com/en-us/services/active-directory/">Azure Active Directory</a>, <a href="https://aws.amazon.com/es/cognito/">AWS Cognito</a> u <a href="https://www.okta.com/">Okta</a>. Para implementar el servicio de autenticaci칩n y autorizaci칩n OAuth gestionando sin depender de esas otras organizaciones est치 <a href="https://www.keycloak.org/">Keycloak</a>.</p>
<h3 id="autenticaci칩n-openidoauth-con-nginx">Autenticaci칩n OpenID/OAuth con Nginx</h3>
<p>Para a침adir autenticaci칩n OpenId Connect en una aplicaci칩n web se suele configurar con el servidor web actuando de <em>proxy</em> y un <em>proxy</em> de OAuth. La funci칩n del servidor web y el <em>proxy</em> es requerir que el usuario est칠 autenticado en el proveedor de autenticaci칩n. De este modo entre el usuario y la p치gina web est치n el servidor web, el intermediario de OAuth y el proveedor de autenticaci칩n, el esquema es el siguiente.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/images/oauth2-proxy_hu603f079a424ac97f6e7f6d862854d024_27502_2560x1440_fit_box_3.png" data-gallery="" title="Modos de funcionamiento de oauth2-proxy (con y sin Nginx)"><img src="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/images/oauth2-proxy_hu603f079a424ac97f6e7f6d862854d024_27502_300x200_fit_box_3.png" width="300" height="192" alt="Modos de funcionamiento de oauth2-proxy (con y sin Nginx)" title="Modos de funcionamiento de oauth2-proxy (con y sin Nginx)"  class="lozad "></a></p>
<figcaption>Modos de funcionamiento de oauth2-proxy (con y sin Nginx)</figcaption>
</figure>
</div>
<p>Con el servidor web <a href="https://nginx.org/">Nginx</a> dos intermediarios o <em>proxys</em> que proporcionan autenticaci칩n OpenID Connect son <a href="https://oauth2-proxy.github.io/oauth2-proxy/">oauth2-proxy</a> y <a href="https://github.com/vouch/vouch-proxy">vouch-proxy</a>. Tanto <a href="https://oauth2-proxy.github.io/oauth2-proxy/">oauth2-proxy</a> y <a href="https://github.com/vouch/vouch-proxy">vouch-proxy</a> son dos servicios que le indican a Nginx si el usuario est치 autenticado usando la directiva <em>auth_request</em> de Nginx. Estos <em>proxys</em> simplemente devuelven como respuesta un c칩digo de estado <em>202 Accepted</em> o <em>401 Unauthorized</em> para indicarle a Nginx si hay que realizar la autenticaci칩n, las otras directivas de configuraci칩n son para establecer cabeceras con las que es posible entre otras cosas indicarle a la aplicaci칩n web final cual es el usuario autenticado. En caso de que haya que autenticar al usuario el <em>proxy</em> de OAuth redirige al proveedor de autenticaci칩n.</p>
<p>En el caso de <a href="https://oauth2-proxy.github.io/oauth2-proxy/">oauth2-proxy</a> la configuraci칩n consiste en hacer de <em>proxy</em> para la aplicaci칩n web en la ubicaci칩n <em>/</em> y requerir autenticaci칩n con el <em>endpoint</em> <em>/oauth2/</em> y <em>/oauth2/auth</em> que hace de <em>proxy</em> para oauth2-proxy. Buena parte de esa <a href="https://oauth2-proxy.github.io/oauth2-proxy/docs/configuration/overview#configuring-for-use-with-the-nginx-auth_request-directive">configuraci칩n de <em>proxy</em></a> son el tratamiento de las cabeceras con las que se obtiene el nombre de usuario autenticado y correo electr칩nico.</p>
<p>Este es la configuraci칩n para Nginx.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">user</span>  <span class="s">nginx</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="k">worker_processes</span>  <span class="mi">1</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">error_log</span>  <span class="s">/var/log/nginx/error.log</span> <span class="s">warn</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="k">pid</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s">/var/run/nginx.pid</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">events</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">worker_connections</span>  <span class="mi">1024</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="p">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">http</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">resolver</span> <span class="mi">127</span><span class="s">.0.0.1</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">include</span> <span class="s">/etc/nginx/mime.types</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">default_type</span> <span class="s">application/octet-stream</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">sendfile</span> <span class="no">on</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">keepalive_timeout</span> <span class="mi">65</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">include</span> <span class="s">/etc/nginx/conf.d/*.conf</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="p">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>nginx.conf</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span><span class="lnt">43&#10;</span><span class="lnt">44&#10;</span><span class="lnt">45&#10;</span><span class="lnt">46&#10;</span><span class="lnt">47&#10;</span><span class="lnt">48&#10;</span><span class="lnt">49&#10;</span><span class="lnt">50&#10;</span><span class="lnt">51&#10;</span><span class="lnt">52&#10;</span><span class="lnt">53&#10;</span><span class="lnt">54&#10;</span><span class="lnt">55&#10;</span><span class="lnt">56&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">server_name</span> <span class="s">nginx.127.0.0.1.xip.io</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">root</span> <span class="s">/var/www/html/</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">location</span> <span class="s">/oauth2/</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_pass</span> <span class="s">http://oauth2:4180</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">Host</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$host</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">X-Real-IP</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   <span class="nv">$remote_addr</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">X-Scheme</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$scheme</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">X-Auth-Request-Redirect</span> <span class="nv">$scheme://$host$request_uri</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">location</span> <span class="p">=</span> <span class="s">/oauth2/auth</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_pass</span>&nbsp;&nbsp;&nbsp;&nbsp;   <span class="s">http://oauth2:4180</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_pass_request_body</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   <span class="no">off</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">Content-Length</span>   <span class="s">&#34;&#34;</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">Host</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="nv">$host</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">X-Real-IP</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$remote_addr</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">X-Scheme</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="nv">$scheme</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">X-Auth-Request-Redirect</span> <span class="nv">$scheme://$host$request_uri</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">auth_request</span> <span class="s">/oauth2/auth</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">error_page</span> <span class="mi">401</span> <span class="p">=</span> <span class="s">/oauth2/start</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">auth_request_set</span> <span class="nv">$user</span>   <span class="nv">$upstream_http_x_auth_request_user</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">auth_request_set</span> <span class="nv">$email</span>  <span class="nv">$upstream_http_x_auth_request_email</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">auth_request_set</span> <span class="nv">$token</span>  <span class="nv">$upstream_http_x_auth_request_access_token</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">auth_request_set</span> <span class="nv">$auth_cookie</span> <span class="nv">$upstream_http_set_cookie</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">auth_request_set</span> <span class="nv">$auth_cookie_name_upstream_1</span> <span class="nv">$upstream_cookie_auth_cookie_name_1</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">X-User</span>  <span class="nv">$user</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">X-Email</span> <span class="nv">$email</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">X-Access-Token</span> <span class="nv">$token</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">add_header</span> <span class="s">Set-Cookie</span> <span class="nv">$auth_cookie</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">if</span> <span class="s">(</span><span class="nv">$auth_cookie</span> <span class="p">~</span><span class="sr">*</span> <span class="s">&#34;(</span><span class="p">;</span> <span class="kn">.*)&#34;)</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">set</span> <span class="nv">$auth_cookie_name_0</span> <span class="nv">$auth_cookie</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">set</span> <span class="nv">$auth_cookie_name_1</span> <span class="s">&#34;auth_cookie_name_1=</span><span class="nv">$auth_cookie_name_upstream_1$1&#34;</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">if</span> <span class="s">(</span><span class="nv">$auth_cookie_name_upstream_1</span><span class="s">)</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">add_header</span> <span class="s">Set-Cookie</span> <span class="nv">$auth_cookie_name_0</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">add_header</span> <span class="s">Set-Cookie</span> <span class="nv">$auth_cookie_name_1</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">root</span>   <span class="s">/usr/share/nginx/html</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">index</span>  <span class="s">index.html</span> <span class="s">index.htm</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="p">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>nginx.127.0.0.1.xip.io.conf</span>
    </div>
</div>
<p>El servicio de <em>proxy</em> OAuth debe ubicarse en un subdominio de la p치gina a autenticar ya que para esto se utilizan <em>cookies</em>.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-nginx" data-lang="nginx"><span class="line"><span class="cl"><span class="k">server</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">listen</span> <span class="mi">80</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">server_name</span> <span class="s">oauth2.nginx.127.0.0.1.xip.io</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">location</span> <span class="s">/oauth2/callback</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_pass</span> <span class="s">http://oauth2:4180</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">Host</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$host</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">X-Real-IP</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   <span class="nv">$remote_addr</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">X-Scheme</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">$scheme</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">proxy_set_header</span> <span class="s">X-Auth-Request-Redirect</span> <span class="nv">$scheme://$host$request_uri</span><span class="p">;</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">location</span> <span class="s">/</span> <span class="p">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kn">return</span> <span class="mi">302</span> <span class="s">http://nginx.127.0.0.1.xip.io</span><span class="p">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="p">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>oauth2.nginx.127.0.0.1.xip.io.conf</span>
    </div>
</div>
<p>Tanto <em>oauth2-proxy</em> como <em>vouch-proxy</em> tienen im치genes de <a href="https://www.docker.com/">Docker</a> para su f치cil uso sin necesidad de instalar nada en la m치quina local salvo el propio Docker (<a href="https://hub.docker.com/r/bitnami/oauth2-proxy">imagen docker oauth2-proxy</a>, <a href="https://hub.docker.com/r/voucher/vouch-proxy">imagen docker vouch-proxy</a>). Ambos <em>proxys</em> requieren cierta configuraci칩n indicada en la <a href="https://oauth2-proxy.github.io/oauth2-proxy/docs/configuration/overview">documentaci칩n del archivo de configuraci칩n</a>, las propiedades son desde el puerto en el que escucha el servicio del <em>proxy</em> las peticiones desde Nginx, configuraci칩n de TLS, proveedor de autenticaci칩n, direcci칩n de redirecci칩n despu칠s de la autenticaci칩n, configuraci칩n de <em>logging</em>, por supuesto el <em>client-id</em> y el <em>client-secret</em> obtenidos del proveedor de autenticaci칩n, los correos electr칩nicos considerados como v치lidos y configuraci칩n de la <em>cookie</em> que mantiene la autenticaci칩n. Tambi칠n permite guardar la informaci칩n de la sesi칩n en <a href="https://redis.io/">Redis</a> en vez de en una <em>cookie</em>.</p>
<p>La configuraci칩n del <em>oauth-proxy</em>.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">http_address = &#34;0.0.0.0:4180&#34;&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">redirect_url = &#34;http://oauth2.nginx.127.0.0.1.xip.io/oauth2/callback&#34;&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">skip_provider_button = true&#10;</span></span><span class="line"><span class="cl">pass_host_header = true&#10;</span></span><span class="line"><span class="cl">pass_access_token = true&#10;</span></span><span class="line"><span class="cl">pass_authorization_header = true&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">upstreams = [&#34;http://nginx.127.0.0.1.xip.io&#34;]&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">provider = &#34;google&#34;&#10;</span></span><span class="line"><span class="cl">client_id = &#34;949347437228-c2rqkjknbfq10jak1ugccfffocaut7vp.apps.googleusercontent.com&#34;&#10;</span></span><span class="line"><span class="cl">client_secret = &#34;AJUHi_m8bqCWI_FY9aHGLLcu&#34;&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">authenticated_emails_file = &#34;/etc/oauth2-proxy-authenticated-emails.cfg&#34;&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">cookie_name = &#34;_oauth2_proxy&#34;&#10;</span></span><span class="line"><span class="cl">cookie_secret = &#34;83L36igQrdxAWRxfajQXnzj8WMo9jNKe&#34;&#10;</span></span><span class="line"><span class="cl">cookie_samesite = &#34;lax&#34;&#10;</span></span><span class="line"><span class="cl">cookie_secure = false&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>oauth2-proxy.cfg</span>
    </div>
</div>
<p>Y en este caso las direcciones de correos electr칩nicas o usuarios permitidos en la aplicaci칩n.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">pico.dev@gmail.com&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>oauth2-proxy-authenticated-emails.cfg</span>
    </div>
</div>
<p>Al acceder a la p치gina en el dominio <em>nginx.127.0.0.1.xip.io</em> se solicita el inicio de sesi칩n o selecci칩n de cuenta.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/images/autenticacion-google-1_hu502e47781c1c58bf931e8b4daf614b22_62390_2560x1440_fit_box_3.png" data-gallery="" title="Autenticaci칩n con cuenta de Google"><img src="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/images/autenticacion-google-1_hu502e47781c1c58bf931e8b4daf614b22_62390_300x200_fit_box_3.png" width="259" height="200" alt="Autenticaci칩n con cuenta de Google" title="Autenticaci칩n con cuenta de Google"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/images/autenticacion-google-2_hu635721abba76b76948522330ef1a0fb8_58216_2560x1440_fit_box_3.png" data-gallery="" title="Autenticaci칩n con cuenta de Google"><img src="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/images/autenticacion-google-2_hu635721abba76b76948522330ef1a0fb8_58216_300x200_fit_box_3.png" width="269" height="200" alt="Autenticaci칩n con cuenta de Google" title="Autenticaci칩n con cuenta de Google"  class="lozad "></a></p>
<figcaption>Autenticaci칩n con cuenta de Google</figcaption>
</figure>
</div>
<p>Una vez autenticado el usuario se permite el acceso a la p치gina web, en este caso la p치gina por defecto de Nginx, tambi칠n se observa la creaci칩n de la <em>cookie</em> que mantiene la sesi칩n.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/images/nginx-1_hub4b5c06dc3e935800f8b36f482c08147_52146_2560x1440_fit_box_3.png" data-gallery="" title="P치gina web y cookie de sesi칩n"><img src="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/images/nginx-1_hub4b5c06dc3e935800f8b36f482c08147_52146_300x200_fit_box_3.png" width="269" height="200" alt="P치gina web y cookie de sesi칩n" title="P치gina web y cookie de sesi칩n"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/images/nginx-2_hu3c12a4e79c3d921577dead10dd160106_89631_2560x1440_fit_box_3.png" data-gallery="" title="P치gina web y cookie de sesi칩n"><img src="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/images/nginx-2_hu3c12a4e79c3d921577dead10dd160106_89631_300x200_fit_box_3.png" width="269" height="200" alt="P치gina web y cookie de sesi칩n" title="P치gina web y cookie de sesi칩n"  class="lozad "></a></p>
<figcaption>P치gina web y cookie de sesi칩n</figcaption>
</figure>
</div>
<p>Al implementar el ejemplo me he encontrado con dos mensajes de error, <em>OAuth2: unable to obtain CSRF cookie</em> y <em>http: named cookie not present</em>. Para resolver el primero es necesario indicar el par치metro de configuraci칩n <em>cookie-domain</em> que en el momento de realizar el ejemplo solo me ha sido posible indic치ndolo a trav칠s de la l칤nea de comandos no en el archivo de configuraci칩n y para resolver el segundo es necesario que el <em>host</em> del servicio <em>proxy</em> OAuth est칠 en un subdominio del dominio de la p치gina web.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">oauth2</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">bitnami/oauth2-proxy:latest</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">volumes</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s2">&#34;./oauth2-proxy.cfg:/etc/oauth2-proxy.cfg&#34;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s2">&#34;./oauth2-proxy-authenticated-emails.cfg:/etc/oauth2-proxy-authenticated-emails.cfg&#34;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">ports</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s2">&#34;4180:4180&#34;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l">oauth2-proxy --config=/etc/oauth2-proxy.cfg --cookie-domain=&#34;nginx.127.0.0.1.xip.io&#34;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">nginx</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">nginx</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">volumes</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s2">&#34;./nginx.conf:/etc/nginx/nginx.conf:ro&#34;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s2">&#34;./oauth2.nginx.127.0.0.1.xip.io.conf:/etc/nginx/conf.d/oauth2.nginx.127.0.0.1.xip.io.conf:ro&#34;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s2">&#34;./nginx.127.0.0.1.xip.io.conf:/etc/nginx/conf.d/nginx.127.0.0.1.xip.io.conf:ro&#34;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">ports</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span>- <span class="s2">&#34;80:80&#34;</span><span class="w">&#10;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-compose.yml</span>
    </div>
</div>
<h3 id="autenticaci칩n-openidoauth-con-apache">Autenticaci칩n OpenID/OAuth con Apache</h3>
<p>En el caso del servidor web <a href="https://httpd.apache.org/">Apache HTTPD</a> la soluci칩n que he encontrado es usar el m칩dulo <a href="https://www.mod-auth-openidc.org/">mod_auth_openidc</a>.</p>
<h3 id="autenticaci칩n-openid-en-una-aplicaci칩n-spring-boot">Autenticaci칩n OpenID en una aplicaci칩n Spring Boot</h3>
<p>Las aplicaciones de Java que usan <a href="https://projects.spring.io/spring-boot/">Spring Boot</a> a trav칠s de la dependencia de <a href="https://spring.io/projects/spring-security">Spring Security</a> que soporta OpenID Connect con el que a침adir soporte a la aplicaci칩n f치cilmente con un proveedor de autenticaci칩n. En este ejemplo se usa Google como proveedor de autenticaci칩n , <a href="https://www.keycloak.org/">Keycloak</a> es otro <a href="https://picodotdev.github.io/blog-bitix/2016/09/autenticacion-con-oauth-y-keycloak-en-un-servicio-rest-con-jax-rs-y-spring-boot/">proveedor de autenticaci칩n OAuth para autenticar un servicio REST</a>.</p>
<p>El siguiente ejemplo es un servicio de Spring Boot accedido desde el navegador, en caso de que el cliente fuese otra aplicaci칩n o servicio hay que obtener un <em>token</em> con el que poder invocar este servicio.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/10/cliente-de-un-servicio-rest-autenticado-con-oauth-en-java/">Cliente de un servicio REST autenticado con OAuth en Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/09/autenticacion-con-oauth-y-keycloak-en-un-servicio-rest-con-jax-rs-y-spring-boot/">Autenticaci칩n con OAuth y Keycloak en un servicio REST con JAX-RS y Spring Boot</a></li>
</ul>
<p>Primero hay que incluir en el proyecto la dependencia del cliente OAuth2.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-groovy" data-lang="groovy"><span class="line"><span class="cl"><span class="n">plugins</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">id</span> <span class="s1">&#39;java&#39;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">id</span> <span class="s1">&#39;application&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">group</span> <span class="o">=</span> <span class="s1">&#39;io.github.picodotdev.blogbitix.springoauth&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">version</span> <span class="o">=</span> <span class="s1">&#39;0.0.1-SNAPSHOT&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">sourceCompatibility</span> <span class="o">=</span> <span class="s1">&#39;11&#39;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">repositories</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">mavenCentral</span><span class="o">()</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">dependencies</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">implementation</span><span class="o">(</span><span class="n">platform</span><span class="o">(</span><span class="s2">&#34;org.springframework.boot:spring-boot-dependencies:2.4.0&#34;</span><span class="o">))</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">implementation</span><span class="o">(</span><span class="s1">&#39;org.springframework.boot:spring-boot-starter&#39;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">implementation</span><span class="o">(</span><span class="s1">&#39;org.springframework.boot:spring-boot-starter-web&#39;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">implementation</span><span class="o">(</span><span class="s1">&#39;org.springframework.boot:spring-boot-starter-oauth2-client&#39;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">runtimeOnly</span><span class="o">(</span><span class="s1">&#39;com.fasterxml.jackson.core:jackson-databind:2.9.6&#39;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">runtimeOnly</span><span class="o">(</span><span class="s1">&#39;com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.9.6&#39;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">application</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">mainClass</span> <span class="o">=</span> <span class="s1">&#39;io.github.picodotdev.blogbitix.springoauth.Main&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>build.gradle</span>
    </div>
</div>
<p>A침adir la configuraci칩n en la aplicaci칩n para incluir el identificativo del cliente y el secreto del servicio de autenticaci칩n que permite validar la autenticaci칩n.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span><span class="lnt">8&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">spring</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">security</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">oauth2</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;  </span><span class="nt">client</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">registration</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  </span><span class="nt">google</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">client-id</span><span class="p">:</span><span class="w"> </span><span class="m">949347437228</span>-<span class="l">c2rqkjknbfq10jak1ugccfffocaut7vp.apps.googleusercontent.com</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">client-secret</span><span class="p">:</span><span class="w"> </span><span class="l">AJUHi_m8bqCWI_FY9aHGLLcu</span><span class="w">&#10;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>application.yml</span>
    </div>
</div>
<p>La informaci칩n del usuario autenticado se puede obtener con la anotaci칩n <a href="https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/bind/annotation/AuthenticationPrincipal.html">@AuthenticationPrincipal</a> o mediante la clase <a href="https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/core/context/SecurityContextHolder.html">SecurityContextHolder</a>.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.springoauth</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.Collections</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.security.core.annotation.AuthenticationPrincipal</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.security.oauth2.core.oidc.user.OidcUser</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.security.core.Authentication</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.security.core.context.SecurityContextHolder</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.security.oauth2.core.oidc.user.OidcUser</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="nd">@RestController</span>&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainController</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="nf">MainController</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="n">String</span> <span class="nf">hello</span><span class="o">(</span><span class="nd">@AuthenticationPrincipal</span> <span class="n">OidcUser</span> <span class="n">principal</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;Hello %s (%s)&#34;</span><span class="o">,</span> <span class="n">principal</span><span class="o">.</span><span class="na">getUserInfo</span><span class="o">().</span><span class="na">getGivenName</span><span class="o">(),</span> <span class="n">principal</span><span class="o">.</span><span class="na">getUserInfo</span><span class="o">().</span><span class="na">getEmail</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/principal&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="n">OidcUser</span> <span class="nf">getPrincipal</span><span class="o">(</span><span class="nd">@AuthenticationPrincipal</span> <span class="n">OidcUser</span> <span class="n">principal</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">principal</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@GetMapping</span><span class="o">(</span><span class="s">&#34;/claims&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="nf">getClaims</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Authentication</span> <span class="n">authentication</span> <span class="o">=</span> <span class="n">SecurityContextHolder</span><span class="o">.</span><span class="na">getContext</span><span class="o">().</span><span class="na">getAuthentication</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">(</span><span class="n">authentication</span><span class="o">.</span><span class="na">getPrincipal</span><span class="o">()</span> <span class="k">instanceof</span> <span class="n">OidcUser</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">OidcUser</span> <span class="n">principal</span> <span class="o">=</span> <span class="o">((</span><span class="n">OidcUser</span><span class="o">)</span> <span class="n">authentication</span><span class="o">.</span><span class="na">getPrincipal</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">principal</span><span class="o">.</span><span class="na">getClaims</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">Collections</span><span class="o">.</span><span class="na">emptyMap</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>MainController.java</span>
    </div>
</div>
<p>Lo 칰ltimo necesario es configurar qu칠 rutas necesitan autenticaci칩n con OpenID Connect, en caso de que el usuario no est칠 autenticado se realiza la redirecci칩n al proveedor de autenticaci칩n. Con la configuraci칩n indicada se requiere autenticaci칩n para acceder a todas las rutas.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.springoauth</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.HashSet</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.Set</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.security.config.annotation.web.builders.HttpSecurity</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.security.oauth2.client.oidc.userinfo.OidcUserService</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="nd">@Configuration</span>&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OAuth2LoginSecurityConfig</span> <span class="kd">extends</span> <span class="n">WebSecurityConfigurerAdapter</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl"> &#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Override</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">googleScopes</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashSet</span><span class="o">&lt;&gt;();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">googleScopes</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;https://www.googleapis.com/auth/userinfo.email&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">googleScopes</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&#34;https://www.googleapis.com/auth/userinfo.profile&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"> &#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">OidcUserService</span> <span class="n">googleUserService</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OidcUserService</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">googleUserService</span><span class="o">.</span><span class="na">setAccessibleScopes</span><span class="o">(</span><span class="n">googleScopes</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl"> &#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">http</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="o">.</span><span class="na">authorizeRequests</span><span class="o">(</span><span class="n">authorizeRequests</span> <span class="o">-&gt;</span> <span class="n">authorizeRequests</span><span class="o">.</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">())</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="o">.</span><span class="na">oauth2Login</span><span class="o">(</span><span class="n">oauthLogin</span> <span class="o">-&gt;</span> <span class="n">oauthLogin</span><span class="o">.</span><span class="na">userInfoEndpoint</span><span class="o">().</span><span class="na">oidcUserService</span><span class="o">(</span><span class="n">googleUserService</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>OAuth2LoginSecurityConfig.java</span>
    </div>
</div>
<p>Al acceder a una de las URLs del cliente se solicita la autenticaci칩n con una cuenta de Google, una vez autenticado se accede a la p치gina que en este caso obtiene la informaci칩n del usuario como el nombre y correo electr칩nico.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/images/spring-boot-google_hub1a6190955157553723ccf685746f840_23891_2560x1440_fit_box_3.png" data-gallery="" title="Aplicaci칩n de Spring autenticada con una cuenta de Google"><img src="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/images/spring-boot-google_hub1a6190955157553723ccf685746f840_23891_300x200_fit_box_3.png" width="255" height="200" alt="Aplicaci칩n de Spring autenticada con una cuenta de Google" title="Aplicaci칩n de Spring autenticada con una cuenta de Google"  class="lozad "></a></p>
<figcaption>Aplicaci칩n de Spring autenticada con una cuenta de Google</figcaption>
</figure>
</div>
<h3 id="configuraci칩n-de-autenticaci칩n-con-cuentas-de-google">Configuraci칩n de autenticaci칩n con cuentas de Google</h3>
<p>En el ejemplo de este art칤culo muestro la autenticaci칩n con Google como proveedor de autenticaci칩n Oauth 2 pero perfectamente podr칤a ser otro como Keycloak, en todos b치sicamente se trata de obtener las credenciales <em>client-id</em> y <em>client-secret</em> que permiten validar la autenticaci칩n tanto en estos casos Nginx como la aplicaci칩n de Spring Boot. Con una cuenta de Google y desde la <a href="https://console.developers.google.com/">consola para desarrolladores</a> en el apartado credenciales es posible generar las credenciales para la autenticaci칩n de usuarios en una aplicaci칩n. Estas credenciales son los mencionados <em>client-id</em> y <em>client-secret</em>.</p>
<p>Los pasos para obtener las credenciales para una aplicaci칩n con autenticaci칩n OAuth con cuentas de Google son:</p>
<ul>
<li>Crear un proyecto</li>
<li>Configurar la pantalla de consentimiento. En este paso se pide configurar la pantalla de consentimiento, la pantalla de consentimiento se muestra al usuario cuando realicen la autenticaci칩n entre la informaci칩n est치 que aplicaci칩n solicita el consentimiento, opcionalmente es posible a침adir un logotipo o enlaces de t칠rminos de uso.</li>
<li>Crear las credenciales del cliente. Aqu칤 se configura las URL de retorno v치lidas cuando el usuario se haya autenticado. Si no se ha configurado la pantalla de consentimiento se solicita como paso previo a este.</li>
</ul>
<p>Las credenciales tienen unos valores similares a, estas se indican tanto en la configuraci칩n de <em>oauth-proxy</em> como de la aplicaci칩n de Spring Boot:</p>
<ul>
<li><em>client-id</em>: <em>949347437228-m2c85v7bkmo1qb90vso702j27j4tccvr.apps.googleusercontent.com</em></li>
<li><em>client-secret</em>: <em>szgiplYPZR-pGgHP9MiJ-6-q</em></li>
</ul>
<p>Al crear las credenciales para el cliente se indican las URL de retorno permitidas a las que se retorna al <em>proxy</em> o a la aplicaci칩n despu칠s del inicio de sesi칩n.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/images/google-client_hud68abf3fa98a906fbdd68adae287a444_128651_2560x1440_fit_box_3.png" data-gallery="" title="Pasos para la creaci칩n de credenciales en Google para la autenticaci칩n OAuth"><img src="https://picodotdev.github.io/blog-bitix/2020/11/autenticacion-con-openid-oauth-en-cualquier-web-con-nginx-y-de-forma-nativa-con-spring-boot/images/google-client_hud68abf3fa98a906fbdd68adae287a444_128651_300x200_fit_box_3.png" width="226" height="200" alt="Pasos para la creaci칩n de credenciales en Google para la autenticaci칩n OAuth" title="Pasos para la creaci칩n de credenciales en Google para la autenticaci칩n OAuth"  class="lozad "></a></p>
<figcaption>Pasos para la creaci칩n de credenciales en Google para la autenticaci칩n OAuth</figcaption>
</figure>
</div>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/oauth2-proxy">c칩digo fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub y probarlo en tu equipo ejecutando siguiente comando:<br><code>docker-compose up</code></p>
</div>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/SpringOAuthClient">c칩digo fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub y probarlo en tu equipo ejecutando siguiente comando:<br><code>./gradlew run</code></p>
</div>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://www.baeldung.com/spring-security-openid-connect">Spring Security and OpenID Connect</a></li>
<li><a href="https://developers.google.com/identity/protocols/oauth2/openid-connect#appsetup">Google Setting up OAuth 2.0</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="java"/>
            
                <category term="planeta-codigo"/>
            
                <category term="programacion"/>
            
                <category term="software-libre"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/11/crear-un-archivo-zip-con-java-comprimir-y-descomprimir-datos/</id>
        <title>Crear un archivo Zip con Java, comprimir y descomprimir datos</title>
        <updated>2020-11-15T00:30:00+01:00</updated>
        <published>2020-11-15T00:30:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/11/crear-un-archivo-zip-con-java-comprimir-y-descomprimir-datos/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/java.svg" width="200" height="366" alt="Java" title="Java"  class=""></p>
</div>
<p>Desde las primeras versiones de Java en el JDK se incluyen clases en el paquete <em>java.util.zip</em> que heredan de las del paquete <em>java.io</em> del sistema de entrada y salida con las que crear archivos comprimidos en formato Zip y comprimir datos en este formato. Comprimir los archivos que permite reducir sensiblemente el tama침o de algunos tipos de archivos como los basados en texto o ciertos archivos que de por si no est치n comprimidos. En otros tipos de archivo que en su formato ya est치n comprimidos como las im치genes JPEG o WebP la reducci칩n de tama침o no es tan grande. Al contrario que los los algoritmos de compresi칩n para im치genes JPEG y WebP que son com p칠rdida de datos, los algoritmos de compresi칩n de archivos son sin p칠rdida, esto quiere decir que los datos obtenidos al comprimirlos y posteriormente descomprimirlos son exactamente los mismos que los originales.</p>
<p>Los archivos de texto o binarios no comprimidos comprimirlos supone un considerable reducci칩n respecto del tama침o del archivo original no comprimido, un archivo XML del 20 MiB se puede quedar en 1.5 MiB, es decir, una tasa de compresi칩n de 13 o lo que es lo mismo el fichero comprimido ocupa 13 veces menos.</p>
<p>Aparte del ahorro de espacio, crear un archivo Zip que agrupe varios es 칰til en ciertos casos. Las aplicaciones web como respuesta solo pueden devolver un archivo o documento por petici칩n, un documento HTML, un recurso o un archivo. Para devolver varios archivos a la vez como una exportaci칩n de varios documentos dada la limitaci칩n del protocolo HTTP de petici칩n y respuesta no es posible. Para dar soluci칩n a esta limitaci칩n normalmente se crea un archivo Zip que contenga los varios a devolver. <a href="https://picodotdev.github.io/blog-bitix/2016/07/como-optimizar-un-sitio-web-con-compresion-gzip-en-nginx-y-apache-httpd/">Configurar los servidores web Nginx y Apache para comprimir los recursos</a> minimiza los datos transferidos desde el servidor al cliente.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del art칤culo</h2><toc></toc></div>
<h3 id="clases-de-java-para-comprimir-y-descomprimir">Clases de Java para comprimir y descomprimir</h3>
<p>Las clases del paquete <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/zip/package-summary.html">java.util.zip</a> permiten comprimir y descomprimir datos utilizando diferentes algoritmos. Se proporcionan soporte para el formato <a href="https://en.wikipedia.org/wiki/ZIP_%28file_format%29">archivo Zip</a>, <a href="https://en.wikipedia.org/wiki/Gzip">GZIP</a>, el algoritmo de compresi칩n <a href="https://en.wikipedia.org/wiki/DEFLATE">DEFLATE</a> usando la librer칤a <a href="https://es.wikipedia.org/wiki/Zlib">ZLIB</a> y otras clases para la correcci칩n de errores o <em>checksums</em>.</p>
<p>Para la creaci칩n de archivos Zip las clases b치sicas son <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/zip/ZipEntry.html">ZipEntry</a> que representa un flujo de datos comprimido o archivo en un archivo Zip, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/zip/ZipFile.html">ZipFile</a> representa un archivo Zip, <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/zip/ZipInputStream.html">ZipInputStream</a> que permite descomprimir los flujos de datos al leerlos y <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/zip/ZipOutputStream.html">ZipOutputStream</a> que permite comprimir flujos de datos.</p>
<h3 id="c칩mo-crear-un-archivo-zip-con-java">C칩mo crear un archivo Zip con Java</h3>
<p>El siguiente c칩digo permite comprime varios archivos en diferentes formatos en un 칰nico archivo Zip. Este caso es el de una aplicaci칩n Java de l칤nea de comandos, el c칩digo para una aplicaci칩n web consistir칤a en crear el archivo Zip y devolver como resultado el <em>stream</em> de <em>ZipOutputStream</em> de datos en el <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/OutputStream.html">OutputStream</a> empleado por la aplicaci칩n web para devolver el resultado al cliente.</p>
<p>Los archivos de extensi칩n <em>jar</em> utilizados en Java para crear librer칤as y <em>war</em> para empaquetar aplicaciones web no son m치s que archivos Zip con estas extensiones.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.javazip</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kt">void</span> <span class="nf">compress</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">ZipOutputStream</span> <span class="n">zos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ZipOutputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedOutputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;target/file.zip&#34;</span><span class="o">))));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">try</span> <span class="o">(</span><span class="n">zos</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">f</span> <span class="o">:</span> <span class="n">FILES</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;Deflating %s...%n&#34;</span><span class="o">,</span> <span class="n">f</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">InputStream</span> <span class="n">resource</span> <span class="o">=</span> <span class="n">getClass</span><span class="o">().</span><span class="na">getClassLoader</span><span class="o">().</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">&#34;cantrbry/&#34;</span> <span class="o">+</span> <span class="n">f</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">zos</span><span class="o">.</span><span class="na">putNextEntry</span><span class="o">(</span><span class="k">new</span> <span class="n">ZipEntry</span><span class="o">(</span><span class="n">f</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">zos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">resource</span><span class="o">.</span><span class="na">readAllBytes</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">zos</span><span class="o">.</span><span class="na">closeEntry</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-compress.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">Deflating alice29.txt...&#10;</span></span><span class="line"><span class="cl">Deflating asyoulik.txt...&#10;</span></span><span class="line"><span class="cl">Deflating cp.html...&#10;</span></span><span class="line"><span class="cl">Deflating fields.c...&#10;</span></span><span class="line"><span class="cl">Deflating grammar.lsp...&#10;</span></span><span class="line"><span class="cl">Deflating kennedy.xls...&#10;</span></span><span class="line"><span class="cl">Deflating lcet10.txt...&#10;</span></span><span class="line"><span class="cl">Deflating plrabn12.txt...&#10;</span></span><span class="line"><span class="cl">Deflating ptt5...&#10;</span></span><span class="line"><span class="cl">Deflating sum...&#10;</span></span><span class="line"><span class="cl">Deflating xargs.1...</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System.out-compress</span>
    </div>
</div>
<h3 id="c칩mo-descomprimir-un-archivo-zip-con-java">C칩mo descomprimir un archivo Zip con Java</h3>
<p>El proceso contrario a la compresi칩n es la descompresi칩n, la descompresi칩n permite recuperar los datos originales. Para esto se utiliza la clase <em>ZipFile</em> en el caso de leer de un archivo, la clase <em>ZipInputStream</em> tambi칠n permite leer el Zip creado con <em>ZipOutputStream</em>.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.javazip</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">FILES</span> <span class="o">=</span> <span class="n">List</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">&#34;alice29.txt&#34;</span><span class="o">,</span> <span class="s">&#34;asyoulik.txt&#34;</span><span class="o">,</span> <span class="s">&#34;cp.html&#34;</span><span class="o">,</span> <span class="s">&#34;fields.c&#34;</span><span class="o">,</span> <span class="s">&#34;grammar.lsp&#34;</span><span class="o">,</span> <span class="s">&#34;kennedy.xls&#34;</span><span class="o">,</span> <span class="s">&#34;lcet10.txt&#34;</span><span class="o">,</span> <span class="s">&#34;plrabn12.txt&#34;</span><span class="o">,</span> <span class="s">&#34;ptt5&#34;</span><span class="o">,</span> <span class="s">&#34;sum&#34;</span><span class="o">,</span> <span class="s">&#34;xargs.1&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kt">void</span> <span class="nf">decompress</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">ZipFile</span> <span class="n">zf</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ZipFile</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;target/file.zip&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">try</span> <span class="o">(</span><span class="n">zf</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Enumeration</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">ZipEntry</span><span class="o">&gt;</span> <span class="n">entries</span> <span class="o">=</span> <span class="n">zf</span><span class="o">.</span><span class="na">entries</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="o">(</span><span class="n">ZipEntry</span> <span class="n">ze</span> <span class="o">:</span> <span class="n">Collections</span><span class="o">.</span><span class="na">list</span><span class="o">(</span><span class="n">entries</span><span class="o">))</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;Inflating %s (compressed: %s, size: %s, ratio: %.2f)%n&#34;</span><span class="o">,</span> <span class="n">ze</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">ze</span><span class="o">.</span><span class="na">getCompressedSize</span><span class="o">(),</span> <span class="n">ze</span><span class="o">.</span><span class="na">getSize</span><span class="o">(),</span> <span class="o">(</span><span class="kt">double</span><span class="o">)</span> <span class="n">ze</span><span class="o">.</span><span class="na">getSize</span><span class="o">()</span> <span class="o">/</span> <span class="n">ze</span><span class="o">.</span><span class="na">getCompressedSize</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">InputStream</span> <span class="n">is</span> <span class="o">=</span> <span class="n">zf</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">(</span><span class="n">ze</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;target&#34;</span><span class="o">,</span> <span class="n">ze</span><span class="o">.</span><span class="na">getName</span><span class="o">()));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">try</span> <span class="o">(</span><span class="n">is</span><span class="o">;</span> <span class="n">fos</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">fos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">is</span><span class="o">.</span><span class="na">readAllBytes</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-decompress.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">Inflating alice29.txt (compressed: 54398, size: 152089, ratio: 2,80)&#10;</span></span><span class="line"><span class="cl">Inflating asyoulik.txt (compressed: 48891, size: 125179, ratio: 2,56)&#10;</span></span><span class="line"><span class="cl">Inflating cp.html (compressed: 7955, size: 24603, ratio: 3,09)&#10;</span></span><span class="line"><span class="cl">Inflating fields.c (compressed: 3116, size: 11150, ratio: 3,58)&#10;</span></span><span class="line"><span class="cl">Inflating grammar.lsp (compressed: 1216, size: 3721, ratio: 3,06)&#10;</span></span><span class="line"><span class="cl">Inflating kennedy.xls (compressed: 203986, size: 1029744, ratio: 5,05)&#10;</span></span><span class="line"><span class="cl">Inflating lcet10.txt (compressed: 144898, size: 426754, ratio: 2,95)&#10;</span></span><span class="line"><span class="cl">Inflating plrabn12.txt (compressed: 195255, size: 481861, ratio: 2,47)&#10;</span></span><span class="line"><span class="cl">Inflating ptt5 (compressed: 56459, size: 513216, ratio: 9,09)&#10;</span></span><span class="line"><span class="cl">Inflating sum (compressed: 12984, size: 38240, ratio: 2,95)&#10;</span></span><span class="line"><span class="cl">Inflating xargs.1 (compressed: 1730, size: 4227, ratio: 2,44)</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System.out-decompress</span>
    </div>
</div>
<h3 id="listar-el-contenido-de-un-archivo-zip-con-java">Listar el contenido de un archivo Zip con Java</h3>
<p>En Java el contenido de un <em>ZipFile</em> se representa con la clase <em>ZipEntry</em>, el siguiente c칩digo lista el contenido de un archivo Zip.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.javazip</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kt">void</span> <span class="nf">list</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">ZipFile</span> <span class="n">zf</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ZipFile</span><span class="o">(</span><span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;target/file.zip&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">try</span> <span class="o">(</span><span class="n">zf</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Enumeration</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">ZipEntry</span><span class="o">&gt;</span> <span class="n">entries</span> <span class="o">=</span> <span class="n">zf</span><span class="o">.</span><span class="na">entries</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="o">(</span><span class="n">ZipEntry</span> <span class="n">ze</span> <span class="o">:</span> <span class="n">Collections</span><span class="o">.</span><span class="na">list</span><span class="o">(</span><span class="n">entries</span><span class="o">))</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;File %s (compressed: %s, size: %s, ratio: %.2f)%n&#34;</span><span class="o">,</span> <span class="n">ze</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">ze</span><span class="o">.</span><span class="na">getCompressedSize</span><span class="o">(),</span> <span class="n">ze</span><span class="o">.</span><span class="na">getSize</span><span class="o">(),</span> <span class="o">(</span><span class="kt">double</span><span class="o">)</span> <span class="n">ze</span><span class="o">.</span><span class="na">getSize</span><span class="o">()</span> <span class="o">/</span> <span class="n">ze</span><span class="o">.</span><span class="na">getCompressedSize</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-list.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">File alice29.txt (compressed: 54398, size: 152089, ratio: 2,80)&#10;</span></span><span class="line"><span class="cl">File asyoulik.txt (compressed: 48891, size: 125179, ratio: 2,56)&#10;</span></span><span class="line"><span class="cl">File cp.html (compressed: 7955, size: 24603, ratio: 3,09)&#10;</span></span><span class="line"><span class="cl">File fields.c (compressed: 3116, size: 11150, ratio: 3,58)&#10;</span></span><span class="line"><span class="cl">File grammar.lsp (compressed: 1216, size: 3721, ratio: 3,06)&#10;</span></span><span class="line"><span class="cl">File kennedy.xls (compressed: 203986, size: 1029744, ratio: 5,05)&#10;</span></span><span class="line"><span class="cl">File lcet10.txt (compressed: 144898, size: 426754, ratio: 2,95)&#10;</span></span><span class="line"><span class="cl">File plrabn12.txt (compressed: 195255, size: 481861, ratio: 2,47)&#10;</span></span><span class="line"><span class="cl">File ptt5 (compressed: 56459, size: 513216, ratio: 9,09)&#10;</span></span><span class="line"><span class="cl">File sum (compressed: 12984, size: 38240, ratio: 2,95)&#10;</span></span><span class="line"><span class="cl">File xargs.1 (compressed: 1730, size: 4227, ratio: 2,44)</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System.out-list</span>
    </div>
</div>
<p>Usando la aplicaci칩n integrada en el entorno de escritorio o sistema operativo para visualizar el contenido del archivo Zip se observa que contiene comprimidos el conjunto de archivos a침adidos en 칠l.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/crear-un-archivo-zip-con-java-comprimir-y-descomprimir-datos/images/archivo-zip_huf32f76c788411ab6480194366fcb1c87_65356_2560x1440_fit_box_3.png" data-gallery="" title="Contenido de archivo Zip"><img src="https://picodotdev.github.io/blog-bitix/2020/11/crear-un-archivo-zip-con-java-comprimir-y-descomprimir-datos/images/archivo-zip_huf32f76c788411ab6480194366fcb1c87_65356_300x200_fit_box_3.png" width="300" height="167" alt="Contenido de archivo Zip" title="Contenido de archivo Zip"  class="lozad "></a></p>
<figcaption>Contenido de archivo Zip</figcaption>
</figure>
</div>
<p>O listar el contenido de un archivo Zip desde la linea de comandos.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ unzip -l app/target/file.zip&#10;</span></span><span class="line"><span class="cl">Archive:  file.zip&#10;</span></span><span class="line"><span class="cl">  Length&nbsp;&nbsp;&nbsp;&nbsp;  Date&nbsp;&nbsp;&nbsp;&nbsp;Time&nbsp;&nbsp;&nbsp;&nbsp;Name&#10;</span></span><span class="line"><span class="cl">---------  ---------- -----   ----&#10;</span></span><span class="line"><span class="cl">   <span class="m">152089</span>  2020-11-15 01:55   alice29.txt&#10;</span></span><span class="line"><span class="cl">   <span class="m">125179</span>  2020-11-15 01:55   asyoulik.txt&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="m">24603</span>  2020-11-15 01:55   cp.html&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="m">11150</span>  2020-11-15 01:55   fields.c&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp; <span class="m">3721</span>  2020-11-15 01:55   grammar.lsp&#10;</span></span><span class="line"><span class="cl">  <span class="m">1029744</span>  2020-11-15 01:55   kennedy.xls&#10;</span></span><span class="line"><span class="cl">   <span class="m">426754</span>  2020-11-15 01:55   lcet10.txt&#10;</span></span><span class="line"><span class="cl">   <span class="m">481861</span>  2020-11-15 01:55   plrabn12.txt&#10;</span></span><span class="line"><span class="cl">   <span class="m">513216</span>  2020-11-15 01:55   ptt5&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="m">38240</span>  2020-11-15 01:55   sum&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp; <span class="m">4227</span>  2020-11-15 01:55   xargs.1&#10;</span></span><span class="line"><span class="cl">---------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -------&#10;</span></span><span class="line"><span class="cl">  <span class="m">2810784</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="m">11</span> files</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>unzip.sh</span>
    </div>
</div>
<h3 id="otros-formatos-de-archivos-comprimidos">Otros formatos de archivos comprimidos</h3>
<p>Los algoritmos ofrecidos en la API de Java no son los 칰nicos, hay otros con diferentes caracter칤sticas. Zip es un formato de archivos comprimidos popular disponible en los sistemas operativos mayoritarios como <a href="https://www.microsoft.com/es-es/windows/">Windows</a>, <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> y <a href="https://www.apple.com/macos/">macOS</a> ofrecen soporte para comprimir y descomprimir archivos con este formato. Otro algoritmos distintos al Zip son mejores en varios aspectos, ofreciendo ratios de compresi칩n mayores o con velocidades de compresi칩n y descompresi칩n mayores.</p>
<p>Algunos algoritmos de compresi칩n alternativos son <a href="https://en.wikipedia.org/wiki/Bzip2">bzip2</a>, <a href="https://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Markov_chain_algorithm">lzma</a>, <a href="https://en.wikipedia.org/wiki/Lempel%E2%80%93Ziv%E2%80%93Oberhumer">lzo</a> o <a href="https://en.wikipedia.org/wiki/Zstandard">zstd</a> para los que Java no proporciona clases en el JDK y en algunos de ellos no hay ninguna librer칤a que permite trabajar en Java con estos formatos de archivo. La 칰nica alternativa es <a href="https://picodotdev.github.io/blog-bitix/2016/03/como-ejecutar-un-proceso-del-sistema-con-java/">ejecutar un proceso del sistema que invoque el comando del sistema</a> para realizar la compresi칩n, la descompresi칩n o listar el contenido del archivo.</p>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/JavaZip">c칩digo fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub y probarlo en tu equipo ejecutando siguiente comando:<br><code>./gradlew run</code></p>
</div>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://corpus.canterbury.ac.nz/descriptions/">The Canterbury Corpus</a></li>
<li><a href="https://community.centminmod.com/threads/round-3-compression-comparison-benchmarks-zstd-vs-brotli-vs-pigz-vs-bzip2-vs-xz-etc.17259/">Compression Comparison Benchmarks: zstd vs brotli vs pigz vs bzip2 vs xz</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="java"/>
            
                <category term="planeta-codigo"/>
            
                <category term="programacion"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/</id>
        <title>Qu칠 es, por qu칠 y c칩mo activar un segundo factor de autenticaci칩n en Google, Amazon, PayPal y otros servicios</title>
        <updated>2020-11-07T23:30:00+01:00</updated>
        <published>2020-11-07T23:30:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Las contrase침as son un mecanismo de seguridad empleado para autenticar a un usuario en un servicio al iniciar sesi칩n. Pero las contrase침as son un mecanismo potencialmente d칠bil, por ello varios de los servicios m치s importantes implementan mecanismos de seguridad adicionales para proteger en mayor medida las cuentas de los usuarios. El segundo factor de autenticaci칩n o 2FA es un mecanismo adicional, las contrase침as son algo que se conoce, el 2FA es algo que se tiene. Varios de los servicios m치s importantes como Google, Amazon y PayPal entre otros lo ofrecen y es recomendable activarlos en aquellos en los que lo hacen.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/keepassxc.svg" width="200" height="200" alt="KeePassXC" title="KeePassXC"  class=""></p>
</div>
<p>La autenticaci칩n es el mecanismo de seguridad que permite identificar a un usuario y es quien dice ser. Para comprobar que el usuario es quien dice ser se utiliza una contrase침a que solo conoce el usuario. Pero las contrase침as como medida de seguridad no son perfectas, ya que algunos de los usuarios utilizan contrase침as d칠biles con pocos caracteres, con palabras de diccionario o conocidas y utilizan la misma contrase침a en varias cuentas de modo que si un servicio sufre un problema de seguridad las cuentas de otros servicios con la misma contrase침a quedan vulnerables.</p>
<p>Toda la seguridad de las contrase침as depende de que solo sea conocida por el propietario de la cuenta, las contrase침as son un factor de seguridad de algo que s칩lo el leg칤timo propietario conoce. Otro mecanismo de seguridad es basar la seguridad adicionalmente en algo que se tiene, esto es el segundo factor de autenticaci칩n.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del art칤culo</h2><toc></toc></div>
<h3 id="qu칠-es-un-segundo-factor-de-autenticaci칩n-o-2fa">Qu칠 es un segundo factor de autenticaci칩n o 2FA</h3>
<p>El segundo factor de autenticaci칩n o 2FA es un mecanismo de seguridad que se suele utilizar adicionalmente al mecanismo de seguridad de contrase침a. Adicionalmente a la contrase침a el usuario ha de proporcionar un c칩digo generado con el segundo factor de autenticaci칩n.</p>
<p>El generador de segundo factor de autenticaci칩n puede ser de diferentes formas, una de ellas es una aplicaci칩n para m칩vil y otra una aplicaci칩n de escritorio, tambi칠n hay dispositivos hardware espec칤ficos de 2FA que se conectan por USB al ordenador. Tambi칠n se denomina doble factor de autenticaci칩n o autenticaci칩n de dos factores.</p>
<h3 id="por-qu칠-activar-un-segundo-factor-de-autenticaci칩n">Por qu칠 activar un segundo factor de autenticaci칩n</h3>
<p>Con el segundo factor de autenticaci칩n activado aunque la contrase침a de un servicio se vea comprometida la cuenta seguir치 protegida ya que adicionalmente a la contrase침a se necesita el segundo factor de seguridad. Las contrase침as quedan expuestas si un servicio tiene una vulnerabilidad de seguridad o por alguno de los varios <a href="https://picodotdev.github.io/blog-bitix/2021/10/manual-basico-sobre-ataques-informaticos-peligros-tipos-como-detectarlos-como-evitarlos-y-medidas-de-prevencion/">tipos de ataque inform치tico contra el usuario</a> que es aprovechada por delincuentes para obtener las contrase침as de seguridad de usuarios con el objetivo de poder acceder a sus cuentas. Estos fallos de seguridad son explotables a trav칠s de la red sin necesidad de acceso f칤sico a los servidores del servicio.</p>
<p>El segundo factor de autenticaci칩n a침ade m치s seguridad ya que los delincuentes deben comprometer no solo el servicio sino adicionalmente el dispositivo generador de segundo factor de autenticaci칩n.</p>
<p>Activar el segundo factor de autenticaci칩n es recomendable porque a침ade una seguridad adicional mucho mayor que utilizando 칰nicamente una contrase침a. Los servicios como el correo electr칩nico de <a href="https://www.google.es/">Google</a>, la plataforma de comercio electr칩nico <a href="https://amzn.to/2flFhHA">Amazon</a>, el sistema de pagos <a href="https://www.paypal.com/">PayPal</a> permite a los usuarios activar el 2FA. Es recomendable hacerlo cuando sea posible ya que servicios como estos se utilizan para tareas importantes como toda la comunicaci칩n e informaci칩n del usuario, compras por internet donde se guardan tarjetas de cr칠dito y n칰meros de cuenta bancaria.</p>
<h3 id="c칩mo-funciona-un-segundo-factor-de-autenticaci칩n">C칩mo funciona un segundo factor de autenticaci칩n</h3>
<p>Al realizar la autenticaci칩n en un servicio para iniciar sesi칩n se ha de introducir el identificativo del usuario y la contrase침a, despu칠s con el segundo factor de autenticaci칩n activado adicionalmente se solicita un c칩digo adicional que el usuario ha de proporcionar. El c칩digo adicional es proporcionado por las aplicaciones generadores de 2FA.</p>
<p>Las aplicaciones generadoras de c칩digos 2FA se inicializan al activar el 2FA en la cuenta, en el caso de una aplicaci칩n m칩vil normalmente se hace escaneando un c칩digo QR con la c치mara de fotos, para otros dispositivos se proporciona una secuencia de letras. El c칩digo QR o la secuencia de letras son la semilla con la que se generan los c칩digos.</p>
<p>Los c칩digos 2FA que se generan adicionalmente son temporales y solo son v치lidos durante un periodo corto de tiempo, a estos c칩digos 2FA se les denomina TOTP acr칩nimo de <em>time-based one-time password</em> normalmente formados por 6 d칤gitos. De modo que aunque un c칩digo quedase comprometido s칩lo ser칤a v치lido durante un periodo corto de tiempo de unos segundos, habitualmente de unos 30 segundos. Los generadores de c칩digos generan un nuevo c칩digo de forma peri칩dica. Dado que la validez de los c칩digos generados dependen de la fecha y hora actual el dispositivo generador de c칩digos TOTP debe <a href="https://picodotdev.github.io/blog-bitix/2021/10/sincronizacion-de-hora-automatica-con-el-protocolo-ntp-en-gnu-linux/">mantener la fecha y hora sincronizada con el protocolo NTP</a>.</p>
<p>En la autenticaci칩n en dos pasos las credenciales para autenticar un usuario est치n compuestas de dos factores, la contrase침a y el c칩digo TOTP.</p>
<h3 id="c칩mo-activar-un-segundo-factor-de-autenticaci칩n">C칩mo activar un segundo factor de autenticaci칩n</h3>
<p>El segundo factor de autenticaci칩n ha de activarse en cada servicio de forma individual. Al realizar la activaci칩n se proporciona el c칩digo QR a escanear por la aplicaci칩n m칩vil del generador de c칩digos con la c치mara de fotos y alternativamente la secuencia de letras para otro tipo de aplicaciones o dispositivos que no tiene c치mara de fotos.</p>
<p>El proceso de activar el 2FA es similar en todos los servicios, var칤a la interfaz que se utilizan pero b치sicamente todos proporcionan el c칩digo QR y la secuencia de letras. En este caso muestro como activar el segundo factor de autenticaci칩n en los servicios de Google, Amazon y PayPal, para otros servicios como <a href="https://twitter.com/">Twitter</a>, <a href="https://www.facebook.com/">Facebook</a> u cualquier otro el proceso es similar.</p>
<h4 id="c칩mo-activar-2fa-en-una-cuenta-de-google">C칩mo activar 2FA en una cuenta de Google</h4>
<p>Para activar el segundo factor de autenticaci칩n en una cuenta de Google hay que realizar la configuraci칩n desde <em>Gestionar tu cuenta de Google</em> ubicado en el desplegable del men칰 del usuario, despu칠s acceder a las opciones de seguridad del men칰 <em>Protegemos tu cuenta</em>. En la <em>Revisi칩n de seguridad</em> el proceso de configuraci칩n de 2FA se inicia desde la opci칩n <em>Verificaci칩n en dos pasos</em>, hay varios opciones de utilizar 2FA una de ellas es con una notificaci칩n de Google en el tel칠fono m칩vil, un SMS o un c칩digo de seguridad, la otra opci칩n es utilizar una aplicaci칩n de autenticaci칩n o <em>authenticator</em>.</p>
<p>La autenticaci칩n con una aplicaci칩n de <em>authenticator</em> se inicia desde el enlace <em>configuraci칩n de la verificaci칩n en dos pasos</em> para configurar la aplicaci칩n <em>authenticator</em>. Es un proceso de varios pasos en el que se muestra el c칩digo QR a esc치near por la aplicaci칩n <em>authenticator</em> y el c칩digo formado por varios grupos de 4 letras equivalente, el c칩digo de letras solo se muestra con el enlace <em>쯅o puedes escanearlo?</em> debajo del c칩digo QR. Para asegurar que la aplicaci칩n <em>authenticator</em> ha escaneado correctamente el c칩digo QR y gen칠ra c칩digos de 6 d칤gitos se ha de verificar introduciendo su valor actual.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-1_hu41c54525a76ffa08caea9179c927f894_174413_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de Google"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-1_hu41c54525a76ffa08caea9179c927f894_174413_200x150_fit_box_3.png" width="177" height="150" alt="Activaci칩n de 2FA en una cuenta de Google" title="Activaci칩n de 2FA en una cuenta de Google"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-2_hu5784146e25ea53a2616725e18932885d_119518_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de Google"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-2_hu5784146e25ea53a2616725e18932885d_119518_200x150_fit_box_3.png" width="83" height="150" alt="Activaci칩n de 2FA en una cuenta de Google" title="Activaci칩n de 2FA en una cuenta de Google"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-3_hu1eac63d605add8910dab27af1a44b687_197376_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de Google"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-3_hu1eac63d605add8910dab27af1a44b687_197376_200x150_fit_box_3.png" width="66" height="150" alt="Activaci칩n de 2FA en una cuenta de Google" title="Activaci칩n de 2FA en una cuenta de Google"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-4_hu07129b6f585ee0d2f7753f538e4c95aa_52452_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de Google"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-4_hu07129b6f585ee0d2f7753f538e4c95aa_52452_200x150_fit_box_3.png" width="139" height="150" alt="Activaci칩n de 2FA en una cuenta de Google" title="Activaci칩n de 2FA en una cuenta de Google"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-5_hu0ecf2fc2c8f04f0a4cc1aafb7b4038a9_48615_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de Google"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-5_hu0ecf2fc2c8f04f0a4cc1aafb7b4038a9_48615_200x150_fit_box_3.png" width="127" height="150" alt="Activaci칩n de 2FA en una cuenta de Google" title="Activaci칩n de 2FA en una cuenta de Google"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-6_hu5af182af9be00f114045c1bb72547069_65002_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de Google"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-6_hu5af182af9be00f114045c1bb72547069_65002_200x150_fit_box_3.png" width="145" height="150" alt="Activaci칩n de 2FA en una cuenta de Google" title="Activaci칩n de 2FA en una cuenta de Google"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-7_hue71134a81c9b8d4b3e7d76827113c78b_38389_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de Google"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-7_hue71134a81c9b8d4b3e7d76827113c78b_38389_200x150_fit_box_3.png" width="163" height="150" alt="Activaci칩n de 2FA en una cuenta de Google" title="Activaci칩n de 2FA en una cuenta de Google"  class="lozad "></a></p>
<figcaption>Activaci칩n de 2FA en una cuenta de Google</figcaption>
</figure>
</div>
<p>Una vez configurado 2FA al iniciar sesi칩n Google por defecto env칤a una notificaci칩n al tel칠fono m칩vil con la que solo es necesario realizar la confirmaci칩n del inicio de sesi칩n desde el m칩vil, con la opci칩n <em>Probar de otra manera</em> permite usar otro m칠todo de autenticaci칩n 2FA entre ellos el de la aplicaci칩n <em>authenticator</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-8_hu3dbc2f61f9acebbe1293826509d8006a_33409_2560x1440_fit_box_3.png" data-gallery="" title="Inicio de sesi칩n en una cuenta de Google con 2FA"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-8_hu3dbc2f61f9acebbe1293826509d8006a_33409_200x150_fit_box_3.png" width="125" height="150" alt="Inicio de sesi칩n en una cuenta de Google con 2FA" title="Inicio de sesi칩n en una cuenta de Google con 2FA"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-9_hudafb16e2af5afd28eec81cfc0ba7008a_56956_2560x1440_fit_box_3.png" data-gallery="" title="Inicio de sesi칩n en una cuenta de Google con 2FA"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-9_hudafb16e2af5afd28eec81cfc0ba7008a_56956_200x150_fit_box_3.png" width="107" height="150" alt="Inicio de sesi칩n en una cuenta de Google con 2FA" title="Inicio de sesi칩n en una cuenta de Google con 2FA"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-10_hu92447999cf1f9f687c02a02f2c2fec67_83014_2560x1440_fit_box_3.png" data-gallery="" title="Inicio de sesi칩n en una cuenta de Google con 2FA"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-10_hu92447999cf1f9f687c02a02f2c2fec67_83014_200x150_fit_box_3.png" width="85" height="150" alt="Inicio de sesi칩n en una cuenta de Google con 2FA" title="Inicio de sesi칩n en una cuenta de Google con 2FA"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-11_hua90795ee4d5a1f0a2ffb8a3206201908_51721_2560x1440_fit_box_3.png" data-gallery="" title="Inicio de sesi칩n en una cuenta de Google con 2FA"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-2fa-11_hua90795ee4d5a1f0a2ffb8a3206201908_51721_200x150_fit_box_3.png" width="122" height="150" alt="Inicio de sesi칩n en una cuenta de Google con 2FA" title="Inicio de sesi칩n en una cuenta de Google con 2FA"  class="lozad "></a></p>
<figcaption>Inicio de sesi칩n en una cuenta de Google con 2FA</figcaption>
</figure>
</div>
<h4 id="c칩mo-activar-2fa-en-una-cuenta-de-amazon">C칩mo activar 2FA en una cuenta de Amazon</h4>
<p>En el caso de Amazon la configuraci칩n del segundo factor de autenticaci칩n se realiza desde <em>Mi cuenta &gt; Inicio de sesi칩n y seguridad &gt; Configuraci칩n de la verificaci칩n en dos pasos (2SV)</em>. Hay que registra un autenticador de verificaci칩n de dos pasos, al seleccionar utilizar una <em>app</em> de verificaci칩n se muestra el cogido QR y en c칩digo de letras en el enlace <em>쯅o puedes escanear el c칩digo de barras?</em>. Esc치neado el c칩digo QR el y el c칩digo de letras se verifica la aplicaci칩n <em>autenticator</em> est치 configurada correctamente y genera c칩digos TOTP correctos.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-1_hu8e311b3f4e42c5e3eca85dee328a10e9_48106_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de Amazon"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-1_hu8e311b3f4e42c5e3eca85dee328a10e9_48106_200x150_fit_box_3.png" width="160" height="150" alt="Activaci칩n de 2FA en una cuenta de Amazon" title="Activaci칩n de 2FA en una cuenta de Amazon"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-2_huaaee53ac1137fde3720ce07275ac29a7_105167_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de Amazon"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-2_huaaee53ac1137fde3720ce07275ac29a7_105167_200x150_fit_box_3.png" width="197" height="150" alt="Activaci칩n de 2FA en una cuenta de Amazon" title="Activaci칩n de 2FA en una cuenta de Amazon"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-3_hu23f7c03fd7f53bf4f8221a4d453e936b_92560_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de Amazon"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-3_hu23f7c03fd7f53bf4f8221a4d453e936b_92560_200x150_fit_box_3.png" width="182" height="150" alt="Activaci칩n de 2FA en una cuenta de Amazon" title="Activaci칩n de 2FA en una cuenta de Amazon"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-4_huf7a1c52b3e119e3762cceeebf732056b_105115_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de Amazon"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-4_huf7a1c52b3e119e3762cceeebf732056b_105115_200x150_fit_box_3.png" width="196" height="150" alt="Activaci칩n de 2FA en una cuenta de Amazon" title="Activaci칩n de 2FA en una cuenta de Amazon"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-5_hu88a46cd58e8a5eec821028252b467812_51889_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de Amazon"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-5_hu88a46cd58e8a5eec821028252b467812_51889_200x150_fit_box_3.png" width="200" height="94" alt="Activaci칩n de 2FA en una cuenta de Amazon" title="Activaci칩n de 2FA en una cuenta de Amazon"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-6_hue61014966430a8b8edd3e808efad952c_252968_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de Amazon"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-6_hue61014966430a8b8edd3e808efad952c_252968_200x150_fit_box_3.png" width="116" height="150" alt="Activaci칩n de 2FA en una cuenta de Amazon" title="Activaci칩n de 2FA en una cuenta de Amazon"  class="lozad "></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-7_hu642cbe9d1d5d89bee73eaae48d0ca621_105861_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de Amazon"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-7_hu642cbe9d1d5d89bee73eaae48d0ca621_105861_200x150_fit_box_3.png" width="162" height="150" alt="Activaci칩n de 2FA en una cuenta de Amazon" title="Activaci칩n de 2FA en una cuenta de Amazon"  class="lozad "></a></p>
<figcaption>Activaci칩n de 2FA en una cuenta de Amazon</figcaption>
</figure>
</div>
<p>Al iniciar sesi칩n en la cuenta de Amazon se solicita el correo electr칩nico y la contrase침a, con 2FA activado adicionalmente se solicita el c칩gido TOTP, marcando la opci칩n <em>No vuelvas a pedir ning칰n c칩digo en este navegador</em> el c칩digo TOTP solo se solicita una vez por dispositivo.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-8_hu2a0c1aa7ad36bb758b2798746347c2c8_31680_2560x1440_fit_box_3.png" data-gallery="" title="Inicio de sesi칩n en una cuenta de Amazon"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-8_hu2a0c1aa7ad36bb758b2798746347c2c8_31680_200x150_fit_box_3.png" width="119" height="150" alt="Inicio de sesi칩n en una cuenta de Amazon" title="Inicio de sesi칩n en una cuenta de Amazon"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-9_hu8c38a10d72b0adb13850656701035461_31140_2560x1440_fit_box_3.png" data-gallery="" title="Inicio de sesi칩n en una cuenta de Amazon"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/amazon-2fa-9_hu8c38a10d72b0adb13850656701035461_31140_200x150_fit_box_3.png" width="119" height="150" alt="Inicio de sesi칩n en una cuenta de Amazon" title="Inicio de sesi칩n en una cuenta de Amazon"  class="lozad "></a></p>
<figcaption>Inicio de sesi칩n en una cuenta de Amazon</figcaption>
</figure>
</div>
<h4 id="c칩mo-activar-2fa-en-una-cuenta-de-paypal">C칩mo activar 2FA en una cuenta de PayPal</h4>
<p>En PayPal la configuraci칩n de segundo factor de autenticaci칩n se realiza desde el <em>Centro de seguridad</em> con la opci칩n <em>Verificaci칩n en dos pasos</em> para configurarlo. En la configuraci칩n se muestra el c칩digo QR y el c칩digo de letras introducir en la aplicaci칩n <em>authenticator</em>. Como en los otros casos para verificar que la aplicaci칩n <em>authenticator</em> se ha configurado correctamente para generar los c칩digo TOTP se solicita validar uno.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/paypal-2fa-1_hu4f4bedabb6e81457e9c2e3e09b0909e5_165795_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de PayPal"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/paypal-2fa-1_hu4f4bedabb6e81457e9c2e3e09b0909e5_165795_200x150_fit_box_3.png" width="112" height="150" alt="Activaci칩n de 2FA en una cuenta de PayPal" title="Activaci칩n de 2FA en una cuenta de PayPal"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/paypal-2fa-2_hu649eb672996bd37528e41668ac07392c_66523_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de PayPal"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/paypal-2fa-2_hu649eb672996bd37528e41668ac07392c_66523_200x150_fit_box_3.png" width="138" height="150" alt="Activaci칩n de 2FA en una cuenta de PayPal" title="Activaci칩n de 2FA en una cuenta de PayPal"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/paypal-2fa-3_hu22cfaf350d787691667f023b99c22384_60370_2560x1440_fit_box_3.png" data-gallery="" title="Activaci칩n de 2FA en una cuenta de PayPal"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/paypal-2fa-3_hu22cfaf350d787691667f023b99c22384_60370_200x150_fit_box_3.png" width="132" height="150" alt="Activaci칩n de 2FA en una cuenta de PayPal" title="Activaci칩n de 2FA en una cuenta de PayPal"  class="lozad "></a></p>
<figcaption>Activaci칩n de 2FA en una cuenta de PayPal</figcaption>
</figure>
</div>
<p>Al iniciar sesi칩n en la cuenta de PayPal se solicita tambi칠n el correo electr칩nico y la contrase침a, con 2FA activado adicionalmente se solicita el c칩digo TOTP, marcando la opci칩n <em>Confiar en este dispositivo</em> el c칩digo TOTP solo se solicita una vez por dispositivo.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/paypal-2fa-4_hu9a2b8ab0e64d0272a4f2eb2e11b1739d_12493_2560x1440_fit_box_3.png" data-gallery="" title="Inicio de sesi칩n en una cuenta de PayPal"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/paypal-2fa-4_hu9a2b8ab0e64d0272a4f2eb2e11b1739d_12493_200x150_fit_box_3.png" width="200" height="150" alt="Inicio de sesi칩n en una cuenta de PayPal" title="Inicio de sesi칩n en una cuenta de PayPal"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/paypal-2fa-5_hu9cdd340fec763b783a8c1baab4e0c2a7_33442_2560x1440_fit_box_3.png" data-gallery="" title="Inicio de sesi칩n en una cuenta de PayPal"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/paypal-2fa-5_hu9cdd340fec763b783a8c1baab4e0c2a7_33442_200x150_fit_box_3.png" width="149" height="150" alt="Inicio de sesi칩n en una cuenta de PayPal" title="Inicio de sesi칩n en una cuenta de PayPal"  class="lozad "></a></p>
<figcaption>Inicio de sesi칩n en una cuenta de PayPal</figcaption>
</figure>
</div>
<h3 id="aplicaci칩n-para-_smartphone_-generador-de-totp">Aplicaci칩n para <em>smartphone</em> generador de TOTP</h3>
<p>Dos aplicaciones gratuitas para tel칠fono inteligente o <em>smartphone</em> son <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2">Google Authenticator</a> y <a href="https://play.google.com/store/apps/details?id=com.azure.authenticator">Microsoft Authenticator</a> disponibles tanto para los que utilizan <a href="https://www.android.com/">Android</a> como <a href="https://www.apple.com/es/ios/ios-12/">iOS</a> como sistema operativo en sus respectivas tiendas de aplicaciones.</p>
<p>Instalada la aplicaci칩n en el <em>smartphone</em> el primer paso es iniciar el proceso de activaci칩n de 2FA en un servicio, este servicio proporciona el c칩digo QR que escane치ndolo con la aplicaci칩n permite generar generar los c칩digos temporales 2FA. Una vez escaneado el c칩digo QR se muestra como informaci칩n el servicio y cuenta, el c칩digo temporal v치lido y un indicador de tiempo que una vez expirado se genera un nuevo c칩digo.</p>
<p>Las aplicaciones m칩viles ofrecen comodidad pero 쯤u칠 ocurre si el m칩vil se pierde, nos lo roban o se estropea? No disponer del dispositivo generador de 2FA es un problema ya que sin 칠l no se impide el inicio de sesi칩n ya que en alg칰n momento se solicitar치 el c칩digo 2FA.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-authenticator-1_huda658359a0b9c8ecf79de3da37848ad5_99081_2560x1440_fit_box_3.png" data-gallery="" title="Google Authenticator"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-authenticator-1_huda658359a0b9c8ecf79de3da37848ad5_99081_200x150_fit_box_3.png" width="75" height="150" alt="Google Authenticator" title="Google Authenticator"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-authenticator-2_huc20cc5feba301ca6e426b55a263b049f_70777_2560x1440_fit_box_3.png" data-gallery="" title="Google Authenticator"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/google-authenticator-2_huc20cc5feba301ca6e426b55a263b049f_70777_200x150_fit_box_3.png" width="75" height="150" alt="Google Authenticator" title="Google Authenticator"  class="lozad "></a>
<a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/microsoft-authenticator-1_hu15b8a56f8a5f26012ae5f16a9bf923d6_124814_2560x1440_fit_box_3.png" data-gallery="" title="Microsoft Authenticator"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/microsoft-authenticator-1_hu15b8a56f8a5f26012ae5f16a9bf923d6_124814_200x150_fit_box_3.png" width="84" height="150" alt="Microsoft Authenticator" title="Microsoft Authenticator"  class="lozad "></a></p>
<figcaption>Aplicaciones Google Authenticator y Microsoft Authenticator</figcaption>
</figure>
</div>
<h3 id="aplicaci칩n-de-escritorio-generador-de-totp">Aplicaci칩n de escritorio generador de TOTP</h3>
<p><a href="https://keepassxc.org/">KeePassXC</a> es una aplicaci칩n de escritorio que sirve como base de datos para <a href="https://picodotdev.github.io/blog-bitix/2016/11/guardar-contrasenas-de-forma-segura-con-keepassxc/">guardar contrase침as de forma segura y generar contrase침as 칰nicas seguras</a> para los servicios. Est치 disponible para los sistemas operativos <a href="https://www.microsoft.com/es-es/windows/">Windows</a>, <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> y <a href="https://www.apple.com/macos/">macOS</a>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/keepass-1_hu70875c171f83b4b38a2169b2f7801d89_109852_2560x1440_fit_box_3.png" data-gallery="" title="Aplicaci칩n gestor de contrase침as KeePassXC"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/keepass-1_hu70875c171f83b4b38a2169b2f7801d89_109852_300x200_fit_box_3.png" width="211" height="200" alt="Aplicaci칩n gestor de contrase침as KeePassXC" title="Aplicaci칩n gestor de contrase침as KeePassXC"  class="lozad "></a></p>
<figcaption>Aplicaci칩n gestor de contrase침as KeePassXC</figcaption>
</figure>
</div>
<p>KeePassXC tambi칠n sirve para guardar el 2FA siendo capaz de generar los mismo c칩digos TOTP de las aplicaciones de <em>smartphone</em>. Para guardar la semilla con la que se generan los TOTP hay que ir a la opci칩n del men칰 <em>Apuntes &gt; TOTP &gt; Configurar TOTP</em> o con el men칰 contextual del bot칩n derecho sobre el apunte, esta opci칩n muestra una ventana en la que introducir el c칩digo de letras alternativo al c칩digo QR al activar el 2FA del servicio. Tambi칠n es capaz de mostrar el c칩digo QR original, lo que permite migrar el 2FA a otro m칩vil.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/keepass-2_hue4c925b4b6e246f1976167894bc8e2b5_44709_2560x1440_fit_box_3.png" data-gallery="" title="C칩digo TOTP generador por KeePassXC"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/keepass-2_hue4c925b4b6e246f1976167894bc8e2b5_44709_300x200_fit_box_3.png" width="149" height="200" alt="C칩digo TOTP generador por KeePassXC" title="C칩digo TOTP generador por KeePassXC"  class="lozad "></a></p>
<figcaption>Configuraci칩n TOTP en KeePassXC</figcaption>
</figure>
</div>
<p>Si se configura como generador de c칩digos un <em>smartphone</em> y KeePassXC es posible comprobar que generan los mismos TOTP y est치n bien configurados, con la opci칩n <em>Apuntes &gt; TOTP &gt; Mostrar TOTP</em> se muestra un di치logo con el c칩digo TOTP v치lido.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/keepass-3_hu3752946182f50a4a3a8601b142307d50_24508_2560x1440_fit_box_3.png" data-gallery="" title="C칩digo TOTP generador por KeePassXC"><img src="https://picodotdev.github.io/blog-bitix/2020/11/que-es-por-que-y-como-activar-un-segundo-factor-de-autenticacion-en-google-amazon-paypal-y-otros-servicios/images/keepass-3_hu3752946182f50a4a3a8601b142307d50_24508_300x200_fit_box_3.png" width="220" height="200" alt="C칩digo TOTP generador por KeePassXC" title="C칩digo TOTP generador por KeePassXC"  class="lozad "></a></p>
<figcaption>C칩digo TOTP generador por KeePassXC</figcaption>
</figure>
</div>
<h4 id="por-qu칠-utilizar-keepassxc-adicionalmente-a-una-aplicaci칩n-del-m칩vil">Por qu칠 utilizar KeePassXC adicionalmente a una aplicaci칩n del m칩vil</h4>
<p>No conviene guardar los 2FA 칰nicamente en el <em>smartphone</em>, perder el dispositivo generador de c칩digos 2FA impide iniciar sesi칩n en los servicios cuando se solicite el TOTP. Algunos servicios permiten recuperar la cuenta utilizando otras formas de autenticaci칩n pero algunos otros servicios perder el 2FA quiz치 suponga la p칠rdida del acceso a la cuenta.</p>
<p>Utilizar KeePassXC permite tener un segundo dispositivo con el que generar los TOTP, adem치s es f치cil <a href="https://picodotdev.github.io/blog-bitix/2016/05/como-realizar-copias-de-seguridad-en-windows-con-freefilesync/">hacer una copia de seguridad</a> del archivo de la base de datos de las contrase침as de KeePassXC ya que es simplemente un archivo cifrado y permite configurar otros dispositivos como generadores de TOTP a trav칠s del c칩digo QR original.</p>
]]>
        </content>
        
            
                <category term="planeta-codigo"/>
            
                <category term="seguridad"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/11/emitir-trazas-de-las-peticiones-y-respuestas-http-con-clientes-java/</id>
        <title>Emitir trazas de las peticiones y respuestas HTTP con clientes Java</title>
        <updated>2020-11-06T17:00:00+01:00</updated>
        <published>2020-11-06T17:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/11/emitir-trazas-de-las-peticiones-y-respuestas-http-con-clientes-java/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>En las peticiones HTTP que se hacen unos microservicios a otros o a recursos externos son varias las cosas por las que una petici칩n HTTP es capaz de fallar. El fallo es un c칩digo de estado distinto al correcto 200, ya sea petici칩n invalida 400, un recurso no encontrado 404, credenciales requeridas 401, credenciales inv치lidas 403 o un error interno de servidor 500 entre otros c칩digos de estado, otras posibilidades son fallos de conexi칩n de red. A침adir trazas de las peticiones que hacen los microservicios permite obtener informaci칩n con la que averiguar cual es el motivo de fallo, si adem치s emiten las trazas con las cabeceras y par치metros en formato de la herramienta <em>curl</em> es f치cil probar y reproducir el mismo error o la misma acci칩n.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/java.svg" width="200" height="366" alt="Java" title="Java"  class=""></p>
</div>
<p>Hay varios aspectos de la aplicaci칩n en los que es muy 칰til a침adir trazas, los m치s comunes son a침adir trazas en determinados puntos del c칩digo que permiten averiguar cu치l ha sido el camino seguido en el procesamiento, tambi칠n ciertos valores de variables. Las trazas es un aspecto importante en la monitorizaci칩n de una aplicaci칩n.</p>
<p>Otra informaci칩n interesante a emitir en las trazas son las sentencias SQL que genera una aplicaci칩n ya sea en el momento de desarrollo para detectar problemas de rendimiento ocasionados por un 1+N al usar alg칰n ORM como JPA o Hibernate. Tambi칠n por una consulta que tiene mal rendimiento ya que no hace uso de 칤ndices lo que hace que el motor de la base de datos tenga acceder a demasiados registros o hace demasiadas <em>joins</em>. Conocer la SQL exacta o consultas con mal rendimiento que se est치n ejecutando permite optimizarlas.</p>
<p>En este art칤culo comento otro caso habitual en el que es interesante a침adir trazas, las peticiones HTTP a otros sistemas.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/07/la-libreria-log4j-para-emitir-trazas-en-aplicaciones-java/">La librer칤a Log4j para emitir trazas en aplicaciones Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2019/02/ofuscar-datos-sensibles-en-las-trazas-con-log4j/">Ofuscar datos sensibles en las trazas con Log4j</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/07/identificar-todas-las-trazas-de-una-peticion-en-una-aplicacion-web-java-con-log4j/">Identificar todas las trazas de una petici칩n en una aplicaci칩n web Java con Log4j</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/10/trazabilidad-en-servicios-distribuidos-con-sleuth-y-zipkin/">Trazabilidad en servicios distribuidos con Sleuth y Zipkin</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/09/centralizar-y-consultar-las-trazas-de-las-aplicaciones-con-elasticsearch-logstash-y-kibana/">Centralizar y consultar las trazas de las aplicaciones con Elasticsearch, Logstash y Kibana</a></li>
</ul>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del art칤culo</h2><toc></toc></div>
<h3 id="a침adir-trazas-de-las-peticiones-http">A침adir trazas de las peticiones HTTP</h3>
<p>Una de las caracter칤sticas que definen a los microservicios es que unos se comunican con otros. Pueden estar basados en REST o en <a href="https://graphql.org/">GraphQL</a> en ambos casos utilizando el protocolo HTTP, tambi칠n pueden estar basados en RPC con <a href="https://grpc.io/">gRPC</a>.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/09/ejemplo-de-api-rest-en-java-con-jax-rs-y-spring-boot/">Ejemplo de API REST en Java con JAX-RS y Spring Boot</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2017/11/que-es-graphql-y-ejemplo-para-una-interfaz-de-un-servicio-con-spring-boot-y-java/">Qu칠 es GraphQL y ejemplo para una interfaz de un servicio con Spring Boot y Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/08/introduccion-a-grpc-y-ejemplo-con-java/">Introducci칩n a gRPC y ejemplo con Java</a></li>
</ul>
<p>En el caso de los microservicios que utilizan HTTP es interesante que emitan en las trazas la petici칩n HTTP que est치n realizando ya que las comunicaciones entre microservicios son un punto de fallo com칰n, servicios que no est치n respondiendo con los datos esperados, el c칩digo de estado, cabeceras de respuesta y que a qu칠 recurso se est치 llamando, con qu칠 datos y cabeceras en la petici칩n. Adem치s, si las trazas se emiten en el formato de la herramienta <em>curl</em> hace muy f치cil probar la misma consulta que hace la aplicaci칩n.</p>
<p>Dependiendo de la librer칤a que se utilice para hacer las peticiones HTTP depende de como instrumentalizadas para a침adirles el soporte para que emitan trazas, los clientes HTTP m치s populares son <a href="https://picodotdev.github.io/blog-bitix/2017/10/ejemplo-con-el-cliente-http-2-de-java/">el cliente HTTP de Java</a> a침adido entre las <a href="https://picodotdev.github.io/blog-bitix/2017/09/novedades-de-java-9-mas-alla-de-la-modularidad/">novedades de Java 9</a>, <a href="https://docs.spring.io/spring-framework/docs/current/reference/html/web-reactive.html#webflux-client">WebClient</a> de <a href="https://spring.io/">Spring</a>, <a href="https://square.github.io/retrofit/">Retrofit</a> y <a href="https://square.github.io/okhttp/">OkHttp</a>.</p>
<p>A continuaci칩n est치n los ejemplos de c칩mo a침adir trazas en cada una de estas librer칤as, todos consisten b치sicamente a침adir un interceptor que es llamado cuando se realiza una petici칩n y se recibe la respuestas, en este interceptor es posible emitir las trazas de las peticiones HTTP.</p>
<p>Estas son las dependencias de librer칤as para los cliente.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-groovy" data-lang="groovy"><span class="line"><span class="cl"><span class="n">plugins</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">id</span> <span class="s1">&#39;application&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">repositories</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">jcenter</span><span class="o">()</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">dependencies</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// HttpClient&#10;</span></span></span><span class="line"><span class="cl"><span class="c1"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">implementation</span> <span class="s1">&#39;codes.rafael.interceptablehttpclient:interceptable-http-client:1.0&#39;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// WebClient&#10;</span></span></span><span class="line"><span class="cl"><span class="c1"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">implementation</span> <span class="s1">&#39;org.springframework:spring-webflux:5.3.0&#39;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">implementation</span> <span class="s1">&#39;org.projectreactor:reactor-spring:1.0.1.RELEASE&#39;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">implementation</span> <span class="s1">&#39;io.projectreactor.netty:reactor-netty:1.0.0&#39;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// Retrofit&#10;</span></span></span><span class="line"><span class="cl"><span class="c1"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">implementation</span> <span class="s1">&#39;com.squareup.retrofit2:retrofit:2.9.0&#39;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">implementation</span> <span class="s1">&#39;com.squareup.retrofit2:converter-scalars:2.9.0&#39;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">// OkHttp&#10;</span></span></span><span class="line"><span class="cl"><span class="c1"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">implementation</span> <span class="s1">&#39;com.squareup.okhttp3:logging-interceptor:3.9.0&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">application</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">mainClass</span> <span class="o">=</span> <span class="s1">&#39;io.github.picodotdev.blogbitix.httpclientlog.Main&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>build.gradle</span>
    </div>
</div>
<h4 id="trazas-con-el-cliente-java">Trazas con el cliente Java</h4>
<p>El cliente de Java en la versi칩n de Java 9 no incluye en su API un soporte sencillo para a침adir trazas al contrario de las otras librer칤as, sin embargo, a칰n no ofrececiendo este soporte como el cliente est치 incluido en el JDK sigue siendo una buena opci칩n para reducir el n칰mero de dependencias.</p>
<p>Una posibilidad para no tener que crear una implementaci칩n propia para a침adirle trazabilidad al cliente HTTP de Java es utilizar la librer칤a <a href="https://github.com/raphw/interceptable-http-client">interceptable-http-client</a> que precisamente proporciona la implementaci칩n, esta librer칤a es del mismo autor que otras conocidas como <a href="https://bytebuddy.net/">Byte Buddy</a>.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.httpclientlog</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kt">void</span> <span class="nf">httpClient</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Function</span><span class="o">&lt;</span><span class="n">HttpRequest</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">onRequest</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpRequest</span> <span class="n">r</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">String</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="na">headers</span><span class="o">().</span><span class="na">map</span><span class="o">().</span><span class="na">entrySet</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">map</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;-H \&#34;%s: %s\&#34;&#34;</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">e</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">)));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}).</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;curl -v %s -X %s %s %s&#34;</span><span class="o">,</span> <span class="n">VERSION</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">version</span><span class="o">().</span><span class="na">orElse</span><span class="o">(</span><span class="n">HttpClient</span><span class="o">.</span><span class="na">Version</span><span class="o">.</span><span class="na">HTTP_2</span><span class="o">)),</span> <span class="n">r</span><span class="o">.</span><span class="na">method</span><span class="o">().</span><span class="na">toUpperCase</span><span class="o">(),</span> <span class="n">headers</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">uri</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">};</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">BiConsumer</span><span class="o">&lt;</span><span class="n">HttpResponse</span><span class="o">&lt;?&gt;,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">onResponse</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpResponse</span><span class="o">&lt;?&gt;</span> <span class="n">r</span><span class="o">,</span> <span class="n">String</span> <span class="n">curl</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">String</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="na">headers</span><span class="o">().</span><span class="na">map</span><span class="o">().</span><span class="na">entrySet</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">map</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;[%s: %s]&#34;</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">e</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">)));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}).</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;%s%n&#34;</span><span class="o">,</span> <span class="n">curl</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;%s %s%n&#34;</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">statusCode</span><span class="o">(),</span> <span class="n">headers</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">};</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">BiConsumer</span><span class="o">&lt;</span><span class="n">Throwable</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">onError</span> <span class="o">=</span> <span class="o">(</span><span class="n">Throwable</span> <span class="n">t</span><span class="o">,</span> <span class="n">String</span> <span class="n">curl</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;%s%n&#34;</span><span class="o">,</span> <span class="n">curl</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">t</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">};</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">HttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="n">InterceptableHttpClient</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">version</span><span class="o">(</span><span class="n">HttpClient</span><span class="o">.</span><span class="na">Version</span><span class="o">.</span><span class="na">HTTP_2</span><span class="o">).</span><span class="na">interceptor</span><span class="o">(</span><span class="n">onRequest</span><span class="o">,</span> <span class="n">onResponse</span><span class="o">,</span> <span class="n">onError</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">HttpResponse</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">HttpRequest</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">(</span><span class="k">new</span> <span class="n">URI</span><span class="o">(</span><span class="s">&#34;https://www.google.es/&#34;</span><span class="o">)).</span><span class="na">headers</span><span class="o">(</span><span class="s">&#34;User-Agent&#34;</span><span class="o">,</span> <span class="s">&#34;java/1.0&#34;</span><span class="o">).</span><span class="na">GET</span><span class="o">().</span><span class="na">build</span><span class="o">(),</span> <span class="n">HttpResponse</span><span class="o">.</span><span class="na">BodyHandlers</span><span class="o">.</span><span class="na">ofString</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-HttpClient.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">HttpClient&#10;</span></span><span class="line"><span class="cl">curl -v --http2 -X GET -H &#34;User-Agent: java/1.0&#34; https://www.google.es/&#10;</span></span><span class="line"><span class="cl">200 :status: 200,accept-ranges: none,alt-svc: h3-Q050=&#34;:443&#34;; ma=2592000,h3-29=&#34;:443&#34;; ma=2592000,h3-T051=&#34;:443&#34;; ma=2592000,h3-T050=&#34;:443&#34;; ma=2592000,h3-Q046=&#34;:443&#34;; ma=2592000,h3-Q043=&#34;:443&#34;; ma=2592000,quic=&#34;:443&#34;; ma=2592000; v=&#34;46,43&#34;,cache-control: private, max-age=0,content-type: text/html; charset=ISO-8859-1,date: Fri, 06 Nov 2020 18:02:55 GMT,expires: -1,p3p: CP=&#34;This is not a P3P policy! See g.co/p3phelp for more info.&#34;,server: gws,set-cookie: NID=204=EGARz6ltyG7XQjKh88UMLg3-_hzPTBHpFe1ieqw71HQ-1dSaJqJVsQXAqrVQwxSB7bocuJ-higxMOBehSJvKnGOBOoxGWThDuVyvRlW-FYJfMSw7QW0UWRYZqApuiunasmE8AWCOS0W5pAKxLykbJK_6HFSOMYcjEHE6vzLkTvI; expires=Sat, 08-May-2021 18:02:55 GMT; path=/; domain=.google.es; HttpOnly,vary: Accept-Encoding,x-frame-options: SAMEORIGIN,x-xss-protection: 0</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System.out-HttpClient</span>
    </div>
</div>
<h4 id="trazas-con-spring-webclient">Trazas con Spring WebClient</h4>
<p>El cliente WebClient de Spring posee una API que permite realizar peticiones HTTP con pocas l칤neas de c칩digo.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.httpclientlog</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kt">void</span> <span class="nf">webClient</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">ExchangeFilterFunction</span> <span class="n">logRequest</span> <span class="o">=</span> <span class="n">ExchangeFilterFunction</span><span class="o">.</span><span class="na">ofRequestProcessor</span><span class="o">(</span><span class="n">r</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">String</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="na">headers</span><span class="o">().</span><span class="na">entrySet</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">map</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;-H \&#34;%s: %s\&#34;&#34;</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">e</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">)));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}).</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;curl -v %s -X %s %s %s%n&#34;</span><span class="o">,</span> <span class="n">HttpClient</span><span class="o">.</span><span class="na">Version</span><span class="o">.</span><span class="na">HTTP_2</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">method</span><span class="o">().</span><span class="na">name</span><span class="o">().</span><span class="na">toUpperCase</span><span class="o">(),</span> <span class="n">headers</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">url</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">Mono</span><span class="o">.</span><span class="na">just</span><span class="o">(</span><span class="n">r</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">});</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">ExchangeFilterFunction</span> <span class="n">logRespose</span> <span class="o">=</span> <span class="n">ExchangeFilterFunction</span><span class="o">.</span><span class="na">ofResponseProcessor</span><span class="o">(</span><span class="n">r</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">String</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="na">headers</span><span class="o">().</span><span class="na">asHttpHeaders</span><span class="o">().</span><span class="na">entrySet</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">map</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;-H \&#34;%s: %s\&#34;&#34;</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">e</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">)));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}).</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;%s %s%n&#34;</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">statusCode</span><span class="o">(),</span> <span class="n">headers</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">Mono</span><span class="o">.</span><span class="na">just</span><span class="o">(</span><span class="n">r</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">});</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">WebClient</span> <span class="n">client</span> <span class="o">=</span> <span class="n">WebClient</span><span class="o">.</span><span class="na">builder</span><span class="o">().</span><span class="na">filters</span><span class="o">(</span><span class="n">f</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">f</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">logRequest</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">f</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">logRespose</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}).</span><span class="na">baseUrl</span><span class="o">(</span><span class="s">&#34;https://www.google.com/&#34;</span><span class="o">).</span><span class="na">build</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">client</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">uri</span><span class="o">(</span><span class="s">&#34;/&#34;</span><span class="o">).</span><span class="na">header</span><span class="o">(</span><span class="s">&#34;User-Agent&#34;</span><span class="o">,</span> <span class="s">&#34;java/1.0&#34;</span><span class="o">).</span><span class="na">retrieve</span><span class="o">().</span><span class="na">toEntity</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">block</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-WebClient.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">WebClient&#10;</span></span><span class="line"><span class="cl">curl -v HTTP_2 -X GET -H &#34;User-Agent: java/1.0&#34; https://www.google.com/&#10;</span></span><span class="line"><span class="cl">200 Date: Fri, 06 Nov 2020 18:02:56 GMT,Expires: -1,Cache-Control: private, max-age=0,Content-Type: text/html; charset=ISO-8859-1,P3P: CP=&#34;This is not a P3P policy! See g.co/p3phelp for more info.&#34;,Server: gws,X-XSS-Protection: 0,X-Frame-Options: SAMEORIGIN,Set-Cookie: NID=204=OdP7rZlC5x02VjtcCx2tJGcyi68LaugdvQVzGmXWeeUazgiI1qkvMQvwRxCCvxsKvf1asPh4smC8jeIb0vGCQ9D2SGmUWziHFOLgr-Dhq4DnyIQmG0OUlSwhTrl3SoyFvcZrP_xBBCZksDhAgI-iFZdWqb4-U6lnMiY5q2oj8BY; expires=Sat, 08-May-2021 18:02:56 GMT; path=/; domain=.google.com; HttpOnly,Alt-Svc: h3-Q050=&#34;:443&#34;; ma=2592000,h3-29=&#34;:443&#34;; ma=2592000,h3-T051=&#34;:443&#34;; ma=2592000,h3-T050=&#34;:443&#34;; ma=2592000,h3-Q046=&#34;:443&#34;; ma=2592000,h3-Q043=&#34;:443&#34;; ma=2592000,quic=&#34;:443&#34;; ma=2592000; v=&#34;46,43&#34;,Transfer-Encoding: chunked</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System.out-WebClient</span>
    </div>
</div>
<h4 id="trazas-con-retrofit">Trazas con Retrofit</h4>
<p>Lo interesante del <a href="https://picodotdev.github.io/blog-bitix/2021/04/crear-de-forma-sencilla-un-cliente-de-un-servicio-rest-o-http-con-retrofit/">cliente Retrofit es que convierte una interfaz REST de un servicio en una interfaz de Java</a>, se est치 usando un objeto que implementa una interfaz pero que de forma subyacente se hacen peticiones HTTP. La librer칤a cliente de HTTP que utiliza Retrofit es <a href="https://square.github.io/okhttp/">OkHttp</a>.</p>
<p>El <em>interceptor</em> se a침ade sobre el cliente OkHttp que luego es utilizado para construir el cliente del servicio con Retrofit.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span><span class="lnt">43&#10;</span><span class="lnt">44&#10;</span><span class="lnt">45&#10;</span><span class="lnt">46&#10;</span><span class="lnt">47&#10;</span><span class="lnt">48&#10;</span><span class="lnt">49&#10;</span><span class="lnt">50&#10;</span><span class="lnt">51&#10;</span><span class="lnt">52&#10;</span><span class="lnt">53&#10;</span><span class="lnt">54&#10;</span><span class="lnt">55&#10;</span><span class="lnt">56&#10;</span><span class="lnt">57&#10;</span><span class="lnt">58&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.httpclientlog</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">GoogleService</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@GET</span><span class="o">(</span><span class="s">&#34;/&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Headers</span><span class="o">(</span><span class="s">&#34;User-Agent: java/1.0&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Call</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">get</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kt">void</span> <span class="nf">retrofit</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Interceptor</span> <span class="n">interceptor</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Interceptor</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Override</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="n">Response</span> <span class="nf">intercept</span><span class="o">(</span><span class="n">Chain</span> <span class="n">chain</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">logRequest</span><span class="o">(</span><span class="n">chain</span><span class="o">.</span><span class="na">request</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="na">proceed</span><span class="o">(</span><span class="n">chain</span><span class="o">.</span><span class="na">request</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">logResponse</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">response</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kt">void</span> <span class="nf">logRequest</span><span class="o">(</span><span class="n">Request</span> <span class="n">r</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">String</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="na">headers</span><span class="o">().</span><span class="na">toMultimap</span><span class="o">().</span><span class="na">entrySet</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">map</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;-H \&#34;%s: %s\&#34;&#34;</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">e</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">)));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}).</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;curl -v %s -X %s %s %s%n&#34;</span><span class="o">,</span> <span class="n">HttpClient</span><span class="o">.</span><span class="na">Version</span><span class="o">.</span><span class="na">HTTP_2</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">method</span><span class="o">().</span><span class="na">toUpperCase</span><span class="o">(),</span> <span class="n">headers</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">url</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kt">void</span> <span class="nf">logResponse</span><span class="o">(</span><span class="n">Response</span> <span class="n">r</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">String</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="na">headers</span><span class="o">().</span><span class="na">toMultimap</span><span class="o">().</span><span class="na">entrySet</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">map</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;-H \&#34;%s: %s\&#34;&#34;</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">e</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">)));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}).</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;%s %s%n&#34;</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">code</span><span class="o">(),</span> <span class="n">headers</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">};</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">OkHttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OkHttpClient</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">addInterceptor</span><span class="o">(</span><span class="n">interceptor</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">build</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Retrofit</span> <span class="n">retrofit</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Retrofit</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">baseUrl</span><span class="o">(</span><span class="s">&#34;https://www.google.com/&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">client</span><span class="o">(</span><span class="n">client</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">addConverterFactory</span><span class="o">(</span><span class="n">ScalarsConverterFactory</span><span class="o">.</span><span class="na">create</span><span class="o">())</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">build</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">GoogleService</span> <span class="n">service</span> <span class="o">=</span> <span class="n">retrofit</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">GoogleService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">service</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">execute</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">client</span><span class="o">.</span><span class="na">dispatcher</span><span class="o">().</span><span class="na">executorService</span><span class="o">().</span><span class="na">shutdown</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">client</span><span class="o">.</span><span class="na">connectionPool</span><span class="o">().</span><span class="na">evictAll</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-Retrofit.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">Retrofit&#10;</span></span><span class="line"><span class="cl">curl -v HTTP_2 -X GET -H &#34;user-agent: java/1.0&#34; https://www.google.com/&#10;</span></span><span class="line"><span class="cl">200 alt-svc: h3-Q050=&#34;:443&#34;; ma=2592000,h3-29=&#34;:443&#34;; ma=2592000,h3-T051=&#34;:443&#34;; ma=2592000,h3-T050=&#34;:443&#34;; ma=2592000,h3-Q046=&#34;:443&#34;; ma=2592000,h3-Q043=&#34;:443&#34;; ma=2592000,quic=&#34;:443&#34;; ma=2592000; v=&#34;46,43&#34;,cache-control: private, max-age=0,content-type: text/html; charset=ISO-8859-1,date: Fri, 06 Nov 2020 18:02:57 GMT,expires: -1,p3p: CP=&#34;This is not a P3P policy! See g.co/p3phelp for more info.&#34;,server: gws,set-cookie: NID=204=X1R50uh209S4FMzXNh5uLVYax4PghnyMqaHHk-q3YndWWnTxE8oShyfmWRIEM-tcWXvoja2S_N_gO_aHlCL6X0r1e3ITJ-dgSBR2G4wTsfFLAi1G_MBVV8MTkHtKkqAHkR5H73p9D5t-nJG3PcnXLZFHYUKNdlzoF6BYStOCpyQ; expires=Sat, 08-May-2021 18:02:57 GMT; path=/; domain=.google.com; HttpOnly,x-frame-options: SAMEORIGIN,x-xss-protection: 0</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System.out-Retrofit</span>
    </div>
</div>
<h4 id="trazas-con-okhttp">Trazas con OkHttp</h4>
<p>OkHttp es otra de las librer칤as para realizar peticiones HTTP populares en Java. Para a침adir trazas hay que crear un interceptor y a침adirlo al cliente.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span><span class="lnt">43&#10;</span><span class="lnt">44&#10;</span><span class="lnt">45&#10;</span><span class="lnt">46&#10;</span><span class="lnt">47&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.httpclientlog</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kt">void</span> <span class="nf">okHttp</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Interceptor</span> <span class="n">interceptor</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Interceptor</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Override</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="n">Response</span> <span class="nf">intercept</span><span class="o">(</span><span class="n">Chain</span> <span class="n">chain</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">logRequest</span><span class="o">(</span><span class="n">chain</span><span class="o">.</span><span class="na">request</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Response</span> <span class="n">response</span> <span class="o">=</span> <span class="n">chain</span><span class="o">.</span><span class="na">proceed</span><span class="o">(</span><span class="n">chain</span><span class="o">.</span><span class="na">request</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">logResponse</span><span class="o">(</span><span class="n">response</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">response</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kt">void</span> <span class="nf">logRequest</span><span class="o">(</span><span class="n">Request</span> <span class="n">r</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">String</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="na">headers</span><span class="o">().</span><span class="na">toMultimap</span><span class="o">().</span><span class="na">entrySet</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">map</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;-H \&#34;%s: %s\&#34;&#34;</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">e</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">)));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}).</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;curl -v %s -X %s %s %s%n&#34;</span><span class="o">,</span> <span class="n">HttpClient</span><span class="o">.</span><span class="na">Version</span><span class="o">.</span><span class="na">HTTP_2</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">method</span><span class="o">().</span><span class="na">toUpperCase</span><span class="o">(),</span> <span class="n">headers</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">url</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kt">void</span> <span class="nf">logResponse</span><span class="o">(</span><span class="n">Response</span> <span class="n">r</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">String</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="na">headers</span><span class="o">().</span><span class="na">toMultimap</span><span class="o">().</span><span class="na">entrySet</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">map</span><span class="o">((</span><span class="n">e</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;-H \&#34;%s: %s\&#34;&#34;</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">e</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">stream</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">)));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}).</span><span class="na">collect</span><span class="o">(</span><span class="n">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;%s %s%n&#34;</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">code</span><span class="o">(),</span> <span class="n">headers</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">};</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Request</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">url</span><span class="o">(</span><span class="s">&#34;https://www.google.com/&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">addHeader</span><span class="o">(</span><span class="s">&#34;User-Agent&#34;</span><span class="o">,</span> <span class="s">&#34;java/1.0&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">build</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">OkHttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OkHttpClient</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">addInterceptor</span><span class="o">(</span><span class="n">interceptor</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">build</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">client</span><span class="o">.</span><span class="na">newCall</span><span class="o">(</span><span class="n">request</span><span class="o">).</span><span class="na">execute</span><span class="o">().</span><span class="na">close</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">client</span><span class="o">.</span><span class="na">dispatcher</span><span class="o">().</span><span class="na">executorService</span><span class="o">().</span><span class="na">shutdown</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">client</span><span class="o">.</span><span class="na">connectionPool</span><span class="o">().</span><span class="na">evictAll</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-OkHttp.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">OkHttp&#10;</span></span><span class="line"><span class="cl">curl -v HTTP_2 -X GET -H &#34;user-agent: java/1.0&#34; https://www.google.com/&#10;</span></span><span class="line"><span class="cl">200 alt-svc: h3-Q050=&#34;:443&#34;; ma=2592000,h3-29=&#34;:443&#34;; ma=2592000,h3-T051=&#34;:443&#34;; ma=2592000,h3-T050=&#34;:443&#34;; ma=2592000,h3-Q046=&#34;:443&#34;; ma=2592000,h3-Q043=&#34;:443&#34;; ma=2592000,quic=&#34;:443&#34;; ma=2592000; v=&#34;46,43&#34;,cache-control: private, max-age=0,content-type: text/html; charset=ISO-8859-1,date: Fri, 06 Nov 2020 18:02:57 GMT,expires: -1,p3p: CP=&#34;This is not a P3P policy! See g.co/p3phelp for more info.&#34;,server: gws,set-cookie: NID=204=C7o2wM5asqIWOZgvG7m8RlrZtILJdO8xc0gogTUwLwXhNPK2PeDmhDKbXIsCDBbG5dhA3zXyM4caW0roWpyGJZaUoyMDrDtRgjOsChlT7NkxanFIY8xxI4plxUrqFZspkNlB3r25wjo2UwFXCOumBjSSZI7XRqp-AvOTF8e-DMQ; expires=Sat, 08-May-2021 18:02:57 GMT; path=/; domain=.google.com; HttpOnly,x-frame-options: SAMEORIGIN,x-xss-protection: 0</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System.out-OkHttp</span>
    </div>
</div>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/HttpClientLog">c칩digo fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub y probarlo en tu equipo ejecutando siguiente comando:<br><code>./gradlew run</code></p>
</div>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://objectpartners.com/2018/03/01/log-your-resttemplate-request-and-response-without-destroying-the-body/">Log your RestTemplate Request and Response without destroying the body</a></li>
<li><a href="https://stackoverflow.com/a/33256827">Logging with Retrofit 2</a></li>
<li><a href="https://dzone.com/articles/okhttpclient-logging-configuration-with-intercepto">OkHttpClient Logging Configuration With Interceptors</a></li>
<li><a href="https://www.concretepage.com/apache-api/apache-httpclient-interceptor">Apache HttpClient Interceptor</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="java"/>
            
                <category term="planeta-codigo"/>
            
                <category term="programacion"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2020/10/como-depurar-una-aplicacion-java-con-un-ide/</id>
        <title>C칩mo depurar una aplicaci칩n Java con un IDE</title>
        <updated>2020-10-30T14:30:00+01:00</updated>
        <published>2020-10-30T14:30:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2020/10/como-depurar-una-aplicacion-java-con-un-ide/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>La depuraci칩n de un programa o <em>debug</em> permite ejecutar un programa de forma interactiva, paso a paso y examinar los valores de las variables. Esto proporciona valiosa informaci칩n que permite comprobar el correcto funcionamiento de un programa o descubrir la causa de un error del que las trazas no proporcionan informaci칩n suficiente. Los depuradores o <em>debuggers</em> son las aplicaciones que ejecutan el programa en modo depuraci칩n, permiten establecer puntos de ruptura, continuar la ejecuci칩n paso a paso o hasta el siguiente punto de ruptura e inspeccionar los valores de las variables. Los entornos integrados de desarrollo o IDE de Java como IntelliJ IDEA y eclipse ofrecen soporte para hacer depuraci칩n.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/java.svg" width="200" height="366" alt="Java" title="Java"  class=""></p>
</div>
<p>Pocos programas est치n libres de errores, algunos errores se producen cuando se cumplen ciertas condiciones en los datos que maneja una aplicaci칩n. En ocasiones descubrir la causa de un error es suficiente si la aplicaci칩n emite trazas pero en los errores m치s complicados o con poca informaci칩n se requiere depurar el programa.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/07/la-libreria-log4j-para-emitir-trazas-en-aplicaciones-java/">La librer칤a Log4j para emitir trazas en aplicaciones Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/09/centralizar-y-consultar-las-trazas-de-las-aplicaciones-con-elasticsearch-logstash-y-kibana/">Centralizar y consultar las trazas de las aplicaciones con Elasticsearch, Logstash y Kibana</a></li>
</ul>
<p>La depuraci칩n se emplea en el momento de desarrollo o para reproducir y descubrir en el entorno de desarrollo local un error que se est치 produciendo en producci칩n. Por la utilidad de la depuraci칩n todos los lenguajes ofrecen alguna posibilidad de hacer depuraci칩n. En Java la depuraci칩n se realiza configurando la m치quina virtual con ciertos argumentos y el entorno integrado de desarrollo o IDE para conectarse a la m치quina virtual.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del art칤culo</h2><toc></toc></div>
<h3 id="qu칠-es-la-depuraci칩n-de-un-programa">Qu칠 es la depuraci칩n de un programa</h3>
<p>La depuraci칩n o <em>debug</em> es una forma de ejecuci칩n de un programa con la que el programador puede observar de forma interactiva la ejecuci칩n l칤nea a l칤nea del c칩digo fuente con el objetivo de eliminar alg칰n error. El depurador o <em>debugger</em> es una aplicaci칩n que permite a침adir puntos de ruptura o <em>breakpoints</em> donde el depurador para la ejecuci칩n, inspeccionar los valores de las variables, continuar la ejecuci칩n hasta la siguiente l칤nea o hasta el siguiente punto de ruptura, continuar la ejecuci칩n entrando en una funci칩n o sin entrar en la funci칩n.</p>
<h3 id="configurar-la-m치quina-virtual-java-para-hacer-_debug_">Configurar la m치quina virtual Java para hacer <em>debug</em></h3>
<p>Para depurar un programa Java es necesario configurar la m치quina virtual Java o JVM en modo <em>debug</em>. Esta configuraci칩n de la JVM se realiza a침adiendo ciertos argumentos al comando que inicia la aplicaci칩n.</p>
<p>Un ejemplo de programa para practicar c칩mo depurar es el siguiente.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span><span class="lnt">8&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.java.helloworld</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;Hola mundo!&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main.java</span>
    </div>
</div>
<h4 id="debug-con-el-comando-java">Debug con el comando java</h4>
<p>Si la aplicaci칩n se inicia con el comando <a href="https://docs.oracle.com/en/java/javase/11/tools/java.html">java</a> hay que a침adir los siguientes argumentos para la m치quina virtual. Estos argumentos indican a la m치quina virtual que acepte conexiones de red para realizar depuraci칩n desde un depurador como un IDE de forma remota o desde la m치quina local.</p>
<ul>
<li><em>-agentlib:jdwp</em>: habilita el protocolo de depuraci칩n (JDWP) en la m치quina virtual. Este es el argumento principal que habilita la depuraci칩n.</li>
<li><em>transport=dt_socket</em>: se usa una conexi칩n de red para las conexiones de depuraci칩n.</li>
<li><em>server=y</em>: escucha conexiones de los depuradores. con valor <em>n</em>, el proceso intenta conectarse a un depurador en vez de esperar conexiones. El valor <em>n</em> requiere argumentos adicionales.</li>
<li><em>suspend=n</em>: con el valor <em>n</em> no se espera a una conexi칩n del depurador en el inicio. La aplicaci칩n se inicia y ejecuta con normalidad hasta que un depurador se conecta. Con el valor <em>y</em>, la aplicaci칩n no empieza hasta que un depurador se conecta.</li>
<li><em>address=5005</em>: indica el puerto en el que la m치quina virtual acepta conexiones.</li>
</ul>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"> $ java -agentlib:jdwp<span class="o">=</span><span class="nv">transport</span><span class="o">=</span>dt_socket,server<span class="o">=</span>y,suspend<span class="o">=</span>n,address<span class="o">=</span><span class="m">5005</span> -classpath <span class="s2">&#34;target/classes:libraries/*&#34;</span> io.github.picodotdev.blogbitix.java8.helloworld.Main &#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>java-debug.sh</span>
    </div>
</div>
<h4 id="debug-con-gradle">Debug con Gradle</h4>
<p>En el momento de desarrollo si se emplea la herramienta de construcci칩n <a href="https://gradle.org/">Gradle</a> tambi칠n es posible arrancar la m치quina virtual de la aplicaci칩n en modo depuraci칩n a la espera de la conexi칩n del depurador. En el primer comando se inicia la depuraci칩n en el puerto <em>5005</em> y con el segundo comando utilizando la variable de entorno <em>GRADLE_OPTS</em> es posible especificar los mismos par치metros de la m치quina virtual que al ejecutar la aplicaci칩n Java directamente.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ./gradlew run --debug-jvm&#10;</span></span><span class="line"><span class="cl">...&#10;</span></span><span class="line"><span class="cl">Listening <span class="k">for</span> transport dt_socket at address: <span class="m">5005</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">$ <span class="nv">GRADLE_OPTS</span><span class="o">=</span><span class="s2">&#34;-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5005&#34;</span> ./gradlew run&#10;</span></span><span class="line"><span class="cl">Listening <span class="k">for</span> transport dt_socket at address: <span class="m">5005</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>gradle-run-1.sh</span>
    </div>
</div>
<p>La configuraci칩n del <em>debug</em> tambi칠n es posible especificarla en el archivo de construcci칩n del proyecto.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-groovy" data-lang="groovy"><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">run</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">debugOptions</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="n">enabled</span> <span class="o">=</span> <span class="kc">true</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="n">server</span> <span class="o">=</span> <span class="kc">true</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="n">suspend</span> <span class="o">=</span> <span class="kc">true</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="n">port</span> <span class="o">=</span> <span class="mi">5005</span>&#10;</span></span><span class="line"><span class="cl">   <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>build.gradle</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ./gradlew run&#10;</span></span><span class="line"><span class="cl">Listening <span class="k">for</span> transport dt_socket at address: <span class="m">5005</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>gradle-run-2.sh</span>
    </div>
</div>
<h3 id="depurar-una-aplicaci칩n-java-con-un-ide">Depurar una aplicaci칩n Java con un IDE</h3>
<p>El depurador permite a침adir puntos de ruptura en cualquiera de las l칤neas del c칩digo fuente del programa para que la ejecuci칩n se detenga cuando se llegue a ese punto. Una vez detenida la ejecuci칩n el depurador permite examinar los valores de las variables disponibles en el 치mbito de detenci칩n de la ejecuci칩n.</p>
<p>Para continuar la ejecuci칩n si se ha detenido en una l칤nea de c칩digo con una llamada a una funci칩n el depurador ofrece la posibilidad de continuar entrando al c칩digo de esa funci칩n o saltar a la siguiente l칤nea de c칩digo, tambi칠n se ofrece la posibilidad de continuar la ejecuci칩n hasta la siguiente punto de ruptura. Los puntos de ruptura se pueden habilitar o deshabilitar, no siendo necesario eliminarlos para que no tengan efecto.</p>
<h4 id="c칩mo-depurar-c칩digo-java-con-intellij-idea">C칩mo depurar c칩digo Java con IntelliJ IDEA</h4>
<p>Arrancada la m치quina virtual en modo depuraci칩n hay que configurar <a href="https://www.jetbrains.com/idea/">IntelliJ</a> para que se conecte a la m치quina virtual ya sea con una configuraci칩n de inicio de la aplicaci칩n o uniendo el IDE a un proceso local de la m치quina virtual en modo depuraci칩n desde el men칰 <em>Run &gt; Attach to Process</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/10/como-depurar-una-aplicacion-java-con-un-ide/images/intellij-debug-configurations_hu6974b8f2106ab7f5552794ced458dd93_67824_2560x1440_fit_box_3.png" data-gallery="" title="Configuraci칩n de depuraci칩n remota"><img src="https://picodotdev.github.io/blog-bitix/2020/10/como-depurar-una-aplicacion-java-con-un-ide/images/intellij-debug-configurations_hu6974b8f2106ab7f5552794ced458dd93_67824_300x200_fit_box_3.png" width="300" height="190" alt="Configuraci칩n de depuraci칩n remota" title="Configuraci칩n de depuraci칩n remota"  class="lozad "></a></p>
<figcaption>Configuraci칩n de depuraci칩n remota</figcaption>
</figure>
</div>
<p>A침adir un punto de ruptura se hace desde el espacio vertical del editor del c칩digo fuente al inicio de cada l칤nea, de forma alternativa utilizando la combinaci칩n de teclas <kbd>Ctrl+F8</kbd> a침ade un punto de ruptura en la l칤nea de edici칩n actual. Los puntos de ruptura pueden ser:</p>
<ul>
<li>De l칤nea: suspende la ejecuci칩n al llegar a esa l칤nea de c칩digo.</li>
<li>De m칠todo: suspende la ejecuci칩n al entrar o salir del m칠todo.</li>
<li>De variable: suspende la ejecuci칩n al leer o escribir en la variable.</li>
<li>De excepci칩n: suspende la ejecuci칩n cuando una excepci칩n es lanzada en este caso no depende de una referencia de c칩digo concreta.</li>
</ul>
<p>La combinaci칩n de teclas para continuar la ejecuci칩n cuando se ha suspendido por llegar a un punto de ruptura son:</p>
<ul>
<li>Sin entrar en la funci칩n o <em>step over</em>: <kbd>F8</kbd>.</li>
<li>Entrar a la funci칩n o <em>step into</em>: <kbd>F7</kbd>.</li>
<li>Salir de la funci칩n o <em>step out</em>: <kbd>Shift+F8</kbd>.</li>
<li>Hasta llegar a la posici칩n del cursor: <kbd>Alt+F9</kbd>.</li>
</ul>
<p>El programa se detiene en el punto de ruptura, los valores de las variables en el contexto donde se ha detenido la ejecuci칩n se pueden inspeccionar, en este caso el valor del <em>array</em> con los argumentos del programa.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/10/como-depurar-una-aplicacion-java-con-un-ide/images/intellij-debug_hu2993faa4a5b1cfb3aee1e8a8248bf397_125069_2560x1440_fit_box_3.png" data-gallery="" title="Depuraci칩n de un programa en IntelliJ IDEA"><img src="https://picodotdev.github.io/blog-bitix/2020/10/como-depurar-una-aplicacion-java-con-un-ide/images/intellij-debug_hu2993faa4a5b1cfb3aee1e8a8248bf397_125069_300x200_fit_box_3.png" width="246" height="200" alt="Depuraci칩n de un programa en IntelliJ IDEA" title="Depuraci칩n de un programa en IntelliJ IDEA"  class="lozad "></a></p>
<figcaption>Depuraci칩n de un programa en IntelliJ IDEA</figcaption>
</figure>
</div>
<h4 id="c칩mo-depurar-c칩digo-java-con-eclipse">C칩mo depurar c칩digo Java con eclipse</h4>
<p>El entorno de desarrollo integrado <a href="https://eclipse.org">eclipse</a> tambi칠n ofrece un depurador para aplicaciones Java. Permite iniciar una aplicaci칩n en modo depuraci칩n, conectarse a una m치quina virtual externa configurada con soporte para depuraci칩n, establecer puntos de ruptura con la combinaci칩n de teclas <kbd>Ctrl+Shift+B</kbd>, continuar la ejecuci칩n cuando se ha suspendido e inspeccionar los valores de las variables.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/10/como-depurar-una-aplicacion-java-con-un-ide/images/eclipse-debug-configurations_hu1c0f6e385374dcdc1d23d76092d13eed_77566_2560x1440_fit_box_3.png" data-gallery="" title="Configuraci칩n de depuraci칩n remota"><img src="https://picodotdev.github.io/blog-bitix/2020/10/como-depurar-una-aplicacion-java-con-un-ide/images/eclipse-debug-configurations_hu1c0f6e385374dcdc1d23d76092d13eed_77566_300x200_fit_box_3.png" width="273" height="200" alt="Configuraci칩n de depuraci칩n remota" title="Configuraci칩n de depuraci칩n remota"  class="lozad "></a></p>
<figcaption>Configuraci칩n de depuraci칩n remota</figcaption>
</figure>
</div>
<p>La combinaci칩n de teclas para continuar la ejecuci칩n cuando se ha suspendido por llegar a un punto de ruptura son:</p>
<ul>
<li>Sin entrar en la funci칩n o <em>step over</em>: <kbd>F6</kbd>.</li>
<li>Entrar a la funci칩n o <em>step into</em>: <kbd>F5</kbd>.</li>
<li>Salir de la funci칩n o <em>step out</em>: <kbd>F7</kbd>.</li>
<li>Hasta llegar a la posici칩n del cursor: <kbd>Ctrl+R</kbd>.</li>
</ul>
<p>Los puntos de ruptura se crean con la tecla Ctrl+Shift+B o con el bot칩n derecho desde el espacio vertical del editor del c칩digo fuente al inicio de cada l칤nea.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/10/como-depurar-una-aplicacion-java-con-un-ide/images/eclipse-debug_hu5e4bda6d1fd04f69eaf9a20d507bc70a_93363_2560x1440_fit_box_3.png" data-gallery="" title="Depuraci칩n de un programa en eclipse"><img src="https://picodotdev.github.io/blog-bitix/2020/10/como-depurar-una-aplicacion-java-con-un-ide/images/eclipse-debug_hu5e4bda6d1fd04f69eaf9a20d507bc70a_93363_300x200_fit_box_3.png" width="300" height="187" alt="Depuraci칩n de un programa en eclipse" title="Depuraci칩n de un programa en eclipse"  class="lozad "></a></p>
<figcaption>Depuraci칩n de un programa en eclipse</figcaption>
</figure>
</div>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://docs.gradle.org/current/userguide/application_plugin.html">The Application Plugin</a></li>
<li><a href="https://www.jetbrains.com/help/idea/debugging-code.html">IntelliJ IDEA Debug code</a></li>
<li><a href="https://www.jetbrains.com/help/idea/attaching-to-local-process.html">IntelliJ IDEA Attach to process</a></li>
<li><a href="https://www.jetbrains.com/help/idea/run-debug-configuration.html">IntelliJ IDEA Run/debug configurations</a></li>
<li><a href="https://www.jetbrains.com/help/idea/stepping-through-the-program.html#smart-step-into">IntelliJ IDEA Step through the program</a></li>
<li><a href="https://www.eclipse.org/community/eclipse_newsletter/2017/june/article1.php">Debugging the Eclipse IDE for Java Developers</a></li>
</ul>
</div>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/HolaMundoJava8">c칩digo fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub y probarlo en tu equipo ejecutando siguiente comando:<br><code>./gradlew run</code></p>
</div>
]]>
        </content>
        
            
                <category term="java"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    
</feed>