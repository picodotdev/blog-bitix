<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title type="text">Blog Bitix</title>
    <subtitle type="text">Blog sobre al lenguaje de programación Java y la distribución GNU/Linux que uso habitualmente, Arch Linux, lo que aprendo sobre el software libre, la programación web y otros temas relacionados con la tecnología y la informática. El contenido puede contener trazas de asuntos fuera de tema.</subtitle>
    <link rel="self" href="https://picodotdev.github.io/blog-bitix/index.xml"/>
    <link href="https://picodotdev.github.io/blog-bitix/" />
    <id>https://picodotdev.github.io/blog-bitix/tags/planeta-codigo/</id>
    <updated>2023-01-19T20:00:00+01:00</updated>
    <author><name>picodotdev</name></author>
    <generator>Hugo</generator>
    <icon>https://picodotdev.github.io/blog-bitix/assets/favicon.ico</icon>
    <logo>https://picodotdev.github.io/blog-bitix/assets/images/blog-bitix.svg</logo>
    <rights>https://creativecommons.org/licenses/by-sa/4.0/</rights>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2023/01/construir-desplegar-y-observar-aplicaciones-de-forma-uniforme-con-waypoint/</id>
        <title>Construir, desplegar y observar aplicaciones de forma uniforme con Waypoint</title>
        <updated>2023-01-19T20:00:00+01:00</updated>
        <published>2023-01-19T20:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2023/01/construir-desplegar-y-observar-aplicaciones-de-forma-uniforme-con-waypoint/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Cuando se tienen muchas aplicaciones si no se tienen unos procesos definidos seguramente cada una requerirá su propio proceso, herramientas de construcción y despliegue. Estas diferencias añaden complejidad y no es deseable para tener un flujo de trabajo ágil. La herramienta Waypoint de HashiCorp permite construir una aplicación independientemente del lenguaje en el que esté implementada, desplegar en diferentes proveedores de computación en la nube y observar las aplicaciones una vez desplegadas, todo con la misma herramienta y de forma uniforme que simplifica en gran medida el flujo de desarrollo.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/hashicorp-waypoint.svg" width="200" height="205" alt="HashiCorp Waypoint" title="HashiCorp Waypoint" class="" loading="false&#34;"></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/hashicorp.svg" width="200" height="200" alt="HashiCorp" title="HashiCorp" class="" loading="false&#34;"></p>
</div>
<p>No son pocas los lenguajes de programación actuales y hay varias plataformas de computación en la nube. En una organización grande seguramente haya una diversidad de aplicaciones en cuanto a lenguaje de programación e incluso quizá utiliza varios proveedores de computación en la nube, cuanto menos es deseable tratar a todas las aplicaciones igual independientemente de su lenguaje para que el flujo sea uniforme para todas las aplicaciones ni es bueno acoplarse a un determinado proveedor de computación para tener la libertad y flexibilidad en un futuro de cambiar a otro si las circunstancias cambian.</p>
<p>Las aplicaciones para se ejecución en su ciclo de vida esencialmente necesitan al menos dos operaciones, una es su construcción a partir de código fuente y la segunda es su despliegue en el entorno de ejecución. Hay una tercera adicional que es la de publicación consistente en enviarle tráfico, el despliegue simplemente consiste en ejecutar en el entorno pero sin tráfico para la versión desplegada, esto es, separando el despliegue de la publicación.</p>
<p><a href="https://www.hashicorp.com/">HashiCorp</a> ofrece varias herramientas que cada una cubre una necesidad de las aplicaciones, y de las que varias ya he escrito algunos artículos. Algunas de sus herramientas más conocidas son <a href="https://www.terraform.io/">Terraform</a> para tratar la infraestructura como código, <a href="https://www.consul.io/">Consul</a> para la conectividad entre servicios y <a href="https://www.vaultproject.io/">Vault</a> centrada en la seguridad como servicio pero tiene otras muy interesantes como <a href="https://www.vagrantup.com/">Vagrant</a> para la virtualización en local, <a href="https://www.packer.io/">Packer</a> para la construcción de imágenes de máquinas virtuales, <a href="https://www.boundaryproject.io/">Boundary</a> también el apartado de seguridad o <a href="https://www.nomadproject.io/">Nomad</a> una alternativa similar a <a href="https://kubernetes.io/">Kubernetes</a> pero mucho más sencilla de ejecutar en local.</p>
<p>En el caso de la construcción y despliegue, la herramienta que proporciona HashiCorp es <a href="https://www.waypointproject.io/">Waypoint</a>.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="waypoint">Waypoint</h3>
<p>Waypoint de HashiCorp es una herramienta que permite construir una aplicación y realizar el despliegue independientemente del lenguaje empleado por la aplicación y la infraestructura de ejecución que se utilice.</p>
<p>Con Waypoint es posible construir cualquier aplicación ya se trate de una aplicación programada en <a href="https://www.oracle.com/java/">Java</a>, <a href="https://nodejs.org/en/">Node</a> o <a href="https://www.python.org/">Python</a> y desplegarla en cualquier proveedor en la nube soportado como <a href="https://aws.amazon.com/es/">Amazon Web Services</a>, <a href="https://cloud.google.com/">Google Cloud Platform</a> o <a href="https://azure.microsoft.com/es-es/">Microsoft Azure</a>.</p>
<p>El utilizar la misma herramienta uniformiza el ciclo de vida de las aplicaciones y tratan a todas por igual simplificando el flujo de desarrollo, de forma similar que una propiedad de los contenedores es que permiten ejecutar procesos independientemente del lenguaje de programación en el que están programados, Waypoint uniformiza la construcción y despliegue.</p>
<p>Waypoint en la <a href="https://developer.hashicorp.com/waypoint/docs/lifecycle/build">fase de construcción</a> o <em>build</em> en esencia lo que hace es construir una imagen de contenedor que luego es la que es desplegada. La construcción de la imagen puede ser con un habitual archivo Dockerfile de <a href="https://www.docker.com/">Docker</a> pero también a través de <a href="https://buildpacks.io/">Buildpacks</a>. Una vez construida la imagen es almacenada en un registro de imágenes. La fase de construcción suele estar automatizada por una herramienta de CI/CD como <a href="https://jenkins.io/">Jenkins</a>, además se soportan otras como <a href="https://developer.hashicorp.com/waypoint/docs/automating-execution/github-actions">GitHub Actions</a>.</p>
<p>En la <a href="https://developer.hashicorp.com/waypoint/docs/lifecycle/deploy">fase de despliegue</a> o <em>deploy</em> la imagen es puesta en ejecución en la plataforma de despliegue seleccionada, se soportan varias incluyendo las más conocidas como Kubernetes, Nomad, AWS EC2, AWS ECS, AWS Lambdas, Google Cloud Run y Azure Containers Instances incluyendo Docker en local.</p>
<p>Si la plataforma de despliegue lo soporta la <a href="https://developer.hashicorp.com/waypoint/docs/lifecycle/release">fase de publicación</a> o <em>release</em> consiste en enviar tráfico a la aplicación.</p>
<ul>
<li><a href="https://developer.hashicorp.com/waypoint/tutorials/get-started-docker/get-started-docker">Use Waypoint with Docker</a></li>
<li><a href="https://developer.hashicorp.com/waypoint/docs/automating-execution/github-actions">Integrating Waypoint with GitHub Actions</a></li>
</ul>
<div class="media media-video">
  <iframe width="640" height="360" src="https://www.youtube.com/embed/DsZVvv2dlUs" frameborder="0" class="lozad" allowfullscreen></iframe>
</div>
<h4 id="instalación-de-waypoint">Instalación de Waypoint</h4>
<p>Al igual que muchas de las otras herramientas de HashiCorp que están implementadas con el lenguaje de programación <a href="https://golang.org/">Go</a>, Waypoint es un único binario con lo que basta descargar la última versión disponible y en el caso de <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> copiarla al directorio <em>/usr/local/bin/</em> donde los usuarios pueden instalar programas sin que entren en conflicto con los instalados por los paquetes de la distribución.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls -lh /usr/local/bin/&#10;</span></span><span class="line"><span class="cl">-rwxr-xr-x <span class="m">1</span> picodotdev picodotdev  23M ene <span class="m">10</span> 11:31 pack&#10;</span></span><span class="line"><span class="cl">-rwxr-xr-x <span class="m">1</span> picodotdev picodotdev 180M dic <span class="m">15</span> 18:59 waypoint</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>ls-bin.sh</span>
    </div>
</div>
<h4 id="inicio-del-servidor-de-waypoint">Inicio del servidor de Waypoint</h4>
<p>Waypoint se ejecuta en modo servidor, en este ejemplo se inicia como un contenedor de Docker en local y ejecutar un comando para su inicialización.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ waypoint install -platform<span class="o">=</span>docker -accept-tos&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>waypoint-install.sh</span>
    </div>
</div>
<p>Ofrece una interfaz gráfica en la que monitorizar trazas, builds, deployment y otros detalles. a la interfaz web se accede con el siguiente comando con la interfaz web accesible en la dirección <em>https://localhost:9702/</em>.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ waypoint ui -authenticate&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>waypoint-ui-authenticate.sh</span>
    </div>
</div>
<p>Una vez inicializado el servidor se puede iniciar sin necesidad de inicializarlo otra vez.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ waypoint server run -accept-tos&#10;</span></span><span class="line"><span class="cl">$ waypoint server bootstrap -server-addr<span class="o">=</span>127.0.0.1:9701 -server-tls-skip-verify&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>waypoint-server-run.sh</span>
    </div>
</div>
<h4 id="construcción-de-un-proyecto-con-waypoint-utilizando-buildpacks">Construcción de un proyecto con Waypoint utilizando Buildpacks</h4>
<p>En un artículo anterior mostraba cómo construir una aplicación con el lenguaje Java de <a href="https://projects.spring.io/spring-boot/">Spring Boot</a> con <a href="https://gradle.org/">Gradle</a> y Buildpacks para generar la imagen del contenedor.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2023/01/construir-la-imagen-del-contenedor-de-la-aplicacion-usando-buildpacks/">Construir la imagen del contenedor de la aplicación usando Buildpacks</a></li>
</ul>
<p>Para la construcción con Buildpacks utilizaba el siguiente comando que a través de argumentos configuraban los <em>buidpacks</em> y construcción de la aplicación.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ pack build spring-injection-point <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--env <span class="s2">&#34;BP_JVM_TYPE=JDK&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--env <span class="s2">&#34;BP_JVM_VERSION=11&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--env <span class="s2">&#34;BP_GRADLE_BUILT_ARTIFACT=app/build/distributions/app.zip&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--builder paketobuildpacks/builder-jammy-base <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--buildpack gcr.io/paketo-buildpacks/ca-certificates <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--buildpack gcr.io/paketo-buildpacks/syft <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--buildpack gcr.io/paketo-buildpacks/procfile <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--buildpack gcr.io/paketo-buildpacks/adoptium <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--buildpack gcr.io/paketo-buildpacks/gradle <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--buildpack gcr.io/paketo-buildpacks/executable-jar <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--buildpack gcr.io/paketo-buildpacks/spring-boot <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--default-process app <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--path .</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>pack-build.sh</span>
    </div>
</div>
<p>Utilizando el soporte de Buildpacks de Waypoint la definición de la construcción se especifican los mismos argumentos pero definidos en el archivo configuración de Waypoint. El comando <em>init</em> inicializa el proyecto en Waypoint a partir del archivo de su definición.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ waypoint init&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>waypoint-init.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-hcl" data-lang="hcl"><span class="line"><span class="cl"><span class="n">project</span> <span class="o">=</span> <span class="s2">&#34;Waypoint&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="k">app</span> <span class="s2">&#34;spring-injection-point&#34;</span> {&#10;</span></span><span class="line"><span class="cl">  <span class="k">build</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">use</span> <span class="s2">&#34;pack&#34;</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  builder</span> <span class="o">=</span> <span class="s2">&#34;paketobuildpacks/builder:base&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  buildpacks</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;gcr.io/paketo-buildpacks/ca-certificates&#34;, &#34;gcr.io/paketo-buildpacks/syft&#34;, &#34;gcr.io/paketo-buildpacks/procfile&#34;, &#34;gcr.io/paketo-buildpacks/adoptium&#34;, &#34;gcr.io/paketo-buildpacks/gradle&#34;, &#34;gcr.io/paketo-buildpacks/executable-jar&#34;, &#34;gcr.io/paketo-buildpacks/spring-boot&#34;</span><span class="p">]</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  process_type</span> <span class="o">=</span> <span class="s2">&#34;app&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  static_environment</span> <span class="o">=</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BP_JVM_TYPE</span> <span class="o">=</span> <span class="s2">&#34;JRE&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BP_JVM_VERSION</span> <span class="o">=</span> <span class="s2">&#34;11&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BP_GRADLE_BUILT_ARTIFACT</span> <span class="o">=</span> <span class="s2">&#34;app/build/distributions/app.zip&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">  }&#10;</span></span><span class="line"><span class="cl">  <span class="k">deploy</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">use</span> <span class="s2">&#34;docker&#34;</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  service_port</span> <span class="o">=</span> <span class="m">8080</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">  }&#10;</span></span><span class="line"><span class="cl">}&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>waypoint.hcl</span>
    </div>
</div>
<p>En la documentación de Waypoint están especificados los argumentos que soporta cada uno de los <em>builders</em>.</p>
<ul>
<li><a href="https://developer.hashicorp.com/waypoint/plugins/pack#pack-builder">pack (builder)</a></li>
<li><a href="https://developer.hashicorp.com/waypoint/plugins/docker#docker-builder">docker (builder)</a></li>
<li><a href="https://developer.hashicorp.com/waypoint/plugins/docker#docker-platform">docker (platform)</a></li>
</ul>
<p>Para lanzar únicamente construcción se puede lanzar con el siguiente comando.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ waypoint build&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>waypoint-build.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">» Building spring-injection-point...&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">» Performing operation locally&#10;</span></span><span class="line"><span class="cl">✓ Running build v3&#10;</span></span><span class="line"><span class="cl">Creating new buildpack-based image using builder: paketobuildpacks/builder:base&#10;</span></span><span class="line"><span class="cl">✓ Creating pack client&#10;</span></span><span class="line"><span class="cl">✓ Building image&#10;</span></span><span class="line"><span class="cl"> │ [exporter] Adding label &#39;io.buildpacks.build.metadata&#39;&#10;</span></span><span class="line"><span class="cl"> │ [exporter] Adding label &#39;io.buildpacks.project.metadata&#39;&#10;</span></span><span class="line"><span class="cl"> │ [exporter] Setting default process type &#39;app&#39;&#10;</span></span><span class="line"><span class="cl"> │ [exporter] Saving spring-injection-point...&#10;</span></span><span class="line"><span class="cl"> │ [exporter] *** Images (029d19ed3f4b):&#10;</span></span><span class="line"><span class="cl"> │ [exporter]&nbsp;&nbsp;&nbsp;&nbsp;   spring-injection-point&#10;</span></span><span class="line"><span class="cl"> │ [exporter] Reusing cache layer &#39;paketo-buildpacks/syft:syft&#39;&#10;</span></span><span class="line"><span class="cl"> │ [exporter] Reusing cache layer &#39;paketo-buildpacks/adoptium:jdk&#39;&#10;</span></span><span class="line"><span class="cl"> │ [exporter] Adding cache layer &#39;paketo-buildpacks/gradle:application&#39;&#10;</span></span><span class="line"><span class="cl"> │ [exporter] Adding cache layer &#39;paketo-buildpacks/gradle:cache&#39;&#10;</span></span><span class="line"><span class="cl">✓ Injecting entrypoint binary to image&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">Generated new Docker image: spring-injection-point:latest&#10;</span></span><span class="line"><span class="cl">✓ Running push build v2&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">Created artifact v2&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">» Variables used:&#10;</span></span><span class="line"><span class="cl">  VARIABLE | VALUE | TYPE | SOURCE  &#10;</span></span><span class="line"><span class="cl">-----------+-------+------+---------&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>waypoint-build.out</span>
    </div>
</div>
<p>En este ejemplo donde todo se muestra en local no hace falta especificar una <em>stanza</em> <em>registry</em> ya que Buildpacks de por sí ya añade al Docker local la imagen construida, haría falta en caso de querer enviar la imagen un un registro de imágenes y artefactos remoto.</p>
<p>La imagen construida no es más que una imagen de Docker normal que se lista con el comando de Docker.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker images&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-images.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">REPOSITORY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TAG&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IMAGE ID&nbsp;&nbsp;&nbsp;&nbsp;   CREATED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  SIZE&#10;</span></span><span class="line"><span class="cl">spring-injection-point&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; latest&nbsp;&nbsp;&nbsp;&nbsp; 8f069f971d7b   10 minutes ago   358MB&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-images.out</span>
    </div>
</div>
<h4 id="despliegue-de-la-aplicación-con-waypoint">Despliegue de la aplicación con Waypoint</h4>
<p>En este ejemplo el despliegue consiste en ejecutar una instancia del contenedor con Docker en local, su <em>stanza</em> es muy sencilla en la que solo se especifica el puerto en el que arrancar el el contenedor aunque también a través de diferentes propiedades se podrían especificar argumentos distintos.</p>
<p>El comando que realiza el <em>deploy</em> es el siguiente. Y siguiendo la misma lógica hay un comando para el <em>release</em> si fuera necesario.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ waypoint deploy&#10;</span></span><span class="line"><span class="cl">$ waypoint release&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>waypoint-deploy-release.sh</span>
    </div>
</div>
<p>Es posible hacer la construcción y despliegue con un único comando.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ waypoint up&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>waypoint-up.sh</span>
    </div>
</div>
<p>El servicio se inicia en la máquina y puede ser visto a través de la consola de Waypoint o con los comandos de Docker ya que en esencia no es más que una instancia de contenedor.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker ps&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-ps.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">CONTAINER ID   IMAGE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   COMMAND&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  CREATED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STATUS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PORTS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NAMES&#10;</span></span><span class="line"><span class="cl">ce8c73a2f468   spring-injection-point:latest   &#34;/waypoint-entrypoin…&#34;   8 seconds ago   Up 7 seconds   0.0.0.0:32768-&gt;8080/tcp, :::32768-&gt;8080/tcp   spring-injection-point-01GQ5SA9SQ9KZKWJMKSQ1PHAWJ&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-ps.out</span>
    </div>
</div>
<p>La aplicación y su <em>endpoint</em> <em>web</em> responden al realizar una petición.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ curl http://localhost:32768/&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>curl.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">Hello World!&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>curl.out</span>
    </div>
</div>
<h4 id="interfaz-web-y-de-linea-de-comandos">Interfaz web y de linea de comandos</h4>
<p>La interfaz web de Waypoint accesible con un navegador ofrece información de los proyectos, <em>builds</em>, <em>deployments</em> y <em>releases</em> además de <em>logs</em>.</p>
<p>La linea de comandos también ofrece información acerca de la aplicación con los comandos de Waypoint sin utilizar la interfaz web. La línea de comandos soporta más operaciones como destruir los recursos de un proyecto o eliminar el proyecto completamente.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ waypoint deployment list&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>waypoint-deployment-list.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">» spring-injection-point&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp; <span class="p">|</span> ID <span class="p">|</span> PLATFORM <span class="p">|</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DETAILS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="p">|</span>&nbsp;&nbsp;&nbsp;&nbsp;STARTED&nbsp;&nbsp;&nbsp;&nbsp; <span class="p">|</span>   COMPLETED&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">|</span>&nbsp;&nbsp;&nbsp;&nbsp;   HEALTH&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span><span class="line"><span class="cl">  🚀 <span class="p">|</span>  <span class="m">1</span> <span class="p">|</span> docker   <span class="p">|</span> image:8f069f9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="p">|</span> <span class="m">33</span> minutes ago <span class="p">|</span> <span class="m">33</span> minutes ago <span class="p">|</span> ✔ - <span class="m">33</span> minutes ago  &#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp; <span class="p">|</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">|</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="p">|</span> languages:ca-certificates,&nbsp;&nbsp;&nbsp;&nbsp;  &#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp; <span class="p">|</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">|</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="p">|</span> syft, procfile, adoptium,&nbsp;&nbsp;&nbsp;&nbsp;   &#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp; <span class="p">|</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">|</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="p">|</span> gradle, executable-jar,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp; <span class="p">|</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">|</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="p">|</span> spring-boo</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>waypoint-deployment-list.out</span>
    </div>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2023/01/construir-desplegar-y-observar-aplicaciones-de-forma-uniforme-con-waypoint/images/waypoint_hu8cdc5af5db3d063a447dbf08d12596c5_63265_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Interfaz web de Waypoint"><img src="https://picodotdev.github.io/blog-bitix/2023/01/construir-desplegar-y-observar-aplicaciones-de-forma-uniforme-con-waypoint/images/waypoint_hu8cdc5af5db3d063a447dbf08d12596c5_63265_650x450_fit_q90_h2_box_3.webp" width="465" height="450" alt="Interfaz web de Waypoint" title="Interfaz web de Waypoint" class="&#34; " loading="lazy"></a></p>
<figcaption>Interfaz web de Waypoint</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2023/01/construir-desplegar-y-observar-aplicaciones-de-forma-uniforme-con-waypoint/images/waypoint-builds_hu223ae1c194bb402030d2743562a55f44_116223_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Builds"><img src="https://picodotdev.github.io/blog-bitix/2023/01/construir-desplegar-y-observar-aplicaciones-de-forma-uniforme-con-waypoint/images/waypoint-builds_hu223ae1c194bb402030d2743562a55f44_116223_200x150_fit_q90_h2_box_3.webp" width="155" height="150" alt="Builds" title="Builds" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2023/01/construir-desplegar-y-observar-aplicaciones-de-forma-uniforme-con-waypoint/images/waypoint-deployments_hu28e10d00ec4f33e8dedeff88520950d4_202768_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Deployments"><img src="https://picodotdev.github.io/blog-bitix/2023/01/construir-desplegar-y-observar-aplicaciones-de-forma-uniforme-con-waypoint/images/waypoint-deployments_hu28e10d00ec4f33e8dedeff88520950d4_202768_200x150_fit_q90_h2_box_3.webp" width="155" height="150" alt="Deployments" title="Deployments" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2023/01/construir-desplegar-y-observar-aplicaciones-de-forma-uniforme-con-waypoint/images/waypoint-releases_hu956fb436e82f155b792458aa0ea7526a_86031_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Relases"><img src="https://picodotdev.github.io/blog-bitix/2023/01/construir-desplegar-y-observar-aplicaciones-de-forma-uniforme-con-waypoint/images/waypoint-releases_hu956fb436e82f155b792458aa0ea7526a_86031_200x150_fit_q90_h2_box_3.webp" width="155" height="150" alt="Relases" title="Relases" class="&#34; " loading="lazy"></a></p>
<figcaption>Builds, deployments y releases de una aplicación en un proyecto</figcaption>
</figure>
</div>
<h3 id="desarrollo-en-local">Desarrollo en local</h3>
<p>Para desarrollar en local todo este proceso de Buildpacks y Waypoint no es necesario, en el caso de la aplicación de ejemplo al estar basada en Spring Boot y utilizar Gradle es posible iniciarla con un comando directamente sin necesidad de construir una imagen de contenedor ni iniciar un contenedor en local.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ./gradlew run&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>gradlew-run.sh</span>
    </div>
</div>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/SpringInjectionPoint">código fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub y probarlo en tu equipo ejecutando siguiente comando:<br><code>./gradlew run</code></p>
</div>
]]>
        </content>
        
            
                <category term="gnu-linux"/>
            
                <category term="planeta-codigo"/>
            
                <category term="software"/>
            
                <category term="programacion"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2023/01/construir-la-imagen-del-contenedor-de-la-aplicacion-usando-buildpacks/</id>
        <title>Construir la imagen del contenedor de la aplicación usando Buildpacks</title>
        <updated>2023-01-11T20:00:00+01:00</updated>
        <published>2023-01-11T20:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2023/01/construir-la-imagen-del-contenedor-de-la-aplicacion-usando-buildpacks/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Los sistemas y servicios son significativamente complejos por sí mismos, además en sistemas que se componen de varios de ellos cada uno con sus diferencias añade más complejidad al sistema. Eliminar toda la complejidad posible y simplificar el sistema es algo deseable. La herramienta Buildpacks aplica a la construcción de las aplicaciones lo que los contenedores aplican en tiempo de ejecución de las mismas, uniformizando las aplicaciones independientemente del lenguaje y plataforma que usen.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/buildpacksio.svg" width="200" height="200" alt="Buildpacks" title="Buildpacks" class="" loading="false&#34;"></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/paketo.svg" width="150" height="272" alt="Paketo" title="Paketo" class="" loading="false&#34;"></p>
</div>
<p>Los contenedores son una gran tecnología ya que hace muy simple ejecutar servicios independientemente de cómo están implementados y en qué lenguaje, uniformizan los procesos a ejecutar y tratarlos a todos de la misma forma y con la misma herramienta.</p>
<p>Al igual que en los barcos los contenedores facilitan transportar mercancías, en el ámbito de la tecnología los contenedores simplifican mucho la infraestructura en tiempo de ejecución permitiendo tratar los servicios de forma uniforme.</p>
<p>Los contendores se basan en una imagen y una herramienta que los ejecuta, una de las herramientas más conocidas para ejecutar contenedores es <a href="https://www.docker.com/">Docker</a> y el archivo con las instrucciones para construir las imágenes son los archivos <em>Dockerfile</em>.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2014/10/introduccion-y-caracteristicas-de-docker/">Introducción y características de Docker</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2014/11/como-crear-una-imagen-para-docker-usando-un-dockerfile/">Cómo crear una imagen para Docker usando un Dockerfile</a></li>
</ul>
<p>Es muy útil poder ejecutar procesos de forma uniforme independientemente del lenguaje y de forma aislada con todas las dependencias del entorno dentro de la imagen lo que permite ejecutar tantos servicios como se deseen sin que las dependencias de estos entre en conflicto.</p>
<p>La misma utilidad y propiedades de los contenedores en tiempo de ejecución es deseable en el momento de construcción de las imágenes de los servicios.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="la-herramienta-buildpacks">La herramienta Buildpacks</h3>
<p>La herramienta <a href="https://buildpacks.io/">Buildpacks</a> analiza el código fuente y permite construir imágenes de contenedores compatible con OCI con la misma herramienta independientemente del lenguaje o plataforma que utilice y sin utilizar archivos Dockerfile. Además, permite reutilizar las instrucciones de construcción sin tener que implementarlas.</p>
<p>Los <em>buildpacks</em> son los módulos que añaden el soporte e implementan las instrucciones para construir las imágenes. Hay un <em>buildpack</em> específico según una necesidad de construcción, una aplicación puede necesitar varios <em>buildpacks</em> al mismo tiempo.</p>
<p>Por ejemplo, una aplicación Java necesita una versión de la JVM para ejecutarse que es proporcionado por un <em>buildpack</em>, si la aplicación utiliza <a href="https://gradle.org/">Gradle</a> como herramienta de construcción hay un <em>nuildpack</em> para construir aplicaciones Gradle. Y hay <em>buildpacks</em> para Java, <a href="https://nodejs.org/en/">Node</a>, <a href="https://www.python.org/">Python</a> y otros lenguajes.</p>
<p><a href="https://buildpacks.io/docs/concepts/">Los conceptos que usa Buildpacks</a> son:</p>
<ul>
<li><em>Builder</em>: es la imagen del contenedor con la que se realiza la construcción, contiene todos los componentes necesarios junto con los <em>buildpacks</em> para ejecutar la construcción.</li>
<li><em>Buildpack</em>: es el ejecutable que construye y ejecuta la aplicación. Al realizar la construcción contribuye los archivos necesarios a la imagen del contenedor resultante.</li>
<li><em>Lifecycle</em>: orquesta la construcción con los <em>buildpacks</em> y ensambla los artefactos resultantes en la imagen del contenedor.</li>
<li><em>Stack</em>: se compone de dos imágenes de contenedor, la imagen <em>builder</em> que proporciona la imagen para realizar la construcción y la imagen <em>run</em> que proporciona la imagen para la ejecución.</li>
</ul>
<p>Buildpacks es extensible y es posible crear y usar <em>builders</em> y <em>buildpaks</em> propios ajustados a las necesidades de la organización o aplicación si los existentes no son suficientes.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2023/01/construir-la-imagen-del-contenedor-de-la-aplicacion-usando-buildpacks/images/buildpack-what.svg" data-gallery="" title="Buildpack"><img src="https://picodotdev.github.io/blog-bitix/2023/01/construir-la-imagen-del-contenedor-de-la-aplicacion-usando-buildpacks/images/buildpack-what.svg" width="300" height="200" alt="Buildpack" title="Buildpack" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2023/01/construir-la-imagen-del-contenedor-de-la-aplicacion-usando-buildpacks/images/buildpack-builder.svg" data-gallery="" title="Buildpack builder"><img src="https://picodotdev.github.io/blog-bitix/2023/01/construir-la-imagen-del-contenedor-de-la-aplicacion-usando-buildpacks/images/buildpack-builder.svg" width="300" height="200" alt="Buildpack builder" title="Buildpack builder" class="&#34; " loading="lazy"></a></p>
<figcaption>Buildpack</figcaption>
</figure>
</div>
<h3 id="el-proyecto-paketo">El proyecto Paketo</h3>
<p><a href="https://paketo.io/">Paketo</a> es un proyecto de código abierto que proporciona numerosos <em>buildpacks</em> para diferentes lenguajes de las aplicaciones más populares entre los que por supuesto están Java, Node, Python y Go entre otros.</p>
<p>En el <a href="https://github.com/paketo-buildpacks">proyecto de GitHub de Paketo</a> están los diferentes repositorios de los <em>buildpacks</em> junto con sus opciones de configuración y código fuente, además proporciona varios <em>builder</em> basados en diferentes versiones de <a href="https://www.ubuntu.com/">Ubuntu</a>.</p>
<ul>
<li><a href="https://paketo.io/docs/reference/builders-reference/">Paketo Builders Reference</a></li>
</ul>
<h3 id="instalación-de-buildpacks">Instalación de Buildpacks</h3>
<p>Hay <a href="https://buildpacks.io/docs/tools/pack/">varias formas de instalación de Buildpacks</a> según el sistema operativo que se use, junto a varias formas de instalación usando el gestor de paquetes nativo del sistema operativo o una instalación manual en el sistema.</p>
<p>Builpacks es una herramienta programada en el lenguaje Go que una de sus ventajas es que generan un único binario que incluye todas las dependencias con lo que su instalación manual es muy sencilla, basta con descargar y copiar un único archivo.</p>
<p>En <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> basta descargar el paquete de distribución para este sistema operativo, descomprimirlo e instalar el binario en el <em>path</em> del sistema de modo que al ejecutar el comando el intérprete del <em>shell</em> lo encuentre. En GNU/Linux el directorio <em>/usr/local/bin</em> permite añadir al sistema comandos adicionales sin que entren en conflicto con los que se instalan a través de paquetes de la distribución.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls -lh /usr/local/bin/&#10;</span></span><span class="line"><span class="cl">-rwxr-xr-x <span class="m">1</span> picodotdev picodotdev  23M ene <span class="m">10</span> 11:31 pack&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>ls-bin.sh</span>
    </div>
</div>
<h3 id="construcción-de-la-imagen-del-contenedor">Construcción de la imagen del contenedor</h3>
<p>Utilizando una aplicación escrita con Java con Gradle como herramienta de construcción y que usa <a href="https://projects.spring.io/spring-boot/">Spring Boot</a>, el comando para construir la imagen OCI del contenedor es el siguiente.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ pack build spring-injection-point <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--env <span class="s2">&#34;BP_JVM_TYPE=JDK&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--env <span class="s2">&#34;BP_JVM_VERSION=11&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--env <span class="s2">&#34;BP_GRADLE_BUILT_ARTIFACT=app/build/distributions/app.zip&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--builder paketobuildpacks/builder-jammy-base <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--buildpack gcr.io/paketo-buildpacks/ca-certificates <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--buildpack gcr.io/paketo-buildpacks/syft <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--buildpack gcr.io/paketo-buildpacks/procfile <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--buildpack gcr.io/paketo-buildpacks/adoptium <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--buildpack gcr.io/paketo-buildpacks/gradle <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--buildpack gcr.io/paketo-buildpacks/executable-jar <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--buildpack gcr.io/paketo-buildpacks/spring-boot <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--default-process app <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--path .</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>pack-build.sh</span>
    </div>
</div>
<p>Los <em>builpacks</em> permiten ser configurados a través de las variables de entorno, en el comando es posible configurar el <em>buildpack</em> de <em>adoptioum</em> para que use la versión de Java que se desee o el tipo de máquina virtual, distribución JDK o JRE. En el archivo README.md de cada uno de los <em>buildpacks</em> están documentados las variables de entorno con su descripción y en algunos casos sus valores.</p>
<ul>
<li><a href="https://github.com/paketo-buildpacks/adoptium">paketo-buildpacks/adoptium README.md</a></li>
<li><a href="https://github.com/paketo-buildpacks/gradle">paketo-buildpacks/gradle README.md</a></li>
</ul>
<p>El comando especifica los <em>buildpacks</em> ya que el <em>builder</em> utilizado no incluye ninguno. En el parámetro <em>path</em> se indica la ruta al código fuente de la aplicación.</p>
<p>El <em>buildpack</em> <em>paketo-buildpacks/procfile</em> permite especificar diferentes comandos de ejecución en un archivo. El <em>entrypoint</em> que añade el <em>builder</em> en la imagen permite especificar el proceso a iniciar en el comando de ejecución del contenedor.</p>
<h3 id="ejecución-del-contenedor-con-docker">Ejecución del contenedor con Docker</h3>
<p>Docker permite almacenar en local y ejecutar las imágenes construidas con Buildpacks como un contenedor normal. El comando para iniciar la aplicación es el siguiente que inicia el proceso por defecto de la imagen.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker run -it --rm -p 8080:8080 spring-injection-point&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-run.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">Setting Active Processor Count to 8&#10;</span></span><span class="line"><span class="cl">Calculating JVM memory based on 13813724K available memory&#10;</span></span><span class="line"><span class="cl">For more information on this calculation, see https://paketo.io/docs/reference/java-reference/#memory-calculator&#10;</span></span><span class="line"><span class="cl">Calculated JVM Memory Configuration: -XX:MaxDirectMemorySize=10M -Xmx13215722K -XX:MaxMetaspaceSize=86001K -XX:ReservedCodeCacheSize=240M -Xss1M (Total Memory: 13813724K, Thread Count: 250, Loaded Class Count: 12770, Headroom: 0%)&#10;</span></span><span class="line"><span class="cl">Enabling Java Native Memory Tracking&#10;</span></span><span class="line"><span class="cl">Adding 124 container CA certificates to JVM truststore&#10;</span></span><span class="line"><span class="cl">Picked up JAVA_TOOL_OPTIONS: -Djava.security.properties=/layers/paketo-buildpacks_adoptium/java-security-properties/java-security.properties -XX:+ExitOnOutOfMemoryError -XX:ActiveProcessorCount=8 -XX:MaxDirectMemorySize=10M -Xmx13215722K -XX:MaxMetaspaceSize=86001K -XX:ReservedCodeCacheSize=240M -Xss1M -XX:+UnlockDiagnosticVMOptions -XX:NativeMemoryTracking=summary -XX:+PrintNMTStatistics&#10;</span></span><span class="line"><span class="cl">Property (app.property): value&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">  .   ____&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  _&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__ _ _&#10;</span></span><span class="line"><span class="cl"> /\\ / ___&#39;_ __ _ _(_)_ __  __ _ \ \ \ \&#10;</span></span><span class="line"><span class="cl">( ( )\___ | &#39;_ | &#39;_| | &#39;_ \/ _` | \ \ \ \&#10;</span></span><span class="line"><span class="cl"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )&#10;</span></span><span class="line"><span class="cl">  &#39;  |____| .__|_| |_|_| |_\__, | / / / /&#10;</span></span><span class="line"><span class="cl"> =========|_|==============|___/=/_/_/_/&#10;</span></span><span class="line"><span class="cl"> :: Spring Boot ::&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(v2.7.6)&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">2023-01-11 19:53:33,542 INFO  [main]&nbsp;&nbsp;&nbsp;&nbsp; io.github.picodotdev.blogbitix.springinjectionpoint.Main Starting Main using Java 11.0.17 on d5713708092f with PID 1 (/workspace/app/lib/app.jar started by cnb in /workspace)&#10;</span></span><span class="line"><span class="cl">2023-01-11 19:53:33,550 INFO  [main]&nbsp;&nbsp;&nbsp;&nbsp; io.github.picodotdev.blogbitix.springinjectionpoint.Main No active profile set, falling back to 1 default profile: &#34;default&#34;&#10;</span></span><span class="line"><span class="cl">2023-01-11 19:53:34,402 INFO  [main] org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat initialized with port(s): 8080 (http)&#10;</span></span><span class="line"><span class="cl">2023-01-11 19:53:34,423 INFO  [main]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; org.apache.catalina.core.StandardService Starting service [Tomcat]&#10;</span></span><span class="line"><span class="cl">2023-01-11 19:53:34,424 INFO  [main]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  org.apache.catalina.core.StandardEngine Starting Servlet engine: [Apache Tomcat/9.0.69]&#10;</span></span><span class="line"><span class="cl">2023-01-11 19:53:34,524 INFO  [main] .apache.catalina.core.ContainerBase.[Tomcat].[localhost].[/] Initializing Spring embedded WebApplicationContext&#10;</span></span><span class="line"><span class="cl">2023-01-11 19:53:34,524 INFO  [main] .boot.web.servlet.context.ServletWebServerApplicationContext Root WebApplicationContext: initialization completed in 931 ms&#10;</span></span><span class="line"><span class="cl">2023-01-11 19:53:34,932 INFO  [main] org.springframework.boot.web.embedded.tomcat.TomcatWebServer Tomcat started on port(s): 8080 (http) with context path &#39;&#39;&#10;</span></span><span class="line"><span class="cl">2023-01-11 19:53:34,944 INFO  [main]&nbsp;&nbsp;&nbsp;&nbsp; io.github.picodotdev.blogbitix.springinjectionpoint.Main Started Main in 1.858 seconds (JVM running for 2.534)&#10;</span></span><span class="line"><span class="cl">2023-01-11 19:53:34,946 INFO  [main]  io.github.picodotdev.blogbitix.springinjectionpoint.Service Hello World!</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System.out</span>
    </div>
</div>
<p>Los <em>buildpacks</em> añaden un <em>launcher</em> que permite <a href="https://buildpacks.io/docs/app-developer-guide/run-an-app/">varias formas de ejecutar el contenedor de la aplicación</a>. También es posible especificar otro proceso de la imagen con la opción <em>&ndash;entrypoint</em> y el nombre del proceso.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker run -it --rm --entrypoint app -p 8080:8080 spring-injection-point&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-run-entrypoint.sh</span>
    </div>
</div>
<p>A veces interesa iniciar una <em>shell</em> para inspeccionar el sistema de archivos del contenedor y ejecutar procesos manualmente. En este ejemplo se muestra la versión de Ubuntu que forma la imagen base del contenedor y se aprecia que está basada en la versión 22.04.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker run -it --rm --entrypoint launcher -p 8080:8080 spring-injection-point bash&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>docker-run-entrypoint-bash.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">$ cat /etc/issue&#10;</span></span><span class="line"><span class="cl">Ubuntu 22.04.1 LTS&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>issue.out</span>
    </div>
</div>
<p>Finalmente, es posible inspeccionar la imagen del contenedor sin iniciarlo para obtener información acerca de cómo se ha construido.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ pack inspect-image spring-injection-point&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>pack-inspect-image.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">Inspecting image: spring-injection-point&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">REMOTE:&#10;</span></span><span class="line"><span class="cl">(not present)&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">LOCAL:&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">Stack: io.buildpacks.stacks.jammy&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">Base Image:&#10;</span></span><span class="line"><span class="cl">  Reference: 9460382ca7aa20a60d1dcb756dbeb1535fe3e2eeb3e0c01a85ad7a60eaa091ad&#10;</span></span><span class="line"><span class="cl">  Top Layer: sha256:5853f77d360cc55683c2896aa9fd14bf47430731ad6fec18d9511f56656c232f&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">Run Images:&#10;</span></span><span class="line"><span class="cl">  index.docker.io/paketobuildpacks/run-jammy-base:latest&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">Buildpacks:&#10;</span></span><span class="line"><span class="cl">  ID&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   VERSION&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HOMEPAGE&#10;</span></span><span class="line"><span class="cl">  paketo-buildpacks/ca-certificates&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3.5.1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  https://github.com/paketo-buildpacks/ca-certificates&#10;</span></span><span class="line"><span class="cl">  paketo-buildpacks/syft&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   1.23.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; https://github.com/paketo-buildpacks/syft&#10;</span></span><span class="line"><span class="cl">  paketo-buildpacks/procfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   5.5.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  https://github.com/paketo-buildpacks/procfile&#10;</span></span><span class="line"><span class="cl">  paketo-buildpacks/adoptium&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   10.8.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; https://github.com/paketo-buildpacks/adoptium&#10;</span></span><span class="line"><span class="cl">  paketo-buildpacks/gradle&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6.10.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; https://github.com/paketo-buildpacks/gradle&#10;</span></span><span class="line"><span class="cl">  paketo-buildpacks/executable-jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6.5.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  https://github.com/paketo-buildpacks/executable-jar&#10;</span></span><span class="line"><span class="cl">  paketo-buildpacks/spring-boot&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5.22.0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; https://github.com/paketo-buildpacks/spring-boot&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">Processes:&#10;</span></span><span class="line"><span class="cl">  TYPE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SHELL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COMMAND&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ARGS&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WORK DIR&#10;</span></span><span class="line"><span class="cl">  app (default)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bash&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JAVA_HOME=/layers/paketo-buildpacks_adoptium/jre app/bin/app&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/workspace</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>pack-inspect-image.out</span>
    </div>
</div>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/SpringInjectionPoint">código fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub y probarlo en tu equipo ejecutando siguiente comando:<br><code>./pack-build.sh</code></p>
</div>
]]>
        </content>
        
            
                <category term="java"/>
            
                <category term="planeta-codigo"/>
            
                <category term="programacion"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2023/01/obtener-valores-de-configuracion-antes-iniciar-una-aplicacion-con-spring-boot/</id>
        <title>Obtener valores de configuración antes iniciar una aplicación con Spring Boot</title>
        <updated>2023-01-06T01:00:00+01:00</updated>
        <published>2023-01-06T01:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2023/01/obtener-valores-de-configuracion-antes-iniciar-una-aplicacion-con-spring-boot/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>El mecanismo de configuración de Spring Boot es muy flexible y por otro lado Spring Boot proporciona varias formas de extensión. En el proceso de inicialización de la aplicación Spring Boot permite recibir eventos y realizar las acciones que se deseen. Uno de estos eventos es <em>ApplicationEnvironmentPreparedEvent</em> antes de inicializar el contexto y crear los <em>beans</em> del contenedor de dependencias, cyando se lanza este evento es posible acceder a las propiedades de configuración.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/spring.svg" width="200" height="200" alt="Spring" title="Spring" class="" loading="false&#34;"></p>
</div>
<p>Los archivos de configuración de las aplicaciones permiten cambiar su comportamiento sin tener que modificar el código fuente ni tener que generar un artefacto de despliegue. Con diferentes archivos de configuración la aplicación es la misma pero su comportamiento diferente por ejemplo según el entorno en el que se despliegue, en la propia máquina de desarrollo, producción u otro entorno.</p>
<p>Los archivos de configuración son una colección de propiedades y valores. El formato del archivo de configuración también variable puede ser un archivo <em>properties</em> u otros formatos como XML, un formato más legible como YAML u otro tipo de formato. En los archivos de configuración se guardan las variables y los valores y las aplicaciones cuando necesitan el valor de una propiedad lo solicitan a través del nombre de la variable.</p>
<p><a href="https://projects.spring.io/spring-boot/">Spring Boot</a> proporciona un soporte para archivos de configuración muy flexible que permite obtener los valores de las propiedades de diferentes formas y con un orden de preferencia que incluye archivos de configuración externos y variables de entorno. Uno de los formatos que soporta es YAML que es legible aún con su defecto de ser propenso a errores debido a que su sintaxis se basa en una tabulación correcta.</p>
<p>Cuando la aplicación de Spring Boot se inicia se cargan las propiedades de configuración y posteriormente se crean los servicios del contenedor de dependencias con los valores de las propiedades de configuración, pero en necesidades muy concretas es necesario acceder al valor de las propiedades de configuración antes incluso de que la aplicación de Spring Boot empiece a crear los <em>beans</em>.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="obtener-valores-de-configuración-antes-de-la-inicialización-del-contexto-de-spring-boot">Obtener valores de configuración antes de la inicialización del contexto de Spring Boot</h3>
<p>En caso de necesitar obtener valores de configuración Spring Boot proporciona la interfaz <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/ApplicationListener.html">ApplicationListener</a> para recibir el evento <a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/context/event/ApplicationEnvironmentPreparedEvent.html">ApplicationEnvironmentPreparedEvent</a> que se invoca antes de iniciar la aplicación de Spring Boot. Se recibe una referencia del evento a través de la cual es posible acceder a los valores de configuración.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.springinjectionpoint</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.boot.context.event.ApplicationEnvironmentPreparedEvent</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.context.ApplicationListener</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DefaultApplicationListener</span> <span class="kd">implements</span> <span class="n">ApplicationListener</span><span class="o">&lt;</span><span class="n">ApplicationEnvironmentPreparedEvent</span><span class="o">&gt;</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">  <span class="nd">@Override</span>&#10;</span></span><span class="line"><span class="cl">  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onApplicationEvent</span><span class="o">(</span><span class="n">ApplicationEnvironmentPreparedEvent</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;Property (app.property): %s%n&#34;</span><span class="o">,</span> <span class="n">event</span><span class="o">.</span><span class="na">getEnvironment</span><span class="o">().</span><span class="na">getProperty</span><span class="o">(</span><span class="s">&#34;app.property&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">  <span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>DefaultApplicationListener.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">app</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">property</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;value&#34;</span><span class="w">&#10;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>application.yml</span>
    </div>
</div>
<p>Al iniciar la aplicación antes incluso de que aparezca el mensaje del <em>banner</em> de Spring Boot sale la traza con el valor de la propiedad de configuración.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span><span class="lnt">5&#10;</span><span class="lnt">6&#10;</span><span class="lnt">7&#10;</span><span class="lnt">8&#10;</span><span class="lnt">9&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">Property (app.property): value&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">  .   ____&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  _&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__ _ _&#10;</span></span><span class="line"><span class="cl"> /\\ / ___&#39;_ __ _ _(_)_ __  __ _ \ \ \ \&#10;</span></span><span class="line"><span class="cl">( ( )\___ | &#39;_ | &#39;_| | &#39;_ \/ _` | \ \ \ \&#10;</span></span><span class="line"><span class="cl"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )&#10;</span></span><span class="line"><span class="cl">  &#39;  |____| .__|_| |_|_| |_\__, | / / / /&#10;</span></span><span class="line"><span class="cl"> =========|_|==============|___/=/_/_/_/&#10;</span></span><span class="line"><span class="cl"> :: Spring Boot ::&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(v2.7.6)</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System.out</span>
    </div>
</div>
<p>En la <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.spring-application.application-events-and-listeners">documentación sobre eventos y listeners</a> de Spring Boot están todos los eventos a los que una aplicación puede suscribirse junto con la descripción de cuando se lanzan. En la misma documentación se especifica que como alguno de los eventos se lanzan incluso antes de iniciarse el contexto de Spring Boot los <em>listeners</em> no pueden definirse como <em>beans</em> del contenedor de dependencias.</p>
<p>Para registrar los listeners hay que usar el método <a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/SpringApplication.html#addListeners%28org.springframework.context.ApplicationListener...%29">SpringApplication.addListeners</a> al crear y arrancar la aplicación de Spring Boot.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.springinjectionpoint</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.boot.CommandLineRunner</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.boot.builder.SpringApplicationBuilder</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="nd">@SpringBootApplication</span>&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="kd">implements</span> <span class="n">CommandLineRunner</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Autowired</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="n">Service</span> <span class="n">service</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Override</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">service</span><span class="o">.</span><span class="na">echo</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">new</span> <span class="n">SpringApplicationBuilder</span><span class="o">(</span><span class="n">Main</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">listeners</span><span class="o">(</span><span class="k">new</span> <span class="n">DefaultApplicationListener</span><span class="o">())</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">application</span><span class="o">()</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">run</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main.java</span>
    </div>
</div>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/SpringInjectionPoint">código fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub y probarlo en tu equipo ejecutando siguiente comando:<br><code>./gradlew run</code></p>
</div>
]]>
        </content>
        
            
                <category term="java"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2022/12/hemeroteca-22/</id>
        <title>Hemeroteca #22</title>
        <updated>2022-12-29T21:00:00+01:00</updated>
        <published>2022-12-29T21:00:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2022/12/hemeroteca-22/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Este 2023 he escrito menos artículos que años anteriores, «solo» 52 artículos. Más allá del número de artículos pocas novedades más. Después de 13 años con un blog sigo con ganas de continuar escribiendo artículos y compartiendo lo que aprendo, a pesar de la gran cantidad de tiempo que me requiere.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/blogbitix.svg" width="200" height="200" alt="Blog Bitix" title="Blog Bitix" class="" loading="false&#34;"></p>
</div>
<p>Aprender cada semana algo sobre programación o tecnología me hace sentir bien y como valoro lo que aprendo me gusta compartirlo en el blog para que otras personas aprendan, que también me hace sentir bien. Si dejase de escribir en el blog no sería porque no quisiera continuar, hay dos motivos por los que probablemente dejaría de escribir. Uno sería por la cantidad de tiempo que requiere escribir cada artículo y el segundo por la falta de ideas que no me requieran gran cantidad de horas de investigación para escribir el artículo. En ambos casos es falta del preciado tiempo o recuperar el tiempo para dedicarlo a otras cosas.</p>
<p>Algunos artículos son necesidades del trabajo que una vez investigadas las comparto en un artículo porque considero que son útiles si a mi me lo resultaron. Otras ideas sin embargo es al revés las investigo y luego las aplico en el trabajo cuando surge la oportunidad.</p>
<p>Hay gente que escribe artículos mejores y más interesantes que los míos que en gran parte son de cosas técnicas bastante sencillas y muy concretas muchas veces ya disponibles de alguna forma en inglés generalmente. Yo simplemente comparto lo que se o aprendo, hay gente mucho más lista que yo y que sabe mucho más.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="retrospectiva-2022">Retrospectiva 2022</h3>
<h4 id="evolución-visitas">Evolución visitas</h4>
<p>Google tiene intención de eliminar UA y hacer que los usuarios se pasen a Google Analytics 4, en principio en julio de 2023. Son dos herramientas muy diferentes y aún después de varios meses no he obtenido de forma clara una métrica fiable ni tan simple de cuantas visitas tiene mi blog y su evolución a lo largo del tiempo mensualmente, he perdido mucha información como poder comparar las visitas mes a mes a lo largo del año, compararlo con otros años y conocer cuales son los artículos más visitados.</p>
<p>Elimine UA por GA4, mala decisión, ahora con el nuevo <em>analytics</em> no tengo las métricas que quiero, no se casi ni las páginas vistas que tengo y no puedo compararlo con las visitas de años anteriores. En resumen que para mi caso de uso GA4 no se como obtener información que quiero o no tengo claro todavía cómo obtenerla. En su defensa diré que no he dedicado mucho tiempo en saber cómo funciona GA4.</p>
<p>Esto es lo que he podido obtener empezando en abril que es cuando cambié a GA4, ni siquiera está agrupado por mes. Sobre unas 50K páginas vistas mensuales.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/12/hemeroteca-22/images/google-analytics_hu9bd454c18b6cfea89ea46e4134a3ed8d_33819_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Evolución visitas 2022"><img src="https://picodotdev.github.io/blog-bitix/2022/12/hemeroteca-22/images/google-analytics_hu9bd454c18b6cfea89ea46e4134a3ed8d_33819_6500x450_fit_q90_h2_box_3.webp" width="618" height="450" alt="Evolución visitas 2022" title="Evolución visitas 2022" class="&#34; " loading="lazy"></a></p>
<figcaption>Evolución visitas 2022</figcaption>
</figure>
</div>
<h4 id="evolución-ingresos">Evolución ingresos</h4>
<p>Este año no se por que pero los ingresos por <a href="https://www.google.com/adsense/">AdSense</a> han bajado tanto como un 70% respecto a años anteriores, lo que eran casi 25 € mensuales normalmente y algún mes 35€ han pasado a ser entre 10 € y 15 €. Desconozco el motivo de por que ya en cuanto a visitas haya tenido también algunas menos las páginas vistas no han bajado tanto como un 70%. Añadí la publicidad de <a href="http://videoo.tv/">Videoo.tv</a> pero no creo que debiera hacerle tanta competencia a Adsense como para una bajada tan importante.</p>
<p>¿Quizá el descenso de ingresos se debe a los bloqueadores de anuncios? Firefox con las protecciones en la configuración por defecto los bloquean. En su momento mostraba un <em>banner</em> en el que si se visitaba la página habitualmente y no era pro privacidad pedía desactivar el bloqueado los anuncios para apoyar el blog, ahora no se muestra tendré que revisarlo.</p>
<p>En los primeros meses de año me contactaron y añadí la publicidad de Videoo.tv, una empresa con sede en España con una herramienta dedicada a la publicidad que es una alternativa o complemento a AdSense. El rendimiento que me está dando Videoo.tv es mucho mayor que AdSense y me ha permitido compensar la bajada de ingresos por AdSense y mejorar un poco más respecto al año pasado sumando ambas redes publicitarias. Como resultado estoy muy contento con la publicidad de Videoo.tv.</p>
<p>Los ingresos que he tenido por Videoo.tv en los últimos meses del año han estado entre 30 y 40 € que sumados a los de AdSense en el siguiente año completo espero que mejore la mejor cifra en los años anteriores. Más aún si los ingresos de AdSense se recuperan.</p>
<p>Una vez cumplidos los cuatro meses de haber añadido Videoo.tv ya estoy recibiendo pagos mensuales a través de <a href="https://www.paypal.com/">PayPal</a>, que al recibir dinero cobra una comisión del 4% que de momento es el precio que pagaré por no usar mi cuenta bancaria, un 4% de unos pocos cientos de euros al año tampoco es mucho, al menos por el momento.</p>
<p>Más allá de la publicidad de Videoo.tv es que además su <em>widget</em> ofrece la funcionalidad de carrusel de artículos con lo que me permite mostrar otros artículos antiguos, una funcionalidad que en cierta forma tengo en el pié de página de los artículos pero de forma estática. Como el carrusel de Video.tv tiene cierta animación es más atractivo.</p>
<p>Si alguien tiene una web y quiere probar Videoo.tv como forma de monetizar el medio le recomiendo contactarlos para añadir su publicidad. Si esta información te resulta útil como para contactarlos te dejo mi <a href="https://videoo.tv/es?referente=379#sctf">enlace de afiliado de Videoo.tv</a>, calculando las visitas que tengo en el blog y más o menos los ingresos por Videoo.tv se puede calcular los ingresos en un medio con diferente cantidad de páginas vistas.</p>
<p>Tuvieron el detalle de enviarme una postal en esta época de navidades acompañado de un bolígrafo que usaré para tomar mis notas en papel.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/12/hemeroteca-22/images/videootv-merry-christmas-1_hucbdb0fd9084a2b9d6ce93883319e88b7_483861_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Videoo.tv Merry Christmas"><img src="https://picodotdev.github.io/blog-bitix/2022/12/hemeroteca-22/images/videootv-merry-christmas-1_hucbdb0fd9084a2b9d6ce93883319e88b7_483861_650x450_fit_q90_h2_box.webp" width="383" height="450" alt="Videoo.tv Merry Christmas" title="Videoo.tv Merry Christmas" class="&#34; " loading="lazy"></a></p>
<figcaption>Videoo.tv Merry Christmas</figcaption>
</figure>
</div>
<p>Unos 220 € por ingresos de AdSense, 50 € que he cobrado ya de Videoo.tv, 50 € por afiliado de Amazon y varios artículos patrocinados de algún teclado que ya vendí y otros productos que me he quedado en propiedad como un micrófono e interfaz de audio.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/12/hemeroteca-22/images/google-adsense_hu305cb855800e7126b022fb82fb09aecf_37167_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Evolución ingresos AdSense y Amazon Afiliados 2022"><img src="https://picodotdev.github.io/blog-bitix/2022/12/hemeroteca-22/images/google-adsense_hu305cb855800e7126b022fb82fb09aecf_37167_650x450_fit_q90_h2_box_3.webp" width="650" height="287" alt="Evolución ingresos AdSense y Amazon Afiliados 2022" title="Evolución ingresos AdSense y Amazon Afiliados 2022" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/12/hemeroteca-22/images/amazon-afiliados_hu468431d8db42fc64cb25a0b084011867_73666_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Evolución ingresos AdSense y Amazon Afiliados 2022"><img src="https://picodotdev.github.io/blog-bitix/2022/12/hemeroteca-22/images/amazon-afiliados_hu468431d8db42fc64cb25a0b084011867_73666_650x450_fit_q90_h2_box_3.webp" width="650" height="319" alt="Evolución ingresos AdSense y Amazon Afiliados 2022" title="Evolución ingresos AdSense y Amazon Afiliados 2022" class="&#34; " loading="lazy"></a></p>
<figcaption>Evolución ingresos AdSense y Amazon Afiliados 2022</figcaption>
</figure>
</div>
<h3 id="sobre-blog-bitix">Sobre Blog Bitix</h3>
<p>Desde hace ya un tiempo publico solo un artículo a la semana, este año ha sido exactamente 52 tantos como semanas tiene el año. Por comparar el año pasado que también muchas semanas estuve publicando un artículo al año fueron 73 artículos.</p>
<p>Pero como ya he comentado, el único artículo que publico ahora es de mayor extensión, gracias a que al realizar el borrador esbozo primero los títulos de las secciones me permite que los artículos sean más completos a riesgo de repetirme un poco en algunas de las secciones. La repetición de la misma idea mientras no sea excesiva no tiene por que ser mala ya que quizá algún usuario solo lea parte del artículo.</p>
<p>Incluyo publicidad sí, no tengo ningún problema moral en ello. Hay blogs en el que no es que haya publicidad sino que el contenido es de pago o por suscripción de correo electrónico o <em>newsletter</em>, son otra opción totalmente válida siendo el contenido tan bueno como para merecer ser pagado. Un modelo de acceso exclusivo, de pago o basado en donaciones no es el que yo quiero ni el modelo de internet y web que deseo.</p>
<p>En cuanto al diseño del blog apenas he añadido cambios, un poco la disposición sobre la versión inicial de la publicidad de Videoo.tv pasando a estar al lado del índice del artículo, el sitio siendo destacado menos molesto que he considerado en el que incluirlo.</p>
<p>Cada artículo que publico lo suelo compartir en <a href="https://twitter.com/">Twitter</a> donde he cambiado su formato para que al publicar el <em>tweet</em> se muestre la tarjeta que añade Twitter del artículo, con una imagen y el enlace al artículo, es mejor y es menos trabajo para mi ya que no he de incluir la imagen del artículo manualmente como adjunto sino que Twitter lo coge del artículo.</p>
<p>Aún sigo escribiendo en el blog y seguramente lo siga haciendo, en algún momento gracias a un par de artículos y colaboraciones con <a href="https://www.maono.com">Maono</a> que me permitieron analizar sus productos y quedármelos en propiedad un micrófono y una interfaz de audio tengo las herramientas más que suficientes para publicar contenido en <a href="https://www.youtube.com/">YouTube</a>, casi solo me faltaría una capturadora de vídeo que no es imprescindible con el programa <a href="https://obsproject.com/">OBS</a>, bueno la interfaz de audio tampoco lo es pero da mejor calidad de sonido.</p>
<p>En caso de empezar a crear algún vídeo para YouTube seguramente empezaría por comentar en el script <a href="https://github.com/picodotdev/alis/">alis</a> para instalar <a href="https://www.archlinux.org/">Arch Linux</a>. Si no lo he hecho aún es porque prefiero escribir más que grabar video y audio simplemente porque la edición es mas sencilla y fácilmente actualizable, además ahora mismo no me siento con la práctica suficiente para grabar audio sin tener que repetir la grabación varias veces para que quede algo aceptable.</p>
<p>Quité la generación del contenido de las páginas en formato <em>amp</em>, formato propuesto por Google pero que creo que realmente añade complejidad y alertas de las <em>webmaster tools</em> de Google, además tiene varias limitaciones sobre el HTML estándar de W3C.</p>
<p>Otra tarea que tengo pendiente es cambiar el formato de las imágenes de <em>jpg</em> a <em>webp</em> que supone una mejora considerable en el tamaño de las imágenes además de poder utilizar un único formato de imagen tanto para fotos donde utilizo <em>jpg</em> como para capturas de pantalla donde utilizo <em>png</em>.</p>
<h4 id="teo-el-troll">Teo, «el troll»</h4>
<p>Durante el año pasado recibí el contacto del que denominé con el nombre de «Gatico Bieber», lo que tenía el aspecto de un intento de fraude de <em>phising</em> entre los diferentes contactos que recibo preguntando sobre artículos patrocinados.</p>
<p>En anteriores hemerotecas me quejaba que después de 10 años de estar escribiendo en el blog continuamente todas las semanas aún no he tenido que lidiar con ningún <em>troll</em>. Esto tal vez esté a punto de cambiar, es el segundo comentario que recibo de un usuario en un tono todo lo contrario a la netiqueta y los buenos modales.</p>
<p>Revisando los comentarios de este usuario debe ser alguien que le tiene inquina a la mera existencia de <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> y va repartiendo comentarios desagradables de <em>troll</em>. Aquí dejo uno de sus comentarios en el artículo que publiqué sobre el escritorio <a href="https://www.gnome.org/">GNOME</a>. Le contesté pero no me respondió, no me lo pensé mucho y lo marque como <em>spam</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/12/hemeroteca-22/images/comentario-teo-el-troll_hu42a6e4ab63abd75dfde876bb58da35dd_17947_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Comentario de Teo el «troll»"><img src="https://picodotdev.github.io/blog-bitix/2022/12/hemeroteca-22/images/comentario-teo-el-troll_hu42a6e4ab63abd75dfde876bb58da35dd_17947_650x450_fit_q90_h2_box_3.webp" width="489" height="146" alt="Comentario de Teo el «troll»" title="Comentario de Teo el «troll»" class="&#34; " loading="lazy"></a></p>
<figcaption>Comentario de Teo el «troll»</figcaption>
</figure>
</div>
<h3 id="otras-contribuciones">Otras contribuciones</h3>
<p>No he dejado de mantener el script alis para instalar Arch Linux, varias pequeñas cosas que como ya está en gran parte desarrollado no son tan destacables como al principio, ya soportaba las funcionalidades más comunes.</p>
<p>Este año se ha publicado la versión 7.0 de <a href="https://www.virtualbox.org/">Virtualbox</a> y he enviado la actualización del español de este software de virtualización que en algún momento los desarrolladores <em>mergearán</em> en el código fuente para que sea distribuido en alguna de las siguientes versiones.</p>
<p>También sigo manteniendo las traducciones de algunos programas que uso como <a href="https://keepassxc.org/">KeePassXC</a>, <a href="https://transmissionbt.com/">Transmission</a> y <a href="https://www.videolan.org/vlc/">VLC</a> aunque en este último solo la versión de escritorio. Las versiones para <a href="https://www.android.com/">Android</a> e <a href="https://www.apple.com/es/ios/ios-12/">iOS</a> no las uso y requieren una buena cantidad de tiempo en traducir las cadenas.</p>
<h3 id="artículos-publicados">Artículos publicados</h3>
<p>Prácticamente las ideas de los artículos las he ido generando semana a semana en algunos momentos casi no he tenido una idea sobre la que escribir y he estado casi en alguna semana por no escribir un artículo. Al final han sido 52 artículos, exactamente uno por semana del año en las temáticas habituales de este blog.</p>
<p>Con este 2023 ya serán 10 años de Blog Bitix que empezaré habiendo escrito ya más de 650 artículos y 13 años escribiendo en un blog.</p>
<p>Urte berri on 2023!, Buen año nuevo 2023!</p>
<h4 id="artículos-sobre-java-y-programación">Artículos sobre Java y programación</h4>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/01/analizar-y-detectar-fallos-de-seguridad-en-las-dependencias-de-java/">Analizar y detectar fallos de seguridad en las dependencias de Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/01/las-clases-para-logging-del-paquete-jul-incluidas-en-la-api-de-java/">Las clases para logging del paquete JUL incluidas en la API de Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/02/validar-las-propiedades-de-configuracion-de-spring-boot-al-iniciar-la-aplicacion/">Validar las propiedades de configuración de Spring Boot al iniciar la aplicación</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/03/cambiar-el-comportamiento-de-la-aplicacion-con-configuracion-anotaciones-y-condicionales-en-spring-boot/">Cambiar el comportamiento de la aplicación con configuración, anotaciones y condicionales en Spring Boot</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/03/novedades-de-java-18/">Novedades de Java 18</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/04/por-que-y-ejemplo-de-como-desarrollar-un-plugin-de-gradle/">Por qué y ejemplo de cómo desarrollar un plugin de Gradle</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/06/publicar-y-utilizar-una-dependencia-de-java-en-un-repositorio-de-git-con-github-packages/">Publicar y utilizar una dependencia de Java en un repositorio de Git con GitHub Packages</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/07/generar-releases-de-un-proyecto-java-con-gradle/">Generar releases de un proyecto Java con Gradle</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/07/interfaz-web-para-jmx-con-hawtio/">Interfaz web para JMX con Hawtio</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/07/opciones-de-arquitectura-para-emitir-trazas-en-una-aplicacion-java/">Opciones de arquitectura para emitir trazas en una aplicación Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/08/ejemplo-de-patron-builder-para-las-clases-record-de-java/">Ejemplo de patrón Builder para las clases Record de Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/09/introduccion-al-protocolo-oauth-2-para-delegar-la-autorizacion/">Introducción al protocolo OAuth 2 para delegar la autorización</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/09/como-refrescar-el-access-token-de-un-cliente-oauth-cuando-caduca/">Cómo refrescar el access token de un cliente OAuth cuando caduca</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/09/novedades-de-java-19/">Novedades de Java 19</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/">Las funcionalidades de un service mesh en una arquitectura de microservicios</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/">Obtener el ancho y alto, escalar y convertir a otro formato imágenes con Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/12/base-de-datos-de-paises-regiones-ciudades-codigos-postales-y-otra-informacion-geografica/">Base de datos de países, regiones, ciudades, códigos postales y otra información geográfica</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/12/radar-tecnologico-y-otras-fuentes-de-informacion-sobre-programacion/">Radar tecnológico y otras fuentes de información sobre programación</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/12/crear-un-bean-segun-el-contexto-donde-se-inyecte-con-spring/">Crear un bean según el contexto donde se inyecte con Spring</a></li>
</ul>
<h4 id="artículos-sobre-gnulinux-y-software-libre">Artículos sobre GNU/Linux y software libre</h4>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/02/que-son-y-como-gestionar-archivos-dotfiles-con-chezmoi/">Qué son los archivos dotfiles y cómo gestionarlos con chezmoi</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/03/detectar-errores-y-comprobar-la-sintaxis-de-los-scripts-de-bash/">Detectar errores y comprobar la sintaxis de los scripts de Bash</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/04/aplicacion-con-interfaz-grafica-para-repositorios-git/">Aplicación con interfaz gráfica para repositorios Git</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/04/como-usar-el-comando-git-bisect-para-descubrir-el-primer-commit-con-un-error/">Cómo usar el comando git bisect para descubrir el primer commit con un error</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/06/los-interpretes-de-comandos-instalar-y-cambiar-a-otro/">Los intérpretes de comandos, instalar y cambiar a otro</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/06/personalizar-el-simbolo-del-sistema-de-la-linea-de-comandos-con-starship/">Personalizar el símbolo del sistema de la línea de comandos con Starship</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/08/prueba-de-velocidad-de-unidad-de-almacenamiento-en-gnu-linux/">Prueba de velocidad de unidad de almacenamiento en GNU/Linux</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/10/como-descargar-videos-musica-o-audio-de-youtube-y-otras-webs/">Cómo descargar vídeos, música o audio de YouTube y otras webs</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/11/realizar-peticiones-a-apis-con-herramientas-de-linea-comandos-e-interfaz-grafica/">Realizar peticiones a APIs con herramientas de línea comandos e interfaz gráfica</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/">El entorno de escritorio GNOME, simple, elegante y completo</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/11/programas-para-crear-maquinas-virtuales-y-virtualizar-sistemas/">Programas para crear máquinas virtuales y virtualizar sistemas</a></li>
</ul>
<h4 id="artículos-sobre-juegos">Artículos sobre juegos</h4>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/02/analisis-de-los-juegos-de-aventuras-uncharted-the-nathan-drake-collection/">Análisis de los juegos de aventuras Uncharted The Nathan Drake Collection</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/05/analisis-del-juego-de-aventuras-uncharted-4/">Análisis del juego de aventuras Uncharted 4</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/08/analisis-del-juego-con-combates-epicos-god-of-war/">Análisis del juego con combates épicos God of War</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/08/analisis-del-juego-de-la-aventura-galactica-ratchet-y-clank/">Análisis del juego de la aventura galáctica Ratchet &amp; Clank</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/09/analisis-del-juego-espacial-de-combates-por-turnos-spaceland/">Análisis del juego espacial de combates por turnos Spaceland</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/12/la-playstation-4-otras-consolas-mas-antiguas-y-sus-juegos-unos-anos-despues-desde-la-siguiente-generacion/">La PlayStation 4, otras consolas más antiguas y sus juegos unos años después desde la siguiente generación</a></li>
</ul>
<h4 id="desempaquetados-y-análisis-de-tecnología-y-productos">Desempaquetados y análisis de tecnología y productos</h4>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/01/desempaquetado-y-analisis-de-teclado-mecanico-compacto-dierya-dk61e/">Desempaquetado y análisis de teclado mecánico compacto DIERYA DK61E</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/03/desempaquetado-y-analisis-de-teclado-mecanico-compacto-e-inalambrico-dierya-dk63/">Desempaquetado y análisis de teclado mecánico compacto e inalámbrico DIERYA DK63</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/04/mecanismos-electricos-interruptores-enchufes-y-desempaquetado-schneider-new-unica/">Mecanismos eléctricos, interruptores, enchufes y desempaquetado Schneider New Unica</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/05/desempaquetado-y-analisis-de-teclado-mecanico-compacto-e-inalambrico-kemove-dk61/">Desempaquetado y análisis de teclado mecánico compacto e inalámbrico KEMOVE DK61</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/05/desempaquetado-y-analisis-del-smartphone-samsung-galaxy-s21-fe/">Desempaquetado y análisis del smartphone Samsung Galaxy S21 FE</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/05/desempaquetado-de-la-funda-de-teclado-tamano-60-kemove/">Desempaquetado de la funda de teclado tamaño 60% KEMOVE</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/06/desempaquetado-y-analisis-del-teclado-mecanico-compacto-e-inalambrico-kemove-ares/">Desempaquetado y análisis del teclado mecánico compacto e inalámbrico KEMOVE ARES</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/07/desempaquetado-y-analisis-del-microfono-maono-hd300t/">Desempaquetado y análisis del micrófono MAONO HD300T</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/08/desempaquetado-y-analisis-de-la-interfaz-de-audio-maonocaster-e2/">Desempaquetado y análisis de la interfaz de audio Maonocaster E2</a></li>
</ul>
<h4 id="otros-temas">Otros temas</h4>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/01/articulo-9-de-yo-apoyo-al-software-libre/">Artículo #9 de Yo apoyo al software libre</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/05/por-que-es-importante-escoger-un-buen-servicio-de-hosting-para-tu-negocio-en-linea/">¿Por qué es importante escoger un buen servicio de hosting para tu negocio en línea?</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/06/herramientas-de-productividad-para-gestionar-tareas-y-notas/">Herramientas de productividad para gestionar tareas y notas</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/10/formas-de-monetizar-una-pagina-web-o-blog-y-alternativas-a-adsense/">Formas de monetizar una página web o blog y alternativas a AdSense</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/10/funcionamiento-y-precauciones-a-seguir-en-los-servicios-de-compraventa-de-productos-de-segunda-mano-como-wallapop/">Funcionamiento y precauciones a seguir en los servicios de compraventa de productos de segunda mano como Wallapop</a></li>
</ul>
]]>
        </content>
        
            
                <category term="blog"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2022/12/crear-un-bean-segun-el-contexto-donde-se-inyecte-con-spring/</id>
        <title>Crear un bean según el contexto donde se inyecte con Spring</title>
        <updated>2022-12-22T19:00:00+02:00</updated>
        <published>2022-12-22T19:00:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2022/12/crear-un-bean-segun-el-contexto-donde-se-inyecte-con-spring/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Spring permite inyectar un <em>bean</em> construido utilizando información del contexto o clase donde se inyecte. Una caso de uso para esta funcionalidad es eliminar la habitual forma estática de inyectar las referencias a un Logger de una librería de <em>logging</em>, la inyección según el contexto permite proporciona el colaborador del Logger no como una variable estática sino en el constructor igual que otros colaboradores. Los beneficios son dos, se elimina una referencia estática que facilita los teses unitarios y se elimina un poco de código repetido en cada clase donde se use un Logger.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/spring.svg" width="200" height="200" alt="Spring" title="Spring" class="" loading="false&#34;"></p>
</div>
<p>La opción habitual para inyectar una instancia de Logger con la que emitir trazas es hacerlo mediante un método estático y guardar la referencia en una propiedad estática. Esta es incluso la forma recomendada en el ejemplo de varias de las librerías de Logging. Cada clase donde se quiera añadir Logging requiere añadir el mismo código. Las propiedades estáticas son algo a evitar para evitar algunos problemas como la mayor dificultad de realizar pruebas unitarias.</p>
<p>En el artículo <a href="https://picodotdev.github.io/blog-bitix/2022/07/opciones-de-arquitectura-para-emitir-trazas-en-una-aplicacion-java/">Opciones de arquitectura para emitir trazas en una aplicación Java</a> mostraba varias opciones de como inyectar el Logger en la clase que quiera emitir trazas. Una la habitual de forma estática mostrada a continuación que es la que se suele mostrar como ejemplo de código en las propias librerías de Logging.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.springinjectionpoint</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.logging.log4j.Logger</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.logging.log4j.LogManager</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="n">Service</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="n">LogManager</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">Service</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="nf">Service</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kt">void</span> <span class="nf">method</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;Message&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Service-1.java</span>
    </div>
</div>
<p>Para evitar una referencia estática del Logger en la clase que dificulta las pruebas unitarias la opción es inyectar el Logger como un colaborador en el constructor.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.springinjectionpoint</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.logging.log4j.Logger</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.stereotype.Component</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="nd">@Component</span>&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Service</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="n">Logger</span> <span class="n">logger</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="nf">Service</span><span class="o">(</span><span class="n">Logger</span> <span class="n">logger</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">this</span><span class="o">.</span><span class="na">logger</span> <span class="o">=</span> <span class="n">logger</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kt">void</span> <span class="nf">echo</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&#34;Hello World!&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Service-2.java</span>
    </div>
</div>
<p>Una de las propiedades de la inversión de control es que no sean las clases las que creen sus dependencias sino que sea el contenedor el que las inyecte según las propiedades que necesita su constructor. <a href="https://spring.io/">Spring</a> y <a href="https://projects.spring.io/spring-boot/">Spring Boot</a> proporcionan un contenedor de inversión de control con el que evitar la obtención de la referencia al Logger de forma estática y transformarlo a una inyección en el constructor siempre y cuando la clase en la que inyectar el <em>Loggger</em> esté gestionada por el contenedor de dependencias de Spring, de lo contrario hay que seguir recurriendo a la variable estática o gestionar manualmente la inyección de la dependencia al crear las instancias.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="crear-un-_bean_-según-el-contexto-donde-se-inyecte-con-spring">Crear un <em>bean</em> según el contexto donde se inyecte con Spring</h3>
<p>Las instancias de las dependencias en Spring se crean en los métodos anotados con la anotación <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Bean.html">Bean</a> pero en el caso del Logger el construir la instancia depende del contexto, la clase, donde se inyecte ya que para obtener la referencia del Logger depende de la clase.</p>
<p>El método de creación del <em>bean</em> puede recibir un <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/InjectionPoint.html">InjectionPoint</a> a partir del cual conocer cuál es la clase en la que inyecta el Logger y obtener una referencia a este según su clase que lo va a contener.</p>
<p>Como hay múltiples instancias de <em>loggers</em> según se inyecten hay que anotarlo también con la anotación <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Scope.html">@Scope(&ldquo;prototype&rdquo;)</a> para que Spring crea una instancia cada vez que se solicita.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.springinjectionpoint</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.lang.reflect.Field</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.util.Optional</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.logging.log4j.LogManager</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.apache.logging.log4j.Logger</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.InjectionPoint</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Scope</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.core.MethodParameter</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="nd">@Configuration</span>&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Beans</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Bean</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Scope</span><span class="o">(</span><span class="s">&#34;prototype&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Logger</span> <span class="nf">logger</span><span class="o">(</span><span class="n">InjectionPoint</span> <span class="n">ip</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Optional</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&gt;</span> <span class="n">clazzParameter</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">ip</span><span class="o">.</span><span class="na">getMethodParameter</span><span class="o">()).</span><span class="na">map</span><span class="o">(</span><span class="n">MethodParameter</span><span class="o">::</span><span class="n">getContainingClass</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">(</span><span class="n">clazzParameter</span><span class="o">.</span><span class="na">isPresent</span><span class="o">())</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">LogManager</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">clazzParameter</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Optional</span><span class="o">&lt;</span><span class="n">Class</span><span class="o">&gt;</span> <span class="n">clazzClass</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="n">ip</span><span class="o">.</span><span class="na">getField</span><span class="o">()).</span><span class="na">map</span><span class="o">(</span><span class="n">Field</span><span class="o">::</span><span class="n">getDeclaringClass</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">(</span><span class="n">clazzClass</span><span class="o">.</span><span class="na">isPresent</span><span class="o">())</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">LogManager</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">clazzClass</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalArgumentException</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Beans.java</span>
    </div>
</div>
<p>Con esta funcionalidad de Spring es posible evitar los Logger estáticos e inyectarlos como un colaborador en el constructor. La funcionalidad de Logging funciona exactamente igual.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.springinjectionpoint</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.boot.CommandLineRunner</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">org.springframework.boot.builder.SpringApplicationBuilder</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="nd">@SpringBootApplication</span>&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="kd">implements</span> <span class="n">CommandLineRunner</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Autowired</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="n">Service</span> <span class="n">service</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nd">@Override</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="n">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">service</span><span class="o">.</span><span class="na">echo</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">new</span> <span class="n">SpringApplicationBuilder</span><span class="o">(</span><span class="n">Main</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">listeners</span><span class="o">(</span><span class="k">new</span> <span class="n">Events</span><span class="o">())</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">application</span><span class="o">()</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">run</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">2022-12-22 19:32:27,479 INFO  [main]  io.github.picodotdev.blogbitix.springinjectionpoint.Service Hello World!&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>System.out</span>
    </div>
</div>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/SpringInjectionPoint">código fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub y probarlo en tu equipo ejecutando siguiente comando:<br><code>./gradlew run</code></p>
</div>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://dzone.com/articles/logger-injection-with-springs-injectionpoint">Logger Injection With Spring’s InjectionPoint</a></li>
<li><a href="https://medium.com/simars/inject-loggers-in-spring-java-or-kotlin-87162d02d068">Inject loggers in Spring | Java or Kotlin</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="java"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2022/12/radar-tecnologico-y-otras-fuentes-de-informacion-sobre-programacion/</id>
        <title>Radar tecnológico y otras fuentes de información sobre programación</title>
        <updated>2022-12-15T21:00:00+02:00</updated>
        <published>2022-12-15T21:00:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2022/12/radar-tecnologico-y-otras-fuentes-de-informacion-sobre-programacion/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Conocer que herramientas hay disponibles permite elegir aquellas que más apropiadas sean para resolver un problema, las herramientas no son el fin pero si un medio determinante. Las herramientas usadas diariamente en el trabajo no permiten experimentar y conocer otras nuevas herramientas que en algún momento puedan pasar a considerarse una mejor opción. El radar tecnológico de Thoughtworks hace un resumen al menos dos veces al año a tener en cuenta con los cambios en las herramientas, además permite conocer nuevas herramientas.</strong></p>]]>
        <![CDATA[<p>Con el paso del tiempo surgen nuevas herramientas que pretenden sustituir a otras existentes, proporcionando algunas nuevas funcionalidades o no teniendo algunos defectos. Algunas de estas nuevas herramientas no ganan la suficiente popularidad, otras con el tiempo consiguen ser usadas por un número mayor de usuarios y llegan a considerarse la mejor herramienta y estándar para su nicho de funcionalidad, hasta que al cabo de otros años es sustituida por otra herramienta nueva.</p>
<p>Es recomendable seguir las novedades que van surgiendo en la tecnología y herramientas de desarrollo. Aunque las herramientas no son el principal factor para desarrollar un buen programa o un producto bien utilizadas y utilizando las adecuadas si contribuyen a evitar problemas y facilitar su desarrollo por no mencionar que utilizar tecnologías que ya se consideran obsoletas tienen otras consideraciones como un motivo de decisión para trabajar o no en una empresa simplemente porque es una consideración para la evolución profesional de los empleados.</p>
<h3 id="qué-necesitan-las-aplicaciones">Qué necesitan las aplicaciones</h3>
<p>Las funcionalidades que necesitan las aplicaciones no cambian tanto como las herramientas. Una aplicación monolítica es muy diferente de otra basada en microservicios y sus necesidades de herramientas son muy distintas pero comparten algunas necesidades. Ambas con seguridad necesitan herramientas de integración continua, una base de datos y monitorización y observabilidad, las aplicaciones basadas en microservicios al ser más complejas necesitarán más herramientas aún.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/09/funcionalidades-que-necesitan-las-aplicaciones-basadas-en-microservicios-y-herramientas-que-las-proporcionan/">Funcionalidades que necesitan las aplicaciones basadas en microservicios y herramientas que las proporcionan</a></li>
</ul>
<h3 id="el-radar-tecnológico-de-thoughtworks">El radar tecnológico de Thoughtworks</h3>
<p><a href="https://www.thoughtworks.com/radar">El radar tecnológico de Thoughtworks</a> hace un resumen de las novedades que se producen en la tecnología relacionadas con el desarrollo de aplicaciones. Se publica más o menos cada seis meses con las novedades de ese periodo de tiempo y mantiene un archivo para consultar las ediciones anteriores. Este radar es una fuente de información muy interesante para conocer herramientas y novedades que se producen en la tecnología, no todos los meses pero cada año es posible que surjan novedades interesantes que hay que evaluar si adoptar.</p>
<p>El radar tecnológico se divide en cuatro aspectos o cuadrantes de técnicas, plataformas, herramientas y lenguajes y <em>frameworks</em>. A su vez cada aspecto se divide en varios anillos de resistir, evaluar, probar y adoptar según su grado de recomendación. Dentro de cada cuadrante y anillo se posicionan los puntos o <em>blips</em> que el radar ha detectado con cambios para estar informado.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/12/radar-tecnologico-y-otras-fuentes-de-informacion-sobre-programacion/images/thoughtworks-radar_hu0d14f8df1656918a3069cd7fb443e5f6_272571_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="El radar tecnológico de Thoughtworks"><img src="https://picodotdev.github.io/blog-bitix/2022/12/radar-tecnologico-y-otras-fuentes-de-informacion-sobre-programacion/images/thoughtworks-radar_hu0d14f8df1656918a3069cd7fb443e5f6_272571_650x450_fit_q90_h2_box_3.webp" width="447" height="450" alt="El radar tecnológico de Thoughtworks" title="El radar tecnológico de Thoughtworks" class="&#34; " loading="lazy"></a></p>
<figcaption>El radar tecnológico de Thoughtworks</figcaption>
</figure>
</div>
<h3 id="otras-fuentes-de-información">Otras fuentes de información</h3>
<p>En el caso de Java con su nuevo calendario de publicación cada seis meses hace que las nuevas versiones y novedades que incorpora sean más numerosas. Las notas de publicación de Java incluyen todas las novedades que va incorporando el lenguaje y la plataforma.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/series/java-platform/">Novedades del lenguaje y la plataforma Java</a></li>
</ul>
<p>Es posible seguir varias páginas de información con novedades en tecnología, desarrollo y programación <a href="https://www.infoq.com/">InfoQ</a>, <a href="https://dzone.com/">DZone</a>, <a href="https://www.theserverside.com/">TheServerSide</a>, <a href="https://martinfowler.com/">Martin Fowler</a>, <a href="http://developer.com/">Developer.com</a>, <a href="https://blog.jetbrains.com/">JetBrains Blog</a>, <a href="https://www.oreilly.com/radar/">OReilly Radar</a>, <a href="https://increment.com/">Increment</a>, <a href="https://leaddev.com/">LeadDev</a>, <a href="https://sreweekly.com/">SRE Weekly</a>, <a href="https://www.javacodegeeks.com/">Java Code Geeks</a> son solo algunos, ¿conoces algún sitio más de información sobre programación y desarrollo que ofrezca artículos interesantes y de gran calidad?</p>
]]>
        </content>
        
            
                <category term="planeta-codigo"/>
            
                <category term="programacion"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2022/12/base-de-datos-de-paises-regiones-ciudades-codigos-postales-y-otra-informacion-geografica/</id>
        <title>Base de datos de países, regiones, ciudades, códigos postales y otra información geográfica</title>
        <updated>2022-12-01T19:30:00+01:00</updated>
        <published>2022-12-01T19:30:00+01:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2022/12/base-de-datos-de-paises-regiones-ciudades-codigos-postales-y-otra-informacion-geografica/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Entre las funcionalidades habituales en una aplicación está un formulario para introducir una dirección. El formulario de dirección consta de varios campos en el que suele ser recomendable realizar unas mínimas validaciones como que el código postal o ciudad sea correcto para evitar errores inadvertidos del usuario o intencionados con información incorrecta. La base de datos de GeoNames proporciona información geográfica muy útil y de forma gratuita que incluye países, ciudades, subdivisiones administrativas, códigos postales, nombres en diferentes idiomas y mucha otra información de todos los paises del mundo.</strong></p>]]>
        <![CDATA[<p>No todo son microservicios es más ni siquiera estos son la mejor opción en muchos casos, las cosas mundanas tienen también mucha importancia en la aplicación cómo ordenar alfabéticamente cadenas o introducir una dirección postal. Es habitual un formulario en el que haya que introducir direcciones lo que incluye códigos postales, ciudad, país y quizá adicionalmente un teléfono.</p>
<p>Lo que parece un simple formulario con varios campos de datos se complica cuando hay que validar los códigos postales, ciudad de un país o al incluir información de las diferentes subdivisiones administrativas. Más si en el formulario hay que tener en cuenta las diferentes variaciones según cada país, los códigos postales de España son muy diferentes de los de Reino Unido lo que significa que la expresión regular es muy diferente y según la normativa del país.</p>
<p>Estas tareas que parecen sencillas realmente tienen su dificultad, ordenar caracteres alfabéticamente se complica ya que hay que tener en cuenta las tildes o mayúsculas y minúsculas y validar direcciones para recibir datos correctos requiere validaciones y conocer cuales son los valores válidos.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2017/11/la-forma-correcta-de-ordenar-alfabeticamente-cadenas-en-java/">La forma correcta de ordenar alfabéticamente cadenas en Java</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/06/ofrecer-contenido-personalizado-al-usuario-basado-en-su-ubicacion/">Ofrecer contenido personalizado al usuario basado en su ubicación</a></li>
</ul>
<p>El listado de países, unidades administrativas como comunidades autónomas, ciudades y códigos postales además del código del prefijo telefónico del país o zona horaria es habitual configurarlo como información más o menos estática en las aplicaciones ya sea en una base de datos o en archivos de configuración.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="la-base-de-datos-de-información-geográfica-de-geonames">La base de datos de información geográfica de GeoNames</h3>
<p>Una fuente que permite obtener esta información geográfica es la página de <a href="https://www.geonames.org/">GeoNames</a> que tiene una <a href="https://creativecommons.org/">licencia de Creative Commons</a>. La base de datos de información está compuesta por varios archivos CSV muchos separados por tabuladores con las varias columnas de información. En el <a href="https://download.geonames.org/export/dump/readme.txt">archivo README</a> hay una lista de los archivos de los que consta la base de datos.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">XX.zip&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   : features for country with iso code XX, see &#39;geoname&#39; table for columns. &#39;no-country&#39; for features not belonging to a country.&#10;</span></span><span class="line"><span class="cl">allCountries.zip&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : all countries combined in one file, see &#39;geoname&#39; table for columns&#10;</span></span><span class="line"><span class="cl">cities500.zip&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: all cities with a population &gt; 500 or seats of adm div down to PPLA4 (ca 185.000), see &#39;geoname&#39; table for columns&#10;</span></span><span class="line"><span class="cl">cities1000.zip&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   : all cities with a population &gt; 1000 or seats of adm div down to PPLA3 (ca 130.000), see &#39;geoname&#39; table for columns&#10;</span></span><span class="line"><span class="cl">cities5000.zip&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   : all cities with a population &gt; 5000 or PPLA (ca 50.000), see &#39;geoname&#39; table for columns&#10;</span></span><span class="line"><span class="cl">cities15000.zip&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  : all cities with a population &gt; 15000 or capitals (ca 25.000), see &#39;geoname&#39; table for columns&#10;</span></span><span class="line"><span class="cl">alternateNamesV2.zip&nbsp;&nbsp;&nbsp;&nbsp; : alternate names with language codes and geonameId, file with iso language codes, with new columns from and to&#10;</span></span><span class="line"><span class="cl">alternateNames.zip&nbsp;&nbsp;&nbsp;&nbsp;   : obsolete use V2, this file does not have the new columns to and from and will be removed in the future&#10;</span></span><span class="line"><span class="cl">admin1CodesASCII.txt&nbsp;&nbsp;&nbsp;&nbsp; : names in English for admin divisions. Columns: code, name, name ascii, geonameid&#10;</span></span><span class="line"><span class="cl">admin2Codes.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  : names for administrative subdivision &#39;admin2 code&#39; (UTF8), Format : concatenated codes &lt;tab&gt;name &lt;tab&gt; asciiname &lt;tab&gt; geonameId&#10;</span></span><span class="line"><span class="cl">iso-languagecodes.txt&nbsp;&nbsp;&nbsp;&nbsp;: iso 639 language codes, as used for alternate names in file alternateNames.zip&#10;</span></span><span class="line"><span class="cl">featureCodes.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : name and description for feature classes and feature codes &#10;</span></span><span class="line"><span class="cl">timeZones.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: countryCode, timezoneId, gmt offset on 1st of January, dst offset to gmt on 1st of July (of the current year), rawOffset without DST&#10;</span></span><span class="line"><span class="cl">countryInfo.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  : country information : iso codes, fips codes, languages, capital ,...</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>archives.txt</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">The main &#39;geoname&#39; table has the following fields :&#10;</span></span><span class="line"><span class="cl">---------------------------------------------------&#10;</span></span><span class="line"><span class="cl">geonameid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : integer id of record in geonames database&#10;</span></span><span class="line"><span class="cl">name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  : name of geographical point (utf8) varchar(200)&#10;</span></span><span class="line"><span class="cl">asciiname&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : name of geographical point in plain ascii characters, varchar(200)&#10;</span></span><span class="line"><span class="cl">alternatenames&nbsp;&nbsp;&nbsp;&nbsp;: alternatenames, comma separated, ascii names automatically transliterated, convenience attribute from alternatename table, varchar(10000)&#10;</span></span><span class="line"><span class="cl">latitude&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  : latitude in decimal degrees (wgs84)&#10;</span></span><span class="line"><span class="cl">longitude&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : longitude in decimal degrees (wgs84)&#10;</span></span><span class="line"><span class="cl">feature class&nbsp;&nbsp;&nbsp;&nbsp; : see http://www.geonames.org/export/codes.html, char(1)&#10;</span></span><span class="line"><span class="cl">feature code&nbsp;&nbsp;&nbsp;&nbsp;  : see http://www.geonames.org/export/codes.html, varchar(10)&#10;</span></span><span class="line"><span class="cl">country code&nbsp;&nbsp;&nbsp;&nbsp;  : ISO-3166 2-letter country code, 2 characters&#10;</span></span><span class="line"><span class="cl">cc2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   : alternate country codes, comma separated, ISO-3166 2-letter country code, 200 characters&#10;</span></span><span class="line"><span class="cl">admin1 code&nbsp;&nbsp;&nbsp;&nbsp;   : fipscode (subject to change to iso code), see exceptions below, see file admin1Codes.txt for display names of this code; varchar(20)&#10;</span></span><span class="line"><span class="cl">admin2 code&nbsp;&nbsp;&nbsp;&nbsp;   : code for the second administrative division, a county in the US, see file admin2Codes.txt; varchar(80) &#10;</span></span><span class="line"><span class="cl">admin3 code&nbsp;&nbsp;&nbsp;&nbsp;   : code for third level administrative division, varchar(20)&#10;</span></span><span class="line"><span class="cl">admin4 code&nbsp;&nbsp;&nbsp;&nbsp;   : code for fourth level administrative division, varchar(20)&#10;</span></span><span class="line"><span class="cl">population&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: bigint (8 byte int) &#10;</span></span><span class="line"><span class="cl">elevation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : in meters, integer&#10;</span></span><span class="line"><span class="cl">dem&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   : digital elevation model, srtm3 or gtopo30, average elevation of 3&#39;&#39;x3&#39;&#39; (ca 90mx90m) or 30&#39;&#39;x30&#39;&#39; (ca 900mx900m) area in meters, integer. srtm processed by cgiar/ciat.&#10;</span></span><span class="line"><span class="cl">timezone&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  : the iana timezone id (see file timeZone.txt) varchar(40)&#10;</span></span><span class="line"><span class="cl">modification date : date of last modification in yyyy-MM-dd format</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>table-geoname.txt</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">The table &#39;alternate names&#39; :&#10;</span></span><span class="line"><span class="cl">-----------------------------&#10;</span></span><span class="line"><span class="cl">alternateNameId   : the id of this alternate name, int&#10;</span></span><span class="line"><span class="cl">geonameid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : geonameId referring to id in table &#39;geoname&#39;, int&#10;</span></span><span class="line"><span class="cl">isolanguage&nbsp;&nbsp;&nbsp;&nbsp;   : iso 639 language code 2- or 3-characters; 4-characters &#39;post&#39; for postal codes and &#39;iata&#39;,&#39;icao&#39; and faac for airport codes, fr_1793 for French Revolution names,  abbr for abbreviation, link to a website (mostly to wikipedia), wkdt for the wikidataid, varchar(7)&#10;</span></span><span class="line"><span class="cl">alternate name&nbsp;&nbsp;&nbsp;&nbsp;: alternate name or name variant, varchar(400)&#10;</span></span><span class="line"><span class="cl">isPreferredName   : &#39;1&#39;, if this alternate name is an official/preferred name&#10;</span></span><span class="line"><span class="cl">isShortName&nbsp;&nbsp;&nbsp;&nbsp;   : &#39;1&#39;, if this is a short name like &#39;California&#39; for &#39;State of California&#39;&#10;</span></span><span class="line"><span class="cl">isColloquial&nbsp;&nbsp;&nbsp;&nbsp;  : &#39;1&#39;, if this alternate name is a colloquial or slang term. Example: &#39;Big Apple&#39; for &#39;New York&#39;.&#10;</span></span><span class="line"><span class="cl">isHistoric&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: &#39;1&#39;, if this alternate name is historic and was used in the past. Example &#39;Bombay&#39; for &#39;Mumbai&#39;.&#10;</span></span><span class="line"><span class="cl">from		  : from period when the name was used&#10;</span></span><span class="line"><span class="cl">to		  : to period when the name was used</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>table-alternate-names.txt</span>
    </div>
</div>
<h4 id="countryinfotxt">countryInfo.txt</h4>
<p>Este archivo contiene la lista de países. Entre su información está el código del país, las expresiones regulares de los códigos postales, el prefijo del teléfono, código de la divisa, lenguaje entre otra información como población, superficie y la capital además de los países vecinos.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">ES	ESP	724	SP	Spain	Madrid	504782	46723749	EU	.es	EUR	Euro	34	#####	^(\d{5})$	es-ES,ca,gl,eu,oc	2510769	AD,PT,GI,FR,MA	&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>country-es.txt</span>
    </div>
</div>
<h4 id="allcountrieszip-y-xxzip">allCountries.zip y XX.zip</h4>
<p>El archivo <em>allCountries.zip</em> contiene las ciudades de todos los países (todos los archivos <em>XX.zip</em>) y en los archivos <em>XX.zip</em> están las ciudades de un país en concreto, <em>ES.zip</em> para las ciudades de España. Contienen el código ciudad, latitud y longitud, zona horaria y los códigos de las unidades administrativas junto con su población, elevación e identificador <em>geonameid</em></p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">3128026	Bilbao	Bilbao	BIO,Bil&#39;baa,Bil&#39;bao,Bilbao,Bilbau,Bilbaum,Bilbaw,Bilbo,Bilbo / Bilbao,Bilmpao,El Bocho,bi er ba e,bil ba xo,bilba&#39;o,bilbao,birubao,blbaw,bylbaw,bylbayw,Μπιλμπάο,Билбао,Бильбао,Більбаа,Більбао,Բիլբաո,בילבאו,بلباو,بیلبائو,بیلباو,बिल्बाओ,บิลบาโอ,ბილბაო,ビルバオ,毕尔巴鄂,빌바오&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>es-bilbao.txt</span>
    </div>
</div>
<p>Hay varios archivos de ciudades filtrados según si superan una cantidad de población, <em>cities500.zip</em>, <em>cities1000.zip</em>, <em>cities5000.zip</em>, <em>cities15000.zip</em>. Las columnas son las mismas que las del archivo anterior donde están agrupadas por país pero en este están agrupadas por población.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">3128026	Bilbao	Bilbao	BIO,Bil&#39;baa,Bil&#39;bao,Bilbao,Bilbau,Bilbaum,Bilbaw,Bilbo,Bilbo / Bilbao,Bilmpao,El Bocho,bi er ba e,bil ba xo,bilba&#39;o,bilbao,birubao,blbaw,bylbaw,bylbayw,Μπιλμπάο,Билбао,Бильбао,Більбаа,Більбао,Բիլբաո,בילבאו,بلباو,بیلبائو,بیلباو,बिल्बाओ,บิลบาโอ,ბილბაო,ビルバオ,毕尔巴鄂,빌바오&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>cities15000-bilbao.txt</span>
    </div>
</div>
<h4 id="alternatenamesv2zip">alternateNamesV2.zip</h4>
<p>Contiene diversa información más extendida de cada uno de los <em>geonames</em>, incluyendo su nombre en diferentes idiomas, el conjunto de códigos postales asociados, identificador del aeropuerto y enlaces a la wikipedia.</p>
<p>El archivo <em>alternateNamesV2.txt</em> es tan grande que ocupa varios cientos de megabytes descomprimido de modo que casi no se puede abrir con un editor y hay que recurrir al comando <em>grep</em> para buscar dado el <em>geonameid</em>.</p>
<p>El <em>geonameid</em> de la ciudad de Bilbao es <em>3128026</em> y buscando en el archivo se encuentran estas referencias que incluyen los diferentes nombres en diferentes lenguajes, códigos postales, <em>iata</em> y <em>uncl</em> para la denominación del aeropuerto además de otra información como enlaces a la wikipedia. En casi de en un mismo lenguaje haber varios nombres el 1 indica cual es la denominación preferida.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ grep <span class="s2">&#34;3128026&#34;</span> alternateNamesV2.txt&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>grep-alternate-names-bilbao.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span><span class="lnt">43&#10;</span><span class="lnt">44&#10;</span><span class="lnt">45&#10;</span><span class="lnt">46&#10;</span><span class="lnt">47&#10;</span><span class="lnt">48&#10;</span><span class="lnt">49&#10;</span><span class="lnt">50&#10;</span><span class="lnt">51&#10;</span><span class="lnt">52&#10;</span><span class="lnt">53&#10;</span><span class="lnt">54&#10;</span><span class="lnt">55&#10;</span><span class="lnt">56&#10;</span><span class="lnt">57&#10;</span><span class="lnt">58&#10;</span><span class="lnt">59&#10;</span><span class="lnt">60&#10;</span><span class="lnt">61&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">1325769	3128026	eu	Bilbo						&#10;</span></span><span class="line"><span class="cl">1565386	3128026	es	El Bocho						&#10;</span></span><span class="line"><span class="cl">1968272	3128026	es	Bilbao	1					&#10;</span></span><span class="line"><span class="cl">1968273	3128026		Bilbao						&#10;</span></span><span class="line"><span class="cl">2039076	3128026	eu	Bilbao	1					&#10;</span></span><span class="line"><span class="cl">2039077	3128026	pt	Bilbau						&#10;</span></span><span class="line"><span class="cl">2039078	3128026	eo	Bilbao						&#10;</span></span><span class="line"><span class="cl">2148428	3128026	post	48080						&#10;</span></span><span class="line"><span class="cl">2148598	3128026	post	48002						&#10;</span></span><span class="line"><span class="cl">2148599	3128026	post	48003						&#10;</span></span><span class="line"><span class="cl">2148600	3128026	post	48004						&#10;</span></span><span class="line"><span class="cl">2148601	3128026	post	48070						&#10;</span></span><span class="line"><span class="cl">2148602	3128026	post	48071						&#10;</span></span><span class="line"><span class="cl">2148614	3128026	post	48006						&#10;</span></span><span class="line"><span class="cl">2148615	3128026	post	48014						&#10;</span></span><span class="line"><span class="cl">2148618	3128026	post	48008						&#10;</span></span><span class="line"><span class="cl">2148619	3128026	post	48015						&#10;</span></span><span class="line"><span class="cl">2148621	3128026	post	48007						&#10;</span></span><span class="line"><span class="cl">2148622	3128026	post	48005						&#10;</span></span><span class="line"><span class="cl">2148623	3128026	post	48012						&#10;</span></span><span class="line"><span class="cl">2148650	3128026	post	48001						&#10;</span></span><span class="line"><span class="cl">2148652	3128026	post	48009						&#10;</span></span><span class="line"><span class="cl">2148653	3128026	post	48013						&#10;</span></span><span class="line"><span class="cl">2148655	3128026	post	48010						&#10;</span></span><span class="line"><span class="cl">2148670	3128026	post	48011						&#10;</span></span><span class="line"><span class="cl">2426128	3128026	ru	Бильбао						&#10;</span></span><span class="line"><span class="cl">2920566	3128026	link	https://en.wikipedia.org/wiki/Bilbao						&#10;</span></span><span class="line"><span class="cl">3055848	3128026	link	https://ru.wikipedia.org/wiki/%D0%91%D0%B8%D0%BB%D1%8C%D0%B1%D0%B0%D0%BE						&#10;</span></span><span class="line"><span class="cl">5882689	3128026	ja	ビルバオ						&#10;</span></span><span class="line"><span class="cl">5882690	3128026	cy	Bilbo						&#10;</span></span><span class="line"><span class="cl">5882691	3128026	os	Бильбао						&#10;</span></span><span class="line"><span class="cl">5882692	3128026	ce	Билбао						&#10;</span></span><span class="line"><span class="cl">5882693	3128026	fa	بیلبائو						&#10;</span></span><span class="line"><span class="cl">5882694	3128026	sr	Билбао						&#10;</span></span><span class="line"><span class="cl">5882695	3128026	uk	Більбао						&#10;</span></span><span class="line"><span class="cl">5882696	3128026	br	Bilbo						&#10;</span></span><span class="line"><span class="cl">5882697	3128026	ug	Bilbaw						&#10;</span></span><span class="line"><span class="cl">5882698	3128026	ext	Bilbau						&#10;</span></span><span class="line"><span class="cl">5882699	3128026	el	Μπιλμπάο						&#10;</span></span><span class="line"><span class="cl">5882700	3128026	ko	빌바오						&#10;</span></span><span class="line"><span class="cl">5882701	3128026	bg	Билбао						&#10;</span></span><span class="line"><span class="cl">5882702	3128026	he	בילבאו						&#10;</span></span><span class="line"><span class="cl">5882703	3128026	be	Більбаа						&#10;</span></span><span class="line"><span class="cl">5882704	3128026	la	Bilbaum						&#10;</span></span><span class="line"><span class="cl">5882705	3128026	an	Bilbau						&#10;</span></span><span class="line"><span class="cl">5882706	3128026	ka	ბილბაო						&#10;</span></span><span class="line"><span class="cl">5882707	3128026	th	บิลบาโอ						&#10;</span></span><span class="line"><span class="cl">5882708	3128026	zh	毕尔巴鄂						&#10;</span></span><span class="line"><span class="cl">5882709	3128026	ar	بلباو						&#10;</span></span><span class="line"><span class="cl">5882710	3128026	mr	बिल्बाओ						&#10;</span></span><span class="line"><span class="cl">5882711	3128026	gl	Bilbo						&#10;</span></span><span class="line"><span class="cl">5882712	3128026	pms	Bilbo / Bilbao						&#10;</span></span><span class="line"><span class="cl">5882713	3128026	mhr	Бильбао						&#10;</span></span><span class="line"><span class="cl">6634068	3128026	iata	BIO						&#10;</span></span><span class="line"><span class="cl">8183693	3128026	hy	Բիլբաո						&#10;</span></span><span class="line"><span class="cl">8183694	3128026	mn	Бильбао						&#10;</span></span><span class="line"><span class="cl">8183695	3128026	xmf	ბილბაო						&#10;</span></span><span class="line"><span class="cl">8183696	3128026	ckb	بیلباو						&#10;</span></span><span class="line"><span class="cl">8183697	3128026	kk	Бильбао						&#10;</span></span><span class="line"><span class="cl">13750954	3128026	unlc	ESBIO						&#10;</span></span><span class="line"><span class="cl">3128026	134091	fa	Gerakān</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>grep-alternate-names-bilbao.out</span>
    </div>
</div>
<h4 id="admin1codesasciitxt">admin1CodesASCII.txt</h4>
<p>Contiene las unidades administrativas del primer nivel, en el caso de España son las comunidades autónomas. El archivo incluye el <em>geonameid</em> asociado a la comunidad autónoma.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">ES.31	Murcia	Murcia	2513413&#10;</span></span><span class="line"><span class="cl">ES.CE	Ceuta	Ceuta	2519582&#10;</span></span><span class="line"><span class="cl">ES.07	Balearic Islands	Balearic Islands	2521383&#10;</span></span><span class="line"><span class="cl">ES.51	Andalusia	Andalusia	2593109&#10;</span></span><span class="line"><span class="cl">ES.53	Canary Islands	Canary Islands	2593110&#10;</span></span><span class="line"><span class="cl">ES.54	Castille-La Mancha	Castille-La Mancha	2593111&#10;</span></span><span class="line"><span class="cl">ES.57	Extremadura	Extremadura	2593112&#10;</span></span><span class="line"><span class="cl">ES.60	Valencia	Valencia	2593113&#10;</span></span><span class="line"><span class="cl">ES.34	Asturias	Asturias	3114710&#10;</span></span><span class="line"><span class="cl">ES.32	Navarre	Navarre	3115609&#10;</span></span><span class="line"><span class="cl">ES.29	Madrid	Madrid	3117732&#10;</span></span><span class="line"><span class="cl">ES.27	La Rioja	La Rioja	3336897&#10;</span></span><span class="line"><span class="cl">ES.39	Cantabria	Cantabria	3336898&#10;</span></span><span class="line"><span class="cl">ES.52	Aragon	Aragon	3336899&#10;</span></span><span class="line"><span class="cl">ES.55	Castille and León	Castille and Leon	3336900&#10;</span></span><span class="line"><span class="cl">ES.56	Catalonia	Catalonia	3336901&#10;</span></span><span class="line"><span class="cl">ES.58	Galicia	Galicia	3336902&#10;</span></span><span class="line"><span class="cl">ES.59	Basque Country	Basque Country	3336903&#10;</span></span><span class="line"><span class="cl">ES.ML	Melilla	Melilla	6362988</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>admin1-es.txt</span>
    </div>
</div>
<h4 id="admin2codestxt">admin2Codes.txt</h4>
<p>Contiene las unidades administrativas del segundo nivel, en el caso de España son las provincias. El archivo incluye el <em>geonameid</em> asociado a la provincia.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span><span class="lnt">43&#10;</span><span class="lnt">44&#10;</span><span class="lnt">45&#10;</span><span class="lnt">46&#10;</span><span class="lnt">47&#10;</span><span class="lnt">48&#10;</span><span class="lnt">49&#10;</span><span class="lnt">50&#10;</span><span class="lnt">51&#10;</span><span class="lnt">52&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">ES.60.V	Província de València	Provincia de Valencia	2509951&#10;</span></span><span class="line"><span class="cl">ES.54.TO	Province of Toledo	Province of Toledo	2510407&#10;</span></span><span class="line"><span class="cl">ES.51.SE	Provincia de Sevilla	Provincia de Sevilla	2510910&#10;</span></span><span class="line"><span class="cl">ES.53.TF	Provincia de Santa Cruz de Tenerife	Provincia de Santa Cruz de Tenerife	2511173&#10;</span></span><span class="line"><span class="cl">ES.51.MA	Provincia de Málaga	Provincia de Malaga	2514254&#10;</span></span><span class="line"><span class="cl">ES.53.GC	Provincia de Las Palmas	Provincia de Las Palmas	2515271&#10;</span></span><span class="line"><span class="cl">ES.51.J	Provincia de Jaén	Provincia de Jaen	2516394&#10;</span></span><span class="line"><span class="cl">ES.51.H	Provincia de Huelva	Provincia de Huelva	2516547&#10;</span></span><span class="line"><span class="cl">ES.51.GR	Provincia de Granada	Provincia de Granada	2517115&#10;</span></span><span class="line"><span class="cl">ES.54.CU	Provincia de Cuenca	Provincia de Cuenca	2519034&#10;</span></span><span class="line"><span class="cl">ES.51.CO	Province of Córdoba	Province of Cordoba	2519239&#10;</span></span><span class="line"><span class="cl">ES.54.CR	Provincia de Ciudad Real	Provincia de Ciudad Real	2519401&#10;</span></span><span class="line"><span class="cl">ES.51.CA	Provincia de Cádiz	Provincia de Cadiz	2520597&#10;</span></span><span class="line"><span class="cl">ES.57.CC	Provincia de Cáceres	Provincia de Caceres	2520610&#10;</span></span><span class="line"><span class="cl">ES.57.BA	Provincia de Badajoz	Provincia de Badajoz	2521419&#10;</span></span><span class="line"><span class="cl">ES.51.AL	Almería	Almeria	2521883&#10;</span></span><span class="line"><span class="cl">ES.60.A	Provincia de Alicante	Provincia de Alicante	2521976&#10;</span></span><span class="line"><span class="cl">ES.54.AB	Provincia de Albacete	Provincia de Albacete	2522257&#10;</span></span><span class="line"><span class="cl">ES.52.Z	Provincia de Zaragoza	Provincia de Zaragoza	3104323&#10;</span></span><span class="line"><span class="cl">ES.55.ZA	Provincia de Zamora	Provincia de Zamora	3104341&#10;</span></span><span class="line"><span class="cl">ES.59.BI	Bizkaia	Bizkaia	3104469&#10;</span></span><span class="line"><span class="cl">ES.55.VA	Provincia de Valladolid	Provincia de Valladolid	3106671&#10;</span></span><span class="line"><span class="cl">ES.52.TE	Provincia de Teruel	Provincia de Teruel	3108125&#10;</span></span><span class="line"><span class="cl">ES.56.T	Província de Tarragona	Provincia de Tarragona	3108287&#10;</span></span><span class="line"><span class="cl">ES.55.SO	Provincia de Soria	Provincia de Soria	3108680&#10;</span></span><span class="line"><span class="cl">ES.55.SG	Provincia de Segovia	Provincia de Segovia	3109254&#10;</span></span><span class="line"><span class="cl">ES.39.S	Provincia de Cantabria	Provincia de Cantabria	3109716&#10;</span></span><span class="line"><span class="cl">ES.55.SA	Provincia de Salamanca	Provincia de Salamanca	3111107&#10;</span></span><span class="line"><span class="cl">ES.58.PO	Provincia de Pontevedra	Provincia de Pontevedra	3113208&#10;</span></span><span class="line"><span class="cl">ES.55.P	Provincia de Palencia	Provincia de Palencia	3114530&#10;</span></span><span class="line"><span class="cl">ES.58.OR	Provincia de Ourense	Provincia de Ourense	3114964&#10;</span></span><span class="line"><span class="cl">ES.58.LU	Provincia de Lugo	Provincia de Lugo	3117813&#10;</span></span><span class="line"><span class="cl">ES.55.LE	Provincia de León	Provincia de Leon	3118528&#10;</span></span><span class="line"><span class="cl">ES.58.C	Provincia da Coruña	Provincia da Coruna	3119840&#10;</span></span><span class="line"><span class="cl">ES.52.HU	Provincia de Huesca	Provincia de Huesca	3120513&#10;</span></span><span class="line"><span class="cl">ES.59.SS	Gipuzkoa	Provincia de Guipuzcoa	3120935&#10;</span></span><span class="line"><span class="cl">ES.54.GU	Provincia de Guadalajara	Provincia de Guadalajara	3121069&#10;</span></span><span class="line"><span class="cl">ES.60.CS	Província de Castelló	Provincia de Castello	3125881&#10;</span></span><span class="line"><span class="cl">ES.55.BU	Provincia de Burgos	Provincia de Burgos	3127460&#10;</span></span><span class="line"><span class="cl">ES.56.B	Província de Barcelona	Provincia de Barcelona	3128759&#10;</span></span><span class="line"><span class="cl">ES.55.AV	Provincia de Ávila	Provincia de Avila	3129138&#10;</span></span><span class="line"><span class="cl">ES.59.VI	Araba / Álava	Araba / Alava	3130717&#10;</span></span><span class="line"><span class="cl">ES.56.GI	Província de Girona	Provincia de Girona	6355230&#10;</span></span><span class="line"><span class="cl">ES.56.L	Província de Lleida	Provincia de Lleida	6355231&#10;</span></span><span class="line"><span class="cl">ES.27.LO	Provincia de La Rioja	Provincia de La Rioja	6355232&#10;</span></span><span class="line"><span class="cl">ES.29.M	Provincia de Madrid	Provincia de Madrid	6355233&#10;</span></span><span class="line"><span class="cl">ES.31.MU	Murcia	Murcia	6355234&#10;</span></span><span class="line"><span class="cl">ES.32.NA	Provincia de Navarra	Provincia de Navarra	6355235&#10;</span></span><span class="line"><span class="cl">ES.34.O	Province of Asturias	Province of Asturias	6355236&#10;</span></span><span class="line"><span class="cl">ES.07.PM	Illes Balears	Illes Balears	6424360&#10;</span></span><span class="line"><span class="cl">ES.CE.CE	Ceuta	Ceuta	8335119&#10;</span></span><span class="line"><span class="cl">ES.ML.ME	Melilla	Melilla	8335120</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>admin2-es.txt</span>
    </div>
</div>
<h4 id="featurecodestxt-timezonestxt-y-hierarchyzip">featureCodes.txt, timeZones.txt y hierarchy.zip</h4>
<p>Los <em>geonames</em> pueden tener un metadato asociado con varios identificadores que en la documentación se denominan <em>features</em>, hay varias categorías de identificadores y varios identificadores dentro de cada categoría. Por ejemplo, la feature <em>P</em> se utiliza para ciudades y villas y <em>PPLA1</em>, <em>PPLA2</em>, <em>PPLA3</em>, <em>PPLA4</em>, <em>PPLA5</em> indica el nivel de unidad administrativa. Las <em>features</em> permiten conocer a qué representa el <em>geoname</em> por ejemplo si es un aeropuerto o una universidad entre muchos otros elementos.</p>
<p>El archivo <em>hierarchy.zip</em> permite reconstruir la relación jerárquica de los diferentes <em>geonames</em></p>
<h4 id="shapes_all_lowzip">shapes_all_low.zip</h4>
<p>Contiene el polígono del <em>geoname</em> que permite una representación gráfica de su superficie, por ejemplo del país.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">337996	{&#34;type&#34;:&#34;Polygon&#34;,&#34;coordinates&#34;:[[[37.916,14.894],[38.045,14.72],[38.258,14.679],[38.455,14.413],[38.797,14.467],[38.978,14.545],[39.032,14.639],[39.154,14.653],[39.261,14.516],[39.252,14.409],[39.346,14.466],[39.373,14.54],[39.538,14.491],[39.508,14.55],[39.587,14.609],[39.77,14.546],[39.93,14.415],[40.127,14.547],[40.213,14.387],[40.26,14.411],[40.942,14.082],[41.249,13.61],[41.644,13.386],[42.056,12.801],[42.218,12.765],[42.404,12.469],[41.973,11.839],[41.835,11.733],[41.771,11.493],[41.81,11.278],[41.787,10.979],[41.947,10.913],[42.066,10.927],[42.146,10.983],[42.42,10.982],[42.634,11.096],[42.689,11.055],[42.752,11.08],[42.79,10.988],[42.967,10.997],[42.67,10.624],[42.799,10.452],[42.854,10.219],[43.009,10.086],[43.087,9.903],[43.255,9.847],[43.299,9.606],[43.396,9.554],[43.46,9.419],[43.643,9.357],[43.995,9.003],[47.001,8.001],[48.001,8.001],[44.97,4.913],[44.01,4.959],[43.635,4.855],[43.082,4.607],[42.844,4.284],[42.541,4.211],[42.079,4.179],[41.945,4.01],[41.833,3.947],[41.718,3.994],[41.677,3.958],[41.551,3.983],[41.197,3.937],[40.756,4.285],[39.866,3.871],[39.773,3.672],[39.553,3.405],[39.493,3.471],[39.192,3.483],[39.079,3.545],[38.903,3.517],[38.712,3.577],[38.684,3.629],[38.576,3.609],[38.536,3.659],[38.446,3.607],[38.127,3.61],[37.029,4.388],[36.843,4.452],[36.05,4.457],[35.94,4.551],[35.949,4.631],[35.809,4.791],[35.862,5.32],[35.538,5.424],[35.316,5.335],[35.315,5.498],[35.126,5.624],[35.13,5.687],[34.998,5.897],[35.005,6.075],[34.95,6.247],[35.022,6.447],[34.939,6.558],[34.864,6.611],[34.768,6.594],[34.64,6.74],[34.531,6.745],[34.543,6.817],[34.471,6.919],[34.293,6.948],[34.305,6.978],[34.192,7.041],[34.19,7.132],[34.022,7.246],[34.002,7.421],[33.716,7.663],[33.542,7.694],[33.47,7.752],[33.323,7.708],[33.247,7.779],[33.046,7.79],[32.998,7.944],[33.121,8.111],[33.193,8.129],[33.17,8.296],[33.219,8.435],[33.618,8.472],[33.7,8.378],[33.769,8.368],[33.876,8.411],[33.903,8.486],[34.024,8.489],[34.145,8.607],[34.102,9.557],[34.224,9.887],[34.233,10.049],[34.334,10.119],[34.295,10.585],[34.466,10.814],[34.603,10.906],[34.795,10.754],[34.786,10.706],[34.868,10.731],[34.869,10.805],[34.987,10.89],[34.953,10.949],[35.001,11.187],[34.928,11.241],[35.077,11.535],[35.044,11.734],[35.27,11.944],[35.662,12.637],[36.009,12.724],[36.16,12.697],[36.176,12.904],[36.143,12.948],[36.497,13.835],[36.466,13.978],[36.556,14.284],[36.866,14.322],[37.018,14.252],[37.097,14.275],[37.135,14.41],[37.312,14.448],[37.523,14.182],[37.916,14.894]]]}&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>shape-es.txt</span>
    </div>
</div>
<h4 id="información-de-la-base-de-datos">Información de la base de datos</h4>
<p>Cada uno de los elementos geográficos tiene asociado un identificador de <em>geonameid</em>, con este identificador es posible obtener más información en el archivo <em>alternateNamesV2.zip</em> y relacionar la información de unos archivos con la información de otros archivos. La información que incluyen están en columnas separadas por tabuladores, las columnas son las indicadas en estructura de la tabla <em>geoname</em> y <em>alternate names</em>.</p>
<p>Los archivos contienen mucha información, posiblemente en una aplicación solo interese parte de toda esa información y se puede ignorar el resto. Por ejemplo, en la información de los países se incluye su extensión de superficie, población, continente moneda, lenguaje o la capital del país que para validar direcciones no es necesaria pero la moneda o lenguajes es útil para mostrar precios o textos según el idioma del país.</p>
<p>Hay otra información muy útil como los nombres de las ciudades en diferentes idiomas e incluso las abreviaturas de los aeropuertos. Por supuesto están las expresiones regulares de los códigos postales o los códigos de prefijo de los teléfonos, los propios del país conoceremos pero la de muchos otros países seguro que no.</p>
<p>La expresión regular de España es esta.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">^(\d{5})$&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>regexp-es.txt</span>
    </div>
</div>
<p>La de Reino Unido es esta otra.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">^([Gg][Ii][Rr]\s?0[Aa]{2})|((([A-Za-z][0-9]{1,2})|(([A-Za-z][A-Ha-hJ-Yj-y][0-9]{1,2})|(([A-Za-z][0-9][A-Za-z])|([A-Za-z][A-Ha-hJ-Yj-y][0-9]?[A-Za-z]))))\s?[0-9][A-Za-z]{2})$&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>regexp-uk.txt</span>
    </div>
</div>
<h3 id="cómo-acceder-a-la-información">Cómo acceder a la información</h3>
<p>Los archivos son muy grandes, seguramente no sea necesaria toda la información y no está en el formato adecuado para un rápido acceso al dato que se necesita en una aplicación, con lo que hay que procesarlos para adaptarlos. Los archivos son archivos de texto con los datos de las columnas separados por tabuladores, una librería para procesar los archivos con el lenguaje Java es <a href="http://opencsv.sourceforge.net/">OpenCSV</a>.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/10/ejemplo-sencillo-de-como-leer-datos-de-un-archivo-excel-o-csv-en-java/">Ejemplo sencillo de cómo leer datos de un archivo Excel o CSV en Java</a></li>
</ul>
<p>Es necesario procesar los archivos de alguna forma para extraer y transformar la información de los archivos de GeoNames a un formato adecuado para la aplicación posiblemente con un <em>script</em> en el lenguaje <a href="https://www.groovy-lang.org/">Groovy</a>, Java, <a href="https://kotlinlang.org/">Kotlin</a> u otro lenguaje. La información geográfica quizá no cambie muy habitualmente pero seguramente hay que procesar los archivos cada cierto tiempo o si por alguna circunstancia se produce un cambio significativo que requiera una actualización.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2015/11/java-para-tareas-de-scripting-con-jbang-y-gradle/">Java para tareas de scripting con JBang y Gradle</a></li>
</ul>
<p>Una vez disponible la información en la aplicación conviene crear una serie de clases que hagan de fachada en el acceso a la información de tal forma que el resto del código no se acople a la implementación interna de los datos que puede cambiar en el futuro. Hay varias formas de implementación, una en que las clases de información geográfica serían un módulo en la aplicación y propietaria de los datos geográficos. Otra opción es que las tablas estén en una base de datos y sea compartida por varias aplicaciones, en este caso las tablas o vistas se convierten en una interfaz para las aplicaciones.</p>
]]>
        </content>
        
            
                <category term="programacion"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/</id>
        <title>Obtener el ancho y alto, escalar y convertir a otro formato imágenes con Java</title>
        <updated>2022-11-25T20:30:00+02:00</updated>
        <published>2022-11-25T20:30:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Las aplicaciones que tratan con imágenes es posible que necesiten conocer algunos datos de la imagen como anchura y altura, realizar algunas operaciones de manipulación básicas como escalado y conversión entre formatos. El propio JDK de Java ofrece algunas clases y soporta varios de los formatos más comunes de imagen. Para usos más avanzados hay que recurrir a librerías y si no fueran suficientes a comandos del sistema más avanzados.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/java.svg" width="200" height="366" alt="Java" title="Java" class="" loading="false&#34;"></p>
</div>
<p>El lenguaje de programación Java es un lenguaje de propósito general con el que es posible realizar cualquier tarea. Sin embargo, Java como lenguaje o plataforma aparte de <a href="https://www.android.com/">Android</a> el mayor uso que se le da es para aplicaciones y servicios en el lado del servidor.</p>
<p>Una de las necesidades que pueden surgir es escalar una imagen o cambiarle de formato, aunque Java solo ofrece un soporte básico para el tratamiento de imágenes, hay varias librerías pero pocas bien mantenidas y con buen soporte, si ni una librería ofrece la funcionalidad deseada en el caso más extremo se puede invocar a un proceso del sistema que ofrezca la funcionalidad com <a href="https://www.imagemagick.org">ImageMagick</a> o <a href="https://www.ffmpeg.org/">FFmpeg</a>.</p>
<p>La conversión y cambio de formato es un proceso costoso en CPU y memoria ya que requieren cargar la imagen en memoria más si las imágenes a tratar son muy grandes, de varias decenas de megabytes.</p>
<p>El propio JDK ofrece en su API soporte para los formatos de imágenes más comunes y algunas manipulaciones de imagen, hay varias librerías Java para la manipulación de imágenes y finalmente están los comandos del sistema.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/07/como-crear-miniaturas-o-vistas-previas-de-imagenes-con-imagemagick/">Cómo crear miniaturas o vistas previas de imágenes con ImageMagick</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2019/12/comando-para-convertir-imagenes-jpeg-y-png-a-webp/">Comando para convertir imágenes JPEG y PNG a WebP</a></li>
</ul>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="formatos-de-imágenes">Formatos de imágenes</h3>
<p>Hay varios formatos de imágenes que se pueden categorizar en dos grandes grupos: imágenes sin pérdida o con pérdida. Los formatos sin pérdida son más fieles a la imagen original pero con mayor tamaño que la equivalente en un formato con pérdida de calidad, en las imágenes con pérdida de calidad los algoritmos tratan de que visualmente la pérdida sea lo menos apreciable posible con un tamaño de imagen significativamente menor.</p>
<p>El formato png es un formato sin pérdida que ofrece buenos resultados para capturas de pantalla del ordenador. Para fotos el formato jpg ofrece un archivo de tamaño significativamente más reducido con una calidad bastante fiel al original.</p>
<p>Más recientemente han surgido nuevos formatos de imagen que utilizan otros algoritmos para la reducción de tamaño heic y heif utilizan el algoritmo con coste de licencia de x265 y el formato sin coste de licencia webp que ofrece similar o mejor resultado que el x265 que además soporta imágenes sin pérdida.</p>
<h3 id="procesar-imágenes-con-java">Procesar imágenes con Java</h3>
<p>En el propio JDK hay varias clases para la utilización de imágenes en el paquete <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/package-summary.html">java.awt</a>.</p>
<h4 id="formatos-de-imagen-soportados">Formatos de imagen soportados</h4>
<p>Los formatos de imagen soportados se pueden obtener mediante código y son extensibles añadiendo librerías al <em>classpath</em>, es posible que un formato se soporte en modo lectura pero no en escritura.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.javaimageprocess</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.awt.image.BufferedImage</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.awt.image.BufferedImageOp</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.FileInputStream</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.FileOutputStream</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">java.text.MessageFormat</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">javax.imageio.ImageIO</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">com.twelvemonkeys.image.ResampleOp</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">net.coobird.thumbnailator.Thumbnails</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">printSupportedFormats</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">BufferedImage</span> <span class="n">image</span> <span class="o">=</span> <span class="n">readImage</span><span class="o">(</span><span class="n">Main</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">&#34;/gnome.jpg&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">BufferedImage</span> <span class="n">imageWebp</span> <span class="o">=</span> <span class="n">readImage</span><span class="o">(</span><span class="n">Main</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">&#34;/gnome.webp&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">BufferedImage</span> <span class="n">scaledImage</span> <span class="o">=</span> <span class="n">scaleJava</span><span class="o">(</span><span class="n">image</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">convertJava</span><span class="o">(</span><span class="n">scaledImage</span><span class="o">,</span> <span class="n">ImageFormat</span><span class="o">.</span><span class="na">JPG</span><span class="o">,</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;gnome-scaled-java.jpg&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">scaleThumbnailator</span><span class="o">(</span><span class="n">Main</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">&#34;/gnome.jpg&#34;</span><span class="o">),</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;gnome-scaled-thumbnailator.jpg&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">scaleImageMagick</span><span class="o">(</span><span class="n">Main</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">&#34;/gnome.jpg&#34;</span><span class="o">),</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;gnome-scaled-imagemagick.jpg&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">scaleTwelvemonkeys</span><span class="o">(</span><span class="n">readImage</span><span class="o">(</span><span class="n">Main</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getResourceAsStream</span><span class="o">(</span><span class="s">&#34;/gnome.jpg&#34;</span><span class="o">)),</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="s">&#34;gnome-scaled-twelvemonkeys.jpg&#34;</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">printImageWidthHeight</span><span class="o">(</span><span class="s">&#34;original&#34;</span><span class="o">,</span> <span class="n">image</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">printImageWidthHeight</span><span class="o">(</span><span class="s">&#34;original webp&#34;</span><span class="o">,</span> <span class="n">imageWebp</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">printImageWidthHeight</span><span class="o">(</span><span class="s">&#34;scaled&#34;</span><span class="o">,</span> <span class="n">scaledImage</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">printImageWidthHeight</span><span class="o">(</span><span class="s">&#34;scaled thumbnailator&#34;</span><span class="o">,</span> <span class="n">readImage</span><span class="o">(</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&#34;gnome-scaled-thumbnailator.jpg&#34;</span><span class="o">)));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">printImageWidthHeight</span><span class="o">(</span><span class="s">&#34;scaled imagemagick&#34;</span><span class="o">,</span> <span class="n">readImage</span><span class="o">(</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&#34;gnome-scaled-imagemagick.jpg&#34;</span><span class="o">)));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">printImageWidthHeight</span><span class="o">(</span><span class="s">&#34;scaled twelvemonkeys&#34;</span><span class="o">,</span> <span class="n">readImage</span><span class="o">(</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&#34;gnome-scaled-twelvemonkeys.jpg&#34;</span><span class="o">)));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.javaimageprocess</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">printSupportedFormats</span><span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">String</span><span class="o">[]</span> <span class="n">readerFormatNames</span> <span class="o">=</span> <span class="n">javax</span><span class="o">.</span><span class="na">imageio</span><span class="o">.</span><span class="na">ImageIO</span><span class="o">.</span><span class="na">getReaderFormatNames</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">String</span><span class="o">[]</span> <span class="n">writerFormatNames</span> <span class="o">=</span> <span class="n">javax</span><span class="o">.</span><span class="na">imageio</span><span class="o">.</span><span class="na">ImageIO</span><span class="o">.</span><span class="na">getWriterFormatNames</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;Reader format names: %s%n&#34;</span><span class="o">,</span> <span class="n">String</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">,</span> <span class="n">readerFormatNames</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;Writer format names: %s%n&#34;</span><span class="o">,</span> <span class="n">String</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="s">&#34;,&#34;</span><span class="o">,</span> <span class="n">writerFormatNames</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-formats.java</span>
    </div>
</div>
<p>En esta lista de formatos aparece webp como formato soportados en la lectura porque en el ejemplo de código está incluida la librería de TwelveMonkeys que añade el soporte para la lectura de webp.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">Reader format names: JPG,jpg,tiff,bmp,BMP,wbp,WBP,gif,GIF,WBMP,png,PNG,JPEG,webp,tif,TIF,TIFF,WEBP,jpeg,wbmp&#10;</span></span><span class="line"><span class="cl">Writer format names: JPG,jpg,tiff,bmp,BMP,gif,GIF,WBMP,png,PNG,JPEG,tif,TIF,TIFF,wbmp,jpeg&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-formats.out</span>
    </div>
</div>
<h4 id="lectura-y-escritura-de-una-imagen">Lectura y escritura de una imagen</h4>
<p>La clase que representa una imagen en Java es <a href="#ZgotmplZ">BufferedImage</a> que se obtiene al leer el archivo del sistema de archivos o el <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/InputStream.html">InputStream</a>, para la lectura y la escritura está la clase <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/javax/imageio/ImageIO.html">ImageIO</a>.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.javaimageprocess</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kd">static</span> <span class="n">BufferedImage</span> <span class="nf">readImage</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">is</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">ImageIO</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">is</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">writeImage</span><span class="o">(</span><span class="n">BufferedImage</span> <span class="n">image</span><span class="o">,</span> <span class="n">ImageFormat</span> <span class="n">format</span><span class="o">,</span> <span class="n">OutputStream</span> <span class="n">os</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">ImageIO</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">image</span><span class="o">,</span> <span class="n">format</span><span class="o">.</span><span class="na">name</span><span class="o">(),</span> <span class="n">os</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-read-write.java</span>
    </div>
</div>
<p>La imagen en formato jpg tiene un tamaño de 192 KB y en formato webp tiene un tamaño de 80 KB, menos de la mitad en webp con una calidad similar.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/images/gnome_hu8945e77e7bc7b4f967ecef16c20e17eb_191803_2560x1440_fit_q90_box.jpg" data-gallery="" title="Imagen en formato jpg"><img src="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/images/gnome_hu8945e77e7bc7b4f967ecef16c20e17eb_191803_300x200_fit_q90_box.jpg" width="300" height="168" alt="Imagen en formato jpg" title="Imagen en formato jpg" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/images/gnome-webp_hu581bc4a9bef8b5b781057449422d3136_78810_2560x1440_fit_q90_h2_box_2.webp" data-gallery="" title="Imagen en formato webp"><img src="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/images/gnome-webp_hu581bc4a9bef8b5b781057449422d3136_78810_300x200_fit_q90_h2_box_2.webp" width="300" height="168" alt="Imagen en formato webp" title="Imagen en formato webp" class="&#34; " loading="lazy"></a></p>
<figcaption>Imagenes en formatos jpg y webp</figcaption>
</figure>
</div>
<h4 id="obtener-el-ancho-y-alto-de-una-imagen">Obtener el ancho y alto de una imagen</h4>
<p>Una vez obtenida una instancia de BufferedImage esta clase ofrece métodos para conocer el ancho y alto de la imagen y a partir de estos la proporción o <em>aspect ratio</em> entre ambos valores.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.javaimageprocess</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">printImageWidthHeight</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">BufferedImage</span> <span class="n">image</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;Width (%s): %s%n&#34;</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">image</span><span class="o">.</span><span class="na">getWidth</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&#34;Height (%s): %s%n&#34;</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span>  <span class="n">image</span><span class="o">.</span><span class="na">getHeight</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-width-height.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">Width (original): 1920&#10;</span></span><span class="line"><span class="cl">Height (original): 1072&#10;</span></span><span class="line"><span class="cl">Width (original webp): 1920&#10;</span></span><span class="line"><span class="cl">Height (original webp): 1072&#10;</span></span><span class="line"><span class="cl">Width (scaled): 650&#10;</span></span><span class="line"><span class="cl">Height (scaled): 362&#10;</span></span><span class="line"><span class="cl">Width (scaled thumbnailator): 650&#10;</span></span><span class="line"><span class="cl">Height (scaled thumbnailator): 363&#10;</span></span><span class="line"><span class="cl">Width (scaled imagemagick): 650&#10;</span></span><span class="line"><span class="cl">Height (scaled imagemagick): 363&#10;</span></span><span class="line"><span class="cl">Width (scaled twelvemonkeys): 650&#10;</span></span><span class="line"><span class="cl">Height (scaled twelvemonkeys): 362</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-width-height.out</span>
    </div>
</div>
<h4 id="escalar-una-imagen">Escalar una imagen</h4>
<p>Escalar una imagen consiste en cambiar de tamaño a la imagen, normalmente el escalado se realiza conservando la proporción de anchura y altura para no distorsionar la imagen original.</p>
<p>El escalado suele realizarse para reducir la imagen con lo que se perderá información o píxeles, dependiendo del algoritmo de escalado aplicado la calidad y tamaño de la imagen resultante es diferente. En un escalado que implica reducir el tamaño los bytes de la imagen escalada serán menores.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.javaimageprocess</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kd">static</span> <span class="n">BufferedImage</span> <span class="nf">scaleJava</span><span class="o">(</span><span class="n">BufferedImage</span> <span class="n">image</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Resolution</span> <span class="n">scaledResolution</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Resolution</span><span class="o">(</span><span class="n">image</span><span class="o">.</span><span class="na">getWidth</span><span class="o">(),</span> <span class="n">image</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()).</span><span class="na">scale</span><span class="o">(</span><span class="mi">650</span><span class="o">,</span> <span class="mi">450</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">BufferedImage</span> <span class="n">scaledImage</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedImage</span><span class="o">(</span><span class="n">scaledResolution</span><span class="o">.</span><span class="na">getWidth</span><span class="o">(),</span> <span class="n">scaledResolution</span><span class="o">.</span><span class="na">getHeight</span><span class="o">(),</span> <span class="n">BufferedImage</span><span class="o">.</span><span class="na">TYPE_INT_RGB</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Graphics2D</span> <span class="n">graphics2D</span> <span class="o">=</span> <span class="n">scaledImage</span><span class="o">.</span><span class="na">createGraphics</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">graphics2D</span><span class="o">.</span><span class="na">setRenderingHint</span><span class="o">(</span><span class="n">RenderingHints</span><span class="o">.</span><span class="na">KEY_INTERPOLATION</span><span class="o">,</span> <span class="n">RenderingHints</span><span class="o">.</span><span class="na">VALUE_INTERPOLATION_BICUBIC</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">graphics2D</span><span class="o">.</span><span class="na">setRenderingHint</span><span class="o">(</span><span class="n">RenderingHints</span><span class="o">.</span><span class="na">KEY_ANTIALIASING</span><span class="o">,</span> <span class="n">RenderingHints</span><span class="o">.</span><span class="na">VALUE_ANTIALIAS_ON</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">graphics2D</span><span class="o">.</span><span class="na">setRenderingHint</span><span class="o">(</span><span class="n">RenderingHints</span><span class="o">.</span><span class="na">KEY_TEXT_ANTIALIASING</span><span class="o">,</span> <span class="n">RenderingHints</span><span class="o">.</span><span class="na">VALUE_TEXT_ANTIALIAS_ON</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">graphics2D</span><span class="o">.</span><span class="na">setRenderingHint</span><span class="o">(</span><span class="n">RenderingHints</span><span class="o">.</span><span class="na">KEY_RENDERING</span><span class="o">,</span> <span class="n">RenderingHints</span><span class="o">.</span><span class="na">VALUE_RENDER_QUALITY</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">graphics2D</span><span class="o">.</span><span class="na">drawImage</span><span class="o">(</span><span class="n">image</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">scaledResolution</span><span class="o">.</span><span class="na">getWidth</span><span class="o">(),</span> <span class="n">scaledResolution</span><span class="o">.</span><span class="na">getHeight</span><span class="o">(),</span> <span class="kc">null</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">graphics2D</span><span class="o">.</span><span class="na">dispose</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="n">scaledImage</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-scale-java.java</span>
    </div>
</div>
<p>Dependiendo de las opciones empleadas en el escalado la calidad y tamaño resultante es diferente y hay que conocerlas. Utilizando una librería permite realizar la operación de escalado con mejor calidad.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/images/gnome-scaled-java_hu0b6b7056b4face0610a0409e5c9a6abb_28029_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Imagen escalada con Java"><img src="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/images/gnome-scaled-java_hu0b6b7056b4face0610a0409e5c9a6abb_28029_650x450_fit_q90_h2_box.webp" width="650" height="362" alt="Imagen escalada con Java" title="Imagen escalada con Java" class="&#34; " loading="lazy"></a></p>
<figcaption>Imagen escalada con Java</figcaption>
</figure>
</div>
<h4 id="cambiar-el-formato-de-una-imagen">Cambiar el formato de una imagen</h4>
<p>Cambiar de formato a una imagen es otra operación común, por ejemplo convertir al formato webp que ofrece una calidad mejor en el mismo tamaño o un significativo reducción de tamaño que puede llegar al más del 50% con una calidad similar.</p>
<p>Una vez cargada la imagen en un BufferedImage es posible escribir la imagen a un archivo en cualquier otro formato de escritura soportado.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.javaimageprocess</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">convertJava</span><span class="o">(</span><span class="n">BufferedImage</span> <span class="n">image</span><span class="o">,</span> <span class="n">ImageFormat</span> <span class="n">format</span><span class="o">,</span> <span class="n">OutputStream</span> <span class="n">os</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">ImageIO</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">image</span><span class="o">,</span> <span class="n">format</span><span class="o">.</span><span class="na">name</span><span class="o">().</span><span class="na">toLowerCase</span><span class="o">(),</span> <span class="n">os</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-convert-java.java</span>
    </div>
</div>
<h4 id="librerías-de-terceros">Librerías de terceros</h4>
<p>Hay varias librerías que añaden o facilitan algunas funcionalidades sobre la API de Java. <a href="https://github.com/coobird/thumbnailator">Thuilmator</a> permite realizar escalados de imágenes de una forma más sencilla que la API de Java.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.javaimageprocess</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">scaleThumbnailator</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">is</span><span class="o">,</span> <span class="n">OutputStream</span> <span class="n">os</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Thumbnails</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">is</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">size</span><span class="o">(</span><span class="mi">650</span><span class="o">,</span> <span class="mi">450</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">outputQuality</span><span class="o">(</span><span class="mf">0.9</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">outputFormat</span><span class="o">(</span><span class="s">&#34;jpg&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">.</span><span class="na">toOutputStream</span><span class="o">(</span><span class="n">os</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-scale-thuilmator.java</span>
    </div>
</div>
<p>Otra librería es <a href="https://github.com/haraldk/TwelveMonkeys">TwelveMonkeys</a> que añade soporte para algunos formatos de imagen como webp.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.javaimageprocess</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">scaleTwelvemonkeys</span><span class="o">(</span><span class="n">BufferedImage</span> <span class="n">image</span><span class="o">,</span> <span class="n">OutputStream</span> <span class="n">os</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">InterruptedException</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Resolution</span> <span class="n">scaledResolution</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Resolution</span><span class="o">(</span><span class="n">image</span><span class="o">.</span><span class="na">getWidth</span><span class="o">(),</span> <span class="n">image</span><span class="o">.</span><span class="na">getHeight</span><span class="o">()).</span><span class="na">scale</span><span class="o">(</span><span class="mi">650</span><span class="o">,</span> <span class="mi">450</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">BufferedImageOp</span> <span class="n">resampler</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ResampleOp</span><span class="o">(</span><span class="n">scaledResolution</span><span class="o">.</span><span class="na">getWidth</span><span class="o">(),</span> <span class="n">scaledResolution</span><span class="o">.</span><span class="na">getHeight</span><span class="o">(),</span> <span class="n">ResampleOp</span><span class="o">.</span><span class="na">FILTER_LANCZOS</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">BufferedImage</span> <span class="n">scaledImage</span> <span class="o">=</span> <span class="n">resampler</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">image</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">writeImage</span><span class="o">(</span><span class="n">scaledImage</span><span class="o">,</span> <span class="n">ImageFormat</span><span class="o">.</span><span class="na">JPG</span><span class="o">,</span> <span class="n">os</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-scale-twelvemonkeys.java</span>
    </div>
</div>
<p>El tamaño de la imagen escalada por el código Java es de 28 KB, el tamaño de la imagen de Thuilmator es de 38 KB y el tamaño de TwelveMonkeys es de 26 KB con algunas pequeñas diferencias apreciables en el resultado de cada una de ellas.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/images/gnome-scaled-thumbnailator_huf98a81424750b1823ee3ee46d6da0092_38706_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Imagen escalada con Thumbnailator"><img src="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/images/gnome-scaled-thumbnailator_huf98a81424750b1823ee3ee46d6da0092_38706_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Imagen escalada con Thumbnailator" title="Imagen escalada con Thumbnailator" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/images/gnome-scaled-twelvemonkeys_hu68623ccaee12692e66a21e47fdee161a_26110_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Imagen escalada con Twelvemonkeys"><img src="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/images/gnome-scaled-twelvemonkeys_hu68623ccaee12692e66a21e47fdee161a_26110_200x150_fit_q90_h2_box.webp" width="200" height="111" alt="Imagen escalada con Twelvemonkeys" title="Imagen escalada con Twelvemonkeys" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/images/gnome-scaled-imagemagick_hud6cce2606186344bd6a0569c49d6f30a_35501_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Imagen escalada con ImageMagick y Java"><img src="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/images/gnome-scaled-imagemagick_hud6cce2606186344bd6a0569c49d6f30a_35501_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Imagen escalada con ImageMagick y Java" title="Imagen escalada con ImageMagick y Java" class="&#34; " loading="lazy"></a></p>
<figcaption>Imagen escaladas con diferentes librerías (Thumbnailator, Twelvemonkeys y ImageMagick)</figcaption>
</figure>
</div>
<h4 id="usando-imagemagick">Usando ImageMagick</h4>
<p>Las funcionalidades de Java y de las librerías de Java para casos avanzados no son suficientes. El software de <a href="https://www.imagemagick.org">ImageMagick</a> ofrece a través de un comando muchas más opciones para la manipulación de imágenes. El inconveniente de ImageMagick es que para ser usado desde Java requiere instalar el comando en el sistema. El uso de ImageMagick desde Java es como la invocación de cualquier otro proceso del sistema, es posible pasar la imagen a manipular por la entrada estándar del sistema y obtener la imagen resultado por la salida estándar del sistema del proceso.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/03/como-ejecutar-un-proceso-del-sistema-con-java/">Cómo ejecutar un proceso del sistema con Java</a></li>
</ul>
<p>Si no hay ninguna librería Java que proporcione soporte para la escritura a formato webp el siguiente código invoca el comando <em>convert</em> de ImageMagick para realizar la conversión. El tamaño de la imagen en formato webp es de 80 KB que son muchos menos que en cualquiera de los formatos jpg generados con Java de los casos anteriores.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.javaimageprocess</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">scaleImageMagick</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">is</span><span class="o">,</span> <span class="n">OutputStream</span> <span class="n">os</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">InterruptedException</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">ProcessBuilder</span> <span class="n">builder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProcessBuilder</span><span class="o">().</span><span class="na">command</span><span class="o">(</span><span class="s">&#34;convert&#34;</span><span class="o">,</span> <span class="s">&#34;-resize&#34;</span><span class="o">,</span> <span class="s">&#34;650x450&#34;</span><span class="o">,</span> <span class="s">&#34;jpeg:-&#34;</span><span class="o">,</span> <span class="s">&#34;jpeg:-&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Process</span> <span class="n">process</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">process</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">().</span><span class="na">write</span><span class="o">(</span><span class="n">is</span><span class="o">.</span><span class="na">readAllBytes</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">process</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">().</span><span class="na">close</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">().</span><span class="na">readAllBytes</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">process</span><span class="o">.</span><span class="na">waitFor</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="n">process</span><span class="o">.</span><span class="na">exitValue</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">throw</span> <span class="k">new</span> <span class="n">IOException</span><span class="o">(</span><span class="n">MessageFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;Código de salida con error (%d)&#34;</span><span class="o">,</span> <span class="n">value</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-scale-imagemagick.java</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nn">io.github.picodotdev.blogbitix.javaimageprocess</span><span class="o">;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">...</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">convertImageMagick</span><span class="o">(</span><span class="n">InputStream</span> <span class="n">is</span><span class="o">,</span> <span class="n">OutputStream</span> <span class="n">os</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">,</span> <span class="n">InterruptedException</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">ProcessBuilder</span> <span class="n">builder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ProcessBuilder</span><span class="o">().</span><span class="na">command</span><span class="o">(</span><span class="s">&#34;convert&#34;</span><span class="o">,</span> <span class="s">&#34;jpeg:-&#34;</span><span class="o">,</span> <span class="s">&#34;webp:-&#34;</span><span class="o">);</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">Process</span> <span class="n">process</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">process</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">().</span><span class="na">write</span><span class="o">(</span><span class="n">is</span><span class="o">.</span><span class="na">readAllBytes</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">process</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">().</span><span class="na">close</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">os</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">process</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">().</span><span class="na">readAllBytes</span><span class="o">());</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">process</span><span class="o">.</span><span class="na">waitFor</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="n">process</span><span class="o">.</span><span class="na">exitValue</span><span class="o">();</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">(</span><span class="n">value</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">throw</span> <span class="k">new</span> <span class="n">IOException</span><span class="o">(</span><span class="n">MessageFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&#34;Código de salida con error (%d)&#34;</span><span class="o">,</span> <span class="n">value</span><span class="o">));</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Main-convert-imagemagick.java</span>
    </div>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/images/gnome-convert-imagemagick_hu29882555ad4a19dd882f2baca6d68e6f_97330_2560x1440_fit_q90_h2_box_2.webp" data-gallery="" title="Imagen convertida a webp con ImageMagick y Java"><img src="https://picodotdev.github.io/blog-bitix/2022/11/obtener-el-ancho-y-alto-escalar-y-convertir-a-otro-formato-imagenes-con-java/images/gnome-convert-imagemagick_hu29882555ad4a19dd882f2baca6d68e6f_97330_300x200_fit_q90_h2_box_2.webp" width="300" height="168" alt="Imagen convertida a webp con ImageMagick y Java" title="Imagen convertida a webp con ImageMagick y Java" class="&#34; " loading="lazy"></a></p>
<figcaption>Imagen convertida a webp con ImageMagick y Java</figcaption>
</figure>
</div>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/">código fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub y probarlo en tu equipo ejecutando siguiente comando:<br><code>./gradlew run</code></p>
</div>
<div class="reference">
    Referencia:<br>
<ul>
<li><a href="https://www.baeldung.com/java-resize-image">How Can I Resize an Image Using Java?</a></li>
</ul>
</div>
]]>
        </content>
        
            
                <category term="java"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2022/11/programas-para-crear-maquinas-virtuales-y-virtualizar-sistemas/</id>
        <title>Programas para crear máquinas virtuales y virtualizar sistemas</title>
        <updated>2022-11-17T20:30:00+02:00</updated>
        <published>2022-11-17T20:30:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2022/11/programas-para-crear-maquinas-virtuales-y-virtualizar-sistemas/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>La virtualización es la herramienta con la que probar un sistema operativo sin tener que utilizar una máquina física. Con la cantidad de núcleos de los sistemas actuales y la cantidad de memoria RAM que tienen, la virtualización es una opción disponible para los usuarios. Una alternativa a la virtualización son los contenedores pero estos son más para servicios sin interfaz gráfica. Hay aplicaciones que permiten tener una máquina virtual de Windows en un sistema operativo GNU/Linux o probar una distribución de GNU/Linux en un sistema Windows antes de migrar definitivamente a GNU/Linux.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/linux.svg" width="200" height="232" alt="Linux" title="Linux" class="" loading="false&#34;"></p>
</div>
<p>La virtualización permite crear un sistema que está instalado como software dentro de otro sistema físico. La virtualización es muy útil para probar sistemas operativos sin necesidad de instalarlo en la máquina física ni riesgo de hacer pruebas que rompan el sistema instalado, por ejemplo para probar la distribución <a href="https://www.ubuntu.com/">Ubuntu</a> que es una de las recomendadas como primera distribución para los nuevos usuarios de <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a>.</p>
<p>La virtualización permite sistemas aislados sin necesitar una máquina física, es posible virtualizar un sistema <a href="https://www.microsoft.com/es-es/windows/">Windows</a> en GNU/Linux, virtualizar un sistema GNU/Linux en un sistema Windows o otros sistema GNU/Linux en un sistema GNU/Linux. Dadas las grandes cantidades de RAM que tienen las computadoras actuales incluso las de los usuarios es posible instalar un sistema virtual dentro de un sistema físico.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/10/elegir-una-distribucion-gnu-linux-segun-el-usuario-uso-o-equipo/">Elegir una distribución GNU/Linux según el usuario, uso o equipo</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2017/05/descargar-e-instalar-la-distribucion-ubuntu-de-gnu-linux-paso-a-paso-desde-cero/">Descargar e instalar la distribución Ubuntu de GNU/Linux paso a paso desde cero</a></li>
</ul>
<p>La virtualización requiere de un sistema anfitrión con suficiente potencia de cómputo y memoria RAM, pero incluso los procesadores de consumo que actualmente ya tienen más de cuatro núcleos y muchos más de 16 GB de memoria RAM son suficientemente capaces de virtualizar un sistema, con más núcleos y memoria RAM los sistemas virtualizados pueden ser más numerosos.</p>
<p>Como el sistema virtualizado es algo lógico en el momento de su creación es posible definir sus características como núcleos de CPU que tiene, cantidad de memoria RAM y cantidad de almacenamiento. Es posible crear tantas máquinas como se deseen y tener tantas arrancadas al mismo tiempo como el sistema anfitrión tenga capacidad de ejecutar con buen rendimiento.</p>
<p>Un sistema virtualizado tiene una pequeña pérdida de rendimiento respecto a un sistema físico, los procesadores actuales incluyen soporte e instrucciones para que la pérdida del rendimiento sea mínima. Algunas características en la virtualización como la aceleración gráfica tiene mayores penalizaciones de rendimiento o directamente no es posible. Por ejemplo, jugar a juegos en un sistema virtualizado no ofrece buen rendimiento más teniendo en cuenta que los juegos son de los programas más exigentes en capacidad de cómputo de tarjeta gráfica y de procesador.</p>
<p>Para virtualizar un sistemas es necesario un programa, <a href="https://www.virtualbox.org/">VirtualBox</a> está disponible para Windows, <a href="https://www.apple.com/macos/">macOS</a> y GNU/Linux y en GNU/Linux el sistema de virtualización nativo es KVM, el sistema de virtualización nativo es de Windows es Hyper-V.</p>
<p>La virtualización requiere virtualizar un sistema operativo completo que impone una pequeña penalización de rendimiento y unos tiempos de arranque elevados. Para solventar estos problemas los contenedores y una herramienta como <a href="https://www.docker.com/">Docker</a> permite ofrecer servicios con menor penalización de rendimiento y tiempos de arranque mínimos, los contenedores no virtualizan un sistema operativo completo pero son procesos aislado del resto del sistema.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2014/10/introduccion-y-caracteristicas-de-docker/">Introducción y características de Docker</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2014/11/como-instalar-y-guia-de-inicio-basica-de-docker/">Cómo instalar y guía de inicio básica de Docker</a></li>
</ul>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="virtualbox">VirtualBox</h3>
<p>Dado que VirtualBox está disponible para los tres sistemas operativos que usan la mayoría de usuarios y es gratuito es una opción muy utilizada como programa para virtualizar. Tiene una interfaz gráfica de usuario con la que configurar muchas de las opciones de los sistemas operativos como cantidad de RAM y capacidad de almacenamiento.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/programas-para-crear-maquinas-virtuales-y-virtualizar-sistemas/images/virtualbox-1_huf9bc8bcb79732194f0d450f69e0ae31f_178965_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="VirtualBox"><img src="https://picodotdev.github.io/blog-bitix/2022/11/programas-para-crear-maquinas-virtuales-y-virtualizar-sistemas/images/virtualbox-1_huf9bc8bcb79732194f0d450f69e0ae31f_178965_200x150_fit_q90_h2_box_3.webp" width="194" height="150" alt="VirtualBox" title="VirtualBox" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/programas-para-crear-maquinas-virtuales-y-virtualizar-sistemas/images/virtualbox-2_hu0cc3e30e0cd744a2627863662072d16e_65769_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="VirtualBox"><img src="https://picodotdev.github.io/blog-bitix/2022/11/programas-para-crear-maquinas-virtuales-y-virtualizar-sistemas/images/virtualbox-2_hu0cc3e30e0cd744a2627863662072d16e_65769_200x150_fit_q90_h2_box_3.webp" width="200" height="127" alt="VirtualBox" title="VirtualBox" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/programas-para-crear-maquinas-virtuales-y-virtualizar-sistemas/images/virtualbox-3_hu3d4e53840c7fa6c441d04d3052498579_51452_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="VirtualBox"><img src="https://picodotdev.github.io/blog-bitix/2022/11/programas-para-crear-maquinas-virtuales-y-virtualizar-sistemas/images/virtualbox-3_hu3d4e53840c7fa6c441d04d3052498579_51452_200x150_fit_q90_h2_box_3.webp" width="175" height="150" alt="VirtualBox" title="VirtualBox" class="&#34; " loading="lazy"></a></p>
<figcaption>VirtualBox</figcaption>
</figure>
</div>
<p>La interfaz gráfica permite crear máquinas virtuales manualmente. Un programa <a href="https://www.vagrantup.com/">Vagrant</a> permite automatizar la creación y aprovisionamiento de las máquinas virtuales, en base a una descripción de la máquina a crear con un archivo de configuración.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2019/05/crear-de-forma-sencilla-y-rapida-maquinas-virtuales-de-virtualbox-con-vagrant/">Crear de forma sencilla y rápida máquinas virtuales de VirtualBox con Vagrant</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/09/como-instalar-y-probar-macos-con-virtualbox-en-windows-o-gnu-linux/">Cómo instalar y probar macOS con VirtualBox en Windows o GNU/Linux</a></li>
</ul>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="c1"># -*- mode: ruby -*-</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># vi: set ft=ruby :</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s2">&#34;2&#34;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">define</span> <span class="s2">&#34;ubuntu&#34;</span> <span class="k">do</span> <span class="o">|</span><span class="n">instance</span><span class="o">|</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">instance</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&#34;ubuntu/jammy64&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">instance</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&#34;private_network&#34;</span><span class="p">,</span> <span class="ss">ip</span><span class="p">:</span> <span class="s2">&#34;192.168.56.10&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">instance</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">synced_folder</span> <span class="s2">&#34;.&#34;</span><span class="p">,</span> <span class="s2">&#34;/home/vagrant/ConsulServiceMesh/&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">instance</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="ss">:virtualbox</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">vb</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;Ubuntu 22.04 (Vagrant)&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">vb</span><span class="o">.</span><span class="n">memory</span> <span class="o">=</span> <span class="s2">&#34;4096&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">instance</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="s2">&#34;shell&#34;</span><span class="p">,</span> <span class="ss">inline</span><span class="p">:</span> <span class="vg">$consul_role_script</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">end</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">end</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="vg">$consul_role_script</span> <span class="o">=</span> <span class="s">&lt;&lt;-SCRIPT&#10;</span></span></span><span class="line"><span class="cl"><span class="s"></span>&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">echo</span> <span class="s2">&#34;Updating...&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">upgrade</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">echo</span> <span class="s2">&#34;Installing Docker...&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">curl</span> <span class="o">-</span><span class="n">fsSL</span> <span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">download</span><span class="o">.</span><span class="n">docker</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">ubuntu</span><span class="o">/</span><span class="n">gpg</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">gpg</span> <span class="o">--</span><span class="n">dearmor</span> <span class="o">-</span><span class="n">o</span> <span class="sr">/usr/s</span><span class="n">hare</span><span class="o">/</span><span class="n">keyrings</span><span class="o">/</span><span class="n">docker</span><span class="o">.</span><span class="n">gpg</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">echo</span> <span class="p">\</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="s2">&#34;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \&#10;</span></span></span><span class="line"><span class="cl"><span class="s2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  $(lsb_release -cs) stable&#34;</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="sr">/etc/</span><span class="n">apt</span><span class="o">/</span><span class="n">sources</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">docker</span><span class="o">.</span><span class="n">list</span> <span class="o">&gt;</span> <span class="sr">/dev/nu</span><span class="n">ll</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">docker</span><span class="o">-</span><span class="n">ce</span> <span class="n">docker</span><span class="o">-</span><span class="n">ce</span><span class="o">-</span><span class="n">cli</span> <span class="n">containerd</span><span class="o">.</span><span class="n">io</span> <span class="n">docker</span><span class="o">-</span><span class="n">compose</span><span class="o">-</span><span class="n">plugin</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">enable</span> <span class="n">docker</span><span class="o">.</span><span class="n">service</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">sudo</span> <span class="n">usermod</span> <span class="o">-</span><span class="n">aG</span> <span class="n">docker</span> <span class="n">vagrant</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="no">SCRIPT</span>&#10;</span></span><span class="line"><span class="cl">  <span class="k">end</span>&#10;</span></span><span class="line"><span class="cl">  </span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Vagrantfile</span>
    </div>
</div>
<h3 id="cajas-de-gnome">Cajas de GNOME</h3>
<p>La aplicación integrada de Cajas de <a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/">el entorno de escritorio GNOME</a> permite crear máquinas virtuales usando la virtualización nativa de GNU/Linux. Ofrece una interfaz gráfica no tan completa en opciones como VirtualBox pero si las opciones mínimas como memoria RAM, CPU, EFI, almacenamiento y aceleración gráfica. En caso de no usar GNOME o se desean más opciones de configuración <a href="https://virt-manager.org/">virt-manager</a> ofrece una mucha más completa interfaz y opciones de configuración para KVM.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/programas-para-crear-maquinas-virtuales-y-virtualizar-sistemas/images/cajas-1_hu4131a07a262b6e0097a84a6d3049446a_44755_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Cajas de GNOME"><img src="https://picodotdev.github.io/blog-bitix/2022/11/programas-para-crear-maquinas-virtuales-y-virtualizar-sistemas/images/cajas-1_hu4131a07a262b6e0097a84a6d3049446a_44755_200x150_fit_q90_h2_box_3.webp" width="200" height="147" alt="Cajas de GNOME" title="Cajas de GNOME" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/programas-para-crear-maquinas-virtuales-y-virtualizar-sistemas/images/cajas-2_hu22bbd741c78f5b01ba558333ff4e6754_68272_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Cajas de GNOME"><img src="https://picodotdev.github.io/blog-bitix/2022/11/programas-para-crear-maquinas-virtuales-y-virtualizar-sistemas/images/cajas-2_hu22bbd741c78f5b01ba558333ff4e6754_68272_200x150_fit_q90_h2_box_3.webp" width="153" height="150" alt="Cajas de GNOME" title="Cajas de GNOME" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/programas-para-crear-maquinas-virtuales-y-virtualizar-sistemas/images/cajas-3_hucf4c117c93732b760eb189df949df7f1_96459_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Cajas de GNOME"><img src="https://picodotdev.github.io/blog-bitix/2022/11/programas-para-crear-maquinas-virtuales-y-virtualizar-sistemas/images/cajas-3_hucf4c117c93732b760eb189df949df7f1_96459_200x150_fit_q90_h2_box_3.webp" width="200" height="117" alt="Cajas de GNOME" title="Cajas de GNOME" class="&#34; " loading="lazy"></a></p>
<figcaption>Cajas de GNOME</figcaption>
</figure>
</div>
<p>Con el comando <em>virt-install</em> es posible también automatizar la creación de máquinas virtuales. El siguiente comando permite configurar la ubicación del sistema de almacenamiento de la máquina virtual además de la RAM y definir el sistema como un sistema con arranque EFI.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sudo pacman -S virt-install dnsmasq dmidecode&#10;</span></span><span class="line"><span class="cl">sudo usermod -a -G libvirtd picodotdev&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">mkdir -p /etc/qemu&#10;</span></span><span class="line"><span class="cl">sudo cat <span class="s">&lt;&lt; EOF &gt; /etc/qemu/bridge.conf&#10;</span></span></span><span class="line"><span class="cl"><span class="s">allow virbr0&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOF</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">sudo systemctl start libvirtd.service&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>virt-install-bridge.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/env bash&#10;</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nb">set</span> -eu&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="nv">DISK_DIRECTORY</span><span class="o">=</span><span class="s2">&#34;/run/media/picodotdev/Samsung microSD/KVM VMs&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ISO_DIRECTORY</span><span class="o">=</span><span class="s2">&#34;/run/media/picodotdev/Samsung microSD/Iso&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">virt-install <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--connect<span class="o">=</span>qemu:///session <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--name archlinux-alis <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--os-variant archlinux <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--vcpu <span class="m">2</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--ram <span class="m">4096</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--boot uefi <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--disk <span class="nv">path</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$DISK_DIRECTORY</span><span class="s2">/archlinux-alis.qcow2,format=qcow2,size=40,sparse=yes&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--cdrom <span class="s2">&#34;</span><span class="nv">$ISO_DIRECTORY</span><span class="s2">/archlinux-2022.11.01-x86_64.iso&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--disk cloud-init/alis-cloud-init.iso,device<span class="o">=</span>cdrom,bus<span class="o">=</span>sata <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--network <span class="nv">bridge</span><span class="o">=</span>virbr0 <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;--noautoconsole&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>virt-install.sh</span>
    </div>
</div>
<h3 id="otras-opciones">Otras opciones</h3>
<p>Las anteriores son opciones de software libre sin coste de licencia, <a href="https://www.vmware.com/products/workstation-player.html">VMware Workstation Player</a> y <a href="https://www.parallels.com/es/">Parallels</a> son opciones comerciales para Windows y macOS.</p>
]]>
        </content>
        
            
                <category term="gnu-linux"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/</id>
        <title>El entorno de escritorio GNOME, simple, elegante y completo</title>
        <updated>2022-11-10T23:00:00+02:00</updated>
        <published>2022-11-10T23:00:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>GNOME es uno de los entornos de escritorio con interfaz gráfica en GNU/Linux. Se caracteriza por ser simple en su guía de interfaz de usuario y ofreciendo simplemente las opciones de configuración que más utilizan todos los usuarios, dejando para la aplicación de retoques y las extensiones para añadir las funcionalidades que sólo algunos usuarios necesitan. Es simple pero completo incorporando un conjunto amplio de aplicaciones integradas desarrolladas junto al entorno de escritorio todas siguiendo la misma guía de estilos de usuario que permiten realizar las tareas básicas desde archivos hasta fotos, música, vídeos, visor de documentos e incluso juegos de pasatiempo entre muchas otras aplicaciones integradas.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/gnome.svg" width="200" height="243" alt="GNOME" title="GNOME" class="" loading="false&#34;"></p>
</div>
<p>Hace ya mucho tiempo cuando migré completamente de <a href="https://www.microsoft.com/es-es/windows/">Windows</a> a <a href="https://www.archlinux.org/">Arch Linux</a> casi desde el principio empecé a usar <a href="https://www.gnome.org/">GNOME</a> en esa época en la versión 2.28 o 2.30. Después de varios años he seguido de <a href="https://picodotdev.github.io/blog-bitix/2014/08/de-arch-linux-a-arch-linux/">Arch Linux a Arch Linux</a> y sin cambiar ni de distribución ni de entorno de escritorio desde hace ya más de una década.</p>
<p>En los primeros momentos inicialmente al decidir qué entorno de escritorio usar empecé por KDE, ahora llamado Plasma, ya que era más parecido a Windows pero en poco tiempo opté por GNOME. Cuando finalmente di el salto a <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> me resultó más atractivo GNOME por su simplicidad y ausencia de detalles innecesarios. Lo llevo usando desde GNOME 2.28 con el anterior concepto de dos barras y en los inicios de GNOME 3.0 a fecha de febrero 2011 en los que tan duramente fue criticado por cambiar varios conceptos fundamentales de las anteriores versiones, tanto que surgieron como una escisión <a href="https://mate-desktop.org/">Mate</a> y <a href="https://cinnamon-spices.linuxmint.com/">Cinnamon</a>.</p>
<p>Durante este tiempo he usado GNOME no solo a nivel personal sino en un entorno laboral y durante todo este tiempo cada seis meses he pasado por cada una de sus versiones, en cada versión las mejoras han sido notables hasta el estado actual que considero tiene poco que envidiar a cualquier otro entorno de escritorio si no es que no los supera, incluyendo los entornos de escritorios comerciales de Windows y <a href="https://www.apple.com/macos/">macOS</a> aún teniendo a los mejores desarrolladores del mundo que el dinero puede pagar.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-1.x_hu2c9b4fa43eee121b48c377a5d03423ed_79267_2560x1440_fit_q90_box.jpg" data-gallery="" title="Versiones antiguas de GNOME, 1.x"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-1.x_hu2c9b4fa43eee121b48c377a5d03423ed_79267_200x150_fit_q90_box.jpg" width="200" height="150" alt="Versiones antiguas de GNOME, 1.x" title="Versiones antiguas de GNOME, 1.x" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-2.6_hu3833e4231bb77cc4c3278ea8a63ea94d_86600_2560x1440_fit_q90_box.jpg" data-gallery="" title="Versiones antiguas de GNOME, 2.6"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-2.6_hu3833e4231bb77cc4c3278ea8a63ea94d_86600_200x150_fit_q90_box.jpg" width="200" height="150" alt="Versiones antiguas de GNOME, 2.6" title="Versiones antiguas de GNOME, 2.6" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-2.30_hue221df18baed975f54ba30f701ba557a_129814_2560x1440_fit_q90_box.jpg" data-gallery="" title="Versiones antiguas de GNOME, 2.30"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-2.30_hue221df18baed975f54ba30f701ba557a_129814_200x150_fit_q90_box.jpg" width="200" height="112" alt="Versiones antiguas de GNOME, 2.30" title="Versiones antiguas de GNOME, 2.30" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-3.0_hu9b1a0bc789129eeba940442f0f4d9178_118013_2560x1440_fit_q90_box.jpg" data-gallery="" title="Versiones antiguas de GNOME, 3.0"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-3.0_hu9b1a0bc789129eeba940442f0f4d9178_118013_300x250_fit_q90_box.jpg" width="300" height="169" alt="Versiones antiguas de GNOME, 3.0" title="Versiones antiguas de GNOME, 3.0" class="&#34; " loading="lazy"></a></p>
<figcaption>Versiones antiguas de GNOME</figcaption>
</figure>
</div>
<p>No soy <em>distrohopper</em> ni <em>desktophopper</em>, durante todo este tiempo Arch Linux y GNOME me han permitido realizar mis tareas de forma productiva y por tanto no he tenido necesidad de cambiar a otra distribución ni a otro entorno de escritorio. Si el modelo <em>rolling release</em> de Arch Linux no fuese lo suficientemente estable para que continúe con mis tareas probablemente cambiaría a <a href="https://picodotdev.github.io/blog-bitix/2020/05/introduccion-y-uso-basico-de-la-distribucion-gnu-linux-fedora-silverblue/">la distribución Fedora Silverblue</a> y si GNOME no me permitiese realizar mis tareas de forma productiva seguro que evaluaría Plasma.</p>
<p>Según una frase que leí hace un tiempo con la que estoy de acuerdo venía a decir que la mayoría de análisis y <em>reviews</em> de distribuciones de GNU/Linux son realmente poco más qie una análisis del entorno de escritorio y es que GNOME en la misma versión es el mismo en cualquier distribución salvo algunas mínimas personalizaciones de la distribución como en el caso de <a href="https://www.ubuntu.com/">Ubuntu</a>.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2017/05/descargar-e-instalar-la-distribucion-ubuntu-de-gnu-linux-paso-a-paso-desde-cero/">Descargar e instalar la distribución Ubuntu de GNU/Linux paso a paso desde cero</a></li>
</ul>
<p>Más que la distribución las tareas que se hacen con la computadora al final son lo importante, la distribución o entorno de escritorio solo son un medio (dramatización) salvo que seas un <em>youtuber</em> que su análisis son un fin y un día dice que cambia a una distribución o entorno de escritorio haciendo su revisión y opinión jurando amor eterno para poco más que a la semana siguiente decir que cambia a otra distribución y entorno de escritorio.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="el-entorno-de-escritorio-gnome">El entorno de escritorio GNOME</h3>
<p>Un entorno de escritorio proporciona un modelo de interacción gráfica con el sistema, una guía de estilos y un conjunto de aplicaciones sencillas que cubren las necesidades básicas de los usuarios sin tener que instalar aplicaciones de terceros.</p>
<p>En los entornos de escritorio gráficos tanto de Windows, macOS y GNU/Linux actuales estos son la parte con la que más interacciona el usuario, dos distribuciones distintas con el mismo entorno de escritorio no hay tantas diferencias en el uso diario.</p>
<p>Al contrario de Windows y macOS que solo ofrecen un único entorno de escritorio, que salvo algunas personalizaciones y configuraciones son el mismo para todos los usuarios en su forma de trabajar y aplicaciones integradas. En GNU/Linux se tienen más opciones de elección según las preferencias del usuario.</p>
<p>GNOME solo es uno de los entornos de escritorio más populares de GNU/Linux, se caracteriza por ser simple y eliminar detalles aún suponiendo tener menos opciones de personalización. Al mismo nivel está el entorno de escritorio <a href="https://kde.org/es/plasma-desktop/">Plasma</a> con un modelo de experiencia de usuario más parecido al entorno de escritorio Windows y por esto suele ser la opción que aquellos usuarios que migran de Windows a GNU/Linux evalúan como primera opción para que la transición sea más suave. Finalmente, <a href="https://xfce.org/">XFCE</a> es un entorno de escritorio más ligero que se caracteriza por consumir menos recursos y más adecuado para equipos con algunos años. Hay muchos más entornos de escritorio en GNU/Linux más minoritarios que estos tres.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome_hu3a6e1478b822fd709bb76aac663fdf76_201835_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Entorno de escritorio GNOME 43"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome_hu3a6e1478b822fd709bb76aac663fdf76_201835_650x450_fit_q90_h2_box.webp" width="650" height="363" alt="Entorno de escritorio GNOME 43" title="Entorno de escritorio GNOME 43" class="&#34; " loading="lazy"></a></p>
<figcaption>Entorno de escritorio GNOME 43</figcaption>
</figure>
</div>
<h4 id="introducción">Introducción</h4>
<p>GNOME es uno de los entornos de escritorio más populares en GNU/Linux junto a Plasma. GNOME se caracteriza por su simplicidad y elegancia, al mismo tiempo que ser un entorno de escritorio completo que cubre las necesidades esenciales que ha de integrar todo entorno de escritorio sin necesidad de aplicaciones adicionales proporcionadas por terceros y todas manteniendo una consistencia de diseño. Esta simplicidad a veces adolece de opciones de personalización y configuración, aunque las opciones de configuración más usadas suelen estar o se van incorporando con el tiempo.</p>
<p>Hay una nueva versión de GNOME cada seis meses que incorpora cambios y mejoras significativas. Durante estos seis meses se van publicando actualizaciones menores que corrigen errores e incorporan pequeñas mejoras.</p>
<p>En el modelo de desarrollo de GNOME este está en constante actualización y cambio. Dado que es muy completo tiene numerosos componentes y aplicaciones, esto puede resultar que en las <a href="https://developer.gnome.org/hig/">guía de estilos para la interfaz de las aplicaciones de GNOME</a> algunas aplicaciones tardan algunas versiones en actualizarse que resulta en algunas pequeñas inconsistencias en las aplicaciones. Esto no es algo que ocurra solo en GNOME y un sistema operativo de pago como Windows también sigue incorporando el obsoleto panel de control de versiones antediluvianas.</p>
<h4 id="funcionalidades-generales">Funcionalidades generales</h4>
<p>Independientemente de las aplicaciones integradas y de terceros el entorno de escritorio define un marco de trabajo para el usuario. La forma de trabajar y de interaccionar con el entorno de escritorio es diferente en Windows, macOS, GNOME o Plasma aunque todos comparten ciertas convenciones como que las aplicaciones se representan de forma gráfica en lo que en el contexto de los escritorios se denominan ventanas.</p>
<p>Los entornos de escritorio modernos se aprovechan de las capacidades de las GPU para ofrecer mejor rendimiento y animaciones fluidas que más allá de los efectos gráficos permiten transiciones suaves y progresivas para evitar cambios bruscos que desorientan al usuario. Esto hace que el escritorio se note más agradable al trabajar con él. Atrás han quedado los llamativos efectos sorprendentes de <a href="https://es.wikipedia.org/wiki/Compiz">Compiz</a> y <a href="https://de.wikipedia.org/wiki/Beryl_%28Software%29">Beryl</a> con su cubo, ventanas gelatinosas o ardiendo para en los entornos de escritorio actuales únicamente usar los mínimos efectos que realmente mejoran la experiencia del usuario.</p>
<h4 id="gdm">GDM</h4>
<p>Las computadoras pueden ser usadas por diferentes usuarios de modo que los escritorios primero han de autenticar al usuario que va a usarlo generalmente con un usuario y contraseña. Una vez el sistema autentica al usuario con la pantalla de inicio de sesión el sistema muestra los archivos del usuario y sus configuraciones personalizadas del sistema. La pantalla de inicio de sesión de GNOME es implementada por GDM.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-gdm-1_hu845ae56a47c9d034d36e169b722d0af4_27898_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Inicio de sesión en GNOME con GDM"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-gdm-1_hu845ae56a47c9d034d36e169b722d0af4_27898_300x200_fit_q90_h2_box.webp" width="300" height="188" alt="Inicio de sesión en GNOME con GDM" title="Inicio de sesión en GNOME con GDM" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-gdm-2_hua18e3ba763e4bd59316b80241e4e05cf_28844_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Inicio de sesión en GNOME con GDM"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-gdm-2_hua18e3ba763e4bd59316b80241e4e05cf_28844_300x200_fit_q90_h2_box.webp" width="300" height="188" alt="Inicio de sesión en GNOME con GDM" title="Inicio de sesión en GNOME con GDM" class="&#34; " loading="lazy"></a></p>
<figcaption>Inicio de sesión en GNOME con GDM</figcaption>
</figure>
</div>
<h4 id="escritorio">Escritorio</h4>
<p>Al iniciar sesión en GNOME el escritorio se muestra en la vista de actividades mostrando una miniatura del escritorio y las aplicaciones ancladas en la barra de acceso rápido para iniciarlas, también se permite teclear para iniciar una búsqueda de otras aplicaciones o documentos.</p>
<p>El escritorio de GNOME se compone de una barra superior, en la parte izquierda el acceso a la vista de actividades, en la parte central la fecha y hora que da acceso al área de notificaciones y calendario y en la parte derecha la bandeja del sistema que da acceso a las funciones de configuración y apagar el sistema.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-escritorio-1_huab38aafd3196f2b456a4af21081d34f5_176795_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Escritorio"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-escritorio-1_huab38aafd3196f2b456a4af21081d34f5_176795_300x200_fit_q90_h2_box.webp" width="300" height="169" alt="Escritorio" title="Escritorio" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-escritorio-2_hu3a6e1478b822fd709bb76aac663fdf76_201835_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Escritorio"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-escritorio-2_hu3a6e1478b822fd709bb76aac663fdf76_201835_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Escritorio" title="Escritorio" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-escritorio-3_huec170f6ee846634d55c23b3f86b13544_247574_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Escritorio"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-escritorio-3_huec170f6ee846634d55c23b3f86b13544_247574_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Escritorio" title="Escritorio" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-escritorio-4_hu5aea80c538f6311e5491bf47312c60f3_225956_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Escritorio"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-escritorio-4_hu5aea80c538f6311e5491bf47312c60f3_225956_300x200_fit_q90_h2_box.webp" width="300" height="169" alt="Escritorio" title="Escritorio" class="&#34; " loading="lazy"></a></p>
<figcaption>Escritorio</figcaption>
</figure>
</div>
<h4 id="escritorios-virtuales">Escritorios virtuales</h4>
<p>El escritorio GNOME ofrece no solo un escritorio sino varios virtuales que permite organizar las diferentes ventanas de las aplicaciones a conveniencia del usuario, por ejemplo para tener una organización que permite realizar más fácilmente el trabajo.</p>
<p>Es posible cambiar de un escritorio a otro a través de la pantalla de actividades o con el atajo de teclado <em>Comando + Alt + flecha derecha</em> o <em>izquierda</em>. El número de escritorios es configurable para que tenga un número fijo o sea dinámico con tan solo los que se están usando junto a la posibilidad de crear uno adicional.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-escritorios-virtuales-1_huda61eba6cc6e9e8d79d0b291cd91ac92_172505_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Escritorios virtuales"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-escritorios-virtuales-1_huda61eba6cc6e9e8d79d0b291cd91ac92_172505_300x200_fit_q90_h2_box.webp" width="300" height="169" alt="Escritorios virtuales" title="Escritorios virtuales" class="&#34; " loading="lazy"></a></p>
<figcaption>Escritorios virtuales</figcaption>
</figure>
</div>
<h4 id="pantalla-de-bloqueo">Pantalla de bloqueo</h4>
<p>Cuando no se esté usando el equipo GNOME permite bloquear la sesión temporalmente de modo que otro usuario tenga acceso a él. Para volver al abrir la sesión hay que volver a autenticarse pero todas las aplicaciones y estado del trabajo seguirá en el mismo punto donde se dejó.</p>
<p>La pantalla de bloqueo permite mostrar ciertas notificaciones de las aplicaciones sin tener que continuar la sesión.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-pantalla-bloqueo-1_hu30c786a4b4a910fdeabcf2bcca63d05c_80931_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Pantalla de bloqueo"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-pantalla-bloqueo-1_hu30c786a4b4a910fdeabcf2bcca63d05c_80931_300x200_fit_q90_h2_box.webp" width="300" height="169" alt="Pantalla de bloqueo" title="Pantalla de bloqueo" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-pantalla-bloqueo-2_hu6b2c97a1fee1f877672f959ae5a419fb_77758_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Pantalla de bloqueo"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-pantalla-bloqueo-2_hu6b2c97a1fee1f877672f959ae5a419fb_77758_300x200_fit_q90_h2_box.webp" width="300" height="169" alt="Pantalla de bloqueo" title="Pantalla de bloqueo" class="&#34; " loading="lazy"></a></p>
<figcaption>Pantalla de bloqueo</figcaption>
</figure>
</div>
<h4 id="notificaciones-y-calendario">Notificaciones y calendario</h4>
<p>En la parte central de la barra superior la fecha y hora da acceso al área de notificaciones, calendario, relojes y meteorología. Las notificaciones de las aplicaciones ofrecen información al usuario de cierto evento como que ha llegado un mensaje de correo electrónico, también permiten realizar algunas acciones sin tener que usar la aplicación como pausar la música de un reproductor de audio.</p>
<p>El calendario se integra con otros servicios como Google para mostrar los eventos que se agreguen en <a href="https://www.google.com/calendar/about/">Google Calendar</a>. La aplicación de relojes permite configurar múltiples relojes en zonas horarias y conocer cuál es la hora local en esa zona horaria que es muy útil si se trabaja para entornos internacionales.</p>
<p>Finalmente, el área de notificaciones muestra la meteorología prevista para los siguientes días de la zona configurada, útil para conocer el tiempo previsto como sol o lluvia.</p>
<p>Como las notificaciones pueden interrumpir la concentración y el trabajo está la opción de activar no molestar que silencia las notificaciones emergentes pero que se siguen mostrando cuando se abre el área de notificaciones.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-notificaciones_hu56ee6f6ef1b44eef44899b84281af817_216039_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Notificaciones y calendario"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-notificaciones_hu56ee6f6ef1b44eef44899b84281af817_216039_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Notificaciones y calendario" title="Notificaciones y calendario" class="&#34; " loading="lazy"></a></p>
<figcaption>Notificaciones y calendario</figcaption>
</figure>
</div>
<h4 id="bandeja-del-sistema-y-configuración">Bandeja del sistema y configuración</h4>
<p>En la parte derecha de la barra superior está la bandeja del sistema que muestra varios iconos con información de estado como el volumen de sonido, el tipo de conexión de red junto a otros iconos que las aplicaciones pueden agregar como un poder cambiar de disposición de teclado rápidamente. Como está captura de imagen está tomada de una máquina virtual ha varias opcione que no se muestra como opción de conexión WIFI y Bluetooth.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-bandeja-del-sistema-1_hu9e518b84b268413f284a47b2010ec011_330673_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Bandeja del sistema"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-bandeja-del-sistema-1_hu9e518b84b268413f284a47b2010ec011_330673_300x200_fit_q90_h2_box.webp" width="300" height="169" alt="Bandeja del sistema" title="Bandeja del sistema" class="&#34; " loading="lazy"></a></p>
<figcaption>Bandeja del sistema</figcaption>
</figure>
</div>
<p>La misma bandeja del sistema da acceso rápido a cambiar ciertas opciones habituales como cambiar cambiar el volumen de sonido, la conexión cableada o WIFI, activar Bluetooth, el modo de rendimiento, activar la luz nocturna y el modo oscuro de las ventanas para evitar la luz blanca de la pantalla que molesten o dañen los ojos.</p>
<p>También está la opción de tomar una captura de la pantalla completa, de una ventana, un recuadro de selección ajustable o capturar un vídeo todo mostrando u ocultando el puntero del ratón. Con la tecla <em>Imprimir pantalla</em> se obtiene acceso a la herramienta de captura de pantalla, con la tecla <em>Shift + Imprimir</em> pantalla se toma una captura completa de pantalla y con la tecla <em>Alt + Imprimir</em> pantalla la ventana que tiene el foco.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-captura-de-pantalla-1_huef225e08f286b054c00e557cc51eff16_215948_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Captura de pantalla"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-captura-de-pantalla-1_huef225e08f286b054c00e557cc51eff16_215948_200x150_fit_q90_h2_box.webp" width="200" height="113" alt="Captura de pantalla" title="Captura de pantalla" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-captura-de-pantalla-2_huc80845fa56e62120573270d56de19413_139555_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Captura de pantalla"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-captura-de-pantalla-2_huc80845fa56e62120573270d56de19413_139555_200x150_fit_q90_h2_box.webp" width="200" height="113" alt="Captura de pantalla" title="Captura de pantalla" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-captura-de-pantalla-3_hu37f88119bb88d50a62cf30a7c95a3554_210752_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Captura de pantalla"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-captura-de-pantalla-3_hu37f88119bb88d50a62cf30a7c95a3554_210752_200x150_fit_q90_h2_box.webp" width="200" height="106" alt="Captura de pantalla" title="Captura de pantalla" class="&#34; " loading="lazy"></a></p>
<figcaption>Captura de pantalla</figcaption>
</figure>
</div>
<p>El conjunto completo de opciones de configuración están en la aplicación Configuración, con todas las opciones que se muestran en la siguiente galería de imágenes, desde la conexiones, apariencia, sonido teclado, pantalla e impresoras, región e idioma para los formatos de fecha, moneda y temperatura, accesibilidad, información del sistema entre otras.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-1_hudce54f1b17f19ce8835ff3187343b1e8_172514_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-1_hudce54f1b17f19ce8835ff3187343b1e8_172514_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-2_hu91ff5304c36029992ff40ef7b7032dec_165138_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-2_hu91ff5304c36029992ff40ef7b7032dec_165138_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-3_huc26484ee007e38f1ba1a16c357f282d2_288316_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-3_huc26484ee007e38f1ba1a16c357f282d2_288316_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-4_hu1f37aae9f9e392f3c6cc0a87f609acc1_206718_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-4_hu1f37aae9f9e392f3c6cc0a87f609acc1_206718_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-5_hu93216df99085d41473191bbd516571f6_218425_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-5_hu93216df99085d41473191bbd516571f6_218425_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-6_hu8e69f44a5eb4b4bac1dd854fd54f6206_224782_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-6_hu8e69f44a5eb4b4bac1dd854fd54f6206_224782_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-7_huae7392ef4cde8c48224089fede191a5e_185971_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-7_huae7392ef4cde8c48224089fede191a5e_185971_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-8_hua1ec3aa93d585b8ac3aab67cca42c0dd_170608_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-8_hua1ec3aa93d585b8ac3aab67cca42c0dd_170608_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-9_hu122142115b70fcd119252b729d35d804_204765_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-9_hu122142115b70fcd119252b729d35d804_204765_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-10_hubb7001f4d717a674c727a1a852ce1c29_182350_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-10_hubb7001f4d717a674c727a1a852ce1c29_182350_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-11_hu8bd9f3ece14c32354dca688fec1b4ebf_169206_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-11_hu8bd9f3ece14c32354dca688fec1b4ebf_169206_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-12_hufd49fa719363321b7827f17b3c782240_196438_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-12_hufd49fa719363321b7827f17b3c782240_196438_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-13_hu50f69ec536343dde8d3b4337809d5af3_169014_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-13_hu50f69ec536343dde8d3b4337809d5af3_169014_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-14_hu309351bfc8659d71a2d1cbae068f1980_169348_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-14_hu309351bfc8659d71a2d1cbae068f1980_169348_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-15_hua9c96cf574d80a9e33b4ae62f8b4a333_175923_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-15_hua9c96cf574d80a9e33b4ae62f8b4a333_175923_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-16_huf4f6da6129e7fd9c38d89a8058445d0a_207231_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-16_huf4f6da6129e7fd9c38d89a8058445d0a_207231_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-17_hu6c9e8682cf60eb4b3dd52a46cec362cb_180524_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-17_hu6c9e8682cf60eb4b3dd52a46cec362cb_180524_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-18_hu5b8395096a82bae1ee263cd313acdfc0_180656_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-18_hu5b8395096a82bae1ee263cd313acdfc0_180656_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-19_huf3cc7054bfd3a857f4e38844835d78de_165607_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-19_huf3cc7054bfd3a857f4e38844835d78de_165607_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-20_hub1808586118f5d66a4c2020af35400e7_167362_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-20_hub1808586118f5d66a4c2020af35400e7_167362_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-21_hu596d533256c6781a134d42a27eea3531_206262_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-21_hu596d533256c6781a134d42a27eea3531_206262_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-22_hu1e3bc256e06b2608dfb5a9ae415bbc71_193302_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-22_hu1e3bc256e06b2608dfb5a9ae415bbc71_193302_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-23_huda1bc36c4a4ac010f7dad26633dd8fed_166929_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-23_huda1bc36c4a4ac010f7dad26633dd8fed_166929_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-24_hue5d05e63fa9b4245d139b9db2e04d2a0_177614_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-24_hue5d05e63fa9b4245d139b9db2e04d2a0_177614_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-25_hu4b81c6e2b454c1aa83a9746bcf970a5a_200147_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-25_hu4b81c6e2b454c1aa83a9746bcf970a5a_200147_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Configuración" title="Configuración" class="&#34; " loading="lazy"></a></p>
<figcaption>Configuración</figcaption>
</figure>
</div>
<h4 id="fondos-de-pantalla">Fondos de pantalla</h4>
<p>Una de las opciones de configuración más utilizadas es cambiar la imagen del fondo del escritorio. GNOME proporciona varias dinámicas que cambian según la hora y según se utilice el modo claro o el modo oscuro. El usuario también puede añadir sus propias imágenes si lo desea.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-1_huc26484ee007e38f1ba1a16c357f282d2_288316_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Fondo de pantalla"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-1_huc26484ee007e38f1ba1a16c357f282d2_288316_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Fondo de pantalla" title="Fondo de pantalla" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-2_huabbc0bf6f49317560d7cde59d325a9f5_210558_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Fondo de pantalla"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-2_huabbc0bf6f49317560d7cde59d325a9f5_210558_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Fondo de pantalla" title="Fondo de pantalla" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-3_hu664bdab98799318de96e6e96882dcfee_143937_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Fondo de pantalla"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-3_hu664bdab98799318de96e6e96882dcfee_143937_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Fondo de pantalla" title="Fondo de pantalla" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-4_hu6a3aa1db548762dc9945e4da6ec5ecba_245357_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Fondo de pantalla"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-4_hu6a3aa1db548762dc9945e4da6ec5ecba_245357_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Fondo de pantalla" title="Fondo de pantalla" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-5_hu4684f24328fbc6fe380cc239212481f9_84835_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Fondo de pantalla"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-5_hu4684f24328fbc6fe380cc239212481f9_84835_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Fondo de pantalla" title="Fondo de pantalla" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-6_hu3c373b26f2a8d9cf13a568a9546a5185_83835_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Fondo de pantalla"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-6_hu3c373b26f2a8d9cf13a568a9546a5185_83835_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Fondo de pantalla" title="Fondo de pantalla" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-7_hu742422da85a6960f2cbf97a222887719_418216_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Fondo de pantalla"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-7_hu742422da85a6960f2cbf97a222887719_418216_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Fondo de pantalla" title="Fondo de pantalla" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-8_hu98a0d2f5dd4370837590f7884d32ebb7_557443_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Fondo de pantalla"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-8_hu98a0d2f5dd4370837590f7884d32ebb7_557443_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Fondo de pantalla" title="Fondo de pantalla" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-9_huaa94c0cae638945ad2362efdb1277465_633252_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Fondo de pantalla"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-fondo-de-pantalla-9_huaa94c0cae638945ad2362efdb1277465_633252_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Fondo de pantalla" title="Fondo de pantalla" class="&#34; " loading="lazy"></a></p>
<figcaption>Fondo de pantalla</figcaption>
</figure>
</div>
<h4 id="modo-claro-y-modo-oscuro">Modo claro y modo oscuro</h4>
<p>Uno de las funciones que han ido adoptando todos los escritorios incluyendo GNOME es la funcionalidad de modo claro y oscuro para las ventanas. El modo oscuro utiliza tonos oscuros para evitar la luz blanca que moleste a los ojos. El cambio de un modo a otro es posible realizarlo sin tener que reiniciar la sesión con una animación de transición entre ambos tonos. Esto se aplica tanto a los bordes de las ventanas y objetos gráficos de las mismas en aquellas aplicaciones que soportan los modos claros y oscuro.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-modo-caro-oscuro-1_hu8beae765559109566f2aac6bcac26add_243334_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Modo claro"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-modo-caro-oscuro-1_hu8beae765559109566f2aac6bcac26add_243334_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Modo claro" title="Modo claro" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-modo-caro-oscuro-2_hu5314aba9952a2896a8daedb8ef7aa0ec_229100_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Modo oscuro"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-modo-caro-oscuro-2_hu5314aba9952a2896a8daedb8ef7aa0ec_229100_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Modo oscuro" title="Modo oscuro" class="&#34; " loading="lazy"></a></p>
<figcaption>Modo claro y oscuro</figcaption>
</figure>
</div>
<h4 id="esquina-activa">Esquina activa</h4>
<p>El acceso a la pantalla de actividades también es posible mediante la esquina activa de modo que sin hacer clic en la opción <em>Actividades</em> en la barra superior a la izquierda tan solo moviendo el ratón a la esquina superior izquierda. Como esta acción a veces es posible activarla sin querer es posible desactivarla con la opción de configuración.</p>
<h4 id="pantalla-dividida">Pantalla dividida</h4>
<p>Los monitores actuales que llegan a ser de 27&quot; y 32&quot; algunos en formatos panorámicos con resolución 2K, 4K nativos y resoluciones híbridas en los panorámicos. En los monitores con gran cantidad de espacio horizontal una funcionalidad muy útil es colocar dos ventanas lado a lazo una ocupando el lado izquierdo y otra el lado derecho de la pantalla pudiendo cambiar entre una y otra el foco fácilmente sin que ninguna parte de ambas quede oculta por otras ventanas.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-patalla-dividida-1_hu0550afc9f46a78cad032b0c992ba128e_79509_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Pantalla dividida"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-patalla-dividida-1_hu0550afc9f46a78cad032b0c992ba128e_79509_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Pantalla dividida" title="Pantalla dividida" class="&#34; " loading="lazy"></a></p>
<figcaption>Pantalla dividida</figcaption>
</figure>
</div>
<h4 id="siempre-encima">Siempre encima</h4>
<p>Cada vez que una ventana toma la foto se eleva sobre el resto de las otras ventanas para mostrar todo su contenido. Cuando otra ventana toma el foco esta se eleva y la que lo tenía desciende quedando oculta parte de su contenido si ambas coinciden en parte de su ubicación.</p>
<p>GNOME tiene una funcionalidad de siempre encima, con la funcionalidad activada la ventana aunque pierda el foco se mantiene por encima de cualquier otra. Esto permite trabajar con una aplicación mientras otra más pequeña que no tiene el foco se mantiene por encima pudiendo cambiar de una a otra fácilmente al igual que con la pantalla dividida.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-siempre-encima-1_hu92221594f3b4c99986eade5a65c52ffc_265627_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Siempre encima"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-siempre-encima-1_hu92221594f3b4c99986eade5a65c52ffc_265627_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Siempre encima" title="Siempre encima" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-siempre-encima-2_hua3dac882c76be641ee01aeb321e215ed_90917_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Siempre encima"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-siempre-encima-2_hua3dac882c76be641ee01aeb321e215ed_90917_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Siempre encima" title="Siempre encima" class="&#34; " loading="lazy"></a></p>
<figcaption>Siempre encima</figcaption>
</figure>
</div>
<h4 id="renombrar-múltiples-archivos">Renombrar múltiples archivos</h4>
<p>El nombre del archivo es el elemento que los identifica, no puede haber dos archivos con el mismo nombre, teniendo en cuenta que GNU/Linux es sensible a mayúsculas y minúsculas y Windows es insensible a mayúsculas y minúsculas, en GNU/Linux <em>archivo.txt</em> y <em>Archivo.txt</em> son dos nombres de archivo diferentes y válidos cuando en Windows producen conflicto en el nombre del archivo.</p>
<p>La tecla <em>F2</em> permite renombrar el nombre del archivo, también con el clic derecho en el archivo ofrece un menú contextual con la opción de <em>Renombrar</em>. A veces interesa renombrar múltiples archivos a la vez poniendo a todos los archivos el mismo nombre junto a un sufijo adicional con un número incremental para diferenciarlos. Habiendo seleccionado múltiples archivos con la misma tecla <em>F2</em> abre un diálogo con varias opciones para hacer el renombrado de los archivos.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/05/renombrar-multiples-archivos-en-gnome/">Renombrar múltiples archivos en GNOME</a></li>
</ul>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-renombrar-1_hu7387b4cd3a83389b325787f4cc9eb93d_243278_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Renombrar archivo"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-renombrar-1_hu7387b4cd3a83389b325787f4cc9eb93d_243278_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Renombrar archivo" title="Renombrar archivo" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-renombrar-2_hu907fc2e476dc03f60299818d1b7a121f_237368_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Renombrar archivos"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-renombrar-2_hu907fc2e476dc03f60299818d1b7a121f_237368_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Renombrar archivos" title="Renombrar archivos" class="&#34; " loading="lazy"></a></p>
<figcaption>Renombrar archivos</figcaption>
</figure>
</div>
<h4 id="comprimir-archivos">Comprimir archivos</h4>
<p>La compresión de archivos permite reducir el tamaño de los mismos, los archivos de texto suelen ser altamente comprimibles otros archivos que ya están comprimidos como música, fotos y vídeo la reducción de tamaño suele ser menor.</p>
<p>Otra utilidad de crear un archivo comprimido es que permite agrupar múltiples archivos en uno solo para hacerlos más fácilmente copiables a una memoria USB o subirlo a un servicio de internet.</p>
<p>El compresor de archivos GNOME permite crear archivos zip y archivos zip protegidos con una contraseña además de otros formatos de compresión.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-comprimir-1_hu37eb8007d65591de0aa73a7ac01354e6_232232_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Comprimir archivo"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-comprimir-1_hu37eb8007d65591de0aa73a7ac01354e6_232232_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Comprimir archivo" title="Comprimir archivo" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-comprimir-2_huc19f9fa8d9930f4b7d567d99ce02f9f5_228357_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Comprimir archivo"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-comprimir-2_huc19f9fa8d9930f4b7d567d99ce02f9f5_228357_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Comprimir archivo" title="Comprimir archivo" class="&#34; " loading="lazy"></a></p>
<figcaption>Comprimir archivo</figcaption>
</figure>
</div>
<h4 id="atajos-de-teclado">Atajos de teclado</h4>
<p>Los atajos de teclado son una forma de realizar una acción más fácil y rápida con una combinación de teclas en vez de usar el ratón y varios clic utilizando la interfaz gráfica.</p>
<p>GNOME soporta múltiples atajos de teclado para diversas funciones como cambiar de escritorio virtual y capturar la pantalla, también permite definir atajos de teclado personalizados para las funcionalidades que se deseen.</p>
<p>Por defecto GNOME no ofrece una barra de tareas como Windows y Plasma y tampoco un <em>dock</em> como macOS de modo que para cambiar de ventana hay que utilizar <em>Alt + tabulador</em> si no se quiere hacer el cambio de ventana pasando por la vista de actividades que requiere más pasos.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-atajos-de-teclado-1_hud24455f476bfe01836006b63cfc55432_192637_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Atajos de teclado"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-atajos-de-teclado-1_hud24455f476bfe01836006b63cfc55432_192637_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Atajos de teclado" title="Atajos de teclado" class="&#34; " loading="lazy"></a></p>
<figcaption>Atajos de teclado</figcaption>
</figure>
</div>
<h4 id="configuración-de-teclado">Configuración de teclado</h4>
<p>Lo habitual es utilizar el teclado con la disposición de caracteres del lenguaje propio y según la serigrafía del teclado. Algunos usuarios prefieren utilizar un teclado con disposición en inglés aún siendo el lenguaje del usuario el español, para tareas de programación la disposición en inglés si uno se acostumbra la disposición de caracteres requiere menos combinaciones de teclas.</p>
<p>También es posible usar varios teclados con diferentes disposición y se necesita cambiar de disposición en el sistema operativo según el teclado. GNOME soporta cualquier disposición de teclado y permite cambiar de una a otra fácilmente con un icono en la bandeja del sistema.</p>
<p>Los español parlantes lo habitual es utilizar la disposición en español o inglés internacional con teclas muertas por AltGr si se quiere utilizar la disposición en inglés pero pudiendo utilizar ciertos caracteres españoles con una combinación de teclas.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-de-teclado-1_hu5bb6d810ea9be960b61d1b6406a14d6f_247109_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración de teclado"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-de-teclado-1_hu5bb6d810ea9be960b61d1b6406a14d6f_247109_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Configuración de teclado" title="Configuración de teclado" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-de-teclado-2_hu9bf862ffb1415b3682a72fbc3d97e499_247472_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración de teclado"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-de-teclado-2_hu9bf862ffb1415b3682a72fbc3d97e499_247472_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Configuración de teclado" title="Configuración de teclado" class="&#34; " loading="lazy"></a></p>
<figcaption>Configuración de teclado</figcaption>
</figure>
</div>
<h4 id="configuración-de-monitor">Configuración de monitor</h4>
<p>No son pocos los usuarios que tiene un monitor de alta resolución 4K o 2K o usuarios que utilizan dos pantallas externas o una pantalla externa y la del portátil. GNOME ofrece varias opciones de configuración para los monitores pudiendo elegir la resolución del monitor y la disposición de los monitores para que corresponda con la disposición física y el paso del puntero del ratón de un monitor a otro sea algo natural.</p>
<p>Los monitores 4K ofrecen gran resolución pero dependiendo de su tamaño de pantalla en su resolución nativa los elementos gráficos pueden verse muy pequeños. Para usar un monitor 4K en su resolución nativa casi preferible un monitor de 32&quot;. Los entornos de escritorio ofrecen un factor de escalado para usar la resolución nativa del monitor pero representando los gráficos como si fuesen de un tamaño inferior, la ventaja de usar un monitor 4K con factor de escalado es que la definición gráfica es mayor por tener el monitor más píxeles.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-de-pantalla-1_hu38470378cc358ba51565351afa7e1112_171958_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración de pantalla"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-de-pantalla-1_hu38470378cc358ba51565351afa7e1112_171958_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Configuración de pantalla" title="Configuración de pantalla" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-de-pantalla-2_hu8bb12a46de22146bafef6992b5ed52e8_186511_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Configuración de pantalla"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-configuracion-de-pantalla-2_hu8bb12a46de22146bafef6992b5ed52e8_186511_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Configuración de pantalla" title="Configuración de pantalla" class="&#34; " loading="lazy"></a></p>
<figcaption>Configuración de pantalla</figcaption>
</figure>
</div>
<h4 id="extensiones">Extensiones</h4>
<p>Las extensiones de GNOME son una forma de permitir a los desarrolladores implementar ciertas funcionalidades que GNOME no implementa y ofrece por defecto a todos los usuarios. Instalando una extensión permite añadir y personalizar el escritorio a las preferencias y necesidades del usuario.</p>
<p>Instalar una extensión se puede realizar instalando el paquete <em>gnome-shell-extensiones</em>, el <a href="https://flathub.org/apps/details/org.gnome.Extensions">Flatpak de Extensions</a> o manualmente descargando la extensión y descomprimiendola en el directorio <em>~/.local/share/gnome-shell/extensions</em>.</p>
<p>Una funcionalidad demandada es tener una barra de tareas o <em>dock</em> que permite cambiar de ventana sin tener que acceder a la vista de actividades o utilizar la combinación de teclas <em>Alt + tabulador</em>. <a href="https://micheleg.github.io/dash-to-dock/">Dash to Dock</a> es una extensión para GNOME que crea un <em>dock</em> al estilo de macOS, tiene varias opciones de configuración como posicionarlo en la parte inferior de la pantalla o en un lateral.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-extensiones-1_hu00c6a646faf5b76e3761d6677ca388ae_238785_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Extensiones"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-extensiones-1_hu00c6a646faf5b76e3761d6677ca388ae_238785_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Extensiones" title="Extensiones" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-extensiones-2_hu99af8c0d8c9a70e87aec08781cbff752_256878_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Extensiones"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-extensiones-2_hu99af8c0d8c9a70e87aec08781cbff752_256878_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Extensiones" title="Extensiones" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-extensiones-3_hu23a5505f4ecd128344f6ea872fa111c4_281656_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Extensiones"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-extensiones-3_hu23a5505f4ecd128344f6ea872fa111c4_281656_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Extensiones" title="Extensiones" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-extensiones-dash-to-dock-1_hucd0272a23299624462bfb71190245dcf_217270_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Extensiones"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-extensiones-dash-to-dock-1_hucd0272a23299624462bfb71190245dcf_217270_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Extensiones" title="Extensiones" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-extensiones-dash-to-dock-2_hu14902be858c92a209f98738cff6511df_123024_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Extensiones"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-extensiones-dash-to-dock-2_hu14902be858c92a209f98738cff6511df_123024_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Extensiones" title="Extensiones" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-extensiones-dash-to-dock-3_hu1a4a0c3caaa65d80d1cf67bbdf07c3fb_222226_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Extensiones"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-extensiones-dash-to-dock-3_hu1a4a0c3caaa65d80d1cf67bbdf07c3fb_222226_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Extensiones" title="Extensiones" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-extensiones-dash-to-dock-4_hue630d29b5da552dc18b5e53b52da4faf_115750_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Extensiones"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-extensiones-dash-to-dock-4_hue630d29b5da552dc18b5e53b52da4faf_115750_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Extensiones" title="Extensiones" class="&#34; " loading="lazy"></a></p>
<figcaption>Extensiones</figcaption>
</figure>
</div>
<h4 id="aplicación-retoques">Aplicación retoques</h4>
<p>La simplicidad de GNOME hace que solo ofrezca las opciones de personalización más utilizadas por la mayoría de usuarios. Esto tiene la ventaja de que la interfaz gráfica no esté llena de opciones de personalización que apenas se usan, lo que hace la interfaz de GNOME más simple y menos recargada.</p>
<p>Sin embargo, algunos usuarios desean algunas opciones más de personalización, para estos usuarios está la aplicación específica <em>Retoques</em> que permite modificar varios aspectos de GNOME sin tener que agregar esas opciones a la sección de configuración de GNOME.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-1_hub49da6bb8dc4b6d5fc2a079346a3ab2c_198323_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Retoques"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-1_hub49da6bb8dc4b6d5fc2a079346a3ab2c_198323_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Retoques" title="Retoques" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-2_hu29bac33c31422898767cf7195baa2286_230799_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Retoques"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-2_hu29bac33c31422898767cf7195baa2286_230799_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Retoques" title="Retoques" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-3_hu84f3af6e1ebccf0cfed203ae580aa361_193612_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Retoques"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-3_hu84f3af6e1ebccf0cfed203ae580aa361_193612_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Retoques" title="Retoques" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-4_huedf42b43bf230e54a968b45301adb35b_193031_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Retoques"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-4_huedf42b43bf230e54a968b45301adb35b_193031_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Retoques" title="Retoques" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-5_hu8ff8a085494b8ea72c88cda65b079437_209555_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Retoques"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-5_hu8ff8a085494b8ea72c88cda65b079437_209555_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Retoques" title="Retoques" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-6_hu9b73f12d4f6d95d46b0fa56607af86fa_250190_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Retoques"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-6_hu9b73f12d4f6d95d46b0fa56607af86fa_250190_200x150_fit_q90_h2_box.webp" width="200" height="112" alt="Retoques" title="Retoques" class="&#34; " loading="lazy"></a></p>
</figure>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-7_hu8f78763becfcf684ff5a7f14074dd749_218582_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Retoques"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-7_hu8f78763becfcf684ff5a7f14074dd749_218582_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Retoques" title="Retoques" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-8_hu4af7a117a89c293a842155ace7e2d0be_228481_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Retoques"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-retoques-8_hu4af7a117a89c293a842155ace7e2d0be_228481_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Retoques" title="Retoques" class="&#34; " loading="lazy"></a></p>
<figcaption>Retoques</figcaption>
</figure>
</div>
<h4 id="papelera-de-reciclaje">Papelera de reciclaje</h4>
<p>Eliminar un archivo es una operación destructiva y si se realiza por error la recuperación del archivo y su contenido no es posible sin herramientas especializadas que no son de uso habitual. Para evitar errores y poder recuperar los archivos si más tarde se cambia de opinión los entornos de escritorio ofrecen el concepto de papelera de reciclaje.</p>
<p>Los archivos antes de ser eliminados de forma definitiva se envían a la papelera de reciclaje dando una segunda oportunidad de restaurarlos. La eliminación definitiva la puede realizar el usuario al vaciar el contenido de la papelera de reciclaje, en GNOME también es posible programar la eliminación al cabo de ciertos días configurable en la sección <em>Privacidad &gt; Histórico de archivos</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-papelera-de-reciclaje-1_hu9409e9fa0114bca9fa7be50a3266e92f_218890_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Papelera de reciclaje"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-papelera-de-reciclaje-1_hu9409e9fa0114bca9fa7be50a3266e92f_218890_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Papelera de reciclaje" title="Papelera de reciclaje" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-papelera-de-reciclaje-2_hu122142115b70fcd119252b729d35d804_204765_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Papelera de reciclaje"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-papelera-de-reciclaje-2_hu122142115b70fcd119252b729d35d804_204765_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Papelera de reciclaje" title="Papelera de reciclaje" class="&#34; " loading="lazy"></a></p>
<figcaption>Papelera de reciclaje</figcaption>
</figure>
</div>
<h3 id="aplicaciones-integradas-de-gnome">Aplicaciones integradas de GNOME</h3>
<p>Junto al sistema de ventanas y escritorio se proporcionan una amplia colección de aplicaciones que cubren las necesidades de cualquier usuario al menos en necesidades básicas con la que habitualmente no es necesario recurrir a instalar aplicaciones adicionales de terceros.</p>
<p>Una de las propiedades de estas aplicaciones desarrolladas junto al entorno de escritorio es que todas siguen la misma guía de estilos de interacción, de modo que todas tienen el mismo aspecto y formas de interacción. Esto hace del escritorio una experiencia consistente y uniforme independientemente de cualquier aplicación que se use. El usuario no tiene que aprender una forma distinta de funcionamiento en cada aplicación.</p>
<p><a href="https://picodotdev.github.io/blog-bitix/2020/02/las-aplicaciones-integradas-del-entorno-de-escritorio-gnome/">Las aplicaciones integradas del entorno de escritorio GNOME</a> son las siguientes:</p>
<ul>
<li>Archivos</li>
<li>Navegador web</li>
<li>Calculadora</li>
<li>Fotos</li>
<li>Visor de documentos</li>
<li>Música</li>
<li>Video</li>
<li>Editor de texto</li>
<li>Captura de pantalla</li>
<li>Renombrar archivos</li>
<li>Tipografías</li>
<li>Calendario</li>
<li>Configuración</li>
<li>Software</li>
<li>Terminal (y Console)</li>
<li>Juegos</li>
<li>Aplicación webcam</li>
<li>Monitor del sistema</li>
<li>Discos</li>
<li>Gestor de correo electrónico</li>
<li>Cajas (virtualización)</li>
<li>Meteorología</li>
<li>Mapas</li>
<li>Grabadora de sonidos</li>
<li>Documentos</li>
<li>Libros</li>
<li>Contactos</li>
<li>Relojes</li>
<li>Retoques</li>
</ul>
<p>La siguiente galería de imágenes muestra varias de las aplicaciones en su aspecto visual y parte de las funcionalidades que ofrecen.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-aplicaciones-1_hua84de20eaa0016cb162c295616aadf00_197228_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Aplicaciones"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-aplicaciones-1_hua84de20eaa0016cb162c295616aadf00_197228_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Aplicaciones" title="Aplicaciones" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-aplicaciones-2_huc22c4c39192a01648f165c1e17ecb090_181769_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Aplicaciones"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-aplicaciones-2_huc22c4c39192a01648f165c1e17ecb090_181769_300x200_fit_q90_h2_box.webp" width="300" height="169" alt="Aplicaciones" title="Aplicaciones" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-aplicaciones-3_hu7c7c14290db2c9761ebed4476a760d76_590115_2560x1440_fit_q90_h2_box.webp" data-gallery="" title="Aplicaciones"><img src="https://picodotdev.github.io/blog-bitix/2022/11/el-entorno-de-escritorio-gnome-simple-elegante-y-completo/images/gnome-aplicaciones-3_hu7c7c14290db2c9761ebed4476a760d76_590115_300x200_fit_q90_h2_box.webp" width="300" height="168" alt="Aplicaciones" title="Aplicaciones" class="&#34; " loading="lazy"></a></p>
<figcaption>Aplicaciones</figcaption>
</figure>
</div>
<h3 id="otras-aplicaciones-para-gnome-y-aplicaciones-de-terceros">Otras aplicaciones para GNOME y aplicaciones de terceros</h3>
<p>Si la colección de aplicaciones integradas no es suficiente y se requieren funcionalidades más avanzadas hay desarrolladores que ofrecen sus aplicaciones y funcionan en el entorno de escritorio GNOME.</p>
<p>En las aplicaciones de terceros hay que diferenciar dos grupos, las que siguen las normas de estilos de GNOME, que forman <a href="https://circle.gnome.org/">el círculo de aplicaciones de GNOME</a>, y otras que siguen sus propios estilos.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/11/guardar-contrasenas-de-forma-segura-con-keepassxc/">Guardar contraseñas de forma segura con KeePassXC</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2019/11/gestionar-biblioteca-y-convertir-entre-formatos-de-libros-electronicos-con-calibre/">Gestionar biblioteca y convertir entre formatos de libros electrónicos con Calibre</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2018/11/flatpak-distribucion-e-instalacion-de-programas-de-escritorio-en-las-distribuciones-gnu-linux/">Flatpak, distribución e instalación de programas de escritorio en las distribuciones GNU/Linux</a></li>
</ul>
<p>Para cada una de ellas suele haber varias opciones entre las que elegir que pueden ser instaladas mediante el gestor de paquetes de la distribución o mediante el sistema de distribución de software independiente de la distribución Flatpak.</p>
<ul>
<li>Colección ofimática (<a href="https://www.libreoffice.org/">LibreOffice</a>, <a href="https://www.onlyoffice.com/es/">OnlyOffice</a>)</li>
<li>Editor de retoque fotográfico (<a href="https://www.gimp.org/">GIMP</a>)</li>
<li>Gestor de contraseñas (<a href="https://keepassxc.org/">KeePassXC</a>)</li>
<li>Editor de texto (<a href="https://code.visualstudio.com/">Visual Studio Code</a>)</li>
<li>Gestor de libros digitales (<a href="https://calibre-ebook.com/">Calibre</a>)</li>
<li>Navegador web (<a href="https://www.mozilla.org/es-ES/firefox/new/">Firefox</a>)</li>
<li>Descargas torrent (<a href="https://flathub.org/apps/details/de.haeckerfelix.Fragments">Fragments</a>, <a href="https://transmissionbt.com/">Transmission</a>)</li>
<li>Reproductor de música (<a href="https://flathub.org/apps/details/io.bassi.Amberol">Amberol</a>)</li>
<li>Entorno integrado de desarrollo (<a href="https://www.jetbrains.com/idea/">IntelliJ</a>)</li>
</ul>
<p>Para cada necesidad distinta es muy probable que exista no solo una sino varias aplicaciones específicas, en GNU/Linux además es posible que exista una opción sin costes de licencia y sea fácilmente instalable en formato Flatpak usando la aplicación <em>Software</em>.</p>
<h3 id="análisis-de-gnome-en-vídeo">Análisis de GNOME en vídeo</h3>
<p>Las imágenes estáticas de este artículo no muestran el escritorio de GNOME en funcionamiento, las animaciones su fluidez. En varios videos de <a href="https://www.youtube.com/">YouTube</a> hay guías en vídeo del entorno de escritorio asi como las novedades y cambios de la última versión.</p>
<div class="media media-video">
  <iframe width="640" height="360" src="https://www.youtube.com/embed/n89mfZ3-Xbk" frameborder="0" class="lozad" allowfullscreen></iframe>
</div>
<div class="media media-video">
  <iframe width="640" height="360" src="https://www.youtube.com/embed/GtvbT_p0HMk" frameborder="0" class="lozad" allowfullscreen></iframe>
</div>
<div class="media media-video">
  <iframe width="640" height="360" src="https://www.youtube.com/embed/xauLrdxo-Qk" frameborder="0" class="lozad" allowfullscreen></iframe>
</div>
]]>
        </content>
        
            
                <category term="gnu-linux"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2022/11/realizar-peticiones-a-apis-con-herramientas-de-linea-comandos-e-interfaz-grafica/</id>
        <title>Realizar peticiones a APIs con herramientas de línea comandos e interfaz gráfica</title>
        <updated>2022-11-03T23:00:00+02:00</updated>
        <published>2022-11-03T23:00:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2022/11/realizar-peticiones-a-apis-con-herramientas-de-linea-comandos-e-interfaz-grafica/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>El comando curl es la herramienta de línea de comandos para realizar cualquier petición que requiera probar un <em>endpoint</em> de una API o web que utilice el protocolo HTTP, tiene opciones para cualquier petición que sea requerida. Aunque curl es muy versátil y completa es una herramienta de línea de comandos sin algunas otras funcionalidades que las aplicaciones con interfaz gráfica son capaces de proporcionar. Postman es una aplicación con interfaz gráfica que cubre parte de las funcionalidades de curl y la mayoría que habitualmente un desarrollador necesita para probar una API, permite guardar colecciones y compartirlas con otros miembros de equipo de desarrollo asi como entornos y otras funcionalidades. Postman es la herramienta más conocida en su categoría y tiene una licencia comercial en base al numero de miembros de equipo que no es barata. Finalmente, Hoppscotch es una herramienta alternativa y equivalente a Postman de código abierto que no tiene coste de licencia y ofrece la mayoría de funcionalidades importantes como para sustituir a Postman.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/hoppscotch.svg" width="200" height="200" alt="Hoppscotch" title="Hoppscotch" class="" loading="false&#34;"></p>
</div>
<p>Las aplicaciones monolíticas son más simples y más sencillas de programar, la llamada de un módulo a otro de una aplicación consiste simplemente en una invocación de un método, sin embargo tiene sus propios problemas.</p>
<p>Las aplicaciones compuestas por múltiples microservicios, algunos de esos microservicios publica una API para que la invoquen otros microservicios. Los microservicios se comunican mediante llamadas remotas a través de la red, habitualmente utilizando el protocolo HTTP y REST aunque también es posible utilizar <a href="https://graphql.org/">GraphQL</a> y si se prefiere una API más RPC con <a href="https://grpc.io/">gRPC</a>.</p>
<p>Para desarrollar y probar pero también para conocer los datos devueltos por un microservicio en alguna de sus <em>endpoints</em> que expone en su API es muy útil utilizar alguna de las siguientes herramientas para hacer peticiones directamente al servicio sin tener que usar la interfaz web que utiliza el usuario hasta llegar al punto donde se realiza la petición.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="el-comando-curl">El comando curl</h3>
<p>La herramienta de línea de comandos curl permite realizar cualquier operación y obtener cualquier detalle tanto de la petición como de la respuesta del servidor del protocolo HTTP. Permite ver los certificados cuando se utiliza el protocolo HTTPS, las cabeceras enviadas y de respuesta de la petición, así como realizar peticiones utilizando cualquier verbo del protocolo HTTP.</p>
<p>El comando curl permite realizar una petición sin tener que implementar en código la llamada que se quiera probar. Cómo es un comando, no una aplicación, no permite guardar la colección de peticiones ni compartir con otros miembros del equipo de desarrollo una colección de peticiones ni mantener sincronizadas las colecciones y variables para los diferentes entornos de una aplicación.</p>
<p>Es posible utilizar un repositorio de código fuente como <a href="https://git-scm.com/">Git</a> para guardar, compartir y mantener sincronizadas las colecciones peticiones pero el comando curl no ofrece ningún soporte para esto ni para utilizar variables y datos para diferentes entornos.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ curl -v https://picodotdev.github.io/blog-bitix/&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>curl.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span><span class="lnt">43&#10;</span><span class="lnt">44&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-plain" data-lang="plain"><span class="line"><span class="cl">...&#10;</span></span><span class="line"><span class="cl">&gt; GET /blog-bitix/ HTTP/2&#10;</span></span><span class="line"><span class="cl">&gt; Host: picodotdev.github.io&#10;</span></span><span class="line"><span class="cl">&gt; user-agent: curl/7.86.0&#10;</span></span><span class="line"><span class="cl">&gt; accept: */*&#10;</span></span><span class="line"><span class="cl">&gt; &#10;</span></span><span class="line"><span class="cl">* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):&#10;</span></span><span class="line"><span class="cl">&lt; HTTP/2 200 &#10;</span></span><span class="line"><span class="cl">&lt; server: GitHub.com&#10;</span></span><span class="line"><span class="cl">&lt; content-type: text/html; charset=utf-8&#10;</span></span><span class="line"><span class="cl">&lt; permissions-policy: interest-cohort=()&#10;</span></span><span class="line"><span class="cl">&lt; last-modified: Sat, 29 Oct 2022 03:46:53 GMT&#10;</span></span><span class="line"><span class="cl">&lt; access-control-allow-origin: *&#10;</span></span><span class="line"><span class="cl">&lt; etag: &#34;635ca22d-88fd&#34;&#10;</span></span><span class="line"><span class="cl">&lt; expires: Thu, 03 Nov 2022 22:08:53 GMT&#10;</span></span><span class="line"><span class="cl">&lt; cache-control: max-age=600&#10;</span></span><span class="line"><span class="cl">&lt; x-proxy-cache: MISS&#10;</span></span><span class="line"><span class="cl">&lt; x-github-request-id: 8B94:479F:70D593:739994:6364399D&#10;</span></span><span class="line"><span class="cl">&lt; accept-ranges: bytes&#10;</span></span><span class="line"><span class="cl">&lt; date: Thu, 03 Nov 2022 21:58:53 GMT&#10;</span></span><span class="line"><span class="cl">&lt; via: 1.1 varnish&#10;</span></span><span class="line"><span class="cl">&lt; age: 0&#10;</span></span><span class="line"><span class="cl">&lt; x-served-by: cache-mad22067-MAD&#10;</span></span><span class="line"><span class="cl">&lt; x-cache: MISS&#10;</span></span><span class="line"><span class="cl">&lt; x-cache-hits: 0&#10;</span></span><span class="line"><span class="cl">&lt; x-timer: S1667512734.552326,VS0,VE132&#10;</span></span><span class="line"><span class="cl">&lt; vary: Accept-Encoding&#10;</span></span><span class="line"><span class="cl">&lt; x-fastly-request-id: 3c819d3e28b1a87d6c2f80b4606c3530bcc35fbe&#10;</span></span><span class="line"><span class="cl">&lt; content-length: 35069&#10;</span></span><span class="line"><span class="cl">&lt; &#10;</span></span><span class="line"><span class="cl">&lt;!DOCTYPE html&gt;&#10;</span></span><span class="line"><span class="cl">&lt;html lang=&#34;es&#34;&gt;&#10;</span></span><span class="line"><span class="cl">&lt;head&gt;&#10;</span></span><span class="line"><span class="cl">	&lt;meta name=&#34;generator&#34; content=&#34;Hugo 0.102.3&#34; /&gt;&#10;</span></span><span class="line"><span class="cl">  &lt;meta name=&#34;base&#34; href=&#34;https://picodotdev.github.io/blog-bitix/blog-bitix/&#34;&gt;&#10;</span></span><span class="line"><span class="cl">  &lt;meta http-equiv=&#34;content-type&#34; content=&#34;text/html; charset=utf-8&#34;&gt;&#10;</span></span><span class="line"><span class="cl">  &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1&#34;&gt;&#10;</span></span><span class="line"><span class="cl">  &lt;meta name=&#34;author&#34; content=&#34;picodotdev&#34;&gt;&#10;</span></span><span class="line"><span class="cl">  &lt;meta name=&#34;keywords&#34; content=&#34;java, programacion, software, hardware, tapestry, software libre, gnu, linux, gnu/linux, unix, arch, arch linux, web, html, css, javascript, tutorial, guía, básico, avanzado, análisis, tecnología, juegos, productos&#34;&gt;&#10;</span></span><span class="line"><span class="cl">  &lt;meta name=&#34;description&#34; content=&#34;Blog sobre al lenguaje de programación Java y la distribución GNU/Linux que uso habitualmente, Arch Linux, lo que aprendo sobre el software libre, la programación web y otros temas relacionados con la tecnología y la informática. El contenido puede contener trazas de asuntos fuera de tema.&#34;&gt;&#10;</span></span><span class="line"><span class="cl">  &lt;meta name=&#34;theme-color&#34; content=&#34;#FFFFFF&#34;/&gt;&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">  &lt;title&gt;Blog Bitix&lt;/title&gt;&#10;</span></span><span class="line"><span class="cl">...</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>curl.out</span>
    </div>
</div>
<h3 id="postman">Postman</h3>
<p>La aplicación con interfaz gráfica <a href="https://www.postman.com/">Postman</a> realiza en gran medida las mismas funciones que el comando curl pero con una aplicación de escritorio y con interfaz gráfica. Permite crear peticiones, añadir cabeceras en las peticiones y ver los resultados, cabeceras y código de estado devueltos en las peticiones HTTP.</p>
<p>Adicionalmente ofrece otras funcionalidades como soporte para trabajar en equipos compuesto por varios desarrolladores para compartir colecciones y entornos y mantenerlos sincronizados entre los diferentes miembros del equipo. Otras funciones que tiene es la de poder ejecutar <em>scripts</em> de código antes de realizar la petición para calcular algún dato y enviarlo en la petición. Los entornos permiten crear colecciones de variables y cambiando de un entorno a otro utilizando en las peticiones diferentes valores, por ejemplo las credenciales de autorización para invocar un <em>endpoint</em>.</p>
<p>Postman es una herramienta muy conocida y utilizada, ofrece una aplicación de escritorio para los diferentes sistemas operativos incluyendo <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> como una aplicación <a href="https://flatpak.org/">Flatpak</a>. Sin embargo, no es gratuita y en entornos profesionales requiere una licencia de uso que está en función del número de usuarios que la utilizan. Es cara y tiene un coste significativo para una herramienta aunque útil cuando se usa es una herramienta que se usa ocasionalmente.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/realizar-peticiones-a-apis-con-herramientas-de-linea-comandos-e-interfaz-grafica/images/postman_hu96ea76b13850717ac94d4c1d6cc66d76_133523_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Postman"><img src="https://picodotdev.github.io/blog-bitix/2022/11/realizar-peticiones-a-apis-con-herramientas-de-linea-comandos-e-interfaz-grafica/images/postman_hu96ea76b13850717ac94d4c1d6cc66d76_133523_650x450_fit_q90_h2_box_3.webp" width="583" height="450" alt="Postman" title="Postman" class="&#34; " loading="lazy"></a></p>
<figcaption>Postman</figcaption>
</figure>
</div>
<h3 id="hoppscotch-alternativa-a-postman">Hoppscotch, alternativa a Postman</h3>
<p>Alternativas a Postman hay varias algunas como complementos para el editor de texto y código <a href="https://code.visualstudio.com/">Visual Studio Code</a>. De las alternativas a Postman la más parecida y que tiene funcionalidades equivalentes y suficiente como para reemplazarla es <a href="https://hoppscotch.io/">Hoppscotch</a>.</p>
<p>Al igual que Postman la aplicación Hoppscotch es una aplicación destinada a realizar peticiones a servicios utilizando HTTP y soportando otros protocolos como GraphQL, Websockets y MQTT. Una de las ventajas de Hoppscotch sobre Postman está en su licencia ya que es de código abierto y sin coste de licencia. La interfaz de usuario de Hoppscotch está muy cuidada y es similar a la de Postman permitiendo crear peticiones junto a sus cabeceras así como ver el resultado devuelto, cabeceras y código de estado.</p>
<p>Entre las funcionalidades que ofrece Hoppscotch están:</p>
<ul>
<li>Posibilidad de trabajar en equipos y compartir colecciones</li>
<li>Scripts previos a la petición</li>
<li>Soporta múltiples métodos de autenticación</li>
<li>Entornos y variables</li>
<li>Posibilidad de mostrar el curl e importar el curl</li>
<li>Importar desde OpenAPI y Postman, exportar como JSON</li>
<li>Posibilidad de ejecutarlo desde su web, en local como un contenedor <a href="https://www.docker.com/">Docker</a> o paquete npm</li>
</ul>
<p>Aunque Hoppscotch tiene una licencia sin coste los desarrolladores ofrecen ser patrocinados en <a href="https://github.com/hoppscotch/hoppscotch">su repositorio de GitHub</a> para seguir realizando cambios e implementando mejoras. Si es útil y se utiliza en un entorno profesional se anima a realizar en la medida de lo posible una contribución económica a los desarrolladores.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/11/realizar-peticiones-a-apis-con-herramientas-de-linea-comandos-e-interfaz-grafica/images/hoppscotch_hu5acee9062fc6b8ef34cd56148770b1cc_170461_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Hoppscotch"><img src="https://picodotdev.github.io/blog-bitix/2022/11/realizar-peticiones-a-apis-con-herramientas-de-linea-comandos-e-interfaz-grafica/images/hoppscotch_hu5acee9062fc6b8ef34cd56148770b1cc_170461_650x450_fit_q90_h2_box_3.webp" width="584" height="450" alt="Hoppscotch" title="Hoppscotch" class="&#34; " loading="lazy"></a></p>
<figcaption>Hoppscotch</figcaption>
</figure>
</div>
]]>
        </content>
        
            
                <category term="planeta-codigo"/>
            
                <category term="programacion"/>
            
                <category term="software"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2022/10/funcionamiento-y-precauciones-a-seguir-en-los-servicios-de-compraventa-de-productos-de-segunda-mano-como-wallapop/</id>
        <title>Funcionamiento y precauciones a seguir en los servicios de compraventa de productos de segunda mano como Wallapop</title>
        <updated>2022-10-28T18:00:00+02:00</updated>
        <published>2022-10-28T18:00:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2022/10/funcionamiento-y-precauciones-a-seguir-en-los-servicios-de-compraventa-de-productos-de-segunda-mano-como-wallapop/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Los servicios de compraventa de productos de segunda mano son una forma de deshacerse de los productos que ya no se usan, sacarles una compensación económica y darles otra nueva vida a productos  que tal vez fuesen a acabar en la basura de otro modo. Incluso productos que no están en buen estado hay gente capaz de preguntar por ellos. Hasta ahora no he tenido ningún problema grave vendiendo productos de segunda mano que ya no necesito pero en algún momento si he tenido duda de una posible estafa aún tomando las precauciones aconsejadas al usar un servicio de intercambio de segunda mano, en productos de poco valor no es muy importante pero a partir de una cierta cantidad requiere más precaución y en todo momento tener cuidado de no caer en otro tipo de estafas en la que estos servicios se utilizan como una forma de ponerse en contacto con las víctimas.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/wallapop.svg" width="200" height="200" alt="Wallapop" title="Wallapop" class="" loading="false&#34;"></p>
</div>
<p>A lo largo del tiempo es casi seguro que algún producto que se tiene ya no se le da uso o hay algún producto que ya no se quiere. Una buena opción es dárselo a alguien conocido y le siga dando una segunda vida a un producto que es probable siga funcionando perfectamente. A veces dárselo no se conoce a nadie personalmente que lo pueda usar o lo quiera.</p>
<p>Para no tirar a la basura estos productos y obtener una pequeña compensación económica por el valor de los mismos hay muchas páginas de intercambio de productos de segunda mano. Páginas que permiten a los vendedores deshacerse de los productos que ya no se necesitan y a compradores permiten encontrar productos casi nuevos en algunos casos con una importante rebaja sobre el precio original, productos de coleccionismo que es difícil encontrar de otra manera o permite encontrar un mayor número de ellos.</p>
<p>Quizá la página más conocida de intercambio de segunda mano es <a href="https://www.ebay.es/">eBay</a> con usuarios en seguramente todos los países. Otras empresas de segunda mano son nacionales o de unos pocos países, en el caso de España están <a href="https://es.wallapop.com/">Wallapop</a>, <a href="https://www.milanuncios.com">Milanuncios</a> y <a href="https://www.vinted.es/">Vinted</a> entre las más conocidas.</p>
<p>Como usuario de Wallapop mi experiencia ha sido buena y con este servicio he vendido muchos productos que no quería, incluso productos en no muy buen estado sacando algunos euros por ellos y haciendo que otras personas les den a los objetos una nueva vida de algo que si no iba ir a la basura o no le iba a dar uso.</p>
<p>Aunque no he tenido ningún problema grave hay que seguir unas recomendaciones para no ser víctima de una estafa y evitar problemas que es aplicable a cualquier página de segunda mano.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="funcionamiento-de-wallapop-y-páginas-de-segunda-mano">Funcionamiento de Wallapop y páginas de segunda mano</h3>
<p>Los servicios de intercambio generalmente de segunda mano son un lugar de encuentro entre vendedores y compradores. Por un lado los vendedores ponen el anuncio de sus productos que las páginas muestran como tablones de anuncios con una descripción y su estado, un precio y adjuntando varias fotos reales del producto. Los compradores tienen el catálogo completo de los productos de los vendedores y con la posibilidad de hacer búsquedas por categoría, precio, y distancia entre el vendedor y comprador.</p>
<p>En los términos de uso de estas páginas se detalla que el intercambio es un acuerdo entre el comprador y vendedor, ambos usuarios del servicio generalmente usuarios no profesionales. Wallapop no revisa los productos ni garantiza el estado de los productos y que el anuncio corresponda con lo detallado.</p>
<p>En caso de problemas o desacuerdos entre el comprador y vendedor están las disputas pero ellos solo median en el conflicto y la disputa se puede resolver de forma desfavorable a lo que consideramos justo.</p>
<h4 id="negociación-del-precio">Negociación del precio</h4>
<p>Los servicios de intercambio ofrecen una aplicación de mensajería para que el comprador pueda ponerse en contacto con el vendedor e iniciar una conversación para aclarar cualquier duda que haya y llegar a un acuerdo en el precio.</p>
<p>Dado que los productos son de segunda mano el precio lo fijan los vendedores pero como no es un producto nuevo ni vendido en una tienda el precio y valor de producto se negocia entre ambas partes. El vendedor inicialmente pide un precio pero es habitual conseguir una rebaja con la intención de llegar a un acuerdo dependiendo de las ganas del vendedor de deshacerse del producto.</p>
<p>Es habitual que los compradores intenten regatear unos euros en el precio del producto, para evitarlo como vendedor es posible indicar en el anuncio que el precio no es negociable. En el precio un vendedor el libre de pedir el precio que quiera pero si es muy alto es seguro que no habrá gente interesada aún asi lo aconsejable es poner un precio e ir bajando paulatinamente en función de la gente interesada, ganas de deshacerse del producto y el precio al que se están vendiendo otros productos similares. Los compradores pueden hacer ofertas y algunas son ridículas para el producto anunciado, para no recibir este tipo de formas por ello los vendedores indican que el precio no es negociable si al que lo han puesto es lo mínimo que aceptan.</p>
<p>Al iniciar una negociación es recomendable leer detalladamente la descripción del producto, hacer todas las preguntas que se consideren al comprador y si es necesario pedir al vendedor que ponga nuevas fotos que muestren mejor el producto. Las preguntas son principalmente para evitar sorpresas al recibir el producto pero también para evaluar la confianza que se le concede al vendedor.</p>
<p>Una vez llegado a un acuerdo en el precio, hay que negociar también la forma de intercambio que puede ser físicamente en mano o a través de envíos nacionales en los que el servicio de intercambio ofrece ayuda para realizar el envío con una comisión que proporciona un seguro y los costes del envío añadida al precio del producto que paga el comprador.</p>
<p>Con todo acordado el vendedor ha de preparar el paquete y entregarlo en un punto de recogida en el plazo de unos días. Wallapop por ejemplo ofrece Correos como servicio de mensajería que no tiene coste para el vendedor y la entrega es tan simple como presentar un código de envío y seguimiento que proporciona Wallapop una vez realizada formalizada la compra por el comprador y aceptada por el vendedor.</p>
<p>Con el código de seguimiento tanto el comprador como el vendedor pueden conocer el estado del envío y su entrega.</p>
<h4 id="garantías">Garantías</h4>
<p>Para dar seguridad a comprador y vendedor en los envíos Wallapop hace de intermediario en el pago, por un lado cobra y retiene el dinero del comprador hasta que este confirme el estado del producto de acuerdo a lo descrito en el anuncio y el vendedor también evita problemas y tiene una forma más cómoda de realizar el intercambio económico. En caso de un problema en la transacción al comprador se le devuelve el dinero y la disputa no se resuelve a favor del vendedor.</p>
<h4 id="disputas">Disputas</h4>
<p>Al recibir el producto el comprador debe revisar el producto, confirmar que está correcto o abrir una disputa antes de 48 horas que da como plazo Wallapop. Pasado el cual el producto se considerará correcto y se liberará el dinero al vendedor.</p>
<p>En caso de cualquier problema lo primero es intentar aclarar con el comprador o vendedor de forma amistosa el problema que haya surgido mediante el <em>chat</em> si se trata de un envío. Si no se llega a un acuerdo el comprador tiene 48 desde la recepción el paquete para abrir la disputa en la que detalla el caso y aportará sus pruebas como fotos, ya sea porque el producto recibido no concuerda con lo anunciado por el vendedor o porque en los casos más graves se trate de una estafa.</p>
<p>Una vez abierta la disputa el vendedor tiene dos opciones para resolver la disputa, aceptar la devolución o escalar la disputa a Wallapop para que esta medie en el conflicto. Si se acepta la devolución el comprador ha de devolver el producto en las condiciones originales realizando un nuevo envío, una vez el vendedor lo reciba y revise el comprador recibe la devolución de su dinero.</p>
<p>Si el vendedor no está de acuerdo con las alegaciones del comprador la segunda opción que tiene es escalar la disputa para que Wallapop decida. Las disputas se resuelven de dos formas, una dando la razón al comprador y cursando una devolución o otra dando la razón al vendedor lo que implica finalizar la transacción y liberando el dinero negociado al vendedor.</p>
<p>La resolución de una disputa la realiza una persona o agente de Wallapop, es un proceso manual y requiere la revisión tanto del <em>chat</em> como de los argumentos expuestos y pruebas aportadas por ambas partes. Si se resuelve a favor del comprador ha de hacer la devolución, si se resuelve a favor del vendedor la transacción finaliza y el dinero acordado se libera en el monedero del vendedor.</p>
<p>Dado que las disputas las revisa de forma manual un agente de Wallapop son lentas llegando a varias semanas para obtener una contestación y resolución por ello si es posible es mejor resolver el caso de forma amistosa.</p>
<p>Las disputas se abren desde la aplicación móvil. Adicionalmente en el caso de Wallapop ofrece varias formas de contacto en caso de algún problema adicionalmente a las disputas, mediante su cuenta de Twitter <a href="https://twitter.com/wallapop">@wallapop</a> y un <a href="https://ayuda.wallapop.com/hc/es-es/requests/new">formulario de contacto de Wallapop</a> en su <a href="https://ayuda.wallapop.com/hc/es-es">Centro de ayuda</a> en la que proporcionar un correo electrónico para continuar el caso mediante correo electrónico.</p>
<h3 id="seguridad-al-usar-wallapop">Seguridad al usar Wallapop</h3>
<p>Si bien en la mayoría de los casos y en mi experiencia las transacciones finalizan correctamente hay que mantener algunas precauciones al usar servicios de intercambio de segunda mano para evitar estafas y problemas.</p>
<h4 id="transacción-en-mano">Transacción en mano</h4>
<p>En las transacciones en mano los servicios de segunda mano solo ponen en contacto a vendedor y comprador. Estos si están en la misma ciudad pueden quedar en un lugar físicamente en la que realizar el intercambio de dinero por el producto en mano sin intermediación en el pago por parte de Wallapop, aunque en mano también pueden hacer de intermediario en el pago.</p>
<p>Quizá la mayor precaución es quedar preferentemente en un lugar público, transitado y fácilmente reconocible como una parada de metro o un edificio público conocido, al fin y al cabo se está quedando con un desconocido y salvo que el producto lo requiera por su volumen como un mueble es preferible no quedar en un domicilio.</p>
<h4 id="envíos">Envíos</h4>
<p>En los envíos es seguramente la forma en la que pueden surgir más problemas ya que el comprador ha de confiar en el vendedor de que enviará un producto en el estado descrito en el anuncio y el vendedor ha de confiar que el comprador no va a alegar ningún problema con el producto.</p>
<h4 id="como-comprador">Como comprador</h4>
<p>Las transacciones entre comprador y vendedor en los envíos requieren confianza y buena fe entre ambas partes. Las plataformas de segunda mano ofrecen información para dar confianza e información a ambos.</p>
<p>Como comprador se ha de comprobar el perfil del vendedor como que no sea una cuenta de reciente creación, que tenga información verificada como teléfono o email, que tenga información de su ubicación, leer las opiniones y valoraciones de otros usuarios de transacciones anteriores.</p>
<p>En cuanto al producto este ha de estar ampliamente detallado, con fotos reales del producto que muestre su estado y posesión por el vendedor y no de catálogo de las que proporciona el fabricante.</p>
<p>En caso de cualquier duda no aclarada en la descripción del anuncio o fotos el <em>chat</em> permite preguntar al vendedor acerca del producto y si las fotos no muestran algún detalle de interés se puede solicitar al vendedor que añade nuevas fotos mostrando los detalles.</p>
<p>Una vez con la información del vendedor y del anuncio, el <em>chat</em> además de para llegar a un acuerdo permite también evaluar al vendedor con la conversación que se mantenga si es de confianza respondiendo rápido, con buena comunicación y proporcionando la información que se le pida.</p>
<h4 id="como-vendedor">Como vendedor</h4>
<p>Como vendedor se ha de comprobar igualmente el perfil del comprador como que no sea una cuenta de reciente creación, que tenga información verificada como teléfono o email, que tenga información de su ubicación, leer las opiniones y valoraciones de otros usuarios de transacciones anteriores.</p>
<p>Al mantener la conversación con el comprador no está demás preguntarle explícitamente si tiene alguna duda que quiera aclarar para que una vez reciba el producto no se lleve una sorpresa de algo que desconocía y no pueda justificarse de esta forma en caso de desacuerdo al recibir el producto.</p>
<p>Al formalizar la compra y recibir la notificación de que la venta se ha realizado hay que comprobar que el nombre del perfil concuerde con el del destinatario, comprobar que el código postal del envío concuerde con la ubicación del usuario. Hasta el momento de entregar el paquete a la empresa de mensajería hay opción de cancelar el envío pero una vez entregado ya no es posible para el vendedor cancelar la compra y envío.</p>
<p>Como vendedor se quiere vender un producto pero se ha de asegurar de que no es una estafa, en productos de poco precio no importan tanto pero en productos a partir de cierta cantidad y demandados como los productos tecnológicos es mejor ser precavido. En caso de duda de confianza mejor no venderlo por mucho que se quiera venderlo.</p>
<h4 id="problemas-típicos-a-evitar">Problemas típicos a evitar</h4>
<p>Los servicios de intercambio de artículos de segunda mano en esencia son un medio de poner en contacto a un vendedor y comprador que no se conocen entre ellos y realizar un intercambio incluso realizando un envío, operación que incluye el intercambio de dinero. A pesar de que los servicios establecen medidas de seguridad y dan consejos de uso hay que tener algunas precauciones a la hora de estos servicios para evitar estafas.</p>
<p>El problema más grave es que el vendedor o comprador hagan pagos fuera de los medios que ofrece el servicio de intercambio de segunda mano, ya sea a través de transferencia bancaria o cualquier otra forma, o sean víctimas de un ataque de <em>phishing</em> que les roben sus credenciales de la tarjeta de débito o cuenta bancaria. Los estafadores pueden utilizar cualquier excusa para solicitar un pago fuera del servicio, como que la empresa de mensajería solicita un pago. Al mismo tiempo cualquier intento de mantener una conversación fuera de <em>chat</em> debe ser un punto de alerta.</p>
<p>Otros problemas son que como comprador el vendedor envíe cualquier otra cosa al producto de anuncio de peso similar pero de cero valor. Como vendedor el problema puede surgir cuando el comprador abre una disputa por motivos que no son ciertos e intenta conseguir la devolución momento en el que igualmente devuelve cualquier otra cosa de cero valor pero no el producto original con lo que el vendedor corre el riesgo de quedarse sin el producto. Como comprador si el vendedor envía un producto que no se ajusta a lo detallado en el anuncio y en la conversación mantenida en el <em>chat</em> hay que abrir una disputa reuniendo y presentando en ella las pruebas del <em>chat</em> y fotos del producto para conseguir una devolución y obtener una devolución del importe.</p>
<p>Para evitar estos graves problemas hay que tomar algunas precauciones. Mantén una conversación con el comprador o vendedor dentro del <em>chat</em> que ofrece el servicio para que en caso de problema el servicio pueda revisarlo, no realizar ninguna comunicación fuera del <em>chat</em> ni fuera de los cauces que proporciona Wallapop con su aplicación. Tampoco realizar ningún pago fuera de los medios que ofrece el servicio de intercambio. No dar ninguna información personal que incluye dirección, DNI y teléfono.</p>
<p>En los problemas menores están que como vendedor los compradores al contactar ofrecen un precio ridículo para el producto o que intentan regatear unos euros en algo que vale menos de 10. En estos casos basta con poner en el anuncio que el precio no es negociable o simplemente decirles que no se acepta una oferta tan baja.</p>
<ul>
<li><a href="https://www.consumidorglobal.com/noticias/noticias-servicios/quejas-vendedores-wallapop-cambiazos-paquetes-devueltos-vacios_2283_102.html">Cambiazos y paquetes devueltos vacíos: las quejas de los vendedores de Wallapop</a></li>
<li><a href="https://www.tuexpertoapps.com/2022/02/23/que-pasa-si-compro-algo-en-wallapop-y-no-funciona/">Qué pasa si compro algo en Wallapop y no funciona</a></li>
<li><a href="https://www.xataka.com/seguridad/como-evitar-que-te-enganen-en-compras-por-internet-en-wallapop-e-ebay">Cómo evitar que te engañen en compras por Internet en Wallapop o Ebay</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2021/11/ejemplo-de-un-potencial-ataque-informatico-de-phishing-el-caso-de-el-gatico-biever/">Ejemplo de un potencial ataque informático de phishing, El caso de El Gatico Biever</a></li>
</ul>
]]>
        </content>
        
            
                <category term="opinion"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/</id>
        <title>Las funcionalidades de un service mesh en una arquitectura de microservicios</title>
        <updated>2022-10-21T20:00:00+02:00</updated>
        <published>2022-10-21T20:00:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Los monolitos son la opción más sencilla y mejor en la mayoría de casos, los microservicios solo son recomendables cuando los problemas que resuelven compensan los problemas asociados que generan, entre ellos una mayor complejidad en la infraestructura y de comunicación entre servicios que utilizan un medio con fallos, la red de comunicaciones entre diferentes computadoras. Esta mayor complejidad, mayor número de servicios y mayor probabilidad de que alguna falle requiere utilizar herramientas para en el sistema tener seguridad, observabilidad, resiliencia y control de tráfico. Estas son funcionalidades que como una capa de red para los servicios proporciona un <em>service mesh</em>.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/hashicorp-consul.svg" width="200" height="278" alt="HashiCorp Consul" title="HashiCorp Consul" class="" loading="false&#34;"></p>
</div>
<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/hashicorp.svg" width="200" height="200" alt="HashiCorp" title="HashiCorp" class="" loading="false&#34;"></p>
</div>
<p>Los sistemas basados en microservicios tienen sus ventajas como utilizar servicios independientes que pueden ser desarrollados y desplegados de forma independiente incluso por distintos equipos de desarrolladores al menos mientras solo se cambien sus detalles de implementación y mientras sus interfaces de comunicación no cambien. Otras ventajas son una mejor escalabilidad y mejor tolerancia a errores.</p>
<p>Un monolito es más que suficiente en muchos casos y los microservicios solo son necesarios en sistemas grandes y complejos formados por varios equipos de desarrollo, escalabilidad y tolerancia a fallos. Cuando tiene sentido utilizar un sistema basado en los microservicios se resuelve algunos problemas de los monolitos pero surgen otros propios de los microservicios tan o más complicados que los de los monolitos.</p>
<p>Uno de los mayores problemas de los microservicios es que el sistema es más complejo, formado por un conjunto mayor de piezas individuales que han de colaborar para proporcionar la funcionalidad global, han de tener en cuenta problemas que en las aplicaciones monolíticas no tienen, los microservicios son independientes pero se relacionan entre ellos a través de la red un medio de comunicación que es poco fiable comparado con la llamada a una función dentro de la misma computadora en un monolito.</p>
<p>Para tener bajo control las complicaciones de los microservicios son necesarias herramientas que hagan del sistema más fácil de mantener y desarrollar. Una de las herramientas específicamente desarrollada para los microservicios es <a href="https://www.consul.io/">Consul</a> de <a href="https://www.hashicorp.com/">HashiCorp</a> que proporciona varias funcionalidades como descubrimiento de servicios y un almacén compartido de información. Otra de las funcionalidades que implementa y provee Consul es el concepto de <em>service mesh</em> que proporciona seguridad, observabilidad, resiliencia y control de tráfico.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="qué-es-un-_service-mesh_">Qué es un <em>service mesh</em></h3>
<p><a href="https://developer.hashicorp.com/consul/docs/concepts/service-mesh">La definición de Consul de un <em>service mesh</em></a> es una capa de red dedicada que proporciona seguridad en la comunicación de servicio a servicio dentro y a través de la infraestructura, incluyendo el sistemas propios y entornos en la nube. Un <em>service mesh</em> es utilizado habitualmente en arquitecturas basadas en microservicios pero son útiles en cualquier escenario en que hay una comunicación por red compleja.</p>
<p>Los microservicios se comunican entre ellos formado una red distribuida, un <em>service mesh</em> es el nombre que se le da a este tipo de comunicación. En el aspecto de las herramientas de infraestructura para facilitar y dar solución a varios de los problemas de la comunicación por red un <em>service mesh</em> trata todos estos problemas y aporta soluciones.</p>
<p>En gran medida la solución a los problemas de los microservicios en un <em>service mesh</em> es implementada estableciendo un intermediario <em>proxy</em> en la comunicación entre los servicios siendo en este intermediario denominado <em>sidecar proxy</em> el que implementa la solución. Se denomina <em>sidecar proxy</em> ya que al mismo tiempo que se despliega el servicio se despliega el intermediario adicionalmente para la comunicación entre los diferentes servicios que usa y los servicios en vez de comunicarse entre ellos directamente se comunican con el <em>sidecar proxy</em>.</p>
<p>El <em>service mesh</em> a través de los <em>proxy sidecar</em> permiten delegar en la infraestructura y no en las aplicaciones varios aspectos que son necesarios resolver en un sistema basado en microservicios y todo ello de forma trasnparente y sin tener que hacer modificaciones en los microservicios más a llá de configuración de puertos.</p>
<h4 id="seguridad">Seguridad</h4>
<p>La computación en la nube de los proveedores de infraestructura como <a href="https://aws.amazon.com/es/">Amazon AWS</a>, <a href="https://cloud.google.com/">Google Cloud</a> y <a href="https://azure.microsoft.com/es-es/">Microsoft Azure</a> no dejan de ser entornos compartidos de computación donde todos aun con las medidas de seguridad y lógicas utilizan los mismos medios de red y computación. Por eso se considera que la computación en la nube utiliza un medio no confiable en el que el descubrimiento de un fallo de seguridad tan importante como <a href="https://picodotdev.github.io/blog-bitix/2018/01/explicacion-del-fallo-de-seguridad-meltdown-y-spectre-en-los-microprocesadores-intel/">el fallo de seguridad Meltdown y Spectre de los procesadores</a> aún con las medidas de mitigación implementadas es un grave problema.</p>
<p>Para proporcionar mayor seguridad en las comunicaciones de los microservicios en un medio no confiable Consul ofrece una forma de comunicación cifrada, con autenticación mutua entre ambos servicios y la gestión de la autorización en un plano lógico a nivel de servicio con el mecanismo de intenciones y no de más bajo nivel de direcciones IP, puertos y reglas de <em>firewall</em>.</p>
<p>La seguridad entre los servicios en Consul es implementada mediante el componente denominado <em>sidecar proxy</em> que hace de intermediario o <em>proxy</em> entre los dos servicios. Consul administra el <em>sidecar proxy</em> y este proporciona las funcionalidades comentadas de cifrado, autenticación mutua y autorización. Toda comunicación se realiza de forma cifrada y con autenticación mutua ningún servicio ajeno al <em>service mesh</em> puede comunicarse con sus servicios, para que un servicio externo al <em>service mesh</em> pueda comunicarse con un servicio del <em>service mesh</em> el tráfico entra por un <em>ingress gateway</em> que es un servicio dedicado a esta función.</p>
<p>Una gran característica es que todas estas funcionalidades son proporcionadas sin que los servicios sean conscientes de que realmente la comunicación la están realizando a través de los <em>sidecar proxy</em>.</p>
<p>En <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> la seguridad a nivel de red en la misma máquina en la comunicación entre el servicio y el <em>sidecar proxy</em> se protege con <em>namespaces</em> de red que proporciona Linux.</p>
<h4 id="observabilidad">Observabilidad</h4>
<p>Dado el gran número de elementos de una arquitectura de microservicios es imprescindible tener visibilidad del estado y comportamiento de cada uno de ellos. Se necesitan métricas que permitan conocer el estado normal de los servicios y en caso de obtener unas métricas diferentes saber que está ocurriendo en el sistema en su conjunto y en cada pieza individual.</p>
<p>Varias medidas de observabilidad es posible implementarlas en los propios microservicios como parte de su implementación de código, sin embargo, añadir código a cada uno de los microservicios requiere hacerlo individualmente, los hace más complicados y dependientes del lenguaje de implementación para cada uno de ellos para una funcionalidad de infraestructura que no está relacionada con la lógica de negocio que proporcionan los microservicios.</p>
<p>Por ello en la medida de lo posible es mejor delegar la observabilidad a la infraestructura que además permite aplicar la observabilidad de forma homogénea y con las mismas herramientas para todos los microservicios. Algunas métricas de observabilidad son el número de peticiones que está recibiendo un servicio por unidad de tiempo, la tasa de errores o la latencia de red en diferente percentiles.</p>
<p>Dado que todo el tráfico entre los microservicios fluye a través de los <em>sidecar</em> que hacen de <em>proxy</em> Consul es capaz de proporcionar estas métricas de forma independiente a los microservicios. Consul exporta el formato de <a href="https://prometheus.io/">Prometheus</a> las métricas, proporciona una visualización básica de las mismas y con <a href="https://grafana.com/">Grafana</a> es posible obtener visualizaciones de los datos más detalladas y complejas.</p>
<p>Para obtener el flujo completo desde que entra en el <em>service mesh</em> y fluye entre las diferentes llamadas entre los microservicios <a href="https://www.jaegertracing.io/">Jaeger</a> con <a href="https://zipkin.io/">Zipkin</a> o <a href="https://opentelemetry.io/">OpenTelemetry</a> permite obtener una foto de todos los pasos y saltos que ha tenido una petición entre los diferentes servicios.</p>
<h4 id="resiliencia">Resiliencia</h4>
<p>Dado el número de servicios y el número de instancias de cada uno de ellos y la no completa fiabilidad de un medio de red que puede fallar es necesario que los microservicios sean resilientes ante la aparición de estos fallos.</p>
<p>La resiliencia se puede implementar de forma activa donde Consul comprueba que cada servicio mediante un <em>health check</em> esté funcionando ya sea realizando una petición HTTP o TCP al servicio que si responde correctamente se considera que el servicio tiene un buen estado de funcionamiento.</p>
<p>Los <em>health check</em> no son infalibles y los microservicios para aumentar su resiliencia pueden implementar otras medidas adicionales como reintentos o <em>retries</em> realizando peticiones con la esperanza de que sean problemas temporales y en un siguiente intento funcione. Otra medida son los <em>timeout</em> para poner límites a los tiempos de espera de modo que si un microservicio tarda en responder no ocasiones fallos en otros microservicios y el sistema caiga en cascada. Estas son medidas pasivas que implementan cada microservicio.</p>
<p>Consul implementa medidas de resiliencia tanto activas como pasivas, y en caso de que una instancia de un servicio falle redirigir el tráfico a otras instancias con buen estado de salud, este enrutamiento se realiza mediante el control de tráfico.</p>
<h4 id="control-de-tráfico">Control de tráfico</h4>
<p>Al ser los microservicios independientes estos se despliegan de forma independiente mientras los cambios sean solo de implementación. Al desplegar una nueva versión de un microservicio es muy útil tener la capacidad del enrutamiento de las peticiones entre los microservicios para usar diferentes estrategias de despliegue como <em>rollout</em>, <em>canary</em>, <em>blue/green</em> y cambiar el enrutamiento.</p>
<p>Consul proporciona tres conceptos para controlar el enrutamiento entre los servicios los <em>resolvers</em> que identifican las instancias de los servicios en grupos, <em>splitters</em> que permite establecer la cantidad de tráfico que es enviada a los grupos de servicios y finalmente los <em>routers</em> que permiten mediante reglas de la petición o de la instancia del servicio a que servicio se le envía el tráfico.</p>
<h3 id="ejemplo-práctico-del-_service-mesh_-de-consul">Ejemplo práctico del <em>service mesh</em> de Consul</h3>
<p>En el libro Consul: Up &amp; Running se explica más detalladamente los puntos anteriores junto con un ejemplo con los necesarias configuraciones para Consul de cada uno de ellos utilizando <a href="https://kubernetes.io/">Kubernetes</a> y máquinas virtuales.</p>
<p>En el libro se usa simplemente Consul, en este artículo muestro la misma configuración y práctica de los conceptos comentados pero usando <a href="https://www.nomadproject.io/">Nomad</a> el orquestador de procesos de HashiCorp equivalente a Kubernetes pero más simple de usar aunque no tan nombrado como Kuberntes. Lo ejecuto dentro de una máquina virtual de <a href="https://www.virtualbox.org/">VirtualBox</a> aprovisionada y creada con <a href="https://www.vagrantup.com/">Vagrant</a> otro producto de HashiCorp.</p>
<p>El ejemplo consiste en dos procesos uno <em>frontend</em> que muestra la información de una guía de aves y un servicio de <em>backend</em> que devuelve los datos de las aves. Los procesos están empaquetados en sus imágenes de <a href="https://www.docker.com/">Docker</a>. Ambas aplicaciones se comunican mediante una API REST y permiten probar en la práctica todos los conceptos comentados.</p>
<h4 id="creación-de-la-máquina-virtual">Creación de la máquina virtual</h4>
<p>Docker es un software desarrollado para GNU/Linux que en otros sistemas no funciona de forma nativa y requiere adaptaciones y virtualización, para poder ejecutar el ejemplo en cualquier sistema operativo y no instalar nada en la máquina local más allá de VirtualBox y Vagrant se utiliza una máquina virtual que permiten crear estas dos herramientas de forma fácil.</p>
<p>El siguiente es el archivo de configuración para Vagrant de la máquina virtual que aprovisiona una distribución Ubuntu con las herramientas utilizadas en el ejemplo entre ellas Consul, Nomad, <a href="https://www.envoyproxy.io/">Envoy</a> y Docker. También se configura la cantidad de memoria asignada a la máquina virtual y la dirección IP que se le asigna.</p>
<p>Al iniciar la máquina virtual se aprovisiona, con Vagrant simplemente consiste en ejecutar el siguiente comando. Una vez iniciada se puede hacer SSH para iniciar una sesión de terminal dentro de la máquina virtual.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ vagrant up&#10;</span></span><span class="line"><span class="cl">$ vagrant ssh&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>vagrant.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span><span class="lnt">43&#10;</span><span class="lnt">44&#10;</span><span class="lnt">45&#10;</span><span class="lnt">46&#10;</span><span class="lnt">47&#10;</span><span class="lnt">48&#10;</span><span class="lnt">49&#10;</span><span class="lnt">50&#10;</span><span class="lnt">51&#10;</span><span class="lnt">52&#10;</span><span class="lnt">53&#10;</span><span class="lnt">54&#10;</span><span class="lnt">55&#10;</span><span class="lnt">56&#10;</span><span class="lnt">57&#10;</span><span class="lnt">58&#10;</span><span class="lnt">59&#10;</span><span class="lnt">60&#10;</span><span class="lnt">61&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="c1"># -*- mode: ruby -*-</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># vi: set ft=ruby :</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s2">&#34;2&#34;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">define</span> <span class="s2">&#34;ubuntu&#34;</span> <span class="k">do</span> <span class="o">|</span><span class="n">instance</span><span class="o">|</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">instance</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&#34;ubuntu/jammy64&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">instance</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&#34;private_network&#34;</span><span class="p">,</span> <span class="ss">ip</span><span class="p">:</span> <span class="s2">&#34;192.168.56.10&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">instance</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">synced_folder</span> <span class="s2">&#34;.&#34;</span><span class="p">,</span> <span class="s2">&#34;/home/vagrant/ConsulServiceMesh/&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">instance</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="ss">:virtualbox</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">vb</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;Ubuntu 22.04 (Vagrant)&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">vb</span><span class="o">.</span><span class="n">memory</span> <span class="o">=</span> <span class="s2">&#34;4096&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="n">instance</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="s2">&#34;shell&#34;</span><span class="p">,</span> <span class="ss">inline</span><span class="p">:</span> <span class="vg">$consul_role_script</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">end</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">end</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="vg">$consul_role_script</span> <span class="o">=</span> <span class="s">&lt;&lt;-SCRIPT&#10;</span></span></span><span class="line"><span class="cl"><span class="s"></span>&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">echo</span> <span class="s2">&#34;Updating...&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">upgrade</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">echo</span> <span class="s2">&#34;Installing Consul...&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">wget</span> <span class="o">-</span><span class="n">O</span><span class="o">-</span> <span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">apt</span><span class="o">.</span><span class="n">releases</span><span class="o">.</span><span class="n">hashicorp</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">gpg</span> <span class="o">|</span> <span class="n">gpg</span> <span class="o">--</span><span class="n">dearmor</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="sr">/usr/s</span><span class="n">hare</span><span class="o">/</span><span class="n">keyrings</span><span class="o">/</span><span class="n">hashicorp</span><span class="o">-</span><span class="n">archive</span><span class="o">-</span><span class="n">keyring</span><span class="o">.</span><span class="n">gpg</span> <span class="o">&gt;</span> <span class="sr">/dev/nu</span><span class="n">ll</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">echo</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main&#34;</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="sr">/etc/</span><span class="n">apt</span><span class="o">/</span><span class="n">sources</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">hashicorp</span><span class="o">.</span><span class="n">list</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">consul</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">echo</span> <span class="s2">&#34;Installing Nomad...&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">wget</span> <span class="o">-</span><span class="n">O</span><span class="o">-</span> <span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">apt</span><span class="o">.</span><span class="n">releases</span><span class="o">.</span><span class="n">hashicorp</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">gpg</span> <span class="o">|</span> <span class="n">gpg</span> <span class="o">--</span><span class="n">dearmor</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="sr">/usr/s</span><span class="n">hare</span><span class="o">/</span><span class="n">keyrings</span><span class="o">/</span><span class="n">hashicorp</span><span class="o">-</span><span class="n">archive</span><span class="o">-</span><span class="n">keyring</span><span class="o">.</span><span class="n">gpg</span>  <span class="o">&gt;</span> <span class="sr">/dev/nu</span><span class="n">ll</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">echo</span> <span class="s2">&#34;deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main&#34;</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="sr">/etc/</span><span class="n">apt</span><span class="o">/</span><span class="n">sources</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">hashicorp</span><span class="o">.</span><span class="n">list</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">nomad</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">echo</span> <span class="s2">&#34;Installing Envoy...&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">curl</span> <span class="o">-</span><span class="n">L</span> <span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">func</span><span class="o">-</span><span class="n">e</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">install</span><span class="o">.</span><span class="n">sh</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">bash</span> <span class="o">-</span><span class="n">s</span> <span class="o">--</span> <span class="o">-</span><span class="n">b</span> <span class="sr">/usr/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span> <span class="o">&amp;&amp;</span> <span class="n">func</span><span class="o">-</span><span class="n">e</span> <span class="n">use</span> <span class="mi">1</span><span class="o">.</span><span class="mi">23</span><span class="o">.</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">cp</span> <span class="o">~</span><span class="sr">/.func-e/</span><span class="n">versions</span><span class="o">/</span><span class="mi">1</span><span class="o">.</span><span class="mi">23</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">envoy</span> <span class="sr">/usr/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">echo</span> <span class="s2">&#34;Installing cni plugins...&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">curl</span> <span class="o">-</span><span class="n">L</span> <span class="o">-</span><span class="n">o</span> <span class="n">cni</span><span class="o">-</span><span class="n">plugins</span><span class="o">.</span><span class="n">tgz</span> <span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">containernetworking</span><span class="o">/</span><span class="n">plugins</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="n">download</span><span class="o">/</span><span class="n">v1</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">1</span><span class="o">/</span><span class="n">cni</span><span class="o">-</span><span class="n">plugins</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">amd64</span><span class="o">-</span><span class="n">v1</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="mi">1</span><span class="o">.</span><span class="n">tgz</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">sudo</span> <span class="n">mkdir</span> <span class="o">-</span><span class="nb">p</span> <span class="sr">/opt/</span><span class="n">cni</span><span class="o">/</span><span class="n">bin</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">sudo</span> <span class="n">tar</span> <span class="o">-</span><span class="n">C</span> <span class="sr">/opt/</span><span class="n">cni</span><span class="o">/</span><span class="n">bin</span> <span class="o">-</span><span class="n">xzf</span> <span class="n">cni</span><span class="o">-</span><span class="n">plugins</span><span class="o">.</span><span class="n">tgz</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">echo</span> <span class="mi">1</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="sr">/proc/s</span><span class="n">ys</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">bridge</span><span class="o">/</span><span class="n">bridge</span><span class="o">-</span><span class="n">nf</span><span class="o">-</span><span class="n">call</span><span class="o">-</span><span class="n">arptables</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">echo</span> <span class="mi">1</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="sr">/proc/s</span><span class="n">ys</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">bridge</span><span class="o">/</span><span class="n">bridge</span><span class="o">-</span><span class="n">nf</span><span class="o">-</span><span class="n">call</span><span class="o">-</span><span class="n">ip6tables</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">echo</span> <span class="mi">1</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="sr">/proc/s</span><span class="n">ys</span><span class="o">/</span><span class="n">net</span><span class="o">/</span><span class="n">bridge</span><span class="o">/</span><span class="n">bridge</span><span class="o">-</span><span class="n">nf</span><span class="o">-</span><span class="n">call</span><span class="o">-</span><span class="n">iptables</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">sudo</span> <span class="n">cat</span> <span class="o">&lt;&lt;</span> <span class="no">EOF</span> <span class="o">&gt;</span> <span class="sr">/etc/s</span><span class="n">ysctl</span><span class="o">.</span><span class="n">d</span><span class="o">/</span>&#10;</span></span><span class="line"><span class="cl">  <span class="n">net</span><span class="o">.</span><span class="n">bridge</span><span class="o">.</span><span class="n">bridge</span><span class="o">-</span><span class="n">nf</span><span class="o">-</span><span class="n">call</span><span class="o">-</span><span class="n">arptables</span> <span class="o">=</span> <span class="mi">1</span>&#10;</span></span><span class="line"><span class="cl">  <span class="n">net</span><span class="o">.</span><span class="n">bridge</span><span class="o">.</span><span class="n">bridge</span><span class="o">-</span><span class="n">nf</span><span class="o">-</span><span class="n">call</span><span class="o">-</span><span class="n">ip6tables</span> <span class="o">=</span> <span class="mi">1</span>&#10;</span></span><span class="line"><span class="cl">  <span class="n">net</span><span class="o">.</span><span class="n">bridge</span><span class="o">.</span><span class="n">bridge</span><span class="o">-</span><span class="n">nf</span><span class="o">-</span><span class="n">call</span><span class="o">-</span><span class="n">iptables</span> <span class="o">=</span> <span class="mi">1</span>&#10;</span></span><span class="line"><span class="cl">  <span class="no">EOF</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">echo</span> <span class="s2">&#34;Installing Docker...&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">curl</span> <span class="o">-</span><span class="n">fsSL</span> <span class="ss">https</span><span class="p">:</span><span class="sr">//</span><span class="n">download</span><span class="o">.</span><span class="n">docker</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">linux</span><span class="o">/</span><span class="n">ubuntu</span><span class="o">/</span><span class="n">gpg</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">gpg</span> <span class="o">--</span><span class="n">dearmor</span> <span class="o">-</span><span class="n">o</span> <span class="sr">/usr/s</span><span class="n">hare</span><span class="o">/</span><span class="n">keyrings</span><span class="o">/</span><span class="n">docker</span><span class="o">.</span><span class="n">gpg</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">echo</span> <span class="p">\</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="s2">&#34;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \&#10;</span></span></span><span class="line"><span class="cl"><span class="s2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  $(lsb_release -cs) stable&#34;</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="sr">/etc/</span><span class="n">apt</span><span class="o">/</span><span class="n">sources</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">docker</span><span class="o">.</span><span class="n">list</span> <span class="o">&gt;</span> <span class="sr">/dev/nu</span><span class="n">ll</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">docker</span><span class="o">-</span><span class="n">ce</span> <span class="n">docker</span><span class="o">-</span><span class="n">ce</span><span class="o">-</span><span class="n">cli</span> <span class="n">containerd</span><span class="o">.</span><span class="n">io</span> <span class="n">docker</span><span class="o">-</span><span class="n">compose</span><span class="o">-</span><span class="n">plugin</span> <span class="o">&amp;&amp;</span> <span class="n">sudo</span> <span class="n">systemctl</span> <span class="n">enable</span> <span class="n">docker</span><span class="o">.</span><span class="n">service</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="n">sudo</span> <span class="n">usermod</span> <span class="o">-</span><span class="n">aG</span> <span class="n">docker</span> <span class="n">vagrant</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="no">SCRIPT</span>&#10;</span></span><span class="line"><span class="cl">  <span class="k">end</span>&#10;</span></span><span class="line"><span class="cl">  </span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>Vagrantfile</span>
    </div>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/virtualbox_hu7a2a034edbf495f255b69302d89bf1d6_176833_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="VirtualBox"><img src="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/virtualbox_hu7a2a034edbf495f255b69302d89bf1d6_176833_650x450_fit_q90_h2_box_3.webp" width="582" height="450" alt="VirtualBox" title="VirtualBox" class="&#34; " loading="lazy"></a></p>
<figcaption>VirtualBox</figcaption>
</figure>
</div>
<h4 id="inicio-de-consul-y-nomad-y-microservicios-del-ejemplo">Inicio de Consul y Nomad y microservicios del ejemplo</h4>
<p>Una de las ventajas de Consul y Nomad es que son muy simples de usar ya que sus programas son simplemente un único binario. Consul y Nomad se inician con los siguientes comandos en modo desarrollo con sus archivos de configuración.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ consul agent -dev -config-dir<span class="o">=</span>consul.d/&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>consul.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ sudo nomad agent -dev-connect -config<span class="o">=</span>nomad.d/&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>nomad.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-hcl" data-lang="hcl"><span class="line"><span class="cl"><span class="n">server</span> <span class="o">=</span> <span class="kt">true</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">bootstrap_expect</span> <span class="o">=</span> <span class="m">1</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">bind_addr</span> <span class="o">=</span> <span class="s2">&#34;127.0.0.1&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">client_addr</span> <span class="o">=</span> <span class="s2">&#34;0.0.0.0&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">ports</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;grpc</span> <span class="o">=</span> <span class="m">8502</span>&#10;</span></span><span class="line"><span class="cl">}&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">connect</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;enabled</span> <span class="o">=</span> <span class="kt">true</span>&#10;</span></span><span class="line"><span class="cl">}&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">ui_config</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;enabled</span> <span class="o">=</span> <span class="kt">true</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;metrics_provider</span> <span class="o">=</span> <span class="s2">&#34;prometheus&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">metrics_proxy</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;base_url</span> <span class="o">=</span> <span class="s2">&#34;http://localhost:9090&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">}&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>consul.d/consul.hcl</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-hcl" data-lang="hcl"><span class="line"><span class="cl"><span class="k">plugin</span> <span class="s2">&#34;docker&#34;</span> {&#10;</span></span><span class="line"><span class="cl">  <span class="k">config</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">volumes</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  enabled</span> <span class="o">=</span> <span class="kt">true</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">  }&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">  <span class="k">volumes</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;enabled</span> <span class="o">=</span> <span class="kt">true</span>&#10;</span></span><span class="line"><span class="cl">  }&#10;</span></span><span class="line"><span class="cl">}&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>nomad.d/nomad.hcl</span>
    </div>
</div>
<p>Consul requiere la definición del servicio <em>ingress gateway</em> que permite que entre tráfico al <em>service mesh</em>, en esta configuración a través del puerto 8080, el tráfico entrante es redirigido al servicio <em>frontend</em>. Esta configuración se proporciona como un <a href="https://developer.hashicorp.com/consul/docs/connect/config-entries">Config Entry</a> de Consul y se proporciona a Consul con un comando.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ consul config write consul.d/config-entries/proxy-defaults.hcl&#10;</span></span><span class="line"><span class="cl">$ consul config write consul.d/config-entries/ingress-gateway.hcl&#10;</span></span><span class="line"><span class="cl">$ consul connect envoy -gateway<span class="o">=</span>ingress -service ingress-gateway -admin-bind 127.0.0.1:19002 -address 127.0.0.1:20000</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>consul-ingress-gateway.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-hcl" data-lang="hcl"><span class="line"><span class="cl"><span class="n">Kind</span> <span class="o">=</span> <span class="s2">&#34;ingress-gateway&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">Name</span> <span class="o">=</span> <span class="s2">&#34;ingress-gateway&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">Listeners</span> <span class="o">=</span> <span class="p">[</span>{&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;Port</span> <span class="o">=</span> <span class="m">8080</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;Protocol</span> <span class="o">=</span> <span class="s2">&#34;http&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;Services</span> <span class="o">=</span> <span class="p">[</span>{&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name</span> <span class="o">=</span> <span class="s2">&#34;frontend&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hosts</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;localhost&#34;, &#34;192.168.56.10&#34;</span><span class="p">]</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}<span class="p">]</span>&#10;</span></span><span class="line"><span class="cl">}<span class="p">]</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>consul.d/config-entries/ingress-gateway.hcl</span>
    </div>
</div>
<p>La configuración de los <em>sidecar proxy</em> que crear Consul en este ejemplo es necesario para exportar métricas de Prometheus y enviar la trazabilidad a Jaeger usando Zipkin.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span><span class="lnt">18&#10;</span><span class="lnt">19&#10;</span><span class="lnt">20&#10;</span><span class="lnt">21&#10;</span><span class="lnt">22&#10;</span><span class="lnt">23&#10;</span><span class="lnt">24&#10;</span><span class="lnt">25&#10;</span><span class="lnt">26&#10;</span><span class="lnt">27&#10;</span><span class="lnt">28&#10;</span><span class="lnt">29&#10;</span><span class="lnt">30&#10;</span><span class="lnt">31&#10;</span><span class="lnt">32&#10;</span><span class="lnt">33&#10;</span><span class="lnt">34&#10;</span><span class="lnt">35&#10;</span><span class="lnt">36&#10;</span><span class="lnt">37&#10;</span><span class="lnt">38&#10;</span><span class="lnt">39&#10;</span><span class="lnt">40&#10;</span><span class="lnt">41&#10;</span><span class="lnt">42&#10;</span><span class="lnt">43&#10;</span><span class="lnt">44&#10;</span><span class="lnt">45&#10;</span><span class="lnt">46&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-hcl" data-lang="hcl"><span class="line"><span class="cl"><span class="n">Kind</span> <span class="o">=</span> <span class="s2">&#34;proxy-defaults&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">Name</span> <span class="o">=</span> <span class="s2">&#34;global&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">Config</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;protocol</span> <span class="o">=</span> <span class="s2">&#34;http&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;envoy_tracing_json</span> <span class="o">=</span> <span class="err">&lt;&lt;</span><span class="k">EOF</span>&#10;</span></span><span class="line"><span class="cl">{&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;http&#34;</span><span class="err">:</span>{&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;name&#34;:&#34;envoy.tracers.zipkin&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;typedConfig&#34;</span><span class="err">:</span>{&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;@type&#34;:&#34;type.googleapis.com/envoy.config.trace.v3.ZipkinConfig&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;collector_cluster&#34;:&#34;jaeger_collector&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;collector_endpoint_version&#34;:&#34;HTTP_JSON&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;collector_endpoint&#34;:&#34;/api/v2/spans&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;shared_span_context&#34;</span><span class="err">:</span><span class="kt">false</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">}&#10;</span></span><span class="line"><span class="cl"><span class="k">EOF</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp; envoy_extra_static_clusters_json</span> <span class="o">=</span> <span class="err">&lt;&lt;</span><span class="k">EOF</span>&#10;</span></span><span class="line"><span class="cl">{&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp; <span class="s2">&#34;connect_timeout&#34;:&#34;3.000s&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp; <span class="s2">&#34;dns_lookup_family&#34;:&#34;V4_ONLY&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp; <span class="s2">&#34;lb_policy&#34;:&#34;ROUND_ROBIN&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp; <span class="s2">&#34;load_assignment&#34;</span><span class="err">:</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="s2">&#34;cluster_name&#34;:&#34;jaeger_collector&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="s2">&#34;endpoints&#34;</span><span class="err">:</span><span class="p">[</span>{&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="s2">&#34;lb_endpoints&#34;</span> <span class="err">:</span><span class="p">[</span>{&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   <span class="s2">&#34;endpoint&#34;</span><span class="err">:</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;address&#34;</span><span class="err">:</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;socket_address&#34;</span><span class="err">:</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;address&#34;:&#34;localhost&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;port_value&#34;</span><span class="err">:</span><span class="m">9411</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;protocol&#34;:&#34;TCP&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<span class="p">]</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<span class="p">]</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}<span class="p">,</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;name&#34;:&#34;jaeger_collector&#34;</span><span class="p">,</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;type&#34;:&#34;STRICT_DNS&#34;</span>&#10;</span></span><span class="line"><span class="cl">}&#10;</span></span><span class="line"><span class="cl"><span class="k">EOF</span>&#10;</span></span><span class="line"><span class="cl">}&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>consul.d/config-entries/proxy-defaults.hcl</span>
    </div>
</div>
<p>Tanto Consul como Nomad ofrecen una interfaz web para consultar el estado de los servicios y realizar tareas de forma más intuitiva que utilizando la línea de comandos. La interfaz de Consul se inicia en el puerto 8500 y la de Nomad en el puerto 4646 la dirección IP es la de la máquina virtual.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/consul_hu38ca79e125ea90732c98801666d94a1c_114012_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Consul"><img src="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/consul_hu38ca79e125ea90732c98801666d94a1c_114012_300x200_fit_q90_h2_box_3.webp" width="246" height="200" alt="Consul" title="Consul" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/nomad_hu9bbb57e399b7a2dffb0f8e1e395e2194_140021_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Nomad"><img src="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/nomad_hu9bbb57e399b7a2dffb0f8e1e395e2194_140021_300x200_fit_q90_h2_box_3.webp" width="246" height="200" alt="Nomad" title="Nomad" class="&#34; " loading="lazy"></a></p>
<figcaption>Consul y Nomad</figcaption>
</figure>
</div>
<h4 id="inicio-de-prometheus-y-jaeger">Inicio de Prometheus y Jaeger</h4>
<p>Prometheus es una base de datos temporal que permite guardar los datos de métricas y monitorización que generan las aplicaciones, los <em>sidecar proxy</em> generan métricas que Prometheus recolecta y Consul permite mostrar algunos datos básicos de métricas como número de peticiones, tasa de fallos de las peticiones y percentiles de latencia.</p>
<p>Jaeger es una herramienta de trazabilidad que permite correlacionar todas las peticiones que se realizan entre los servicios, de esta forma es posible relacionar la petición del servicio <em>frontend</em> con la petición del servicio <em>backend</em> y mostrar ambas al mismo tiempo como si estuvieran relacionadas, esta relación se establece mediante un <em>traceId</em> que identifica al conjunto de las peticiones individuales.</p>
<p>En el ejemplo Prometheus y Jaeger se inician como contenedores de Docker con los siguientes comandos. También se podrían haber iniciado como servicios de Nomad. La configuración de Prometheus es necesaria para recolectar las métricas de Consul.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker run --rm -p 9090:9090 --name prometheus --network host -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/prometheus.yml:/etc/prometheus/prometheus.yml prom/prometheus&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>prometheus.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">global</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">scrape_interval</span><span class="p">:</span><span class="w"> </span><span class="l">10s</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">scrape_configs</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="nt">job_name</span><span class="p">:</span><span class="w"> </span><span class="l">consul</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">metrics_path</span><span class="p">:</span><span class="w"> </span><span class="l">/metrics</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">consul_sd_configs</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">server</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;localhost:8500&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">relabel_configs</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">source_labels</span><span class="p">:</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span>- <span class="l">__meta_consul_tagged_address_lan</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span>- <span class="l">__meta_consul_service_metadata_prometheus_port</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">regex</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;(.*);(.*)&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">replacement</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;${1}:${2}&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">target_label</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;__address__&#39;</span><span class="w">&#10;</span></span></span><span class="line"><span class="cl"><span class="w">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="nt">action</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;replace&#39;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>prometheus.yml</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ docker run --rm --name jaeger <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -e <span class="nv">COLLECTOR_ZIPKIN_HOST_PORT</span><span class="o">=</span>:9411 <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -e <span class="nv">COLLECTOR_OTLP_ENABLED</span><span class="o">=</span><span class="nb">true</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -p <span class="s2">&#34;6831:6831/udp&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -p <span class="s2">&#34;6832:6832/udp&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -p <span class="s2">&#34;5778:5778&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -p <span class="s2">&#34;16686:16686&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -p <span class="s2">&#34;4317:4317&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -p <span class="s2">&#34;4318:4318&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -p <span class="s2">&#34;14250:14250&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -p <span class="s2">&#34;14268:14268&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -p <span class="s2">&#34;14269:14269&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -p <span class="s2">&#34;9411:9411&#34;</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>  jaegertracing/all-in-one:1.38</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>jaeger.sh</span>
    </div>
</div>
<p>Jaeger ofrece una interfaz web en el puerto 16686 para visualizar la trazabilidad de una petición y buscar una traza en concreto a través de su <em>traceId</em> y otros filtros.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/jaeger_hu33e6a5ea76c78b45612ee7e8a8666ca6_100673_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Jaeger"><img src="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/jaeger_hu33e6a5ea76c78b45612ee7e8a8666ca6_100673_650x450_fit_q90_h2_box_3.webp" width="553" height="450" alt="Jaeger" title="Jaeger" class="&#34; " loading="lazy"></a></p>
<figcaption>Jaeger</figcaption>
</figure>
</div>
<h4 id="inicio-de-los-servicios-_frontend_-y-_backend_">Inicio de los servicios <em>frontend</em> y <em>backend</em></h4>
<p>La aplicación de ejemplo que muestra información de aves está compuesta de dos microservicios el <em>frontend</em> que muestra la información mediante una interfaz web y el servicio de <em>backend</em> que proporciona la información al <em>frontend</em>.</p>
<p>En el libro Consul: Up &amp; Running los servicios se inician utilizando únicamente Consul que es en lo que se centra el libro, pero en este ejemplo inicio estos servicios utilizando el orquestador Nomad, Nomad permite definir la misma configuración incluyendo la configuración para los <em>sidecar proxy</em> y se integra con Consul.</p>
<p>La definición del job de Nomad que engloba ambos servicios es la siguiente. Con esta definición declarativa Nomad se encarga de iniciarlos según la descripción indicada, del servicio de <em>backend</em> se inician dos instancias una la de la versión <em>v1</em> y otra de la <em>v2</em>.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ nomad run birds.nomad&#10;</span></span><span class="line"><span class="cl">&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>nomad-birds.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">  1&#10;</span><span class="lnt">  2&#10;</span><span class="lnt">  3&#10;</span><span class="lnt">  4&#10;</span><span class="lnt">  5&#10;</span><span class="lnt">  6&#10;</span><span class="lnt">  7&#10;</span><span class="lnt">  8&#10;</span><span class="lnt">  9&#10;</span><span class="lnt"> 10&#10;</span><span class="lnt"> 11&#10;</span><span class="lnt"> 12&#10;</span><span class="lnt"> 13&#10;</span><span class="lnt"> 14&#10;</span><span class="lnt"> 15&#10;</span><span class="lnt"> 16&#10;</span><span class="lnt"> 17&#10;</span><span class="lnt"> 18&#10;</span><span class="lnt"> 19&#10;</span><span class="lnt"> 20&#10;</span><span class="lnt"> 21&#10;</span><span class="lnt"> 22&#10;</span><span class="lnt"> 23&#10;</span><span class="lnt"> 24&#10;</span><span class="lnt"> 25&#10;</span><span class="lnt"> 26&#10;</span><span class="lnt"> 27&#10;</span><span class="lnt"> 28&#10;</span><span class="lnt"> 29&#10;</span><span class="lnt"> 30&#10;</span><span class="lnt"> 31&#10;</span><span class="lnt"> 32&#10;</span><span class="lnt"> 33&#10;</span><span class="lnt"> 34&#10;</span><span class="lnt"> 35&#10;</span><span class="lnt"> 36&#10;</span><span class="lnt"> 37&#10;</span><span class="lnt"> 38&#10;</span><span class="lnt"> 39&#10;</span><span class="lnt"> 40&#10;</span><span class="lnt"> 41&#10;</span><span class="lnt"> 42&#10;</span><span class="lnt"> 43&#10;</span><span class="lnt"> 44&#10;</span><span class="lnt"> 45&#10;</span><span class="lnt"> 46&#10;</span><span class="lnt"> 47&#10;</span><span class="lnt"> 48&#10;</span><span class="lnt"> 49&#10;</span><span class="lnt"> 50&#10;</span><span class="lnt"> 51&#10;</span><span class="lnt"> 52&#10;</span><span class="lnt"> 53&#10;</span><span class="lnt"> 54&#10;</span><span class="lnt"> 55&#10;</span><span class="lnt"> 56&#10;</span><span class="lnt"> 57&#10;</span><span class="lnt"> 58&#10;</span><span class="lnt"> 59&#10;</span><span class="lnt"> 60&#10;</span><span class="lnt"> 61&#10;</span><span class="lnt"> 62&#10;</span><span class="lnt"> 63&#10;</span><span class="lnt"> 64&#10;</span><span class="lnt"> 65&#10;</span><span class="lnt"> 66&#10;</span><span class="lnt"> 67&#10;</span><span class="lnt"> 68&#10;</span><span class="lnt"> 69&#10;</span><span class="lnt"> 70&#10;</span><span class="lnt"> 71&#10;</span><span class="lnt"> 72&#10;</span><span class="lnt"> 73&#10;</span><span class="lnt"> 74&#10;</span><span class="lnt"> 75&#10;</span><span class="lnt"> 76&#10;</span><span class="lnt"> 77&#10;</span><span class="lnt"> 78&#10;</span><span class="lnt"> 79&#10;</span><span class="lnt"> 80&#10;</span><span class="lnt"> 81&#10;</span><span class="lnt"> 82&#10;</span><span class="lnt"> 83&#10;</span><span class="lnt"> 84&#10;</span><span class="lnt"> 85&#10;</span><span class="lnt"> 86&#10;</span><span class="lnt"> 87&#10;</span><span class="lnt"> 88&#10;</span><span class="lnt"> 89&#10;</span><span class="lnt"> 90&#10;</span><span class="lnt"> 91&#10;</span><span class="lnt"> 92&#10;</span><span class="lnt"> 93&#10;</span><span class="lnt"> 94&#10;</span><span class="lnt"> 95&#10;</span><span class="lnt"> 96&#10;</span><span class="lnt"> 97&#10;</span><span class="lnt"> 98&#10;</span><span class="lnt"> 99&#10;</span><span class="lnt">100&#10;</span><span class="lnt">101&#10;</span><span class="lnt">102&#10;</span><span class="lnt">103&#10;</span><span class="lnt">104&#10;</span><span class="lnt">105&#10;</span><span class="lnt">106&#10;</span><span class="lnt">107&#10;</span><span class="lnt">108&#10;</span><span class="lnt">109&#10;</span><span class="lnt">110&#10;</span><span class="lnt">111&#10;</span><span class="lnt">112&#10;</span><span class="lnt">113&#10;</span><span class="lnt">114&#10;</span><span class="lnt">115&#10;</span><span class="lnt">116&#10;</span><span class="lnt">117&#10;</span><span class="lnt">118&#10;</span><span class="lnt">119&#10;</span><span class="lnt">120&#10;</span><span class="lnt">121&#10;</span><span class="lnt">122&#10;</span><span class="lnt">123&#10;</span><span class="lnt">124&#10;</span><span class="lnt">125&#10;</span><span class="lnt">126&#10;</span><span class="lnt">127&#10;</span><span class="lnt">128&#10;</span><span class="lnt">129&#10;</span><span class="lnt">130&#10;</span><span class="lnt">131&#10;</span><span class="lnt">132&#10;</span><span class="lnt">133&#10;</span><span class="lnt">134&#10;</span><span class="lnt">135&#10;</span><span class="lnt">136&#10;</span><span class="lnt">137&#10;</span><span class="lnt">138&#10;</span><span class="lnt">139&#10;</span><span class="lnt">140&#10;</span><span class="lnt">141&#10;</span><span class="lnt">142&#10;</span><span class="lnt">143&#10;</span><span class="lnt">144&#10;</span><span class="lnt">145&#10;</span><span class="lnt">146&#10;</span><span class="lnt">147&#10;</span><span class="lnt">148&#10;</span><span class="lnt">149&#10;</span><span class="lnt">150&#10;</span><span class="lnt">151&#10;</span><span class="lnt">152&#10;</span><span class="lnt">153&#10;</span><span class="lnt">154&#10;</span><span class="lnt">155&#10;</span><span class="lnt">156&#10;</span><span class="lnt">157&#10;</span><span class="lnt">158&#10;</span><span class="lnt">159&#10;</span><span class="lnt">160&#10;</span><span class="lnt">161&#10;</span><span class="lnt">162&#10;</span><span class="lnt">163&#10;</span><span class="lnt">164&#10;</span><span class="lnt">165&#10;</span><span class="lnt">166&#10;</span><span class="lnt">167&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-hcl" data-lang="hcl"><span class="line"><span class="cl"><span class="k">job</span> <span class="s2">&#34;app-birds&#34;</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">  datacenters</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;dc1&#34;</span><span class="p">]</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">  <span class="k">group</span> <span class="s2">&#34;frontend&#34;</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">network</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  mode</span> <span class="o">=</span> <span class="s2">&#34;bridge&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">port</span> <span class="s2">&#34;http&#34;</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static</span> <span class="o">=</span> <span class="m">21000</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to</span>&nbsp;&nbsp;&nbsp;&nbsp; <span class="o">=</span> <span class="m">21000</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">port</span> <span class="s2">&#34;envoy_metrics&#34;</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static</span> <span class="o">=</span> <span class="m">20200</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to</span> <span class="o">=</span> <span class="m">20200</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">service</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  name</span> <span class="o">=</span> <span class="s2">&#34;frontend&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  port</span> <span class="o">=</span> <span class="m">6060</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">meta</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prometheus_port</span> <span class="o">=</span> <span class="s2">&#34;20200&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">connect</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">sidecar_service</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  port</span> <span class="o">=</span> <span class="m">21000</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">proxy</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">upstreams</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  destination_name</span> <span class="o">=</span> <span class="s2">&#34;backend&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  local_bind_port</span> <span class="o">=</span> <span class="m">6001</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">config</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  envoy_prometheus_bind_addr</span> <span class="o">=</span> <span class="s2">&#34;0.0.0.0:20200&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">task</span> <span class="s2">&#34;frontend&#34;</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  driver</span> <span class="o">=</span> <span class="s2">&#34;docker&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">env</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BIND_ADDR</span><span class="o">=</span><span class="s2">&#34;0.0.0.0:6060&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BACKEND_URL</span><span class="o">=</span><span class="s2">&#34;http://localhost:6001&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TRACING_URL</span><span class="o">=</span><span class="s2">&#34;http://192.168.56.10:9411&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">resources</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpu</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">=</span> <span class="m">350</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memory</span> <span class="o">=</span> <span class="m">1024</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">config</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image</span> <span class="o">=</span> <span class="s2">&#34;ghcr.io/consul-up/birdwatcher-frontend:1.0.0&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memory_hard_limit</span> <span class="o">=</span> <span class="s2">&#34;1024&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">  }&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">  <span class="k">group</span> <span class="s2">&#34;backend&#34;</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">network</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  mode</span> <span class="o">=</span> <span class="s2">&#34;bridge&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">port</span> <span class="s2">&#34;envoy_metrics&#34;</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static</span> <span class="o">=</span> <span class="m">20201</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to</span> <span class="o">=</span> <span class="m">20201</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">service</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  name</span> <span class="o">=</span> <span class="s2">&#34;backend&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  port</span> <span class="o">=</span> <span class="m">7000</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">meta</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prometheus_port</span> <span class="o">=</span> <span class="s2">&#34;20201&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version</span> <span class="o">=</span> <span class="s2">&#34;v1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">connect</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">sidecar_service</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  port</span> <span class="o">=</span> <span class="m">22000</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">proxy</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">config</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  envoy_prometheus_bind_addr</span> <span class="o">=</span> <span class="s2">&#34;0.0.0.0:20201&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">task</span> <span class="s2">&#34;backend&#34;</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  driver</span> <span class="o">=</span> <span class="s2">&#34;docker&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">env</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BIND_ADDR</span><span class="o">=</span><span class="s2">&#34;0.0.0.0:7000&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TRACING_URL</span><span class="o">=</span><span class="s2">&#34;http://192.168.56.10:9411&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">resources</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpu</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">=</span> <span class="m">350</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memory</span> <span class="o">=</span> <span class="m">1024</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">config</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image</span> <span class="o">=</span> <span class="s2">&#34;ghcr.io/consul-up/birdwatcher-backend:1.0.0&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memory_hard_limit</span> <span class="o">=</span> <span class="s2">&#34;1024&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">  }&#10;</span></span><span class="line"><span class="cl">  &#10;</span></span><span class="line"><span class="cl">  <span class="k">group</span> <span class="s2">&#34;backend-v2&#34;</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">network</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  mode</span> <span class="o">=</span> <span class="s2">&#34;bridge&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">port</span> <span class="s2">&#34;envoy_metrics&#34;</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static</span> <span class="o">=</span> <span class="m">20202</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to</span> <span class="o">=</span> <span class="m">20202</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">service</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  name</span> <span class="o">=</span> <span class="s2">&#34;backend&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  port</span> <span class="o">=</span> <span class="m">7001</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">meta</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prometheus_port</span> <span class="o">=</span> <span class="s2">&#34;20202&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version</span> <span class="o">=</span> <span class="s2">&#34;v2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">connect</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">sidecar_service</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  port</span> <span class="o">=</span> <span class="m">22001</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">proxy</span> {&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">config</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  envoy_prometheus_bind_addr</span> <span class="o">=</span> <span class="s2">&#34;0.0.0.0:20202&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">task</span> <span class="s2">&#34;backend&#34;</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  driver</span> <span class="o">=</span> <span class="s2">&#34;docker&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">env</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BIND_ADDR</span><span class="o">=</span><span class="s2">&#34;0.0.0.0:7001&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TRACING_URL</span><span class="o">=</span><span class="s2">&#34;http://192.168.56.10:9411&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VERSION</span><span class="o">=</span><span class="s2">&#34;v2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">resources</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cpu</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">=</span> <span class="m">350</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memory</span> <span class="o">=</span> <span class="m">1024</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  <span class="k">config</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image</span> <span class="o">=</span> <span class="s2">&#34;ghcr.io/consul-up/birdwatcher-backend:1.0.0&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memory_hard_limit</span> <span class="o">=</span> <span class="s2">&#34;1024&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">  }&#10;</span></span><span class="line"><span class="cl">}&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>birds.nomad</span>
    </div>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/birds-v1-1_hu7f6d488877be14f859eccdaea4f48797_553771_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Frontend con datos de la versión v1 del backend"><img src="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/birds-v1-1_hu7f6d488877be14f859eccdaea4f48797_553771_650x450_fit_q90_h2_box_3.webp" width="553" height="450" alt="Frontend con datos de la versión v1 del backend" title="Frontend con datos de la versión v1 del backend" class="&#34; " loading="lazy"></a></p>
<figcaption>Frontend con datos de la versión v1 del backend</figcaption>
</figure>
</div>
<h4 id="demostraciones-de-las-funcionalidades-del-_service-mesh_">Demostraciones de las funcionalidades del <em>service mesh</em></h4>
<p>A la aplicación se accede a través del servicio de <em>ingress-gateway</em> en el puerto 8080 de la máquina virtual. El servicio de <em>ingress-gateway</em> simplemente redirige el tráfico a la aplicación de <em>frontend</em>. Esta es la topología de comunicación para el servicio de <em>frontend</em> proporcionada por Consul, recibe peticiones del <em>ingress-gateway</em> y a su vez realiza peticiones al servicio de <em>backend</em>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/consul-topology-1_hu285775030b5ed09f425118c0971ef68e_151608_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Toppología de un servicio y métricas en Consul"><img src="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/consul-topology-1_hu285775030b5ed09f425118c0971ef68e_151608_650x450_fit_q90_h2_box_3.webp" width="554" height="450" alt="Toppología de un servicio y métricas en Consul" title="Toppología de un servicio y métricas en Consul" class="&#34; " loading="lazy"></a></p>
<figcaption>Toppología de un servicio y métricas en Consul</figcaption>
</figure>
</div>
<p>Al arrancar Consul en modo desarrollo el comportamiento por defecto es permitir la comunicación entre los servicios, en una configuración en grado de producción por el contrario por defecto no se permite.</p>
<p>Creando una intención es posible denegar el tráfico entre el servicio de <em>frontend</em> al de <em>backend</em>. Las intenciones sirven para permitir o denegar el tráfico en un plano de servicio y no de direcciones IP y cortafuegos lo que lo hace mucho más sencillo de administrar, además de que cualquier cambio es posible hacerlo desde la interfaz web y se aplica de forma instantánea.</p>
<p>El tráfico entre los servicios a través de los <em>sidecar proxy</em> realizan la comunicación cifrada y utilizando autenticación mutua.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/consul-intentions_hu9f977235bd6c24c164cf620de1a0ce87_76378_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Intenciones en Consul"><img src="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/consul-intentions_hu9f977235bd6c24c164cf620de1a0ce87_76378_650x450_fit_q90_h2_box_3.webp" width="553" height="450" alt="Intenciones en Consul" title="Intenciones en Consul" class="&#34; " loading="lazy"></a></p>
<figcaption>Intenciones en Consul</figcaption>
</figure>
</div>
<p>Consul exporta métricas en formato Prometheus que el servidor de Prometheus recolecta de forma periódica, esta información puede ser visualizada con una herramienta como Grafana. También el propio Consul permite obtener una métricas básicas del servicio como el número de peticiones que se están realizando, tasa de errores y latencia agrupadas por percentiles. Esta información es muy valiosa ya que permite monitorizar el estado del servicio.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/consul-topology-2_hu285775030b5ed09f425118c0971ef68e_151608_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Métricas de Prometheus en Consul"><img src="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/consul-topology-2_hu285775030b5ed09f425118c0971ef68e_151608_650x450_fit_q90_h2_box_3.webp" width="554" height="450" alt="Métricas de Prometheus en Consul" title="Métricas de Prometheus en Consul" class="&#34; " loading="lazy"></a></p>
<figcaption>Métricas de Prometheus en Consul</figcaption>
</figure>
</div>
<p>Consul y los <em>sidecar proxy</em> de Envoy ofrecen soporte para trazabilidad con Zipkin junto con cierto soporte de los propios servicios la trazabilidad es enviada a un servidor como Jaeger que permite visualizar y relacionar las llamadas entre los diferentes servicios. Desde que entra por el <em>ingress-gateway</em> hasta que llega al <em>backend</em> pasando por el servicio de <em>frontend</em> asi como el tiempo empleado en cada uno de ellos.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/jaeger_hu33e6a5ea76c78b45612ee7e8a8666ca6_100673_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Trazabilidad en Jarger"><img src="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/jaeger_hu33e6a5ea76c78b45612ee7e8a8666ca6_100673_650x450_fit_q90_h2_box_3.webp" width="553" height="450" alt="Trazabilidad en Jarger" title="Trazabilidad en Jarger" class="&#34; " loading="lazy"></a></p>
<figcaption>Trazabilidad en Jarger</figcaption>
</figure>
</div>
<p>Consul conoce y monitoriza el estado de todos los servicios, a los servicios que presenten un mal funcionamiento no se les envía tráfico para evitar errores y tener resiliencia aún con fallos parciales. Consul realiza peticiones de estado de salud de forma activa de forma periódica generalmente cada pocos segundos, para comprobar el estado de cada servicio. En la consola de administración muestra el estado de cada uno de ellos que también es una valiosa información de observabilidad.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/consul_hu38ca79e125ea90732c98801666d94a1c_114012_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Salud de los servicios en Consul"><img src="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/consul_hu38ca79e125ea90732c98801666d94a1c_114012_650x450_fit_q90_h2_box_3.webp" width="554" height="450" alt="Salud de los servicios en Consul" title="Salud de los servicios en Consul" class="&#34; " loading="lazy"></a></p>
<figcaption>Salud de los servicios en Consul</figcaption>
</figure>
</div>
<p>Como son los <em>sidecar proxy</em> los que hacen las peticiones de red entre servicios estos tienen capacidad de realizar reintentos y <em>timeouts</em>. Con los reintentos se mitigan los errores temporales y con los <em>timeouts</em> se evita que un servicio que esté tardando en responder afecte a otros servicios.</p>
<p>El control de tráfico es utilizado para diferentes funciones una de ellas para el despliegue de una nueva versión de forma controlada utilizando diferentes estrategias de despliegue. El servicio de <em>backend</em> tiene dos versiones la <em>v1</em> que da información de aves y la <em>v2</em> que da información de aves pero solo de la familia de canarios.</p>
<p>Con el control de tráfico es posible distribuir el número de peticiones que va a cada servicio en función de un peso o porcentaje. En una repartición al 50 la mitad de las peticiones van a la <em>v1</em> y la otra mitad a la <em>v2</em>, en el <em>frontend</em> se muestra la información del ave y la versión del servicio que la ha proporcionado. Cada vez que se cambia un archivo de configuración y se quiere aplicar hay que escribir la configuración en Consul.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ consul config write consul.d/config-entries/backend-service-resolver.hcl&#10;</span></span><span class="line"><span class="cl">$ consul config write consul.d/config-entries/backend-service-splitter.hcl&#10;</span></span><span class="line"><span class="cl">$ consul config write consul.d/config-entries/backend-service-router.hcl</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>consul-traffic-control.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-hcl" data-lang="hcl"><span class="line"><span class="cl"><span class="n">Kind</span> <span class="o">=</span> <span class="s2">&#34;service-resolver&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">Name</span> <span class="o">=</span> <span class="s2">&#34;backend&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">Subsets</span> <span class="o">=</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">  v1</span> <span class="o">=</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;Filter</span> <span class="o">=</span><span class="n"> &#34;Service.Meta.version</span> <span class="o">==</span> <span class="k">v1</span><span class="err">&#34;</span>&#10;</span></span><span class="line"><span class="cl">  }&#10;</span></span><span class="line"><span class="cl"><span class="n">  v2</span> <span class="o">=</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;Filter</span> <span class="o">=</span><span class="n"> &#34;Service.Meta.version</span> <span class="o">==</span> <span class="k">v2</span><span class="err">&#34;</span>&#10;</span></span><span class="line"><span class="cl">  }&#10;</span></span><span class="line"><span class="cl">}&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>consul.d/config-entries/backend-service-resolver.hcl</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span><span class="lnt">12&#10;</span><span class="lnt">13&#10;</span><span class="lnt">14&#10;</span><span class="lnt">15&#10;</span><span class="lnt">16&#10;</span><span class="lnt">17&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-hcl" data-lang="hcl"><span class="line"><span class="cl"><span class="n">Kind</span> <span class="o">=</span> <span class="s2">&#34;service-router&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">Name</span> <span class="o">=</span> <span class="s2">&#34;backend&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">Routes</span> <span class="o">=</span> <span class="p">[</span>{&#10;</span></span><span class="line"><span class="cl"><span class="n">  Match</span> <span class="o">=</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;HTTP</span> <span class="o">=</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;  QueryParam</span> <span class="o">=</span> <span class="p">[</span>{&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name</span> <span class="o">=</span> <span class="s2">&#34;canary&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Exact</span> <span class="o">=</span> <span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;  }<span class="p">]</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span><span class="line"><span class="cl">  }&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">  Destination</span> <span class="o">=</span> {&#10;</span></span><span class="line"><span class="cl"><span class="n">&nbsp;&nbsp;&nbsp;&nbsp;ServiceSubset</span> <span class="o">=</span> <span class="s2">&#34;v2&#34;</span>&#10;</span></span><span class="line"><span class="cl">  }&#10;</span></span><span class="line"><span class="cl">}<span class="p">]</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>consul.d/config-entries/backend-service-router.hcl</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt"> 1&#10;</span><span class="lnt"> 2&#10;</span><span class="lnt"> 3&#10;</span><span class="lnt"> 4&#10;</span><span class="lnt"> 5&#10;</span><span class="lnt"> 6&#10;</span><span class="lnt"> 7&#10;</span><span class="lnt"> 8&#10;</span><span class="lnt"> 9&#10;</span><span class="lnt">10&#10;</span><span class="lnt">11&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-hcl" data-lang="hcl"><span class="line"><span class="cl"><span class="n">Kind</span> <span class="o">=</span> <span class="s2">&#34;service-splitter&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">Name</span> <span class="o">=</span> <span class="s2">&#34;backend&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="n">Splits</span> <span class="o">=</span> <span class="p">[</span>{&#10;</span></span><span class="line"><span class="cl"><span class="n">  Weight</span> <span class="o">=</span> <span class="m">75</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">  ServiceSubset</span> <span class="o">=</span> <span class="s2">&#34;v1&#34;</span>&#10;</span></span><span class="line"><span class="cl">}<span class="p">,</span>&#10;</span></span><span class="line"><span class="cl">{&#10;</span></span><span class="line"><span class="cl"><span class="n">  Weight</span> <span class="o">=</span> <span class="m">25</span>&#10;</span></span><span class="line"><span class="cl"><span class="n">  ServiceSubset</span> <span class="o">=</span> <span class="s2">&#34;v2&#34;</span>&#10;</span></span><span class="line"><span class="cl">}<span class="p">]</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>consul.d/config-entries/backend-service-splitter.hcl</span>
    </div>
</div>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/birds-v1-2_hu7f6d488877be14f859eccdaea4f48797_553771_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Frontend con datos de la versión v1 del backend"><img src="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/birds-v1-2_hu7f6d488877be14f859eccdaea4f48797_553771_300x200_fit_q90_h2_box_3.webp" width="246" height="200" alt="Frontend con datos de la versión v1 del backend" title="Frontend con datos de la versión v1 del backend" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/birds-v2_huc7de3cba34bed59e33cf30928c44081b_548732_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Frontend con datos de la versión v2 del backend"><img src="https://picodotdev.github.io/blog-bitix/2022/10/las-funcionalidades-de-un-service-mesh-en-una-arquitectura-de-microservicios/images/birds-v2_huc7de3cba34bed59e33cf30928c44081b_548732_300x200_fit_q90_h2_box_3.webp" width="246" height="200" alt="Frontend con datos de la versión v2 del backend" title="Frontend con datos de la versión v2 del backend" class="&#34; " loading="lazy"></a></p>
<figcaption>Frontend con datos de la versión v1 y v2 del backend</figcaption>
</figure>
</div>
<h3 id="libros-sobre-consul">Libros sobre Consul</h3>
<p>Este artículo es prácticamente un resumen del libro <a href="https://amzn.to/3F0SmjY">Consul: Up &amp; Running</a> que muestra y explica todo esto de forma más detallada y extensa además de mostrarlo usando Kubernetes. Está bien explicado y su ejemplo es muy fácil de seguir y probar además de muy didáctico para experimentar con los conceptos y funcionalidades comentadas de Consul. Otros libros sobre Consul y <em>service mesh</em> son <a href="https://amzn.to/3seULzU">Simplifying Service Management with Consul</a> y <a href="https://amzn.to/3DiIiS6">Mastering Service Mesh</a>.</p>
<div class="media media-amazon">
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=1098106148&amp;linkId=e909576440e5503d3c2fd4009a91dc61" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=1800202628&amp;linkId=0d74c8c655bfda8294f77b83a43ea5eb" title="Amazon" class="lozad"></iframe>
  <iframe style="width:120px;height:240px;" width="120" height="240" scrolling="no" frameborder="0" src="https://rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=blobit-21&amp;language=es_ES&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=1789615798&amp;linkId=bfdecdefc368de25311d26426c4f7bdd" title="Amazon" class="lozad"></iframe>
</div>
<div class="alert alert-secondary sourcecode">
    <img src="https://picodotdev.github.io/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon">
    <p>
            El <a href="https://github.com/picodotdev/blog-ejemplos/tree/master/ConsulServiceMesh">código fuente completo del ejemplo</a> puedes descargarlo del repositorio de ejemplos de Blog Bitix alojado en GitHub.</p>
</div>
]]>
        </content>
        
            
                <category term="programacion"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2022/10/formas-de-monetizar-una-pagina-web-o-blog-y-alternativas-a-adsense/</id>
        <title>Formas de monetizar una página web o blog y alternativas a AdSense</title>
        <updated>2022-10-13T18:00:00+02:00</updated>
        <published>2022-10-13T18:00:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2022/10/formas-de-monetizar-una-pagina-web-o-blog-y-alternativas-a-adsense/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>Si tenemos un blog o una página web probablemente requiera algún gasto como el dominio o el <em>hosting</em>. Pasado un tiempo si los artículos del blog son interesantes empezaremos a tener visitas que podemos monetizar para costear los gastos y seguramente algo más. En este artículo comento varias formas sencillas de monetizar una página web o blog que algunas no requieren mucho trabajo.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/blogbitix.svg" width="200" height="200" alt="Blog Bitix" title="Blog Bitix" class="" loading="false&#34;"></p>
</div>
<p>Lo que más cuesta de tener una página web o blog es el tiempo que requiere escribir los artículos, editarlos, hacer un ejemplo de código si es el caso de un blog técnico como este y obtener las imágenes a incluir. Teniendo en cuenta todas las tareas que requiere cada artículo supone fácilmente un trabajo de entre 3 y 10 horas según mi experiencia. A pesar de todo solo es nuestro tiempo y muchos si seguimos escribiendo en un blog lo hacemos de buen gusto y nuestra propia motivación. Con las vistas que tengo en mi blog, otros blogs con mayor número de visitas los ingresos serán notablemente mayores, suficientes para costear los gastos del blog y algunos pequeños caprichos.</p>
<p>Sin embargo, otra parte es que quizá el <em>hosting</em> y tener un dominio para el blog nos cueste algo de dinero, el dominio alrededor de 12 € al año y el <em>hosting</em> 5 €, 10 € o algo más al mes con lo que al año serían unos 130 € aproximadamente. Que no es una cantidad elevada pero hay que añadirlo al tiempo de dedicación que requieren los artículos y que es un coste recurrente en caso de que el blog o página web se abandone por falta de tiempo de seguir escribiendo en él.</p>
<p>Teniendo en cuenta el esfuerzo que requiere a los creadores de contenido mantener un blog o página web o en el caso de los <em>youtubers</em> sus canales, en mi caso al menos no tengo ningún dilema por aprovechar a monetizar el contenido de varias de las formas que comento en el artículo. Lo que sí trato es que las diferentes formas de monetización no sean excesivamente molestas para el usuario al acceder al contenido ni sea el usuario el que pague por el contenido.</p>
<p>Con una cifra de páginas visitas respetable a partir de 25K al mes que se llega en más o menos tiempo dependiendo del buscador Google y la capacidad de fidelizar a los usuarios, hay varias formas de monetizar un blog o página web para sufragar los gastos que ocasionen, aunque aún monetizando probablemente no compensen el tiempo de dedicación al blog, simplemente permite un pequeño ingreso como compensación.</p>
<p>El tiempo de dedicación que requiere crear contenido en las diferentes formas y los gastos que genera el servicio si los tiene son dos motivos por los que se puede abandonar al cabo de unos meses o pocos años. Para minimizar el problema de los costes o conseguir otra motivación hay varias formas de obtener ingresos de forma sencilla.</p>
<p>De forma anual publico con detalle y de forma transparente las estadísticas de mi blog tanto en visitas como en ingresos por publicidad en los <a href="https://picodotdev.github.io/blog-bitix/series/hemeroteca/">artículos de hemeroteca</a> de final de año.</p>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="formas-de-monetizar-una-página-o-blog">Formas de monetizar una página o blog</h3>
<p>En gran medida los ingresos por publicidad dependen del número de usuarios y páginas vistas del sitio web, si se quiere aumentar los ingresos una de las formas es tratar de aumentar las visitas del sitio web, con mejor contenido que resulte de interés para los usuarios, mejor SEO para que las páginas posicionan mejor en la lista de resultados de las páginas que atraigan mayor tráfico desde los buscadores y fidelizar a los usuarios para que vuelan en el caso de un blog proporcionando un <em>feed</em> de modo que los usuarios tengan una notificación de que hay un nuevo artículo.</p>
<p>Otro aspecto que afecta a las visitas e ingresos depende de la temática del sitio web o blog y la ubicación de los usuarios que acceden al sitio web, no es lo mismo un sitio web de contenido muy popular o un sitio web de nicho como uno tecnológico y de programación. Tampoco es lo mismo un público de habla inglés que uno en español, o por región no es lo mismo usuarios de Estados Unidos que de España y latinoamérica.</p>
<h4 id="publicidad-con-google-adsense">Publicidad con Google AdSense</h4>
<p>En mi caso un blog de temática tecnología y programación en español actualmente con unas 40K páginas vistas al mes tengo unos ingresos de 20 €/mes con <a href="https://www.google.com/adsense/">AdSense</a> (los primeros varios años no llegaba a 10 €/mes). No considero que sean muchas páginas vistas para un blog con ya casi 10 años publicando al menos un artículo a la semana nuevo y único. AdSense paga cuando se acumulan 70 € de ingresos y el pago se realiza mediante transferencia bancaria en el mes que se supera dicha cantidad de saldo acumulado.</p>
<p>Una de las ventajas de AdSense es que no requiere muchos esfuerzo para integrarlo y una vez hecho ningún mantenimiento, simplemente insertar un <em>script</em> para mostrar la publicidad y decidir las ubicaciones donde insertar la publicidad, a medida que aumentan las visitas los ingresos mensuales aumentan proporcionalmente con algunas variaciones mensuales o estacionales como periodos de vacaciones que hay menos tráfico.</p>
<p>Llegar a tener una cifra respetable de visitas no es fácil, cuesta mucho tiempo de dedicación a la página web o blog y sobre todo constancia y dedicación para escribir artículos al ritmo de al menos uno a la semana durante meses e incluso algún año. Este blog tiene ya más de una década, más de medio millar de artículos escritos (multiplicarlo por las horas de dedicación por artículo) y aún solo tengo esas 40K páginas vistas a fecha del 2022.</p>
<div class="media">
<figure>
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/google-adsense.svg" width="200" height="150" alt="Google AdSense" title="Google AdSense" class="&#34; " loading="lazy"></p>
<figcaption>Google AdSense</figcaption>
</figure>
</div>
<h4 id="publicidad-con-videootv-alternativa-o-complemento-a-adsense">Publicidad con Videoo.tv, alternativa o complemento a AdSense</h4>
<p>La publicidad de AdSense suele ser un banner con una imagen estática o con algunas transiciones que se colocan en sitios específicos de la página o insertado entre diferentes secciones del contenido. La red publicitaria de <a href="https://videoo.tv/es?referente=379#sctf">Videoo.tv</a> consiste en un carrusel formado por las propias páginas del sitio web que en ocasiones muestran un vídeo en la parte inferior derecha del navegador de publicidad, salvo que el usuario no lo active sin sonido. La publicidad de Videoo.tv no es demasiado intrusiva ni molesta ya que el usuario la puede ignorar o cerrar la ventana publicitaria si no le interesa.</p>
<p>Al igual que la publicidad de AdSense los ingresos se generan por visualizaciones con lo que están relacionadas con del número de visitas, a más visitas lo normal es que haya más ingresos. Añadir la publicidad de Videoo.tv también es muy sencillo basta con insertar un script para mostrar la publicidad y elegir una ubicación para mostrar el carrusel, una vez hecho tampoco requiere mantenimiento adicional.</p>
<p>Desde que añadí Videoo.tv estoy muy satisfecho con su rendimiento de ingresos siendo mayor que AdSense llegando a los 30 €/mes que se suman a los propios de AdSense, al mostrar ambas publicidades quizá haya una pequeña competencia entre ambas pero no creo que sea mucha. Videoo.tv ofrece la posibilidad de pago mediante <a href="https://www.paypal.com/">PayPal</a> o mediante transferencia bancaria. Como ventaja es que pagan cuando se superan 10 € de saldo acumulado que con unos pocos miles de visitas se supera fácilmente, la desventaja es que lo generado un mes lo pagan cuatro meses después que no es demasiado inconveniente pasados esos cuatro meses iniciales cuando ya se empieza a cobrar todos los meses.</p>
<p>La gente de Videoo.tv se puso en contacto conmigo y me ofreció la posibilidad de añadir su publicidad, si te interesa añadir su publicidad ponte en contacto con ellos para decirles que estás interesado, y si esta información te ha resultado interesante y solicitar unirte a su publicidad te dejo mi <a href="https://videoo.tv/es?referente=379#sctf">enlace de afiliado de Video.tv</a>.</p>
<div class="media">
<figure>
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/videoo.webp" width="200" height="150" alt="Videoo.tv" title="Videoo.tv" class="&#34; " loading="lazy"></p>
<figcaption>Videoo.tv</figcaption>
</figure>
</div>
<h4 id="enlaces-de-afiliado-amazon-y-otras-páginas-de-comercio-electrónico">Enlaces de afiliado, Amazon y otras páginas de comercio electrónico</h4>
<p>Otra forma de ingresos es la publicidad de afiliado que se monetiza en vez de por visualización cuando los usuarios realizan una compra a través del enlace de afiliado, enlaces que hay que seleccionar en función de contenido del articulo para promocionar productos relacionados, los enlaces pueden ser de texto o en el caso de Amazon unos <em>widgets</em> que muestran una foto del producto y su precio.</p>
<p>na de las páginas más populares de comercio electrónico es <a href="https://www.amazon.es">Amazon</a> en la que es posible encontrar casi cualquier producto pero todas las páginas de comercio electrónico ofrecen una forma de afiliación incluyendo las páginas de <a href="https://www.elcorteingles.es/">El Corte Inglés</a>, <a href="https://www.mediamarkt.es/">MediaMarkt</a>, <a href="https://www.pccomponentes.com/">PC Componentes</a> y <a href="https://www.fnac.es/">FNAC</a> también con un amplio catálogo de productos tecnológicos.</p>
<p>Los ingresos por enlaces de afiliado tienen menos conversión y son menos estables que la publicidad por visualización pero dependiendo del importe de los productos vendidos a través de afiliación los ingresos pueden llegar a ser superiores en meses y épocas concretas como el <em>black friday</em> y las navidades. Cuando alguien hace una compra a través del enlace se obtiene una pequeña comisión, pueden ser libros, películas, aparatos electrónicos, ropa, viajes, hoteles, &hellip; cualquier artículo de una de las mayores y populares tiendas de comercio electrónico.</p>
<p>En mi caso los ingresos por los enlaces de <a href="https://afiliados.amazon.es">afiliado de Amazon</a> no superan en mucho los 70 € al año. Cualquier artículo cuyo contenido tenga productos relacionados es candidato a incluir enlaces de afiliado.</p>
<p>AdSense y los enlaces de afiliado de Amazon son dos formas sencillas y pasivas de monetizar un blog que dependen del número de páginas vistas, a mayor número de páginas vistas los ingresos serán mayores en proporción similar. Para aumentar las vistas en un blog no hay secretos y son escribir cuanto más contenido mejor y contenido de calidad que les interese a los lectores para atraer visitas de los buscadores, suscriptores de las herramientas de sindicación y de las redes sociales en las que se compartan los artículos.</p>
<div class="media">
<figure>
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/amazon.svg" width="200" height="150" alt="Amazon" title="Amazon" class="&#34; " loading="lazy"></p>
<figcaption>Amazon</figcaption>
</figure>
</div>
<h4 id="artículos-patrocinados">Artículos patrocinados</h4>
<p>Es sorprendente pero no son pocas las personas que se ponen en contacto interesadas en insertar algún tipo de publicidad en un sitio web existente bien posicionado y con visitas. Simplemente hay que tener un poco de cuidado ya que algunos en cuanto se les menciona que la colaboración tiene un coste pierden el interés, pero más aún hay que tener cuidado con algunos estafadores que al realizar el pago de por medio intentan hacer algún ataque de <em>phishing</em> para hacerse con las credenciales bancarias o de PayPal.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2021/11/ejemplo-de-un-potencial-ataque-informatico-de-phishing-el-caso-de-el-gatico-biever/">Ejemplo de un potencial ataque informático de phishing, El caso de El Gatico Biever</a></li>
</ul>
<h4 id="inserción-de-enlaces-y-artículos-patrocinados">Inserción de enlaces y artículos patrocinados</h4>
<p>Otra forma de monetizar son la de aceptar artículos patrocinados por los que se suele pagar un precio de entre 50 € y 150 € aproximadamente por artículo con al menos unas 500 y 800 palabras de contenido, dependiendo de las visitas de nuestro blog, posicionamiento en los buscadores y de lo que valoremos nuestro tiempo para redactar y publicar el artículo. En algunos casos es el propio interesado en ofrecer el contenido del artículo con lo que simplemente requiere publicarlo.</p>
<p>Dos de las plataformas que ponen en contacto anunciantes y editores para recibir propuestas de artículos patrocinados son <a href="https://www.publisuites.com/aff/b6b76b095907d91e588d1c714c4a39ad9735c8cf/">Publisuites</a> y <a href="https://coobis.com/">Coobis</a>. Es recomendable que el artículo lo escribamos nosotros para que los buscadores no lo detecten como contenido duplicado y nos penalicen a nivel de <abbr title="Search Engine Optimization">SEO</abbr>. En cualquier caso cuando recibimos una propuesta no tenemos la obligación de escribir el artículo si su temática no corresponde con la línea editorial de nuestro blog o por cualquier otro motivo si por ejemplo en ese momento no tenemos tiempo, aunque sí deberemos dar una respuesta en un plazo de unos días aunque sea negativa.</p>
<p>La forma de pago recomendable para estos casos es a través de PayPal o transferencia bancaria ya que va a ser puntual y seguramente de alguien desconocido del que solo se tiene su cuenta de correo electrónico, ni los pagos superarán una cantidad elevada.</p>
<p>Por otra parte tampoco conviene abusar de la publicidad o artículos patrocinados, no ha de ser excesiva con muchos <em>banners</em> de publicidad, tampoco molestar con ventanas emergentes ni que impidan leer correctamente el contenido de la página y los artículos patrocinados deberían ser de interés para el lector según la temática del blog y para ser honestos con un aviso de que el artículo está patrocinado aunque la opinión sea propia y sincera.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2017/02/servidores-cloud-vps-de-cloudingio-para-hospedar-blogs-y-paginas-web/">Servidores Cloud VPS de Clouding.io para hospedar blogs y páginas web</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2021/12/aprovisionar-un-servidor-en-la-infraestructura-cloud-de-clouding-con-ubuntu-y-nginx-usando-ansible-y-protocolo-seguro-https-con-lets-encrypt/">Aprovisionar un servidor en la infraestructura cloud de Clouding con Ubuntu y Nginx usando Ansible y protocolo seguro HTTPS con Let&rsquo;s Encrypt</a></li>
</ul>
<div class="media">
<figure>
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/clouding.svg" width="200" height="150" alt="Clouding.io" title="Clouding.io" class="&#34; " loading="lazy"></p>
<figcaption>Marcas patrocinadoras de artículos</figcaption>
</figure>
</div>
<h4 id="análisis-de-productos">Análisis de productos</h4>
<p>Dependiendo de la temática del sitio web o blog al cabo del tiempo quizá haya una marca comercial interesada en publicar un artículo acerca de uno de sus productos. La colaboración en estos casos consiste en redactar un artículo analizando uno de sus productos para los que la marca envía sin coste el producto a analizar de modo que se puede probar y emitir una opinión y hacer un análisis propio y honesto.</p>
<p>Una vez escrito el artículo uno se puede quedar en propiedad el artículo para uso personal o para venderlo a través de alguna página de venta de segunda mano y esta es la forma de pago. Dado que una marca suele tener varios artículos es muy posible que la colaboración consista en varios artículos de cada uno de sus productos por separado. Con esta forma de monetización ya he escrito varios artículos acerca de teclados mecánicos, micrófono e interfaz de audio de las marcas <a href="https://kmovetech.com/">KEMOVE</a> y <a href="https://www.maono.com">MAONO</a> que son los siguientes.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/01/desempaquetado-y-analisis-de-teclado-mecanico-compacto-dierya-dk61e/">Desempaquetado y análisis de teclado mecánico compacto DIERYA DK61E</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/03/desempaquetado-y-analisis-de-teclado-mecanico-compacto-e-inalambrico-dierya-dk63/">Desempaquetado y análisis de teclado mecánico compacto e inalámbrico DIERYA DK63</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/05/desempaquetado-y-analisis-de-teclado-mecanico-compacto-e-inalambrico-kemove-dk61/">Desempaquetado y análisis de teclado mecánico compacto e inalámbrico KEMOVE DK61</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/05/desempaquetado-de-la-funda-de-teclado-tamano-60-kemove/">Desempaquetado de la funda de teclado 60% KEMOVE</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/07/desempaquetado-y-analisis-del-microfono-maono-hd300t/">Desempaquetado y análisis del micrófono MAONO HD300T</a></li>
<li><a href="https://picodotdev.github.io/blog-bitix/2022/08/desempaquetado-y-analisis-de-la-interfaz-de-audio-maonocaster-e2/">Desempaquetado y análisis de la interfaz de audio Maonocaster E2</a></li>
</ul>
<div class="media">
<figure>
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/kemove.webp" width="200" height="150" alt="KEMOVE" title="KEMOVE" class="&#34; " loading="lazy">
<img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/maono.webp" width="200" height="150" alt="MAONO" title="MAONO" class="&#34; " loading="lazy"></p>
<figcaption>Marcas patrocinadoras de análisis de productos</figcaption>
</figure>
</div>
<h4 id="servicios-asociados-al-contenido">Servicios asociados al contenido</h4>
<p>Algunos usuarios quizá no monetizan un sitio web o blog directamente con publicidad o con patrocinios pero lo hacen de forma indirecta a través de cursos de formación o libros relacionados con el contenido, en los que ya un usuario paga por ese curso o libro u otra forma de servicio.</p>
<h4 id="donaciones">Donaciones</h4>
<p>Otra forma de ingresos son donaciones aportadas por los usuarios del sitio web. En mi caso por la temática del blog no considero esta forma de ingresos y prefiero varias de las anteriores. En el caso de el <a href="https://github.com/picodotdev/alis/">script para instalar Arch Linux</a> la donación si es una forma de ingresos que consideraría sobre todo para aquellos usuarios que lo usan para su computadora de trabajo pero PayPal al hacer el pago requiere mostrar el nombre real y <a href="https://github.com/sponsors">GitHub Sponsors</a> requiere rellenar unos formularios. En cualquier caso no considero que sea muy elevada y estimo que sería muy irregular.</p>
<h3 id="forma-de-cobro">Forma de cobro</h3>
<p>En el caso de un intercambio monetario salvo AdSense y los enlaces de afiliado de Amazon en vez de la transferencia bancaria la forma más recomendable para la forma de pago es PayPal, no conviene dar el número de cuenta bancaria a nadie que se haya puesto en contacto mediante correo electrónico ni sea de una empresa reconocida.</p>
<p>Aunque PayPal aplica una gran comisión que llega al 4% del importe recibido es más seguro que dar el número de cuenta para recibir el dinero mediante transferencia bancaria sobre todo para los artículos patrocinados que son personas completamente desconocidas y puntuales.</p>
]]>
        </content>
        
            
                <category term="blog"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    <entry>
        <id>https://picodotdev.github.io/blog-bitix/2022/10/como-descargar-videos-musica-o-audio-de-youtube-y-otras-webs/</id>
        <title>Cómo descargar vídeos, música o audio de YouTube y otras webs</title>
        <updated>2022-10-05T21:00:00+02:00</updated>
        <published>2022-10-05T21:00:00+02:00</published>
        <link rel="alternate" type="text/html" href="https://picodotdev.github.io/blog-bitix/2022/10/como-descargar-videos-musica-o-audio-de-youtube-y-otras-webs/"/>
        <author><name>picodotdev</name></author>
        <content type="html">
        <![CDATA[<p><strong>En caso de buscar un vídeo o música es probable que esté subido en YouTube, en el caso de las canciones muchas incluyen el vídeo original que acompaña la canción y de artistas de varias décadas anteriores al inicio de YouTube. Además de contenido antiguo hay muchas personas dedicadas a crear contenido nuevo ya sea como <em>videoblogs</em> o <em>podcasts</em>. Con todo el contenido disponible en YouTube descargar un vídeo o solo audio de un vídeo es algo deseado pero que no permite YouTube directamente pero hay aplicaciones que permiten descargar el contenido de YouTube.</strong></p>]]>
        <![CDATA[<div class="logotypes">
<p><img src="https://picodotdev.github.io/blog-bitix/assets/images/logotypes/youtube.svg" width="400" height="89" alt="YouTube" title="YouTube" class="" loading="false&#34;"></p>
</div>
<p>El servicio de vídeo <a href="https://www.youtube.com/">YouTube</a> se ha convertido en la plataforma mayoritaria para compartir contenido en formato de vídeo. Prácticamente cualquier contenido de vídeo se puede encontrar en YouTube, incluso vídeos antiguos anteriores a la existencia de YouTube como una buena colección de música.</p>
<p>Algo que no facilita YouTube es descargar su contenido para consumirlo fuera de línea lo que impide a algunos usuarios consumir su contenido según sus necesidades en vez de las que solo permite YouTube.</p>
<p>Algunos usuarios desean guardar sus canciones favoritas y escucharlas fuera de línea como por ejemplo en un <em>smartphone</em> sin necesidad de conexión a internet en cualquier lugar que se disponga del <em>smartphone</em>. También para evitar buena cantidad de publicidad que inserta YouTube que son los ingresos que percibe el servicio y los creadores de contenido pero que dada la cantidad de publicidad resulta molesta para los usuarios.</p>
<p>Hay algunas aplicaciones que permiten descargar los vídeos de páginas como YouTube, aplicaciones tanto con interfaz gráfica como de línea de comandos.</p>
<p>Una vez descargado el vídeo o el audio quizá dependiendo del dispositivo donde se pretenda reproducir quizá haya que cambiar el formato de del archivo o se desee extraer únicamente el audio.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2016/04/cambiar-el-formato-de-archivos-de-video-o-peliculas-en-gnu-linux/">Cambiar el formato de archivos de vídeo o películas en GNU/Linux</a></li>
</ul>
<div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Contenido del artículo</h2><toc></toc></div>
<h3 id="aplicaciones-para-descargar-vídeos-de-youtube">Aplicaciones para descargar vídeos de YouTube</h3>
<p>Una aplicación con interfaz gráfica en principio es muy intuitiva de usar y no requiere tanto conocimiento inicial para usarla, por el otro lado una aplicación con interfaz de línea de comandos aunque requiere conocer las opciones del comando para realizar la tarea deseada una vez conocido es más rápido conseguir lo que se desea que con una aplicación de interfaz gráfica, para conocer el comando exacto y las opciones se suelen proporcionar ejemplos de uso.</p>
<p>Los gestores de descargas son simplemente una de las categorías de programas que un usuario puede considerar de utilidad. Para cada tarea o necesidad de un usuario es casi seguro que exista un programa específico.</p>
<ul>
<li><a href="https://picodotdev.github.io/blog-bitix/2020/03/listado-de-programas-esenciales-segun-categoria-para-gnu-linux/">Listado de programas esenciales según categoría para GNU/Linux</a></li>
<li><a href="https://wiki.archlinux.org/title/List_of_applications#Download_managers">Download managers</a></li>
</ul>
<h4 id="con-interfaz-gráfica">Con interfaz gráfica</h4>
<p>Un gestor de descargas, permite gestionar las descargas de cualquier fuente lo único necesario es el enlace del contenido a descargar. Algunos gestores de descargas entre las fuentes de descarga que permite está YouTube y es posible descargar un vídeo como únicamente el audio o la música.</p>
<p>Una aplicación específica para descargar vídeos y audio de YouTube eligiendo el formato deseado y en diferentes calidades que ofrece YouTube es <a href="https://clipgrab.de/es">ClipGrab</a>, un gestor de descargas que soporta descargar vídeos de YouTube o el audio de los vídeos es <a href="https://beta.jdownloader.org/">JDownloader</a>. ClipGrab solo permite descargar de YouTube y JDownloader permite descargar vídeos de otras muchas páginas. Las dos aplicaciones tienen versiones para los sistemas operativos <a href="https://www.microsoft.com/es-es/windows/">Windows</a>, <a href="https://www.apple.com/macos/">macOS</a> así como <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a>.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/10/como-descargar-videos-musica-o-audio-de-youtube-y-otras-webs/images/clipgrab_huf9459247fc44dbb45c99219b58e1c9c4_261222_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="ClipGrab"><img src="https://picodotdev.github.io/blog-bitix/2022/10/como-descargar-videos-musica-o-audio-de-youtube-y-otras-webs/images/clipgrab_huf9459247fc44dbb45c99219b58e1c9c4_261222_300x250_fit_q90_h2_box_3.webp" width="300" height="219" alt="ClipGrab" title="ClipGrab" class="&#34; " loading="lazy"></a>
<a href="https://picodotdev.github.io/blog-bitix/2022/10/como-descargar-videos-musica-o-audio-de-youtube-y-otras-webs/images/jdownloader_hu20b3ba12ba1cfce073fb8e953e94b513_73059_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="JDownloader"><img src="https://picodotdev.github.io/blog-bitix/2022/10/como-descargar-videos-musica-o-audio-de-youtube-y-otras-webs/images/jdownloader_hu20b3ba12ba1cfce073fb8e953e94b513_73059_300x250_fit_q90_h2_box_3.webp" width="300" height="218" alt="JDownloader" title="JDownloader" class="&#34; " loading="lazy"></a></p>
<figcaption>ClipGrab y JDownloader</figcaption>
</figure>
</div>
<p>Este es un vídeo descargado de YouTube con un corto de animación de los varios que ha creado la fundación <a href="https://www.blender.org/">Blender</a> que desarrolla el programa de animación 3D y reproducido con aun aplicación reproductor instalado en la computadora.</p>
<div class="media">
<figure>
<p><a href="https://picodotdev.github.io/blog-bitix/2022/10/como-descargar-videos-musica-o-audio-de-youtube-y-otras-webs/images/spring_hu034d4698824260e9b33e342b2f0c52ae_1754294_2560x1440_fit_q90_h2_box_3.webp" data-gallery="" title="Spring"><img src="https://picodotdev.github.io/blog-bitix/2022/10/como-descargar-videos-musica-o-audio-de-youtube-y-otras-webs/images/spring_hu034d4698824260e9b33e342b2f0c52ae_1754294_300x250_fit_q90_h2_box_3.webp" width="300" height="165" alt="Spring" title="Spring" class="&#34; " loading="lazy"></a></p>
<figcaption>Spring</figcaption>
</figure>
</div>
<h4 id="de-línea-de-comandos">De línea de comandos</h4>
<p>La línea de comandos es más rápida conociendo el comando y hace fácil la descarga. La opción más conocida es <a href="https://github.com/ytdl-org/youtube-dl/">youtube-dl</a> y un <em>fork</em> de esta es <a href="https://github.com/yt-dlp/yt-dlp">yt-dlp</a> que incorpora algunas características adicionales.</p>
<p>Dado que ambos programas están relacionados las opciones del comando son las mismas. Para descargar un vídeo y solo el audio se utiliza el siguiente comando.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ youtube-dl -f <span class="s1">&#39;bestvideo,bestaudio&#39;</span> -o <span class="s1">&#39;%(title)s.f%(format_id)s.%(ext)s&#39;</span> <span class="o">[</span>URL<span class="o">]</span>&#10;</span></span><span class="line"><span class="cl">$ youtube-dl -f <span class="s1">&#39;bestvideo&#39;</span> -o <span class="s1">&#39;%(title)s.f%(format_id)s.%(ext)s&#39;</span> <span class="s2">&#34;https://www.youtube.com/watch?v=NJe4rEyfQ3g&#34;</span>&#10;</span></span><span class="line"><span class="cl">$ youtube-dl -f <span class="s1">&#39;bestaudio&#39;</span> -o <span class="s1">&#39;%(title)s.f%(format_id)s.%(ext)s&#39;</span> <span class="s2">&#34;https://www.youtube.com/watch?v=NJe4rEyfQ3g&#34;</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>youtube-dl.sh</span>
    </div>
</div>
<p>El comando youtube-dl permite otras muchas opciones como la descarga de una imagen y otras opciones de selección para la calidad del vídeo tanto en resolución como en tamaño de archivo descargado así como variables para nombrar el archivo descargado, más opciones para casos de uso avanzados que las aplicaciones más sencillas pero más fáciles de usar con interfaz gráfica.</p>
]]>
        </content>
        
            
                <category term="software"/>
            
                <category term="planeta-codigo"/>
            
        
    </entry>
    
</feed>