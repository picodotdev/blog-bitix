<!DOCTYPE html>
<html amp lang="en">
<head>
  <meta charset="utf-8">
  <meta name="base" content="/blog-bitix/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="picodotdev">
  <meta name="keywords" content="java, programacion, software, hardware, tapestry, software libre, gnu, linux, gnu/linux, unix, arch, arch linux, web, html, css, javascript, tutorial, guía, básico, avanzado, análisis, tecnología, juegos, productos">
  <meta name="description" content="Arch Linux is one of the most customizable GNU/Linux distributions but whose installation requires reading a good amount of documentation, guides or manuals to know what commands to execute step by step in the prompt of the system in which it leaves you the installation medium. Some users choose a distribution like Antergos, KaOS or Manjaro with a graphical installer and guided simply by the fact that they do not face Arch Linux installation from the command line. Still, executing a command and waiting for it to finish before entering another is slow and requires attention. &hellip;">
  <meta name="theme-color" content="#FFFFFF"/>
  

  <title>Script to install Arch Linux easy, fast, unattended, automated and customizable way</title>

  <link rel="shortcut icon" href="/blog-bitix/assets/favicon.ico">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/blog-bitix/assets/apple-touch-icon-144-precomposed.png">
  <link rel="alternate" href="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/index-amp.html" hreflang="en" title="Script to install Arch Linux easy, fast, unattended, automated and customizable way">
  
  <link rel="alternate" href="https://picodotdev.github.io/blog-bitix/2017/01/script-para-instalar-arch-linux-de-forma-facil-rapido-desatendido-automatizado-y-personalizable/index-amp.html" hreflang="es" title="Script para instalar Arch Linux de forma fácil, rápido, desatendido, automatizado y personalizable">
  
  <link rel="canonical" type="text/html" href="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/" hreflang="en">
  
  <link rel="humans" type="text/plain" href="/blog-bitix/humans.txt">
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link rel="preload" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400i,700,700i&display=swap" as="style">
  <link href="https://fonts.googleapis.com/css?family=PT+Serif:400,400i,700,700i&display=swap" rel="stylesheet">

  <!-- Social -->
<meta property="og:title" content="Script to install Arch Linux easy, fast, unattended, automated and customizable way">
<meta property="og:url" content="https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/index-amp.html">
<meta property="og:image" content="https://picodotdev.github.io/blog-bitix/assets/images/structured-data/archlinux-750.png">

<meta property="og:site_name" content="Blog Bitix">
<meta property="og:description" content="Arch Linux is one of the most customizable GNU/Linux distributions but whose installation requires reading a good amount of documentation, guides or manuals to know what commands to execute step by step in the prompt of the system in which it leaves you the installation medium. Some users choose a distribution like Antergos, KaOS or Manjaro with a graphical installer and guided simply by the fact that they do not face Arch Linux installation from the command line. Still, executing a command and waiting for it to finish before entering another is slow and requires attention. &hellip;">
<meta property="og:type" content="article">

<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:image" content="https://picodotdev.github.io/blog-bitix/assets/images/structured-data/archlinux-750.png">

<meta name="twitter:site" content="@picodotdev">
<meta name="twitter:title" content="Script to install Arch Linux easy, fast, unattended, automated and customizable way">
<meta name="twitter:description" content="Arch Linux is one of the most customizable GNU/Linux distributions but whose installation requires reading a good amount of documentation, guides or manuals to know what commands to execute step by step in the prompt of the system in which it leaves you the installation medium. Some users choose a distribution like Antergos, KaOS or Manjaro with a graphical installer and guided simply by the fact that they do not face Arch Linux installation from the command line. Still, executing a command and waiting for it to finish before entering another is slow and requires attention. &hellip;">
<meta name="twitter:creator" content="@picodotdev">

  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://picodotdev.github.io/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/index-amp.html"
    },
    "headline": "Script to install Arch Linux easy, fast, unattended, automated and customizable way",
    "image": {
        "@type": "ImageObject",
        "url": "https://picodotdev.github.io/blog-bitix/assets/images/structured-data/archlinux-750.png"
        
      },
    "datePublished": "2017-01-13T00:00:00+01:00",
    "dateModified": "2017-01-13T00:00:00+01:00",
    "inLanguage": "en",
    
    "wordCount": "5978",
    "license": "https://creativecommons.org/licenses/by-sa/4.0/",
    "author": {
        "@type": "Person",
        "name": "picodotdev",
        "description": "Ingeniero de software. I ♥ Java, GNU/Linux and libre software.",
        "url": "https://twitter.com/picodotdev/"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Blog Bitix",
        "logo": {
            "@type": "ImageObject",
            "url": "https://picodotdev.github.io/blog-bitix/assets/images/blog-bitix.svg"
        }
    },
    "description": "Arch Linux is one of the most customizable GNU/Linux distributions but whose installation requires reading a good amount of documentation, guides or manuals to know what commands to execute step by step in the prompt of the system in which it leaves you the installation medium. Some users choose a distribution like Antergos, KaOS or Manjaro with a graphical installer and guided simply by the fact that they do not face Arch Linux installation from the command line. Still, executing a command and waiting for it to finish before entering another is slow and requires attention."
}
  </script>
  

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Blog Bitix",
    "description": "Blog sobre al lenguaje de programación Java y la distribución GNU/Linux que uso habitualmente, Arch Linux, lo que aprendo sobre el software libre, la programación web y otros temas relacionados con la tecnología y la informática. El contenido puede contener trazas de asuntos fuera de tema.",
    "url": "https://picodotdev.github.io/blog-bitix/",
    "logo": {
        "@type": "ImageObject",
        "url": "https://picodotdev.github.io/blog-bitix/assets/images/blog-bitix.svg"
    }
}
  </script>

  <!-- boilerplate -->
  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>

  <!-- css -->
  <!-- theme -->
  <style amp-custom> 
  *,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none}:root{--bs-blue:#0d6efd;--bs-indigo:#6610f2;--bs-purple:#6f42c1;--bs-pink:#d63384;--bs-red:#dc3545;--bs-orange:#fd7e14;--bs-yellow:#ffc107;--bs-green:#198754;--bs-teal:#20c997;--bs-cyan:#0dcaf0;--bs-white:#fff;--bs-gray:#6c757d;--bs-gray-dark:#343a40;--bs-primary:#0d6efd;--bs-secondary:#6c757d;--bs-success:#198754;--bs-info:#0dcaf0;--bs-warning:#ffc107;--bs-danger:#dc3545;--bs-light:#f8f9fa;--bs-dark:#212529;--bs-font-sans-serif:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--bs-font-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--bs-gradient:linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0))}*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:var(--bs-font-sans-serif);font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){.h1,h1{font-size:2.5rem}}.h2,h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){.h2,h2{font-size:2rem}}.h3,h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){.h3,h3{font-size:1.75rem}}.h4,h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){.h4,h4{font-size:1.5rem}}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}.small,small{font-size:.875em}.mark,mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:var(--bs-font-monospace);font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:calc(1.625rem + 4.5vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-1{font-size:5rem}}.display-2{font-size:calc(1.575rem + 3.9vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-2{font-size:4.5rem}}.display-3{font-size:calc(1.525rem + 3.3vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-3{font-size:4rem}}.display-4{font-size:calc(1.475rem + 2.7vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-4{font-size:3.5rem}}.display-5{font-size:calc(1.425rem + 2.1vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-5{font-size:3rem}}.display-6{font-size:calc(1.375rem + 1.5vw);font-weight:300;line-height:1.2}@media (min-width:1200px){.display-6{font-size:2.5rem}}.list-unstyled{padding-left:0;list-style:none}.list-inline{padding-left:0;list-style:none}.list-inline-item{display:inline-block}.list-inline-item:not(:last-child){margin-right:.5rem}.initialism{font-size:.875em;text-transform:uppercase}.blockquote{margin-bottom:1rem;font-size:1.25rem}.blockquote>:last-child{margin-bottom:0}.blockquote-footer{margin-top:-1rem;margin-bottom:1rem;font-size:.875em;color:#6c757d}.blockquote-footer::before{content:"— "}.img-fluid{max-width:100%;height:auto}.img-thumbnail{padding:.25rem;background-color:#fff;border:1px solid #dee2e6;border-radius:.25rem;max-width:100%;height:auto}.figure{display:inline-block}.figure-img{margin-bottom:.5rem;line-height:1}.figure-caption{font-size:.875em;color:#6c757d}.container,.container-fluid,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{width:100%;padding-right:var(--bs-gutter-x,.75rem);padding-left:var(--bs-gutter-x,.75rem);margin-right:auto;margin-left:auto}@media (min-width:576px){.container,.container-sm{max-width:540px}}@media (min-width:768px){.container,.container-md,.container-sm{max-width:720px}}@media (min-width:992px){.container,.container-lg,.container-md,.container-sm{max-width:960px}}@media (min-width:1200px){.container,.container-lg,.container-md,.container-sm,.container-xl{max-width:1140px}}@media (min-width:1400px){.container,.container-lg,.container-md,.container-sm,.container-xl,.container-xxl{max-width:1320px}}.row{--bs-gutter-x:1.5rem;--bs-gutter-y:0;display:flex;flex-wrap:wrap;margin-top:calc(var(--bs-gutter-y) * -1);margin-right:calc(var(--bs-gutter-x)/ -2);margin-left:calc(var(--bs-gutter-x)/ -2)}.row>*{flex-shrink:0;width:100%;max-width:100%;padding-right:calc(var(--bs-gutter-x)/ 2);padding-left:calc(var(--bs-gutter-x)/ 2);margin-top:var(--bs-gutter-y)}.col{flex:1 0 0%}.row-cols-auto>*{flex:0 0 auto;width:auto}.row-cols-1>*{flex:0 0 auto;width:100%}.row-cols-2>*{flex:0 0 auto;width:50%}.row-cols-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-4>*{flex:0 0 auto;width:25%}.row-cols-5>*{flex:0 0 auto;width:20%}.row-cols-6>*{flex:0 0 auto;width:16.6666666667%}.col-auto{flex:0 0 auto;width:auto}.col-1{flex:0 0 auto;width:8.3333333333%}.col-2{flex:0 0 auto;width:16.6666666667%}.col-3{flex:0 0 auto;width:25%}.col-4{flex:0 0 auto;width:33.3333333333%}.col-5{flex:0 0 auto;width:41.6666666667%}.col-6{flex:0 0 auto;width:50%}.col-7{flex:0 0 auto;width:58.3333333333%}.col-8{flex:0 0 auto;width:66.6666666667%}.col-9{flex:0 0 auto;width:75%}.col-10{flex:0 0 auto;width:83.3333333333%}.col-11{flex:0 0 auto;width:91.6666666667%}.col-12{flex:0 0 auto;width:100%}.offset-1{margin-left:8.3333333333%}.offset-2{margin-left:16.6666666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.3333333333%}.offset-5{margin-left:41.6666666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.3333333333%}.offset-8{margin-left:66.6666666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.3333333333%}.offset-11{margin-left:91.6666666667%}.g-0,.gx-0{--bs-gutter-x:0}.g-0,.gy-0{--bs-gutter-y:0}.g-1,.gx-1{--bs-gutter-x:0.25rem}.g-1,.gy-1{--bs-gutter-y:0.25rem}.g-2,.gx-2{--bs-gutter-x:0.5rem}.g-2,.gy-2{--bs-gutter-y:0.5rem}.g-3,.gx-3{--bs-gutter-x:1rem}.g-3,.gy-3{--bs-gutter-y:1rem}.g-4,.gx-4{--bs-gutter-x:1.5rem}.g-4,.gy-4{--bs-gutter-y:1.5rem}.g-5,.gx-5{--bs-gutter-x:3rem}.g-5,.gy-5{--bs-gutter-y:3rem}@media (min-width:576px){.col-sm{flex:1 0 0%}.row-cols-sm-auto>*{flex:0 0 auto;width:auto}.row-cols-sm-1>*{flex:0 0 auto;width:100%}.row-cols-sm-2>*{flex:0 0 auto;width:50%}.row-cols-sm-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-sm-4>*{flex:0 0 auto;width:25%}.row-cols-sm-5>*{flex:0 0 auto;width:20%}.row-cols-sm-6>*{flex:0 0 auto;width:16.6666666667%}.col-sm-auto{flex:0 0 auto;width:auto}.col-sm-1{flex:0 0 auto;width:8.3333333333%}.col-sm-2{flex:0 0 auto;width:16.6666666667%}.col-sm-3{flex:0 0 auto;width:25%}.col-sm-4{flex:0 0 auto;width:33.3333333333%}.col-sm-5{flex:0 0 auto;width:41.6666666667%}.col-sm-6{flex:0 0 auto;width:50%}.col-sm-7{flex:0 0 auto;width:58.3333333333%}.col-sm-8{flex:0 0 auto;width:66.6666666667%}.col-sm-9{flex:0 0 auto;width:75%}.col-sm-10{flex:0 0 auto;width:83.3333333333%}.col-sm-11{flex:0 0 auto;width:91.6666666667%}.col-sm-12{flex:0 0 auto;width:100%}.offset-sm-0{margin-left:0}.offset-sm-1{margin-left:8.3333333333%}.offset-sm-2{margin-left:16.6666666667%}.offset-sm-3{margin-left:25%}.offset-sm-4{margin-left:33.3333333333%}.offset-sm-5{margin-left:41.6666666667%}.offset-sm-6{margin-left:50%}.offset-sm-7{margin-left:58.3333333333%}.offset-sm-8{margin-left:66.6666666667%}.offset-sm-9{margin-left:75%}.offset-sm-10{margin-left:83.3333333333%}.offset-sm-11{margin-left:91.6666666667%}.g-sm-0,.gx-sm-0{--bs-gutter-x:0}.g-sm-0,.gy-sm-0{--bs-gutter-y:0}.g-sm-1,.gx-sm-1{--bs-gutter-x:0.25rem}.g-sm-1,.gy-sm-1{--bs-gutter-y:0.25rem}.g-sm-2,.gx-sm-2{--bs-gutter-x:0.5rem}.g-sm-2,.gy-sm-2{--bs-gutter-y:0.5rem}.g-sm-3,.gx-sm-3{--bs-gutter-x:1rem}.g-sm-3,.gy-sm-3{--bs-gutter-y:1rem}.g-sm-4,.gx-sm-4{--bs-gutter-x:1.5rem}.g-sm-4,.gy-sm-4{--bs-gutter-y:1.5rem}.g-sm-5,.gx-sm-5{--bs-gutter-x:3rem}.g-sm-5,.gy-sm-5{--bs-gutter-y:3rem}}@media (min-width:768px){.col-md{flex:1 0 0%}.row-cols-md-auto>*{flex:0 0 auto;width:auto}.row-cols-md-1>*{flex:0 0 auto;width:100%}.row-cols-md-2>*{flex:0 0 auto;width:50%}.row-cols-md-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-md-4>*{flex:0 0 auto;width:25%}.row-cols-md-5>*{flex:0 0 auto;width:20%}.row-cols-md-6>*{flex:0 0 auto;width:16.6666666667%}.col-md-auto{flex:0 0 auto;width:auto}.col-md-1{flex:0 0 auto;width:8.3333333333%}.col-md-2{flex:0 0 auto;width:16.6666666667%}.col-md-3{flex:0 0 auto;width:25%}.col-md-4{flex:0 0 auto;width:33.3333333333%}.col-md-5{flex:0 0 auto;width:41.6666666667%}.col-md-6{flex:0 0 auto;width:50%}.col-md-7{flex:0 0 auto;width:58.3333333333%}.col-md-8{flex:0 0 auto;width:66.6666666667%}.col-md-9{flex:0 0 auto;width:75%}.col-md-10{flex:0 0 auto;width:83.3333333333%}.col-md-11{flex:0 0 auto;width:91.6666666667%}.col-md-12{flex:0 0 auto;width:100%}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.3333333333%}.offset-md-2{margin-left:16.6666666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.3333333333%}.offset-md-5{margin-left:41.6666666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.3333333333%}.offset-md-8{margin-left:66.6666666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.3333333333%}.offset-md-11{margin-left:91.6666666667%}.g-md-0,.gx-md-0{--bs-gutter-x:0}.g-md-0,.gy-md-0{--bs-gutter-y:0}.g-md-1,.gx-md-1{--bs-gutter-x:0.25rem}.g-md-1,.gy-md-1{--bs-gutter-y:0.25rem}.g-md-2,.gx-md-2{--bs-gutter-x:0.5rem}.g-md-2,.gy-md-2{--bs-gutter-y:0.5rem}.g-md-3,.gx-md-3{--bs-gutter-x:1rem}.g-md-3,.gy-md-3{--bs-gutter-y:1rem}.g-md-4,.gx-md-4{--bs-gutter-x:1.5rem}.g-md-4,.gy-md-4{--bs-gutter-y:1.5rem}.g-md-5,.gx-md-5{--bs-gutter-x:3rem}.g-md-5,.gy-md-5{--bs-gutter-y:3rem}}@media (min-width:992px){.col-lg{flex:1 0 0%}.row-cols-lg-auto>*{flex:0 0 auto;width:auto}.row-cols-lg-1>*{flex:0 0 auto;width:100%}.row-cols-lg-2>*{flex:0 0 auto;width:50%}.row-cols-lg-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-lg-4>*{flex:0 0 auto;width:25%}.row-cols-lg-5>*{flex:0 0 auto;width:20%}.row-cols-lg-6>*{flex:0 0 auto;width:16.6666666667%}.col-lg-auto{flex:0 0 auto;width:auto}.col-lg-1{flex:0 0 auto;width:8.3333333333%}.col-lg-2{flex:0 0 auto;width:16.6666666667%}.col-lg-3{flex:0 0 auto;width:25%}.col-lg-4{flex:0 0 auto;width:33.3333333333%}.col-lg-5{flex:0 0 auto;width:41.6666666667%}.col-lg-6{flex:0 0 auto;width:50%}.col-lg-7{flex:0 0 auto;width:58.3333333333%}.col-lg-8{flex:0 0 auto;width:66.6666666667%}.col-lg-9{flex:0 0 auto;width:75%}.col-lg-10{flex:0 0 auto;width:83.3333333333%}.col-lg-11{flex:0 0 auto;width:91.6666666667%}.col-lg-12{flex:0 0 auto;width:100%}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.3333333333%}.offset-lg-2{margin-left:16.6666666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.3333333333%}.offset-lg-5{margin-left:41.6666666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.3333333333%}.offset-lg-8{margin-left:66.6666666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.3333333333%}.offset-lg-11{margin-left:91.6666666667%}.g-lg-0,.gx-lg-0{--bs-gutter-x:0}.g-lg-0,.gy-lg-0{--bs-gutter-y:0}.g-lg-1,.gx-lg-1{--bs-gutter-x:0.25rem}.g-lg-1,.gy-lg-1{--bs-gutter-y:0.25rem}.g-lg-2,.gx-lg-2{--bs-gutter-x:0.5rem}.g-lg-2,.gy-lg-2{--bs-gutter-y:0.5rem}.g-lg-3,.gx-lg-3{--bs-gutter-x:1rem}.g-lg-3,.gy-lg-3{--bs-gutter-y:1rem}.g-lg-4,.gx-lg-4{--bs-gutter-x:1.5rem}.g-lg-4,.gy-lg-4{--bs-gutter-y:1.5rem}.g-lg-5,.gx-lg-5{--bs-gutter-x:3rem}.g-lg-5,.gy-lg-5{--bs-gutter-y:3rem}}@media (min-width:1200px){.col-xl{flex:1 0 0%}.row-cols-xl-auto>*{flex:0 0 auto;width:auto}.row-cols-xl-1>*{flex:0 0 auto;width:100%}.row-cols-xl-2>*{flex:0 0 auto;width:50%}.row-cols-xl-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-xl-4>*{flex:0 0 auto;width:25%}.row-cols-xl-5>*{flex:0 0 auto;width:20%}.row-cols-xl-6>*{flex:0 0 auto;width:16.6666666667%}.col-xl-auto{flex:0 0 auto;width:auto}.col-xl-1{flex:0 0 auto;width:8.3333333333%}.col-xl-2{flex:0 0 auto;width:16.6666666667%}.col-xl-3{flex:0 0 auto;width:25%}.col-xl-4{flex:0 0 auto;width:33.3333333333%}.col-xl-5{flex:0 0 auto;width:41.6666666667%}.col-xl-6{flex:0 0 auto;width:50%}.col-xl-7{flex:0 0 auto;width:58.3333333333%}.col-xl-8{flex:0 0 auto;width:66.6666666667%}.col-xl-9{flex:0 0 auto;width:75%}.col-xl-10{flex:0 0 auto;width:83.3333333333%}.col-xl-11{flex:0 0 auto;width:91.6666666667%}.col-xl-12{flex:0 0 auto;width:100%}.offset-xl-0{margin-left:0}.offset-xl-1{margin-left:8.3333333333%}.offset-xl-2{margin-left:16.6666666667%}.offset-xl-3{margin-left:25%}.offset-xl-4{margin-left:33.3333333333%}.offset-xl-5{margin-left:41.6666666667%}.offset-xl-6{margin-left:50%}.offset-xl-7{margin-left:58.3333333333%}.offset-xl-8{margin-left:66.6666666667%}.offset-xl-9{margin-left:75%}.offset-xl-10{margin-left:83.3333333333%}.offset-xl-11{margin-left:91.6666666667%}.g-xl-0,.gx-xl-0{--bs-gutter-x:0}.g-xl-0,.gy-xl-0{--bs-gutter-y:0}.g-xl-1,.gx-xl-1{--bs-gutter-x:0.25rem}.g-xl-1,.gy-xl-1{--bs-gutter-y:0.25rem}.g-xl-2,.gx-xl-2{--bs-gutter-x:0.5rem}.g-xl-2,.gy-xl-2{--bs-gutter-y:0.5rem}.g-xl-3,.gx-xl-3{--bs-gutter-x:1rem}.g-xl-3,.gy-xl-3{--bs-gutter-y:1rem}.g-xl-4,.gx-xl-4{--bs-gutter-x:1.5rem}.g-xl-4,.gy-xl-4{--bs-gutter-y:1.5rem}.g-xl-5,.gx-xl-5{--bs-gutter-x:3rem}.g-xl-5,.gy-xl-5{--bs-gutter-y:3rem}}@media (min-width:1400px){.col-xxl{flex:1 0 0%}.row-cols-xxl-auto>*{flex:0 0 auto;width:auto}.row-cols-xxl-1>*{flex:0 0 auto;width:100%}.row-cols-xxl-2>*{flex:0 0 auto;width:50%}.row-cols-xxl-3>*{flex:0 0 auto;width:33.3333333333%}.row-cols-xxl-4>*{flex:0 0 auto;width:25%}.row-cols-xxl-5>*{flex:0 0 auto;width:20%}.row-cols-xxl-6>*{flex:0 0 auto;width:16.6666666667%}.col-xxl-auto{flex:0 0 auto;width:auto}.col-xxl-1{flex:0 0 auto;width:8.3333333333%}.col-xxl-2{flex:0 0 auto;width:16.6666666667%}.col-xxl-3{flex:0 0 auto;width:25%}.col-xxl-4{flex:0 0 auto;width:33.3333333333%}.col-xxl-5{flex:0 0 auto;width:41.6666666667%}.col-xxl-6{flex:0 0 auto;width:50%}.col-xxl-7{flex:0 0 auto;width:58.3333333333%}.col-xxl-8{flex:0 0 auto;width:66.6666666667%}.col-xxl-9{flex:0 0 auto;width:75%}.col-xxl-10{flex:0 0 auto;width:83.3333333333%}.col-xxl-11{flex:0 0 auto;width:91.6666666667%}.col-xxl-12{flex:0 0 auto;width:100%}.offset-xxl-0{margin-left:0}.offset-xxl-1{margin-left:8.3333333333%}.offset-xxl-2{margin-left:16.6666666667%}.offset-xxl-3{margin-left:25%}.offset-xxl-4{margin-left:33.3333333333%}.offset-xxl-5{margin-left:41.6666666667%}.offset-xxl-6{margin-left:50%}.offset-xxl-7{margin-left:58.3333333333%}.offset-xxl-8{margin-left:66.6666666667%}.offset-xxl-9{margin-left:75%}.offset-xxl-10{margin-left:83.3333333333%}.offset-xxl-11{margin-left:91.6666666667%}.g-xxl-0,.gx-xxl-0{--bs-gutter-x:0}.g-xxl-0,.gy-xxl-0{--bs-gutter-y:0}.g-xxl-1,.gx-xxl-1{--bs-gutter-x:0.25rem}.g-xxl-1,.gy-xxl-1{--bs-gutter-y:0.25rem}.g-xxl-2,.gx-xxl-2{--bs-gutter-x:0.5rem}.g-xxl-2,.gy-xxl-2{--bs-gutter-y:0.5rem}.g-xxl-3,.gx-xxl-3{--bs-gutter-x:1rem}.g-xxl-3,.gy-xxl-3{--bs-gutter-y:1rem}.g-xxl-4,.gx-xxl-4{--bs-gutter-x:1.5rem}.g-xxl-4,.gy-xxl-4{--bs-gutter-y:1.5rem}.g-xxl-5,.gx-xxl-5{--bs-gutter-x:3rem}.g-xxl-5,.gy-xxl-5{--bs-gutter-y:3rem}}.table{--bs-table-bg:transparent;--bs-table-accent-bg:transparent;--bs-table-striped-color:#212529;--bs-table-striped-bg:rgba(0, 0, 0, 0.05);--bs-table-active-color:#212529;--bs-table-active-bg:rgba(0, 0, 0, 0.1);--bs-table-hover-color:#212529;--bs-table-hover-bg:rgba(0, 0, 0, 0.075);width:100%;margin-bottom:1rem;color:#212529;vertical-align:top;border-color:#dee2e6}.table>:not(caption)>*>*{padding:.5rem .5rem;background-color:var(--bs-table-bg);border-bottom-width:1px;box-shadow:inset 0 0 0 9999px var(--bs-table-accent-bg)}.table>tbody{vertical-align:inherit}.table>thead{vertical-align:bottom}.table>:not(:last-child)>:last-child>*{border-bottom-color:currentColor}.caption-top{caption-side:top}.table-sm>:not(caption)>*>*{padding:.25rem .25rem}.table-bordered>:not(caption)>*{border-width:1px 0}.table-bordered>:not(caption)>*>*{border-width:0 1px}.table-borderless>:not(caption)>*>*{border-bottom-width:0}.table-striped>tbody>tr:nth-of-type(odd){--bs-table-accent-bg:var(--bs-table-striped-bg);color:var(--bs-table-striped-color)}.table-active{--bs-table-accent-bg:var(--bs-table-active-bg);color:var(--bs-table-active-color)}.table-hover>tbody>tr:hover{--bs-table-accent-bg:var(--bs-table-hover-bg);color:var(--bs-table-hover-color)}.table-primary{--bs-table-bg:#cfe2ff;--bs-table-striped-bg:#c5d7f2;--bs-table-striped-color:#000;--bs-table-active-bg:#bacbe6;--bs-table-active-color:#000;--bs-table-hover-bg:#bfd1ec;--bs-table-hover-color:#000;color:#000;border-color:#bacbe6}.table-secondary{--bs-table-bg:#e2e3e5;--bs-table-striped-bg:#d7d8da;--bs-table-striped-color:#000;--bs-table-active-bg:#cbccce;--bs-table-active-color:#000;--bs-table-hover-bg:#d1d2d4;--bs-table-hover-color:#000;color:#000;border-color:#cbccce}.table-success{--bs-table-bg:#d1e7dd;--bs-table-striped-bg:#c7dbd2;--bs-table-striped-color:#000;--bs-table-active-bg:#bcd0c7;--bs-table-active-color:#000;--bs-table-hover-bg:#c1d6cc;--bs-table-hover-color:#000;color:#000;border-color:#bcd0c7}.table-info{--bs-table-bg:#cff4fc;--bs-table-striped-bg:#c5e8ef;--bs-table-striped-color:#000;--bs-table-active-bg:#badce3;--bs-table-active-color:#000;--bs-table-hover-bg:#bfe2e9;--bs-table-hover-color:#000;color:#000;border-color:#badce3}.table-warning{--bs-table-bg:#fff3cd;--bs-table-striped-bg:#f2e7c3;--bs-table-striped-color:#000;--bs-table-active-bg:#e6dbb9;--bs-table-active-color:#000;--bs-table-hover-bg:#ece1be;--bs-table-hover-color:#000;color:#000;border-color:#e6dbb9}.table-danger{--bs-table-bg:#f8d7da;--bs-table-striped-bg:#eccccf;--bs-table-striped-color:#000;--bs-table-active-bg:#dfc2c4;--bs-table-active-color:#000;--bs-table-hover-bg:#e5c7ca;--bs-table-hover-color:#000;color:#000;border-color:#dfc2c4}.table-light{--bs-table-bg:#f8f9fa;--bs-table-striped-bg:#ecedee;--bs-table-striped-color:#000;--bs-table-active-bg:#dfe0e1;--bs-table-active-color:#000;--bs-table-hover-bg:#e5e6e7;--bs-table-hover-color:#000;color:#000;border-color:#dfe0e1}.table-dark{--bs-table-bg:#212529;--bs-table-striped-bg:#2c3034;--bs-table-striped-color:#fff;--bs-table-active-bg:#373b3e;--bs-table-active-color:#fff;--bs-table-hover-bg:#323539;--bs-table-hover-color:#fff;color:#fff;border-color:#373b3e}.table-responsive{overflow-x:auto;-webkit-overflow-scrolling:touch}@media (max-width:575.98px){.table-responsive-sm{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:767.98px){.table-responsive-md{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:991.98px){.table-responsive-lg{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:1199.98px){.table-responsive-xl{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width:1399.98px){.table-responsive-xxl{overflow-x:auto;-webkit-overflow-scrolling:touch}}.btn{display:inline-block;font-weight:400;line-height:1.5;color:#212529;text-align:center;text-decoration:none;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529}.btn-check:focus+.btn,.btn:focus{outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.btn.disabled,.btn:disabled,fieldset:disabled .btn{pointer-events:none;opacity:.65}.btn-primary{color:#fff;background-color:#0d6efd;border-color:#0d6efd}.btn-primary:hover{color:#fff;background-color:#0b5ed7;border-color:#0a58ca}.btn-check:focus+.btn-primary,.btn-primary:focus{color:#fff;background-color:#0b5ed7;border-color:#0a58ca;box-shadow:0 0 0 .25rem rgba(49,132,253,.5)}.btn-check:active+.btn-primary,.btn-check:checked+.btn-primary,.btn-primary.active,.btn-primary:active,.show>.btn-primary.dropdown-toggle{color:#fff;background-color:#0a58ca;border-color:#0a53be}.btn-check:active+.btn-primary:focus,.btn-check:checked+.btn-primary:focus,.btn-primary.active:focus,.btn-primary:active:focus,.show>.btn-primary.dropdown-toggle:focus{box-shadow:0 0 0 .25rem rgba(49,132,253,.5)}.btn-primary.disabled,.btn-primary:disabled{color:#fff;background-color:#0d6efd;border-color:#0d6efd}.btn-secondary{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-secondary:hover{color:#fff;background-color:#5c636a;border-color:#565e64}.btn-check:focus+.btn-secondary,.btn-secondary:focus{color:#fff;background-color:#5c636a;border-color:#565e64;box-shadow:0 0 0 .25rem rgba(130,138,145,.5)}.btn-check:active+.btn-secondary,.btn-check:checked+.btn-secondary,.btn-secondary.active,.btn-secondary:active,.show>.btn-secondary.dropdown-toggle{color:#fff;background-color:#565e64;border-color:#51585e}.btn-check:active+.btn-secondary:focus,.btn-check:checked+.btn-secondary:focus,.btn-secondary.active:focus,.btn-secondary:active:focus,.show>.btn-secondary.dropdown-toggle:focus{box-shadow:0 0 0 .25rem rgba(130,138,145,.5)}.btn-secondary.disabled,.btn-secondary:disabled{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-success{color:#fff;background-color:#198754;border-color:#198754}.btn-success:hover{color:#fff;background-color:#157347;border-color:#146c43}.btn-check:focus+.btn-success,.btn-success:focus{color:#fff;background-color:#157347;border-color:#146c43;box-shadow:0 0 0 .25rem rgba(60,153,110,.5)}.btn-check:active+.btn-success,.btn-check:checked+.btn-success,.btn-success.active,.btn-success:active,.show>.btn-success.dropdown-toggle{color:#fff;background-color:#146c43;border-color:#13653f}.btn-check:active+.btn-success:focus,.btn-check:checked+.btn-success:focus,.btn-success.active:focus,.btn-success:active:focus,.show>.btn-success.dropdown-toggle:focus{box-shadow:0 0 0 .25rem rgba(60,153,110,.5)}.btn-success.disabled,.btn-success:disabled{color:#fff;background-color:#198754;border-color:#198754}.btn-info{color:#000;background-color:#0dcaf0;border-color:#0dcaf0}.btn-info:hover{color:#000;background-color:#31d2f2;border-color:#25cff2}.btn-check:focus+.btn-info,.btn-info:focus{color:#000;background-color:#31d2f2;border-color:#25cff2;box-shadow:0 0 0 .25rem rgba(11,172,204,.5)}.btn-check:active+.btn-info,.btn-check:checked+.btn-info,.btn-info.active,.btn-info:active,.show>.btn-info.dropdown-toggle{color:#000;background-color:#3dd5f3;border-color:#25cff2}.btn-check:active+.btn-info:focus,.btn-check:checked+.btn-info:focus,.btn-info.active:focus,.btn-info:active:focus,.show>.btn-info.dropdown-toggle:focus{box-shadow:0 0 0 .25rem rgba(11,172,204,.5)}.btn-info.disabled,.btn-info:disabled{color:#000;background-color:#0dcaf0;border-color:#0dcaf0}.btn-warning{color:#000;background-color:#ffc107;border-color:#ffc107}.btn-warning:hover{color:#000;background-color:#ffca2c;border-color:#ffc720}.btn-check:focus+.btn-warning,.btn-warning:focus{color:#000;background-color:#ffca2c;border-color:#ffc720;box-shadow:0 0 0 .25rem rgba(217,164,6,.5)}.btn-check:active+.btn-warning,.btn-check:checked+.btn-warning,.btn-warning.active,.btn-warning:active,.show>.btn-warning.dropdown-toggle{color:#000;background-color:#ffcd39;border-color:#ffc720}.btn-check:active+.btn-warning:focus,.btn-check:checked+.btn-warning:focus,.btn-warning.active:focus,.btn-warning:active:focus,.show>.btn-warning.dropdown-toggle:focus{box-shadow:0 0 0 .25rem rgba(217,164,6,.5)}.btn-warning.disabled,.btn-warning:disabled{color:#000;background-color:#ffc107;border-color:#ffc107}.btn-danger{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-danger:hover{color:#fff;background-color:#bb2d3b;border-color:#b02a37}.btn-check:focus+.btn-danger,.btn-danger:focus{color:#fff;background-color:#bb2d3b;border-color:#b02a37;box-shadow:0 0 0 .25rem rgba(225,83,97,.5)}.btn-check:active+.btn-danger,.btn-check:checked+.btn-danger,.btn-danger.active,.btn-danger:active,.show>.btn-danger.dropdown-toggle{color:#fff;background-color:#b02a37;border-color:#a52834}.btn-check:active+.btn-danger:focus,.btn-check:checked+.btn-danger:focus,.btn-danger.active:focus,.btn-danger:active:focus,.show>.btn-danger.dropdown-toggle:focus{box-shadow:0 0 0 .25rem rgba(225,83,97,.5)}.btn-danger.disabled,.btn-danger:disabled{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-light{color:#000;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#000;background-color:#f9fafb;border-color:#f9fafb}.btn-check:focus+.btn-light,.btn-light:focus{color:#000;background-color:#f9fafb;border-color:#f9fafb;box-shadow:0 0 0 .25rem rgba(211,212,213,.5)}.btn-check:active+.btn-light,.btn-check:checked+.btn-light,.btn-light.active,.btn-light:active,.show>.btn-light.dropdown-toggle{color:#000;background-color:#f9fafb;border-color:#f9fafb}.btn-check:active+.btn-light:focus,.btn-check:checked+.btn-light:focus,.btn-light.active:focus,.btn-light:active:focus,.show>.btn-light.dropdown-toggle:focus{box-shadow:0 0 0 .25rem rgba(211,212,213,.5)}.btn-light.disabled,.btn-light:disabled{color:#000;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#212529;border-color:#212529}.btn-dark:hover{color:#fff;background-color:#1c1f23;border-color:#1a1e21}.btn-check:focus+.btn-dark,.btn-dark:focus{color:#fff;background-color:#1c1f23;border-color:#1a1e21;box-shadow:0 0 0 .25rem rgba(66,70,73,.5)}.btn-check:active+.btn-dark,.btn-check:checked+.btn-dark,.btn-dark.active,.btn-dark:active,.show>.btn-dark.dropdown-toggle{color:#fff;background-color:#1a1e21;border-color:#191c1f}.btn-check:active+.btn-dark:focus,.btn-check:checked+.btn-dark:focus,.btn-dark.active:focus,.btn-dark:active:focus,.show>.btn-dark.dropdown-toggle:focus{box-shadow:0 0 0 .25rem rgba(66,70,73,.5)}.btn-dark.disabled,.btn-dark:disabled{color:#fff;background-color:#212529;border-color:#212529}.btn-outline-primary{color:#0d6efd;border-color:#0d6efd}.btn-outline-primary:hover{color:#fff;background-color:#0d6efd;border-color:#0d6efd}.btn-check:focus+.btn-outline-primary,.btn-outline-primary:focus{box-shadow:0 0 0 .25rem rgba(13,110,253,.5)}.btn-check:active+.btn-outline-primary,.btn-check:checked+.btn-outline-primary,.btn-outline-primary.active,.btn-outline-primary.dropdown-toggle.show,.btn-outline-primary:active{color:#fff;background-color:#0d6efd;border-color:#0d6efd}.btn-check:active+.btn-outline-primary:focus,.btn-check:checked+.btn-outline-primary:focus,.btn-outline-primary.active:focus,.btn-outline-primary.dropdown-toggle.show:focus,.btn-outline-primary:active:focus{box-shadow:0 0 0 .25rem rgba(13,110,253,.5)}.btn-outline-primary.disabled,.btn-outline-primary:disabled{color:#0d6efd;background-color:transparent}.btn-outline-secondary{color:#6c757d;border-color:#6c757d}.btn-outline-secondary:hover{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-check:focus+.btn-outline-secondary,.btn-outline-secondary:focus{box-shadow:0 0 0 .25rem rgba(108,117,125,.5)}.btn-check:active+.btn-outline-secondary,.btn-check:checked+.btn-outline-secondary,.btn-outline-secondary.active,.btn-outline-secondary.dropdown-toggle.show,.btn-outline-secondary:active{color:#fff;background-color:#6c757d;border-color:#6c757d}.btn-check:active+.btn-outline-secondary:focus,.btn-check:checked+.btn-outline-secondary:focus,.btn-outline-secondary.active:focus,.btn-outline-secondary.dropdown-toggle.show:focus,.btn-outline-secondary:active:focus{box-shadow:0 0 0 .25rem rgba(108,117,125,.5)}.btn-outline-secondary.disabled,.btn-outline-secondary:disabled{color:#6c757d;background-color:transparent}.btn-outline-success{color:#198754;border-color:#198754}.btn-outline-success:hover{color:#fff;background-color:#198754;border-color:#198754}.btn-check:focus+.btn-outline-success,.btn-outline-success:focus{box-shadow:0 0 0 .25rem rgba(25,135,84,.5)}.btn-check:active+.btn-outline-success,.btn-check:checked+.btn-outline-success,.btn-outline-success.active,.btn-outline-success.dropdown-toggle.show,.btn-outline-success:active{color:#fff;background-color:#198754;border-color:#198754}.btn-check:active+.btn-outline-success:focus,.btn-check:checked+.btn-outline-success:focus,.btn-outline-success.active:focus,.btn-outline-success.dropdown-toggle.show:focus,.btn-outline-success:active:focus{box-shadow:0 0 0 .25rem rgba(25,135,84,.5)}.btn-outline-success.disabled,.btn-outline-success:disabled{color:#198754;background-color:transparent}.btn-outline-info{color:#0dcaf0;border-color:#0dcaf0}.btn-outline-info:hover{color:#000;background-color:#0dcaf0;border-color:#0dcaf0}.btn-check:focus+.btn-outline-info,.btn-outline-info:focus{box-shadow:0 0 0 .25rem rgba(13,202,240,.5)}.btn-check:active+.btn-outline-info,.btn-check:checked+.btn-outline-info,.btn-outline-info.active,.btn-outline-info.dropdown-toggle.show,.btn-outline-info:active{color:#000;background-color:#0dcaf0;border-color:#0dcaf0}.btn-check:active+.btn-outline-info:focus,.btn-check:checked+.btn-outline-info:focus,.btn-outline-info.active:focus,.btn-outline-info.dropdown-toggle.show:focus,.btn-outline-info:active:focus{box-shadow:0 0 0 .25rem rgba(13,202,240,.5)}.btn-outline-info.disabled,.btn-outline-info:disabled{color:#0dcaf0;background-color:transparent}.btn-outline-warning{color:#ffc107;border-color:#ffc107}.btn-outline-warning:hover{color:#000;background-color:#ffc107;border-color:#ffc107}.btn-check:focus+.btn-outline-warning,.btn-outline-warning:focus{box-shadow:0 0 0 .25rem rgba(255,193,7,.5)}.btn-check:active+.btn-outline-warning,.btn-check:checked+.btn-outline-warning,.btn-outline-warning.active,.btn-outline-warning.dropdown-toggle.show,.btn-outline-warning:active{color:#000;background-color:#ffc107;border-color:#ffc107}.btn-check:active+.btn-outline-warning:focus,.btn-check:checked+.btn-outline-warning:focus,.btn-outline-warning.active:focus,.btn-outline-warning.dropdown-toggle.show:focus,.btn-outline-warning:active:focus{box-shadow:0 0 0 .25rem rgba(255,193,7,.5)}.btn-outline-warning.disabled,.btn-outline-warning:disabled{color:#ffc107;background-color:transparent}.btn-outline-danger{color:#dc3545;border-color:#dc3545}.btn-outline-danger:hover{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-check:focus+.btn-outline-danger,.btn-outline-danger:focus{box-shadow:0 0 0 .25rem rgba(220,53,69,.5)}.btn-check:active+.btn-outline-danger,.btn-check:checked+.btn-outline-danger,.btn-outline-danger.active,.btn-outline-danger.dropdown-toggle.show,.btn-outline-danger:active{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-check:active+.btn-outline-danger:focus,.btn-check:checked+.btn-outline-danger:focus,.btn-outline-danger.active:focus,.btn-outline-danger.dropdown-toggle.show:focus,.btn-outline-danger:active:focus{box-shadow:0 0 0 .25rem rgba(220,53,69,.5)}.btn-outline-danger.disabled,.btn-outline-danger:disabled{color:#dc3545;background-color:transparent}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#000;background-color:#f8f9fa;border-color:#f8f9fa}.btn-check:focus+.btn-outline-light,.btn-outline-light:focus{box-shadow:0 0 0 .25rem rgba(248,249,250,.5)}.btn-check:active+.btn-outline-light,.btn-check:checked+.btn-outline-light,.btn-outline-light.active,.btn-outline-light.dropdown-toggle.show,.btn-outline-light:active{color:#000;background-color:#f8f9fa;border-color:#f8f9fa}.btn-check:active+.btn-outline-light:focus,.btn-check:checked+.btn-outline-light:focus,.btn-outline-light.active:focus,.btn-outline-light.dropdown-toggle.show:focus,.btn-outline-light:active:focus{box-shadow:0 0 0 .25rem rgba(248,249,250,.5)}.btn-outline-light.disabled,.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#212529;border-color:#212529}.btn-outline-dark:hover{color:#fff;background-color:#212529;border-color:#212529}.btn-check:focus+.btn-outline-dark,.btn-outline-dark:focus{box-shadow:0 0 0 .25rem rgba(33,37,41,.5)}.btn-check:active+.btn-outline-dark,.btn-check:checked+.btn-outline-dark,.btn-outline-dark.active,.btn-outline-dark.dropdown-toggle.show,.btn-outline-dark:active{color:#fff;background-color:#212529;border-color:#212529}.btn-check:active+.btn-outline-dark:focus,.btn-check:checked+.btn-outline-dark:focus,.btn-outline-dark.active:focus,.btn-outline-dark.dropdown-toggle.show:focus,.btn-outline-dark:active:focus{box-shadow:0 0 0 .25rem rgba(33,37,41,.5)}.btn-outline-dark.disabled,.btn-outline-dark:disabled{color:#212529;background-color:transparent}.btn-link{font-weight:400;color:#0d6efd;text-decoration:underline}.btn-link:hover{color:#0a58ca}.btn-link.disabled,.btn-link:disabled{color:#6c757d}.btn-group-lg>.btn,.btn-lg{padding:.5rem 1rem;font-size:1.25rem;border-radius:.3rem}.btn-group-sm>.btn,.btn-sm{padding:.25rem .5rem;font-size:.875rem;border-radius:.2rem}.fade{transition:opacity .15s linear}@media (prefers-reduced-motion:reduce){.fade{transition:none}}.fade:not(.show){opacity:0}.collapse:not(.show){display:none}.collapsing{height:0;overflow:hidden;transition:height .35s ease}@media (prefers-reduced-motion:reduce){.collapsing{transition:none}}.btn-group,.btn-group-vertical{position:relative;display:inline-flex;vertical-align:middle}.btn-group-vertical>.btn,.btn-group>.btn{position:relative;flex:1 1 auto}.btn-group-vertical>.btn-check:checked+.btn,.btn-group-vertical>.btn-check:focus+.btn,.btn-group-vertical>.btn.active,.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group-vertical>.btn:hover,.btn-group>.btn-check:checked+.btn,.btn-group>.btn-check:focus+.btn,.btn-group>.btn.active,.btn-group>.btn:active,.btn-group>.btn:focus,.btn-group>.btn:hover{z-index:1}.btn-toolbar{display:flex;flex-wrap:wrap;justify-content:flex-start}.btn-toolbar .input-group{width:auto}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn,.btn-group>.btn:not(:last-child):not(.dropdown-toggle){border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:nth-child(n+3),.btn-group>:not(.btn-check)+.btn{border-top-left-radius:0;border-bottom-left-radius:0}.dropdown-toggle-split{padding-right:.5625rem;padding-left:.5625rem}.dropdown-toggle-split::after,.dropend .dropdown-toggle-split::after,.dropup .dropdown-toggle-split::after{margin-left:0}.dropstart .dropdown-toggle-split::before{margin-right:0}.btn-group-sm>.btn+.dropdown-toggle-split,.btn-sm+.dropdown-toggle-split{padding-right:.375rem;padding-left:.375rem}.btn-group-lg>.btn+.dropdown-toggle-split,.btn-lg+.dropdown-toggle-split{padding-right:.75rem;padding-left:.75rem}.btn-group-vertical{flex-direction:column;align-items:flex-start;justify-content:center}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group{width:100%}.btn-group-vertical>.btn-group:not(:first-child),.btn-group-vertical>.btn:not(:first-child){margin-top:-1px}.btn-group-vertical>.btn-group:not(:last-child)>.btn,.btn-group-vertical>.btn:not(:last-child):not(.dropdown-toggle){border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:not(:first-child)>.btn,.btn-group-vertical>.btn~.btn{border-top-left-radius:0;border-top-right-radius:0}.nav{display:flex;flex-wrap:wrap;padding-left:0;margin-bottom:0;list-style:none}.nav-link{display:block;padding:.5rem 1rem;color:#0d6efd;text-decoration:none;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out}@media (prefers-reduced-motion:reduce){.nav-link{transition:none}}.nav-link:focus,.nav-link:hover{color:#0a58ca}.nav-link.disabled{color:#6c757d;pointer-events:none;cursor:default}.nav-tabs{border-bottom:1px solid #dee2e6}.nav-tabs .nav-link{margin-bottom:-1px;background:0 0;border:1px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.nav-tabs .nav-link:focus,.nav-tabs .nav-link:hover{border-color:#e9ecef #e9ecef #dee2e6;isolation:isolate}.nav-tabs .nav-link.disabled{color:#6c757d;background-color:transparent;border-color:transparent}.nav-tabs .nav-item.show .nav-link,.nav-tabs .nav-link.active{color:#495057;background-color:#fff;border-color:#dee2e6 #dee2e6 #fff}.nav-tabs .dropdown-menu{margin-top:-1px;border-top-left-radius:0;border-top-right-radius:0}.nav-pills .nav-link{background:0 0;border:0;border-radius:.25rem}.nav-pills .nav-link.active,.nav-pills .show>.nav-link{color:#fff;background-color:#0d6efd}.nav-fill .nav-item,.nav-fill>.nav-link{flex:1 1 auto;text-align:center}.nav-justified .nav-item,.nav-justified>.nav-link{flex-basis:0;flex-grow:1;text-align:center}.nav-fill .nav-item .nav-link,.nav-justified .nav-item .nav-link{width:100%}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.navbar{position:relative;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;padding-top:.5rem;padding-bottom:.5rem}.navbar>.container,.navbar>.container-fluid,.navbar>.container-lg,.navbar>.container-md,.navbar>.container-sm,.navbar>.container-xl,.navbar>.container-xxl{display:flex;flex-wrap:inherit;align-items:center;justify-content:space-between}.navbar-brand{padding-top:.3125rem;padding-bottom:.3125rem;margin-right:1rem;font-size:1.25rem;text-decoration:none;white-space:nowrap}.navbar-nav{display:flex;flex-direction:column;padding-left:0;margin-bottom:0;list-style:none}.navbar-nav .nav-link{padding-right:0;padding-left:0}.navbar-nav .dropdown-menu{position:static}.navbar-text{padding-top:.5rem;padding-bottom:.5rem}.navbar-collapse{flex-basis:100%;flex-grow:1;align-items:center}.navbar-toggler{padding:.25rem .75rem;font-size:1.25rem;line-height:1;background-color:transparent;border:1px solid transparent;border-radius:.25rem;transition:box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.navbar-toggler{transition:none}}.navbar-toggler:hover{text-decoration:none}.navbar-toggler:focus{text-decoration:none;outline:0;box-shadow:0 0 0 .25rem}.navbar-toggler-icon{display:inline-block;width:1.5em;height:1.5em;vertical-align:middle;background-repeat:no-repeat;background-position:center;background-size:100%}.navbar-nav-scroll{max-height:var(--bs-scroll-height,75vh);overflow-y:auto}@media (min-width:576px){.navbar-expand-sm{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-sm .navbar-nav{flex-direction:row}.navbar-expand-sm .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-sm .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-sm .navbar-nav-scroll{overflow:visible}.navbar-expand-sm .navbar-collapse{display:flex;flex-basis:auto}.navbar-expand-sm .navbar-toggler{display:none}}@media (min-width:768px){.navbar-expand-md{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-md .navbar-nav{flex-direction:row}.navbar-expand-md .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-md .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-md .navbar-nav-scroll{overflow:visible}.navbar-expand-md .navbar-collapse{display:flex;flex-basis:auto}.navbar-expand-md .navbar-toggler{display:none}}@media (min-width:992px){.navbar-expand-lg{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-lg .navbar-nav{flex-direction:row}.navbar-expand-lg .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-lg .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-lg .navbar-nav-scroll{overflow:visible}.navbar-expand-lg .navbar-collapse{display:flex;flex-basis:auto}.navbar-expand-lg .navbar-toggler{display:none}}@media (min-width:1200px){.navbar-expand-xl{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-xl .navbar-nav{flex-direction:row}.navbar-expand-xl .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-xl .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-xl .navbar-nav-scroll{overflow:visible}.navbar-expand-xl .navbar-collapse{display:flex;flex-basis:auto}.navbar-expand-xl .navbar-toggler{display:none}}@media (min-width:1400px){.navbar-expand-xxl{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand-xxl .navbar-nav{flex-direction:row}.navbar-expand-xxl .navbar-nav .dropdown-menu{position:absolute}.navbar-expand-xxl .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand-xxl .navbar-nav-scroll{overflow:visible}.navbar-expand-xxl .navbar-collapse{display:flex;flex-basis:auto}.navbar-expand-xxl .navbar-toggler{display:none}}.navbar-expand{flex-wrap:nowrap;justify-content:flex-start}.navbar-expand .navbar-nav{flex-direction:row}.navbar-expand .navbar-nav .dropdown-menu{position:absolute}.navbar-expand .navbar-nav .nav-link{padding-right:.5rem;padding-left:.5rem}.navbar-expand .navbar-nav-scroll{overflow:visible}.navbar-expand .navbar-collapse{display:flex;flex-basis:auto}.navbar-expand .navbar-toggler{display:none}.navbar-light .navbar-brand{color:rgba(0,0,0,.9)}.navbar-light .navbar-brand:focus,.navbar-light .navbar-brand:hover{color:rgba(0,0,0,.9)}.navbar-light .navbar-nav .nav-link{color:rgba(0,0,0,.55)}.navbar-light .navbar-nav .nav-link:focus,.navbar-light .navbar-nav .nav-link:hover{color:rgba(0,0,0,.7)}.navbar-light .navbar-nav .nav-link.disabled{color:rgba(0,0,0,.3)}.navbar-light .navbar-nav .nav-link.active,.navbar-light .navbar-nav .show>.nav-link{color:rgba(0,0,0,.9)}.navbar-light .navbar-toggler{color:rgba(0,0,0,.55);border-color:rgba(0,0,0,.1)}.navbar-light .navbar-toggler-icon{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%280, 0, 0, 0.55%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e")}.navbar-light .navbar-text{color:rgba(0,0,0,.55)}.navbar-light .navbar-text a,.navbar-light .navbar-text a:focus,.navbar-light .navbar-text a:hover{color:rgba(0,0,0,.9)}.navbar-dark .navbar-brand{color:#fff}.navbar-dark .navbar-brand:focus,.navbar-dark .navbar-brand:hover{color:#fff}.navbar-dark .navbar-nav .nav-link{color:rgba(255,255,255,.55)}.navbar-dark .navbar-nav .nav-link:focus,.navbar-dark .navbar-nav .nav-link:hover{color:rgba(255,255,255,.75)}.navbar-dark .navbar-nav .nav-link.disabled{color:rgba(255,255,255,.25)}.navbar-dark .navbar-nav .nav-link.active,.navbar-dark .navbar-nav .show>.nav-link{color:#fff}.navbar-dark .navbar-toggler{color:rgba(255,255,255,.55);border-color:rgba(255,255,255,.1)}.navbar-dark .navbar-toggler-icon{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.55%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e")}.navbar-dark .navbar-text{color:rgba(255,255,255,.55)}.navbar-dark .navbar-text a,.navbar-dark .navbar-text a:focus,.navbar-dark .navbar-text a:hover{color:#fff}.pagination{display:flex;padding-left:0;list-style:none}.page-link{position:relative;display:block;color:#0d6efd;text-decoration:none;background-color:#fff;border:1px solid #dee2e6;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media (prefers-reduced-motion:reduce){.page-link{transition:none}}.page-link:hover{z-index:2;color:#0a58ca;background-color:#e9ecef;border-color:#dee2e6}.page-link:focus{z-index:3;color:#0a58ca;background-color:#e9ecef;outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25)}.page-item:not(:first-child) .page-link{margin-left:-1px}.page-item.active .page-link{z-index:3;color:#fff;background-color:#0d6efd;border-color:#0d6efd}.page-item.disabled .page-link{color:#6c757d;pointer-events:none;background-color:#fff;border-color:#dee2e6}.page-link{padding:.375rem .75rem}.page-item:first-child .page-link{border-top-left-radius:.25rem;border-bottom-left-radius:.25rem}.page-item:last-child .page-link{border-top-right-radius:.25rem;border-bottom-right-radius:.25rem}.pagination-lg .page-link{padding:.75rem 1.5rem;font-size:1.25rem}.pagination-lg .page-item:first-child .page-link{border-top-left-radius:.3rem;border-bottom-left-radius:.3rem}.pagination-lg .page-item:last-child .page-link{border-top-right-radius:.3rem;border-bottom-right-radius:.3rem}.pagination-sm .page-link{padding:.25rem .5rem;font-size:.875rem}.pagination-sm .page-item:first-child .page-link{border-top-left-radius:.2rem;border-bottom-left-radius:.2rem}.pagination-sm .page-item:last-child .page-link{border-top-right-radius:.2rem;border-bottom-right-radius:.2rem}.badge{display:inline-block;padding:.35em .65em;font-size:.75em;font-weight:700;line-height:1;color:#fff;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25rem}.badge:empty{display:none}.btn .badge{position:relative;top:-1px}.btn-close{box-sizing:content-box;width:1em;height:1em;padding:.25em .25em;color:#000;background:transparent url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000'%3e%3cpath d='M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z'/%3e%3c/svg%3e") center/1em auto no-repeat;border:0;border-radius:.25rem;opacity:.5}.btn-close:hover{color:#000;text-decoration:none;opacity:.75}.btn-close:focus{outline:0;box-shadow:0 0 0 .25rem rgba(13,110,253,.25);opacity:1}.btn-close.disabled,.btn-close:disabled{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;opacity:.25}.btn-close-white{filter:invert(1) grayscale(100%) brightness(200%)}.tooltip{position:absolute;z-index:1080;display:block;margin:0;font-family:var(--bs-font-sans-serif);font-style:normal;font-weight:400;line-height:1.5;text-align:left;text-align:start;text-decoration:none;text-shadow:none;text-transform:none;letter-spacing:normal;word-break:normal;word-spacing:normal;white-space:normal;line-break:auto;font-size:.875rem;word-wrap:break-word;opacity:0}.tooltip.show{opacity:.9}.tooltip .tooltip-arrow{position:absolute;display:block;width:.8rem;height:.4rem}.tooltip .tooltip-arrow::before{position:absolute;content:"";border-color:transparent;border-style:solid}.bs-tooltip-auto[data-popper-placement^=top],.bs-tooltip-top{padding:.4rem 0}.bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow,.bs-tooltip-top .tooltip-arrow{bottom:0}.bs-tooltip-auto[data-popper-placement^=top] .tooltip-arrow::before,.bs-tooltip-top .tooltip-arrow::before{top:-1px;border-width:.4rem .4rem 0;border-top-color:#000}.bs-tooltip-auto[data-popper-placement^=right],.bs-tooltip-end{padding:0 .4rem}.bs-tooltip-auto[data-popper-placement^=right] .tooltip-arrow,.bs-tooltip-end .tooltip-arrow{left:0;width:.4rem;height:.8rem}.bs-tooltip-auto[data-popper-placement^=right] .tooltip-arrow::before,.bs-tooltip-end .tooltip-arrow::before{right:-1px;border-width:.4rem .4rem .4rem 0;border-right-color:#000}.bs-tooltip-auto[data-popper-placement^=bottom],.bs-tooltip-bottom{padding:.4rem 0}.bs-tooltip-auto[data-popper-placement^=bottom] .tooltip-arrow,.bs-tooltip-bottom .tooltip-arrow{top:0}.bs-tooltip-auto[data-popper-placement^=bottom] .tooltip-arrow::before,.bs-tooltip-bottom .tooltip-arrow::before{bottom:-1px;border-width:0 .4rem .4rem;border-bottom-color:#000}.bs-tooltip-auto[data-popper-placement^=left],.bs-tooltip-start{padding:0 .4rem}.bs-tooltip-auto[data-popper-placement^=left] .tooltip-arrow,.bs-tooltip-start .tooltip-arrow{right:0;width:.4rem;height:.8rem}.bs-tooltip-auto[data-popper-placement^=left] .tooltip-arrow::before,.bs-tooltip-start .tooltip-arrow::before{left:-1px;border-width:.4rem 0 .4rem .4rem;border-left-color:#000}.tooltip-inner{max-width:200px;padding:.25rem .5rem;color:#fff;text-align:center;background-color:#000;border-radius:.25rem}.carousel{position:relative}.carousel.pointer-event{touch-action:pan-y}.carousel-inner{position:relative;width:100%;overflow:hidden}.carousel-inner::after{display:block;clear:both;content:""}.carousel-item{position:relative;display:none;float:left;width:100%;margin-right:-100%;-webkit-backface-visibility:hidden;backface-visibility:hidden;transition:transform .6s ease-in-out}@media (prefers-reduced-motion:reduce){.carousel-item{transition:none}}.carousel-item-next,.carousel-item-prev,.carousel-item.active{display:block}.active.carousel-item-end,.carousel-item-next:not(.carousel-item-start){transform:translateX(100%)}.active.carousel-item-start,.carousel-item-prev:not(.carousel-item-end){transform:translateX(-100%)}.carousel-fade .carousel-item{opacity:0;transition-property:opacity;transform:none}.carousel-fade .carousel-item-next.carousel-item-start,.carousel-fade .carousel-item-prev.carousel-item-end,.carousel-fade .carousel-item.active{z-index:1;opacity:1}.carousel-fade .active.carousel-item-end,.carousel-fade .active.carousel-item-start{z-index:0;opacity:0;transition:opacity 0s .6s}@media (prefers-reduced-motion:reduce){.carousel-fade .active.carousel-item-end,.carousel-fade .active.carousel-item-start{transition:none}}.carousel-control-next,.carousel-control-prev{position:absolute;top:0;bottom:0;z-index:1;display:flex;align-items:center;justify-content:center;width:15%;padding:0;color:#fff;text-align:center;background:0 0;border:0;opacity:.5;transition:opacity .15s ease}@media (prefers-reduced-motion:reduce){.carousel-control-next,.carousel-control-prev{transition:none}}.carousel-control-next:focus,.carousel-control-next:hover,.carousel-control-prev:focus,.carousel-control-prev:hover{color:#fff;text-decoration:none;outline:0;opacity:.9}.carousel-control-prev{left:0}.carousel-control-next{right:0}.carousel-control-next-icon,.carousel-control-prev-icon{display:inline-block;width:2rem;height:2rem;background-repeat:no-repeat;background-position:50%;background-size:100% 100%}.carousel-control-prev-icon{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23fff'%3e%3cpath d='M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z'/%3e%3c/svg%3e")}.carousel-control-next-icon{background-image:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23fff'%3e%3cpath d='M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z'/%3e%3c/svg%3e")}.carousel-indicators{position:absolute;right:0;bottom:0;left:0;z-index:2;display:flex;justify-content:center;padding:0;margin-right:15%;margin-bottom:1rem;margin-left:15%;list-style:none}.carousel-indicators [data-bs-target]{box-sizing:content-box;flex:0 1 auto;width:30px;height:3px;padding:0;margin-right:3px;margin-left:3px;text-indent:-999px;cursor:pointer;background-color:#fff;background-clip:padding-box;border:0;border-top:10px solid transparent;border-bottom:10px solid transparent;opacity:.5;transition:opacity .6s ease}@media (prefers-reduced-motion:reduce){.carousel-indicators [data-bs-target]{transition:none}}.carousel-indicators .active{opacity:1}.carousel-caption{position:absolute;right:15%;bottom:1.25rem;left:15%;padding-top:1.25rem;padding-bottom:1.25rem;color:#fff;text-align:center}.carousel-dark .carousel-control-next-icon,.carousel-dark .carousel-control-prev-icon{filter:invert(1) grayscale(100)}.carousel-dark .carousel-indicators [data-bs-target]{background-color:#000}.carousel-dark .carousel-caption{color:#000}@-webkit-keyframes spinner-border{to{transform:rotate(360deg)}}@keyframes spinner-border{to{transform:rotate(360deg)}}.clearfix::after{display:block;clear:both;content:""}.link-primary{color:#0d6efd}.link-primary:focus,.link-primary:hover{color:#0a58ca}.link-secondary{color:#6c757d}.link-secondary:focus,.link-secondary:hover{color:#565e64}.link-success{color:#198754}.link-success:focus,.link-success:hover{color:#146c43}.link-info{color:#0dcaf0}.link-info:focus,.link-info:hover{color:#3dd5f3}.link-warning{color:#ffc107}.link-warning:focus,.link-warning:hover{color:#ffcd39}.link-danger{color:#dc3545}.link-danger:focus,.link-danger:hover{color:#b02a37}.link-light{color:#f8f9fa}.link-light:focus,.link-light:hover{color:#f9fafb}.link-dark{color:#212529}.link-dark:focus,.link-dark:hover{color:#1a1e21}.ratio{position:relative;width:100%}.ratio::before{display:block;padding-top:var(--bs-aspect-ratio);content:""}.ratio>*{position:absolute;top:0;left:0;width:100%;height:100%}.ratio-1x1{--bs-aspect-ratio:100%}.ratio-4x3{--bs-aspect-ratio:calc(3 / 4 * 100%)}.ratio-16x9{--bs-aspect-ratio:calc(9 / 16 * 100%)}.ratio-21x9{--bs-aspect-ratio:calc(9 / 21 * 100%)}.fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.sticky-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}.mt-0{margin-top:0!important}.mt-1{margin-top:.25rem!important}.mt-2{margin-top:.5rem!important}.mt-3{margin-top:1rem!important}.mt-4{margin-top:1.5rem!important}.mt-5{margin-top:3rem!important}.mt-auto{margin-top:auto!important}.mb-0{margin-bottom:0!important}.mb-1{margin-bottom:.25rem!important}.mb-2{margin-bottom:.5rem!important}.mb-3{margin-bottom:1rem!important}.mb-4{margin-bottom:1.5rem!important}.mb-5{margin-bottom:3rem!important}.mb-auto{margin-bottom:auto!important}.p-0{padding:0!important}.p-1{padding:.25rem!important}.p-2{padding:.5rem!important}.p-3{padding:1rem!important}.p-4{padding:1.5rem!important}.p-5{padding:3rem!important}@media (min-width:576px){.sticky-sm-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}}@media (min-width:768px){.sticky-md-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}}@media (min-width:992px){.sticky-lg-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}}@media (min-width:1200px){.sticky-xl-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}}@media (min-width:1400px){.sticky-xxl-top{position:-webkit-sticky;position:sticky;top:0;z-index:1020}}

  .bg{background-color:#fff}.chroma{background-color:#fff}.chroma .err{color:#a61717;background-color:#e3d2d2}.chroma .lntd{vertical-align:top;padding:0;margin:0;border:0}.chroma .lntable{border-spacing:0;padding:0;margin:0;border:0}.chroma .hl{background-color:#ffc}.chroma .lnt{white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em 0 .4em;color:#7f7f7f}.chroma .ln{white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em 0 .4em;color:#7f7f7f}.chroma .line{display:flex}.chroma .k{color:#000;font-weight:700}.chroma .kc{color:#000;font-weight:700}.chroma .kd{color:#000;font-weight:700}.chroma .kn{color:#000;font-weight:700}.chroma .kp{color:#000;font-weight:700}.chroma .kr{color:#000;font-weight:700}.chroma .kt{color:#458;font-weight:700}.chroma .na{color:teal}.chroma .nb{color:#0086b3}.chroma .bp{color:#999}.chroma .nc{color:#458;font-weight:700}.chroma .no{color:teal}.chroma .nd{color:#3c5d5d;font-weight:700}.chroma .ni{color:purple}.chroma .ne{color:#900;font-weight:700}.chroma .nf{color:#900;font-weight:700}.chroma .nl{color:#900;font-weight:700}.chroma .nn{color:#555}.chroma .nt{color:navy}.chroma .nv{color:teal}.chroma .vc{color:teal}.chroma .vg{color:teal}.chroma .vi{color:teal}.chroma .s{color:#d14}.chroma .sa{color:#d14}.chroma .sb{color:#d14}.chroma .sc{color:#d14}.chroma .dl{color:#d14}.chroma .sd{color:#d14}.chroma .s2{color:#d14}.chroma .se{color:#d14}.chroma .sh{color:#d14}.chroma .si{color:#d14}.chroma .sx{color:#d14}.chroma .sr{color:#009926}.chroma .s1{color:#d14}.chroma .ss{color:#990073}.chroma .m{color:#099}.chroma .mb{color:#099}.chroma .mf{color:#099}.chroma .mh{color:#099}.chroma .mi{color:#099}.chroma .il{color:#099}.chroma .mo{color:#099}.chroma .o{color:#000;font-weight:700}.chroma .ow{color:#000;font-weight:700}.chroma .c{color:#998;font-style:italic}.chroma .ch{color:#998;font-style:italic}.chroma .cm{color:#998;font-style:italic}.chroma .c1{color:#998;font-style:italic}.chroma .cs{color:#999;font-weight:700;font-style:italic}.chroma .cp{color:#999;font-weight:700;font-style:italic}.chroma .cpf{color:#999;font-weight:700;font-style:italic}.chroma .gd{color:#000;background-color:#fdd}.chroma .ge{color:#000;font-style:italic}.chroma .gr{color:#a00}.chroma .gh{color:#999}.chroma .gi{color:#000;background-color:#dfd}.chroma .go{color:#888}.chroma .gp{color:#555}.chroma .gs{font-weight:700}.chroma .gu{color:#aaa}.chroma .gt{color:#a00}.chroma .gl{text-decoration:underline}.chroma .w{color:#bbb}

  html{font-size:16px}body{color:#222;font-family:'PT Serif','Times New Roman',Times,serif;font-size:1.2em;font-weight:400;margin-bottom:50px;background-color:#f8f8f8;background-image:url(/blog-bitix/assets/images/backgrounds/grey.png)}::-moz-selection{background-color:#61b135;color:#fff}::selection{background-color:#61b135;color:#fff}a{color:#569d2f;text-decoration:none}a:visited{color:#7aca4e}a:hover{color:#4b8929;text-decoration:underline}a:active{color:#569d2f}h1,h2,h3,h4,h5,h6{margin-top:20px;margin-bottom:10px;font-weight:700;clear:both}hr{background-color:#fff;border-top:3px dotted #000;margin:auto;margin-top:20px;margin-bottom:20px;width:60%}abbr[title]{border-bottom:1px dotted}pre{margin-bottom:0}ul.recents{font-size:.9em}ul.recents hr{margin-top:10px;margin-bottom:10px;border-top:1px dotted #ccc}ul.series,ul.tags{columns:5 8em;column-gap:1em}ul.library{columns:4 12em;column-gap:1em}ul.list-columns{columns:4 12em;column-gap:1em}div.container{background-color:#fff;border-left:1px solid #f8f8f8;border-right:1px solid #f8f8f8;padding:0 1em;max-width:1080px}div.blueimp-gallery-container{position:absolute}div.blueimp-gallery div.modal{overflow:hidden}div.blueimp-gallery img.slide-content{background-color:#fff}div.menu ul li{margin-bottom:3px}header{text-align:center;margin-bottom:10px}header span.title{font-size:2.6em;font-weight:700}header span.title a,header span.title a:active,header span.title a:hover,header span.title a:visited{color:#222}header nav{font-weight:700;margin-top:10px}header nav.nav-pills a{color:#569d2f}header nav.nav-pills a:hover{color:#569d2f;background-color:#e2f3d8}header nav.nav-pills a.active,header nav.nav-pills a.active:hover{color:#fff;background-color:#569d2f}header form.search{margin-top:20px;display:inline-block}article h1{font-size:2.6em}article h2{font-size:1.75rem}@media (max-width:576px){article h1{font-size:1.8em}}article p.information,article span.information{font-size:.9em}article p.summary{font-weight:700}article ul.columns{columns:4 12em;column-gap:1em}article table{margin-bottom:20px}article blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}article div.logotypes{margin-left:1.5em;text-align:right;float:right;clear:right;max-width:400px;min-width:150px}@media (max-width:576px){article div.logotypes{width:125px}}article div.logotypes amp-img,article div.logotypes img{background-color:#fff;border:.5em solid #fff;border-radius:.3em;box-shadow:0 1px 4px rgba(0,0,0,.15);box-sizing:border-box}@media (max-width:576px){article div.logotypes amp-img,article div.logotypes img{width:125px}}article div.code{border:1px solid #ddd;border-radius:3px;margin-bottom:1em}article div.code div.highlight{font-size:.8em;border-bottom:1px solid #ddd;overflow-x:auto}article div.code div.highlight table td:nth-child(2){width:100%}article div.code div.highlight-meta{font-size:.8em;background-color:#f7f7f7;padding:6px}article div.code div.highlight-meta span.raw{float:right}article div.code div.highlight-meta a,article div.code div.highlight-meta span{color:#666;font-weight:600;text-decoration:none;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:.8em}article div.media{display:block;text-align:center;margin-bottom:1em}article div.media amp-iframe[id^=asciicast-iframe],article div.media iframe[id^=asciicast-iframe]{border:0 solid #fff;box-shadow:0 0 0 rgba(0,0,0,.15)}article div.media amp-ad,article div.media amp-iframe,article div.media amp-img,article div.media amp-video,article div.media iframe,article div.media img,article div.media video{background-color:#fff;border:.5em solid #fff;border-radius:.3em;box-shadow:0 1px 4px rgba(0,0,0,.15);box-sizing:content-box;max-width:100%;max-height:100%;object-fit:contain;vertical-align:middle}article div.media amp-ad.white-background,article div.media amp-iframe.white-background,article div.media amp-img.white-background,article div.media amp-video.white-background,article div.media iframe.white-background,article div.media img.white-background,article div.media video.white-background{background-color:#fff}article div.media amp-ad.black-background,article div.media amp-iframe.black-background,article div.media amp-img.black-background,article div.media amp-video.black-background,article div.media iframe.black-background,article div.media img.black-background,article div.media video.black-background{background-color:#000}article div.media figure{clear:both}article div.media figure p a{display:inline-block}article div.media figure figcaption{font-size:.8em}article div.media-amazon.float-right{margin-left:20px}article div.media-twitter{text-align:left}article div.buttons{text-align:center;margin-bottom:20px}article div.buttons a.btn{color:#fff}article div.alert h1,article div.alert h2,article div.alert h3,article div.alert h4,article div.alert h5,article div.alert h6{clear:none}article div.tableofcontents{display:inline-block}article div.reference{font-size:.9em}div.page-header{min-height:300px;max-height:300px;margin-bottom:20px;overflow:hidden;display:flex;justify-content:center;align-items:center}div.page-header img{min-width:100%;max-width:100%;object-fit:cover}div.sharethis-inline-share-buttons{margin-top:1em;margin-bottom:1em}div.related,div.serie,div.sharethis-text{font-size:.9em}div.related h3,div.serie h3,div.sharethis-text h3{font-size:1em;font-weight:400;margin-top:10px}div.related img,div.serie img,div.sharethis-text img{height:125px;margin-top:10px;max-width:100%;object-fit:cover;width:100%;padding:0 0;margin:0 0}div.related div.col-sm-4,div.serie div.col-sm-4,div.sharethis-text div.col-sm-4{margin-bottom:15px}div.videoo{width:550px;height:330px;max-width:100%;margin:0 auto;margin-bottom:20px}footer{font-size:.8em;padding-top:10px;padding-bottom:30px}footer span.copyleft{transform:rotate(180deg);display:inline-block}div.banner{margin-bottom:10px}div.featured{background-color:#fff;text-align:center;font-size:.9em;font-weight:700;margin-bottom:10px;width:150px;border-radius:.3em;box-shadow:0 1px 4px rgba(0,0,0,.15);border:.3em solid #fff}div.featured img{width:100%}div.featured a{color:#222}div.sourcecode amp-img.sourcecode-icon,div.sourcecode img.sourcecode-icon{float:left;width:64px}div.sourcecode>div,div.sourcecode>p{margin-left:84px}div.adblock-container{left:0;right:0;margin-left:auto;margin-right:auto}div.adblock{background-color:#eee;border:1px solid gray;font-size:.9em;padding:15px}div.adblock-container-sidebar{position:sticky;position:-webkit-sticky;top:15px;height:0;display:none;overflow:visible}div.adblock-container-sidebar-left{max-height:600px;max-width:300px;min-height:600px;min-width:300px;display:block;text-align:right;overflow:hidden}div.adblock-container-sidebar-right{max-height:600px;max-width:300px;min-height:600px;min-width:300px;display:block;text-align:left;overflow:hidden}amp-ad,ins.adsbygoogle{line-height:0;width:100%;height:100%}div.adblock-container-billboard{text-align:center;max-height:280px;max-width:100%;min-height:280px;display:block;margin:auto}div.adblock-container-leaderboard{text-align:left;max-height:90px;max-width:100%;min-height:90px;display:block;overflow:hidden}i.archive-icon{display:inline-block;font-size:32px;line-height:32px}@media (min-width:375px){div.adblock-container-billboard{max-height:280px;max-width:336px;min-height:280px;min-width:336px}div.adblock-container-leaderboard{max-height:90px;max-width:336px;min-height:90px;min-width:336px}}@media (min-width:770px){div.adblock-container-billboard{max-height:280px;max-width:728px;min-height:280px;min-width:728px}div.adblock-container-leaderboard{max-height:90px;max-width:728px;min-height:90px;min-width:728px}}@media (min-width:1025px){div.adblock-container-billboard{max-height:280px;max-width:970px;min-height:280px;min-width:970px}}@media (min-width:1366px){div.adblock-container-sidebar{display:flex;justify-content:space-between}div.adblock-container-sidebar-left{transform:translateX(-155px);max-width:120px;min-width:120px}div.adblock-container-sidebar-right{transform:translateX(155px);max-width:120px;min-width:120px}}@media (min-width:1440px){div.adblock-container-sidebar-left{transform:translateX(-195px);max-width:160px;min-width:160px}div.adblock-container-sidebar-right{transform:translateX(195px);max-width:160px;min-width:160px}}@media (min-width:1750px){div.adblock-container-sidebar-left{transform:translateX(-335px);max-width:300px;min-width:300px}div.adblock-container-sidebar-right{transform:translateX(335px);max-width:300px;min-width:300px}}

  </style>

  <!-- scripts -->
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
  <script async custom-element="amp-ad" src="https://cdn.ampproject.org/v0/amp-ad-0.1.js"></script>
  <script async custom-element="amp-youtube" src="https://cdn.ampproject.org/v0/amp-youtube-0.1.js"></script>
  <script async custom-element="amp-twitter" src="https://cdn.ampproject.org/v0/amp-twitter-0.1.js"></script>
  <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  <script async custom-element="amp-audio" src="https://cdn.ampproject.org/v0/amp-audio-0.1.js"></script>
  <script async custom-element="amp-video" src="https://cdn.ampproject.org/v0/amp-video-0.1.js"></script>
  
  

  
  
</head>
<body>
  <div class="container">
    <div class="row">
      <div class="col-12">
        





<header>
  <div class="row">
    <div class="col-12 col-lg-4"></div>
    <div class="col-12 col-lg-4">
      <span class="title"><a href="https://picodotdev.github.io/blog-bitix/index-amp.html">Blog Bitix</a></span>
      <div class="links">
        
          <a href="https://picodotdev.github.io/blog-bitix/index.xml" title="¡Suscríbete a Blog Bitix!"><amp-img src="/blog-bitix/assets/images/rss.svg" width="50" height="50" class="icon" alt="rss"></amp-img></a>
        
        
          <a href="https://twitter.com/picodotdev/" title="¡Sígueme en twitter!"><amp-img src="/blog-bitix/assets/images/twitter.svg" width="50" height="50" class="icon" alt="twitter"></amp-img></a>
        
        
          <a href="https://github.com/picodotdev/blog-ejemplos/" title="¡Obtén el código fuente de los ejemplos!"><amp-img src="/blog-bitix/assets/images/github.svg" width="50" height="50" class="icon" alt="github"></amp-img></a>
        
        
        
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      
<nav class="nav nav-pills nav-fill">
  <a href="/blog-bitix/tags/java/index-amp.html" class="nav-item nav-link">Java</a>
  <a href="/blog-bitix/tags/gnu-linux/index-amp.html" class="nav-item nav-link">GNU/Linux</a>
  <a href="/blog-bitix/tags/javascript/index-amp.html" class="nav-item nav-link">JavaScript</a>
  <a href="/blog-bitix/tags/tapestry/index-amp.html" class="nav-item nav-link">Tapestry</a>
  <a href="/blog-bitix/archive/index-amp.html" class="nav-item nav-link">Archivo y hemeroteca</a>
  <a href="/blog-bitix/pages/links/index-amp.html" class="nav-item nav-link">Enlaces</a>
  <a href="/blog-bitix/pages/about/index-amp.html" class="nav-item nav-link">Acerca de...</a>
  
</nav>

    </div>
  </div>
</header>
      </div>
    </div>
    <div class="row">
      <div class="col-12 adblock-container-billboard mt-3 mb-3 p-0">
        <amp-ad width="100vw" height="280"
    type="adsense"
    data-ad-client="ca-pub-3533636310991304"
    data-ad-slot="4052324337"
    data-auto-format="rspv"
    data-full-width="">
    <div overflow=""></div>
</amp-ad>

      </div>
    </div>
    
    <div class="row">
      <div class="col-12">
        


<article>
    <h1>Script to install Arch Linux easy, fast, unattended, automated and customizable way</h1>
    <p class="information">
      
        Writed by
       
      <span>picodotdev</span> on <time>13/01/2017</time>.
      
        <br>
        
          <a href="/blog-bitix/tags/gnu-linux/index-amp.html">gnu-linux</a>
        
          <a href="/blog-bitix/tags/planeta-codigo/index-amp.html">planeta-codigo</a>
        
          <a href="/blog-bitix/tags/software-libre/index-amp.html">software-libre</a>
        
      
      <br>
      <a href="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/index-amp.html">Permanent link</a>
      
        <a href="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/index-amp.html#comments">Comments</a>
      
    </p>

    
      <p class="summary">Arch Linux is one of the most customizable GNU/Linux distributions but whose installation requires reading a good amount of documentation, guides or manuals to know what commands to execute step by step in the <em>prompt</em> of the system in which it leaves you the installation medium. Some users choose a distribution like Antergos, KaOS or Manjaro with a graphical installer and guided simply by the fact that they do not face Arch Linux installation from the command line. Still, executing a command and waiting for it to finish before entering another is slow and requires attention.</p>
    
    

    
      <div class="adblock-container-leaderboard mt-3 mb-3 p-0">
        <amp-ad width="100vw" height="90"
    type="adsense"
    data-ad-client="ca-pub-3533636310991304"
    data-ad-slot="8238629013"
    data-auto-format="rspv"
    data-full-width="">
    <div overflow=""></div>
</amp-ad>
      </div>
    

    <div class="content">
      


      
        
        
      
      <div class="logotypes" style="min-width: 250px;">
<p><amp-img src="/blog-bitix/assets/images/logotypes/archlinux.svg" width="1.3392156862745097" height="1" alt="Arch Linux" title="Arch Linux" layout="responsive"  class=""></amp-img></p>
</div>
<div class="logotypes" style="min-width: 200px;">
<p><amp-img src="/blog-bitix/assets/images/logotypes/linux.svg" width="0.8617283950617284" height="1" alt="Linux" title="Linux" layout="responsive"  class=""></amp-img></p>
</div>
<p>For a long time, installing a <a href="https://www.gnu.org/">GNU</a>/<a href="https://www.linux.com/">Linux</a> distribution has no more difficulty than installing an operating system like <a href="https://www.microsoft.com/es-es/windows/">Windows</a>, which consists of downloading the ISO image from the CD or DVD, burning it to a CD, DVD, or USB stick and start the system with the medium. The <a href="https://picodotdev.github.io/blog-bitix/2016/10/elegir-una-distribucion-gnu-linux-segun-el-usuario-uso-o-equipo/index-amp.html">distributions recommended for users who come from Windows or macOS</a> or do not have much computer knowledge have graphical or text-based installers and guided in several steps until completing the installation in less than half an hour. Distributions like <a href="https://www.ubuntu.com/">Ubuntu</a>, <a href="https://elementary.io/es/">elementary OS</a> or <a href="https://www.linuxmint.com/">Linux Mint</a> make the installation without knowledge and be completed successfully by any user.</p>
<div class="media">
<figure>
<p><a href="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/debian-installer-text_hu24823266aaadbd5ea03f13734b295699_7331_2560x1440_fit_box_3.png" data-gallery="" title="Debian installer text mode "><amp-img src="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/debian-installer-text_hu24823266aaadbd5ea03f13734b295699_7331_300x200_fit_box_3.png" width="267" height="200" alt="Debian installer text mode " title="Debian installer text mode "  class=""></amp-img></a>
<a href="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/debian-installer-graphics_hu57b39c5df8bb0f15d502613ed89fe1b4_28647_2560x1440_fit_box_3.png" data-gallery="" title="Debian installer in graphical mode"><amp-img src="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/debian-installer-graphics_hu57b39c5df8bb0f15d502613ed89fe1b4_28647_300x200_fit_box_3.png" width="267" height="200" alt="Debian installer in graphical mode" title="Debian installer in graphical mode"  class=""></amp-img></a></p>
<figcaption>Guided graphical and text-based Debian installation</figcaption>
</figure>
</div>
<p>Other distributions based on different principles and intended users with other needs or preferences may require a little more knowledge in exchange for more advanced settings such as disk partitioning, disk encryption or software that is installed. Some distributions like <a href="https://www.archlinux.org/">Arch Linux</a> don&rsquo;t even provide any installer.</p>
<blockquote>
<p>It is targeted at the proficient GNU/Linux user, or anyone with a do-it-yourself attitude who is
willing to read the documentation, and solve their own problems.</p>
</blockquote>
<div class="videoo">
    <script defer id="videoo-library" data-id="7f85ad782c7554f1b30d1496af3608d5e0484ccc25f7450c72c0c1412bf140e0" src="https://static.videoo.tv/7f85ad782c7554f1b30d1496af3608d5e0484ccc25f7450c72c0c1412bf140e0.js"></script>
</div><div class="alert alert-warning pt-0 pb-0 tableofcontents"><h2>Article content</h2><nav id="TableOfContents">
  <ul>
    <li><a href="#system-installation-with-arch-linux">System installation with Arch Linux</a></li>
    <li><a href="#the-alis-installer-and-supported-features">The alis installer and supported features</a></li>
    <li><a href="#screenshots-of-different-supported-desktop-environments">Screenshots of different supported desktop environments</a></li>
    <li><a href="#installation-video-of-the-base-system-with-alis">Installation video of the base system with alis</a></li>
    <li><a href="#alis-source-code">Alis source code</a></li>
  </ul>
</nav></div> 
<h3 id="system-installation-with-arch-linux">System installation with Arch Linux</h3>
<p>In Arch Linux with his <a href="https://wiki.archlinux.org/index.php/Arch_Linux">way of doing things</a> leaves the power to fully customize the system to his needs and preferences limited only by his determination of to get it. It only provides <a href="https://www.archlinux.org/download/">the media to start the installation with</a> starting with a terminal and a system <em>prompt</em>, an <a href="https://wiki.archlinux.org/index.php/Installation_guide">installation guide</a> along with the [general recommendations][archlinux-general-recommendations] and <a href="https://wiki.archlinux.org/">one of the best sources of information on GNU/Linux</a> as well as complete information on every aspect that we need in the installation. After having read the relevant pages of the Arch Linux wiki, probably more than once and twice, until you understand it for the most part, you begin to make the recipe that contains the necessary commands until the installation is complete.</p>
<p>In many blogs and YouTube videos there are guides that contain the necessary commands and explanations. Any Arch Linux user with a blog has surely posted an article with their installation guide (yes, <a href="https://picodotdev.github.io/blog-bitix/2014/05/anexo-a-la-guia-de-instalacion-y-del-principiante-de-arch-linux/index-amp.html">I posted mine too</a>). A user who wants to install Arch Linux should read several of those articles in addition to the official installation guide. According to the Arch Linux philosophy, this learning process is considered necessary and allows for greater system understanding.</p>
<p>But knowing the commands to enter to install Arch Linux does not avoid having to type them one after the other and wait for the previous one to finish before entering the next one. Nor does everyone have the time to do it. Several <a href="https://wiki.archlinux.org/index.php/Arch-based_distributions">Arch Linux derived distributions</a> such as <a href="https://antergos.com/">Antergos</a>, <a href="https://kaosx.us/">KaOS</a> or <a href="https://manjaro.org/">Manjaro</a> offer the more friendly graphical and guided installers that attract some users looking to use Arch Linux but not go through its unfriendly installation process. Fortunately, as it is a <em>rolling release</em> distribution (constantly updated), you only have to do a single installation per computer throughout its life of use. But even for Arch Linux users doing a second install on a new machine is tiresome.</p>
<p>A few months ago I met <a href="https://arch-anywhere.org/">arch-anywhere</a> which is basically a bash <em>script</em>, with a guided and text-based installer that makes the installation of Arch Linux less laborious in a similar way to those existing in other more friendly distributions. However, there are two things that do not convince me about <em>arch-anywhere</em>, one is that it is not unattended, requiring you to answer several questions interactively, wait for it to finish, execute a command according to the previous answer and answer the next question. Another thing that doesn&rsquo;t convince me is that it uses its own ISO image and not the original Arch Linux image. For the rest, it offers a good level of customization, covering the most common needs of users such as customizing the partitioning, choosing the file system, if you want LVM, encryption, the desktop environment (GNOME, KDE, XFCE, &hellip; ), kernel, boot loader (GRUB) and programs to install.</p>
<h3 id="the-alis-installer-and-supported-features">The alis installer and supported features</h3>
<p>Based on the idea of <em>arch-anywhere</em> and spending a little time I have created a <em>script</em> in <a href="https://es.wikipedia.org/wiki/Bash">bash</a> to install Arch Linux in an automated, unattended and customizable way to some extent although being useful for the most common configuration cases, without being essential to read a few dozen pages of the Arch Linux wiki or follow any step-by-step guide or tutorial. Some of the functionalities it supports are:</p>
<ul>
<li><strong>System</strong>: UEFI, BIOS</li>
<li><strong>Storage</strong>: SATA, NVMe and MMC</li>
<li><strong>Encryption</strong>: root partition encrypted and no encrypted</li>
<li><strong>Partition</strong>: no LVM, LVM, LVM on LUKS, GPT on UEFI, MBR on BIOS</li>
<li><strong>File system</strong>: ext4, btrfs (with subvols), xfs, f2fs, reiserfs</li>
<li><strong>Kernels</strong>: linux, linux-lts, linux-hardened, linux-zen</li>
<li><strong>Desktop environment</strong>: GNOME, KDE, XFCE, Mate, Cinnamon, LXDE, i3-wm, i3-gaps</li>
<li><strong>Display managers</strong>: GDM, SDDM, Lightdm, lxdm</li>
<li><strong>Graphics controller</strong>: intel, nvidia and amd with optionally early KMS start. With intel optionally fastboot, hardware video acceleration and framebuffer compression.</li>
<li><strong>Bootloader</strong>: GRUB, rEFInd, systemd-boot</li>
<li><strong>Custom shell</strong>: bash, zsh, dash, fish</li>
<li><strong>WPA WIFI network</strong> installation</li>
<li><strong>Periodic TRIM</strong> for SSD storage</li>
<li>Intel and AMD <strong>processors microcode</strong></li>
<li>Optional <strong>swap file</strong></li>
<li><strong>VirtualBox guest additions</strong></li>
<li><strong>Kernel compression</strong> and <strong>custom parameters</strong></li>
<li><strong>Users creation</strong> and <strong>add to sudoers</strong></li>
<li><strong>systemd units enable or disable</strong></li>
<li><strong>Multilib</strong> support</li>
<li><strong>Arch Linux</strong> common and custom <strong>packages installation</strong></li>
<li>Flatpak utility installation and <strong>Flatpak packages installation</strong></li>
<li>SDKMAN utility installation and <strong>SDKMAN packages installation</strong></li>
<li><strong>AUR utility</strong> installation (paru, yay, aurman) and <strong>AUR packages installation</strong></li>
<li><strong>Packages installation after base system installation</strong> (preferred way of packages installation)</li>
<li>Script for download installation and <strong>recovery scripts</strong> and configuration files</li>
<li><strong>Retry packages download</strong> on connection/mirror error</li>
<li><strong>Packer support</strong> for testing in VirtualBox</li>
<li><strong>Installation log</strong> with all commands executed and output in a file and/or <strong>asciinema video</strong></li>
<li>Wait after installation for an <strong>abortable reboot</strong></li>
<li>Fork the repository and <strong>use your own configuration</strong></li>
</ul>
<p>The recommended way to install Arch Linux is by learning which commands to execute and what each one does, first read the official Arch Linux installation guide and understand what the <em>script</em> commands do. This <em>script</em> is not official and therefore in the <a href="https://foros.archlinux-es.org/">Arch Linux forum in Spanish</a> or <a href="https://bbs.archlinux.org/">in English</a> they will not be able to give you support although I will help you in the comments of this article if questions. Note that this <em>script</em> removes all information from the installation device. If you try it, leave a comment at the end of the article.</p>
<p>Booted the system with the Arch Linux installation ISO image, you have to download the <em>script</em>, edit some environment variables for the alis configuration and start the installation process. Depending on the preferred desktop environment, if you want LVM, the type of the file system, if you want to encrypt the file system and packages to install, the values ​​of the variables will vary according to the preferences that initially have common values. Two variables that must be modified at least are <em>USER_NAME</em> and <em>USER_PASSWORD</em> with the name of the user and his password that the system will use.</p>
<p>The installation time required varies depending on the internet connection bandwidth and the type of storage, in my case with ADSL with a 1.2 MiB/s download and SSD, the installation of the base system without a desktop environment takes me approximately 10 minutes. With a fiber connection it will take significantly less time. The installation <em>script</em> contains the same commands that would be necessary to perform the manual installation interactively.</p>
<p>Even if alis is not used, the bash code in the <em>script</em> can be viewed as executable documentation or for reference if you choose to install manually. It contains the same commands that a user would manually run one after the other in an interactive installation. <a href="https://github.com/picodotdev/alis/">alis</a> is a <em>script</em> that allows you to install Arch Linux in an unattended, automated and customizable way from Arch Linux.</p>
<p>These are the commands to use alis and its configuration file with which to customize the installation.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">1&#10;</span><span class="lnt">2&#10;</span><span class="lnt">3&#10;</span><span class="lnt">4&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># loadkeys es</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># curl -sL https://bit.ly/2F3CATp | bash</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># vim alis.conf</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># ./alis.sh</span></span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>alis-install.sh</span>
    </div>
</div>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">  1&#10;</span><span class="lnt">  2&#10;</span><span class="lnt">  3&#10;</span><span class="lnt">  4&#10;</span><span class="lnt">  5&#10;</span><span class="lnt">  6&#10;</span><span class="lnt">  7&#10;</span><span class="lnt">  8&#10;</span><span class="lnt">  9&#10;</span><span class="lnt"> 10&#10;</span><span class="lnt"> 11&#10;</span><span class="lnt"> 12&#10;</span><span class="lnt"> 13&#10;</span><span class="lnt"> 14&#10;</span><span class="lnt"> 15&#10;</span><span class="lnt"> 16&#10;</span><span class="lnt"> 17&#10;</span><span class="lnt"> 18&#10;</span><span class="lnt"> 19&#10;</span><span class="lnt"> 20&#10;</span><span class="lnt"> 21&#10;</span><span class="lnt"> 22&#10;</span><span class="lnt"> 23&#10;</span><span class="lnt"> 24&#10;</span><span class="lnt"> 25&#10;</span><span class="lnt"> 26&#10;</span><span class="lnt"> 27&#10;</span><span class="lnt"> 28&#10;</span><span class="lnt"> 29&#10;</span><span class="lnt"> 30&#10;</span><span class="lnt"> 31&#10;</span><span class="lnt"> 32&#10;</span><span class="lnt"> 33&#10;</span><span class="lnt"> 34&#10;</span><span class="lnt"> 35&#10;</span><span class="lnt"> 36&#10;</span><span class="lnt"> 37&#10;</span><span class="lnt"> 38&#10;</span><span class="lnt"> 39&#10;</span><span class="lnt"> 40&#10;</span><span class="lnt"> 41&#10;</span><span class="lnt"> 42&#10;</span><span class="lnt"> 43&#10;</span><span class="lnt"> 44&#10;</span><span class="lnt"> 45&#10;</span><span class="lnt"> 46&#10;</span><span class="lnt"> 47&#10;</span><span class="lnt"> 48&#10;</span><span class="lnt"> 49&#10;</span><span class="lnt"> 50&#10;</span><span class="lnt"> 51&#10;</span><span class="lnt"> 52&#10;</span><span class="lnt"> 53&#10;</span><span class="lnt"> 54&#10;</span><span class="lnt"> 55&#10;</span><span class="lnt"> 56&#10;</span><span class="lnt"> 57&#10;</span><span class="lnt"> 58&#10;</span><span class="lnt"> 59&#10;</span><span class="lnt"> 60&#10;</span><span class="lnt"> 61&#10;</span><span class="lnt"> 62&#10;</span><span class="lnt"> 63&#10;</span><span class="lnt"> 64&#10;</span><span class="lnt"> 65&#10;</span><span class="lnt"> 66&#10;</span><span class="lnt"> 67&#10;</span><span class="lnt"> 68&#10;</span><span class="lnt"> 69&#10;</span><span class="lnt"> 70&#10;</span><span class="lnt"> 71&#10;</span><span class="lnt"> 72&#10;</span><span class="lnt"> 73&#10;</span><span class="lnt"> 74&#10;</span><span class="lnt"> 75&#10;</span><span class="lnt"> 76&#10;</span><span class="lnt"> 77&#10;</span><span class="lnt"> 78&#10;</span><span class="lnt"> 79&#10;</span><span class="lnt"> 80&#10;</span><span class="lnt"> 81&#10;</span><span class="lnt"> 82&#10;</span><span class="lnt"> 83&#10;</span><span class="lnt"> 84&#10;</span><span class="lnt"> 85&#10;</span><span class="lnt"> 86&#10;</span><span class="lnt"> 87&#10;</span><span class="lnt"> 88&#10;</span><span class="lnt"> 89&#10;</span><span class="lnt"> 90&#10;</span><span class="lnt"> 91&#10;</span><span class="lnt"> 92&#10;</span><span class="lnt"> 93&#10;</span><span class="lnt"> 94&#10;</span><span class="lnt"> 95&#10;</span><span class="lnt"> 96&#10;</span><span class="lnt"> 97&#10;</span><span class="lnt"> 98&#10;</span><span class="lnt"> 99&#10;</span><span class="lnt">100&#10;</span><span class="lnt">101&#10;</span><span class="lnt">102&#10;</span><span class="lnt">103&#10;</span><span class="lnt">104&#10;</span><span class="lnt">105&#10;</span><span class="lnt">106&#10;</span><span class="lnt">107&#10;</span><span class="lnt">108&#10;</span><span class="lnt">109&#10;</span><span class="lnt">110&#10;</span><span class="lnt">111&#10;</span><span class="lnt">112&#10;</span><span class="lnt">113&#10;</span><span class="lnt">114&#10;</span><span class="lnt">115&#10;</span><span class="lnt">116&#10;</span><span class="lnt">117&#10;</span><span class="lnt">118&#10;</span><span class="lnt">119&#10;</span><span class="lnt">120&#10;</span><span class="lnt">121&#10;</span><span class="lnt">122&#10;</span><span class="lnt">123&#10;</span><span class="lnt">124&#10;</span><span class="lnt">125&#10;</span><span class="lnt">126&#10;</span><span class="lnt">127&#10;</span><span class="lnt">128&#10;</span><span class="lnt">129&#10;</span><span class="lnt">130&#10;</span><span class="lnt">131&#10;</span><span class="lnt">132&#10;</span><span class="lnt">133&#10;</span><span class="lnt">134&#10;</span><span class="lnt">135&#10;</span><span class="lnt">136&#10;</span><span class="lnt">137&#10;</span><span class="lnt">138&#10;</span><span class="lnt">139&#10;</span><span class="lnt">140&#10;</span><span class="lnt">141&#10;</span><span class="lnt">142&#10;</span><span class="lnt">143&#10;</span><span class="lnt">144&#10;</span><span class="lnt">145&#10;</span><span class="lnt">146&#10;</span><span class="lnt">147&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># Arch Linux Install Script (alis) configuration file</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Some variables values are preceded by a ! character, this means that the value is ignored.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Some variables accept a single value others accept multiple values as annotated in the comments.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Some variables are boolean with a value of true or false.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Read the Arch Linux wiki pages to learn more about the variables values.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># https://github.com/picodotdev/alis/blob/master/README.md</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># init</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## KEYS sets keyboard layout.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## LOG generates a log file with the commands executed and output generated during installation.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### The log file is saved to /var/log/alis.log.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KEYS</span><span class="o">=</span><span class="s2">&#34;es&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LOG</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># partition</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## DEVICE sets which is the device for the installation.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## DEVICE_TRIM sets if the DEVICE device supports TRIM feature.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## LVM sets if the DEVICE is partitioned with LVM partition scheme.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## LUKS_PASSWORD and LUKS_PASSWORD_RETYPE if set is the password for encrypt the device. With LVM, LVM on LUKS is used. If &#34;ask&#34; password alis asks for a secure password.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## FILE_SYSTEM_TYPE root device is formatted with this file system type.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## SWAP_SIZE swap file size with a size of the value in megabytes. If no value no swap file is created.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## PARTITION_MODE how partition is performed on DEVICE.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### &#34;auto&#34; value deletes all existing partitions and creates a boot partition and a root partition using disk full size.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### Warning! all disk data will be lost, so backup existing data before.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### &#34;custom&#34; value allows to use a custom parted partition script.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### &#34;manual&#34; allows to specify which existing partitions are used for boot partition and root partition.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE</span><span class="o">=</span><span class="s2">&#34;/dev/sda !/dev/nvme0n1 !/dev/mmcblk0&#34;</span> <span class="c1"># sata nvme mmc (single)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_TRIM</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LVM</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LUKS_PASSWORD</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LUKS_PASSWORD_RETYPE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">FILE_SYSTEM_TYPE</span><span class="o">=</span><span class="s2">&#34;ext4 !btrfs !xfs !f2fs !reiserfs&#34;</span> <span class="c1"># (single)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">SWAP_SIZE</span><span class="o">=</span><span class="s2">&#34;!2048 !4096 !8192&#34;</span> <span class="c1"># (single)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_MODE</span><span class="o">=</span><span class="s2">&#34;auto !custom !manual&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_CUSTOM_PARTED_UEFI</span><span class="o">=</span><span class="s2">&#34;mklabel gpt mkpart ESP fat32 1MiB 512MiB mkpart root </span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2"> 512MiB 100% set 1 esp on&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_CUSTOM_PARTED_BIOS</span><span class="o">=</span><span class="s2">&#34;mklabel msdos mkpart primary ext4 4MiB 512MiB mkpart primary </span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2"> 512MiB 100% set 1 boot on&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_CUSTOMMANUAL_BOOT</span><span class="o">=</span><span class="s2">&#34;!/dev/sda1 !/dev/nvme0n1p1 !/dev/mmcblk0p1&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_CUSTOMMANUAL_ROOT</span><span class="o">=</span><span class="s2">&#34;!/dev/sda2 !/dev/nvme0n1p2 !/dev/mmcblk0p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># network_install</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## Variables to setup the WIFI connection to internet.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## The WIFI interface, WIFI ESSID identifier and WIFI password must be specified. If &#34;ask&#34; password alis asks for a secure password.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## PING_HOSTNAME is the host to check the internet connection.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">WIFI_INTERFACE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">WIFI_ESSID</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">WIFI_KEY</span><span class="o">=</span><span class="s2">&#34;ask&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">WIFI_KEY_RETYPE</span><span class="o">=</span><span class="s2">&#34;ask&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PING_HOSTNAME</span><span class="o">=</span><span class="s2">&#34;mirrors.kernel.org&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># install</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## REFLECTOR allows to use reflector utility to use the best mirrors for packages download.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## REFLECTOR_COUNTRIES is an array of countries to select mirrors from.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## PACMAN_MIRROR if reflector is not used this specific mirror is used.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## KERNELS additional kernels and headers to install.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## KERNELS_COMPRESSION selects de algorithm for kernel compression.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## KERNELS_PARAMETERS specific kernel parameters to set on boot. eg. iommu=soft</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">REFLECTOR</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">REFLECTOR_COUNTRIES</span><span class="o">=(</span><span class="s2">&#34;Spain&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PACMAN_MIRROR</span><span class="o">=</span><span class="s2">&#34;https://mirrors.kernel.org/archlinux/\$repo/os/\$arch&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KERNELS</span><span class="o">=</span><span class="s2">&#34;!linux-lts !linux-lts-headers !linux-hardened !linux-hardened-headers !linux-zen !linux-zen-headers&#34;</span> <span class="c1"># (multiple)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KERNELS_COMPRESSION</span><span class="o">=</span><span class="s2">&#34;!gzip !bzip2 !lzma !xz !lzop !lz4 zstd&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KERNELS_PARAMETERS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># display driver</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## DISPLAY_DRIVER installs a specific display driver, you must know which brand is the graphics hardware.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## Other variables activates some features if are supported for the DISPLAY_DRIVER.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DISPLAY_DRIVER</span><span class="o">=</span><span class="s2">&#34;!intel !amdgpu !ati !nvidia !nvidia-lts !nvidia-dkms !nvidia-390xx !nvidia-390xx-lts !nvidia-390xx-dkms !nouveau&#34;</span> <span class="c1"># (single)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KMS</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">FASTBOOT</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">FRAMEBUFFER_COMPRESSION</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DISPLAY_DRIVER_DDX</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">VULKAN</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DISPLAY_DRIVER_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DISPLAY_DRIVER_HARDWARE_ACCELERATION_INTEL</span><span class="o">=</span><span class="s2">&#34;intel-media-driver !libva-intel-driver&#34;</span> <span class="c1"># (single)</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># config</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## Some variables for system configuration, from timezone, locale and keyboard to the root password.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## ROOT_PASSWORD root user password. If &#34;ask&#34; password alis asks for a secure password.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">TIMEZONE</span><span class="o">=</span><span class="s2">&#34;/usr/share/zoneinfo/Europe/Madrid&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LOCALES</span><span class="o">=(</span><span class="s2">&#34;es_ES.UTF-8 UTF-8&#34;</span> <span class="s2">&#34;en_US.UTF-8 UTF-8&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LOCALE_CONF</span><span class="o">=(</span><span class="s2">&#34;LANG=es_ES.UTF-8&#34;</span> <span class="s2">&#34;LANGUAGE=es_ES:es:en_US:en&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KEYMAP</span><span class="o">=</span><span class="s2">&#34;KEYMAP=es&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KEYLAYOUT</span><span class="o">=</span><span class="s2">&#34;es&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KEYMODEL</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KEYVARIANT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">KEYOPTIONS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">FONT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">FONT_MAP</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">HOSTNAME</span><span class="o">=</span><span class="s2">&#34;archlinux&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ROOT_PASSWORD</span><span class="o">=</span><span class="s2">&#34;ask&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ROOT_PASSWORD_RETYPE</span><span class="o">=</span><span class="s2">&#34;ask&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># user</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## USER_NAME, USER_PASSWORD Regular user to create in the system. A password must be specified, if &#34;ask&#34; password alis asks for a secure password.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## ADDITIONAL_USERS is an array of additional users to create in the system, if &#34;ask&#34; password alis asks for a secure password.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">USER_NAME</span><span class="o">=</span><span class="s2">&#34;picodotdev&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">USER_PASSWORD</span><span class="o">=</span><span class="s2">&#34;ask&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">USER_PASSWORD_RETYPE</span><span class="o">=</span><span class="s2">&#34;ask&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ADDITIONAL_USERS</span><span class="o">=()</span> <span class="c1"># eg. (&#34;user1=password1&#34; &#34;user2=password2&#34;)</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1">## systemd-homed (experimental feature)</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### SYSTEMD_HOMED &#34;true&#34; value requires interactivity to set user password</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">SYSTEMD_HOMED</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">SYSTEMD_HOMED_STORAGE</span><span class="o">=</span><span class="s2">&#34;directory !fscrypt !luks !cifs !subvolume&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">SYSTEMD_HOMED_CIFS_DOMAIN</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">SYSTEMD_HOMED_CIFS_SERVICE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># mkinitcpio</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## HOOKS are the system hooks to execute to build the initial ramdisk.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### Generally, it is not necessary to modify, alis enables or disables some hooks</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### taking in account other variables values like bootloader or device encryption.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">HOOKS</span><span class="o">=</span><span class="s2">&#34;base !udev !usr !resume !systemd !btrfs keyboard autodetect modconf block !net !dmraid !mdadm !mdadm_udev !keymap !consolefont !sd-vconsole !encrypt !lvm2 !sd-encrypt !sd-lvm2 fsck filesystems&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># bootloader</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## BOOTLOADER system boot loader.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">BOOTLOADER</span><span class="o">=</span><span class="s2">&#34;!grub !refind systemd&#34;</span> <span class="c1"># (single)</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># shell</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## CUSTOM_SHELL configures an alternative custom shell interpreter.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">CUSTOM_SHELL</span><span class="o">=</span><span class="s2">&#34;bash !zsh !dash !fish&#34;</span> <span class="c1"># (single)</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># desktop</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## DESKTOP_ENVIRONMENT installs a desktop environment.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DESKTOP_ENVIRONMENT</span><span class="o">=</span><span class="s2">&#34;!gnome !kde !xfce !mate !cinnamon !lxde !i3-wm !i3-gaps&#34;</span> <span class="c1"># (single)</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># packages (all multiple)</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## PACKAGES_MULTILIB configures multilib repository for pacman and install multilib packages for display driver</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## PACKAGES_INSTALL installs packages on system installation, edit alis-packages.conf to select packages.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### It is recommended to install packages after base installation and reboot.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PACKAGES_MULTILIB</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PACKAGES_INSTALL</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># misc</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## VAGRANT for build a VirtualBox OVA with Packer</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">VAGRANT</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># systemd</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## SYSTEMD_UNITS systemd units to enable or disable.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### If preceded with a &#34;+&#34; unit is enabled, if preceded with &#34;-&#34; unit is disabled, if preceded with &#34;!&#34; unit is ignored (no action is performed).</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">### eg. &#34;+ufw.service&#34; to enable, &#34;-ufw.service&#34; to disable, &#34;!ufw.service&#34; to ignore</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">SYSTEMD_UNITS</span><span class="o">=</span><span class="s2">&#34;!ufw.service !docker.service&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># reboot</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">## REBOOT on installation end reboots the system automatically. If &#34;false&#34; no reboot is performed and the user must do it explicitly.</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">REBOOT</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>alis.conf</span>
    </div>
</div>
<h3 id="screenshots-of-different-supported-desktop-environments">Screenshots of different supported desktop environments</h3>
<p>These are some screenshots with different desktop environments that I have tested with VirtualBox.</p>
<div class="media">
<figure>
<p><a href="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-gnome_hu9b320e0da9c3f7b53e055de7bd0dea05_59051_2560x1440_fit_q90_box.jpg" data-gallery="" title="GNOME"><amp-img src="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-gnome_hu9b320e0da9c3f7b53e055de7bd0dea05_59051_300x200_fit_q90_box.jpg" width="267" height="200" alt="GNOME" title="GNOME"  class=""></amp-img></a>
<a href="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-kde_huc1033173311b1fe983324c1eed546025_77308_2560x1440_fit_q90_box.jpg" data-gallery="" title="KDE"><amp-img src="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-kde_huc1033173311b1fe983324c1eed546025_77308_300x200_fit_q90_box.jpg" width="267" height="200" alt="KDE" title="KDE"  class=""></amp-img></a></p>
<figcaption>GNOME and KDE desktop environments</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-xfce_hu207a5cc7835aaa368efdd5626136b4e2_50488_2560x1440_fit_q90_box.jpg" data-gallery="" title="XFCE"><amp-img src="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-xfce_hu207a5cc7835aaa368efdd5626136b4e2_50488_300x200_fit_q90_box.jpg" width="267" height="200" alt="XFCE" title="XFCE"  class=""></amp-img></a>
<a href="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-cinnamon_huada952b2201e9040ea05142b38c6dec4_57971_2560x1440_fit_q90_box.jpg" data-gallery="" title="Cinnamon"><amp-img src="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-cinnamon_huada952b2201e9040ea05142b38c6dec4_57971_300x200_fit_q90_box.jpg" width="267" height="200" alt="Cinnamon" title="Cinnamon"  class=""></amp-img></a></p>
<figcaption>Xfce and Cinnamon desktop environments</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-lxde_huafe9060d5dbd54d661872c90b35b3c3e_60009_2560x1440_fit_q90_box.jpg" data-gallery="" title="LXDE"><amp-img src="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-lxde_huafe9060d5dbd54d661872c90b35b3c3e_60009_300x200_fit_q90_box.jpg" width="267" height="200" alt="LXDE" title="LXDE"  class=""></amp-img></a>
<a href="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-mate_huc99153c03fd4a5e1c154432239083495_26705_2560x1440_fit_q90_box.jpg" data-gallery="" title="Mate"><amp-img src="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-mate_huc99153c03fd4a5e1c154432239083495_26705_300x200_fit_q90_box.jpg" width="267" height="200" alt="Mate" title="Mate"  class=""></amp-img></a></p>
<figcaption>LXDE and Mate desktop environments</figcaption>
</figure>
</div>
<div class="media">
<figure>
<p><a href="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-root-password_hubb5350839af640196e4dc7ade488175e_3831_2560x1440_fit_box_3.png" data-gallery="" title="Password request to decrypt root partition"><amp-img src="/blog-bitix/2017/01/script-to-install-arch-linux-easy-fast-unattended-automated-and-customizable-way/images/archlinux-root-password_hubb5350839af640196e4dc7ade488175e_3831_300x200_fit_box_3.png" width="267" height="200" alt="Password request to decrypt root partition" title="Password request to decrypt root partition"  class=""></amp-img></a></p>
<figcaption>Password request to decrypt root partition</figcaption>
</figure>
</div>
<h3 id="installation-video-of-the-base-system-with-alis">Installation video of the base system with alis</h3>
<p>The following video captured with <a href="https://asciinema.org/">asciinema</a> shows how using alis to install Arch Linux on a computer with the complete process of the basic system installation.</p>
<div class="media">
<a href="https://asciinema.org/a/418524" target="_blank"><amp-img src="https://asciinema.org/a/418524.png" width="650" height="563" class="lozad"></amp-img></a>
</div>
<h3 id="alis-source-code">Alis source code</h3>
<p>The installer code is not very complicated and much simpler than other similar interactive <em>scripts</em>, as it does not mix the installation commands with the interactive messages that ask questions and wait for answers, also after setting the variables and starting the installation process the it is done unattended until completed without requiring the user to enter more data interactively.</p>
<p>The commands that I have compiled from the recipe are the ones that we would execute one after another starting from the original Arch Linux installation media. The <em>main</em> function contains the steps that the installation consists of, from partitioning and encrypting the disk to restarting after the installation is complete, the rest of the functions the commands of that installation step.</p>
<div class="code">
    <div class="highlight"><div class="chroma">&#10;<table class="lntable"><tr><td class="lntd">&#10;<pre tabindex="0" class="chroma"><code><span class="lnt">   1&#10;</span><span class="lnt">   2&#10;</span><span class="lnt">   3&#10;</span><span class="lnt">   4&#10;</span><span class="lnt">   5&#10;</span><span class="lnt">   6&#10;</span><span class="lnt">   7&#10;</span><span class="lnt">   8&#10;</span><span class="lnt">   9&#10;</span><span class="lnt">  10&#10;</span><span class="lnt">  11&#10;</span><span class="lnt">  12&#10;</span><span class="lnt">  13&#10;</span><span class="lnt">  14&#10;</span><span class="lnt">  15&#10;</span><span class="lnt">  16&#10;</span><span class="lnt">  17&#10;</span><span class="lnt">  18&#10;</span><span class="lnt">  19&#10;</span><span class="lnt">  20&#10;</span><span class="lnt">  21&#10;</span><span class="lnt">  22&#10;</span><span class="lnt">  23&#10;</span><span class="lnt">  24&#10;</span><span class="lnt">  25&#10;</span><span class="lnt">  26&#10;</span><span class="lnt">  27&#10;</span><span class="lnt">  28&#10;</span><span class="lnt">  29&#10;</span><span class="lnt">  30&#10;</span><span class="lnt">  31&#10;</span><span class="lnt">  32&#10;</span><span class="lnt">  33&#10;</span><span class="lnt">  34&#10;</span><span class="lnt">  35&#10;</span><span class="lnt">  36&#10;</span><span class="lnt">  37&#10;</span><span class="lnt">  38&#10;</span><span class="lnt">  39&#10;</span><span class="lnt">  40&#10;</span><span class="lnt">  41&#10;</span><span class="lnt">  42&#10;</span><span class="lnt">  43&#10;</span><span class="lnt">  44&#10;</span><span class="lnt">  45&#10;</span><span class="lnt">  46&#10;</span><span class="lnt">  47&#10;</span><span class="lnt">  48&#10;</span><span class="lnt">  49&#10;</span><span class="lnt">  50&#10;</span><span class="lnt">  51&#10;</span><span class="lnt">  52&#10;</span><span class="lnt">  53&#10;</span><span class="lnt">  54&#10;</span><span class="lnt">  55&#10;</span><span class="lnt">  56&#10;</span><span class="lnt">  57&#10;</span><span class="lnt">  58&#10;</span><span class="lnt">  59&#10;</span><span class="lnt">  60&#10;</span><span class="lnt">  61&#10;</span><span class="lnt">  62&#10;</span><span class="lnt">  63&#10;</span><span class="lnt">  64&#10;</span><span class="lnt">  65&#10;</span><span class="lnt">  66&#10;</span><span class="lnt">  67&#10;</span><span class="lnt">  68&#10;</span><span class="lnt">  69&#10;</span><span class="lnt">  70&#10;</span><span class="lnt">  71&#10;</span><span class="lnt">  72&#10;</span><span class="lnt">  73&#10;</span><span class="lnt">  74&#10;</span><span class="lnt">  75&#10;</span><span class="lnt">  76&#10;</span><span class="lnt">  77&#10;</span><span class="lnt">  78&#10;</span><span class="lnt">  79&#10;</span><span class="lnt">  80&#10;</span><span class="lnt">  81&#10;</span><span class="lnt">  82&#10;</span><span class="lnt">  83&#10;</span><span class="lnt">  84&#10;</span><span class="lnt">  85&#10;</span><span class="lnt">  86&#10;</span><span class="lnt">  87&#10;</span><span class="lnt">  88&#10;</span><span class="lnt">  89&#10;</span><span class="lnt">  90&#10;</span><span class="lnt">  91&#10;</span><span class="lnt">  92&#10;</span><span class="lnt">  93&#10;</span><span class="lnt">  94&#10;</span><span class="lnt">  95&#10;</span><span class="lnt">  96&#10;</span><span class="lnt">  97&#10;</span><span class="lnt">  98&#10;</span><span class="lnt">  99&#10;</span><span class="lnt"> 100&#10;</span><span class="lnt"> 101&#10;</span><span class="lnt"> 102&#10;</span><span class="lnt"> 103&#10;</span><span class="lnt"> 104&#10;</span><span class="lnt"> 105&#10;</span><span class="lnt"> 106&#10;</span><span class="lnt"> 107&#10;</span><span class="lnt"> 108&#10;</span><span class="lnt"> 109&#10;</span><span class="lnt"> 110&#10;</span><span class="lnt"> 111&#10;</span><span class="lnt"> 112&#10;</span><span class="lnt"> 113&#10;</span><span class="lnt"> 114&#10;</span><span class="lnt"> 115&#10;</span><span class="lnt"> 116&#10;</span><span class="lnt"> 117&#10;</span><span class="lnt"> 118&#10;</span><span class="lnt"> 119&#10;</span><span class="lnt"> 120&#10;</span><span class="lnt"> 121&#10;</span><span class="lnt"> 122&#10;</span><span class="lnt"> 123&#10;</span><span class="lnt"> 124&#10;</span><span class="lnt"> 125&#10;</span><span class="lnt"> 126&#10;</span><span class="lnt"> 127&#10;</span><span class="lnt"> 128&#10;</span><span class="lnt"> 129&#10;</span><span class="lnt"> 130&#10;</span><span class="lnt"> 131&#10;</span><span class="lnt"> 132&#10;</span><span class="lnt"> 133&#10;</span><span class="lnt"> 134&#10;</span><span class="lnt"> 135&#10;</span><span class="lnt"> 136&#10;</span><span class="lnt"> 137&#10;</span><span class="lnt"> 138&#10;</span><span class="lnt"> 139&#10;</span><span class="lnt"> 140&#10;</span><span class="lnt"> 141&#10;</span><span class="lnt"> 142&#10;</span><span class="lnt"> 143&#10;</span><span class="lnt"> 144&#10;</span><span class="lnt"> 145&#10;</span><span class="lnt"> 146&#10;</span><span class="lnt"> 147&#10;</span><span class="lnt"> 148&#10;</span><span class="lnt"> 149&#10;</span><span class="lnt"> 150&#10;</span><span class="lnt"> 151&#10;</span><span class="lnt"> 152&#10;</span><span class="lnt"> 153&#10;</span><span class="lnt"> 154&#10;</span><span class="lnt"> 155&#10;</span><span class="lnt"> 156&#10;</span><span class="lnt"> 157&#10;</span><span class="lnt"> 158&#10;</span><span class="lnt"> 159&#10;</span><span class="lnt"> 160&#10;</span><span class="lnt"> 161&#10;</span><span class="lnt"> 162&#10;</span><span class="lnt"> 163&#10;</span><span class="lnt"> 164&#10;</span><span class="lnt"> 165&#10;</span><span class="lnt"> 166&#10;</span><span class="lnt"> 167&#10;</span><span class="lnt"> 168&#10;</span><span class="lnt"> 169&#10;</span><span class="lnt"> 170&#10;</span><span class="lnt"> 171&#10;</span><span class="lnt"> 172&#10;</span><span class="lnt"> 173&#10;</span><span class="lnt"> 174&#10;</span><span class="lnt"> 175&#10;</span><span class="lnt"> 176&#10;</span><span class="lnt"> 177&#10;</span><span class="lnt"> 178&#10;</span><span class="lnt"> 179&#10;</span><span class="lnt"> 180&#10;</span><span class="lnt"> 181&#10;</span><span class="lnt"> 182&#10;</span><span class="lnt"> 183&#10;</span><span class="lnt"> 184&#10;</span><span class="lnt"> 185&#10;</span><span class="lnt"> 186&#10;</span><span class="lnt"> 187&#10;</span><span class="lnt"> 188&#10;</span><span class="lnt"> 189&#10;</span><span class="lnt"> 190&#10;</span><span class="lnt"> 191&#10;</span><span class="lnt"> 192&#10;</span><span class="lnt"> 193&#10;</span><span class="lnt"> 194&#10;</span><span class="lnt"> 195&#10;</span><span class="lnt"> 196&#10;</span><span class="lnt"> 197&#10;</span><span class="lnt"> 198&#10;</span><span class="lnt"> 199&#10;</span><span class="lnt"> 200&#10;</span><span class="lnt"> 201&#10;</span><span class="lnt"> 202&#10;</span><span class="lnt"> 203&#10;</span><span class="lnt"> 204&#10;</span><span class="lnt"> 205&#10;</span><span class="lnt"> 206&#10;</span><span class="lnt"> 207&#10;</span><span class="lnt"> 208&#10;</span><span class="lnt"> 209&#10;</span><span class="lnt"> 210&#10;</span><span class="lnt"> 211&#10;</span><span class="lnt"> 212&#10;</span><span class="lnt"> 213&#10;</span><span class="lnt"> 214&#10;</span><span class="lnt"> 215&#10;</span><span class="lnt"> 216&#10;</span><span class="lnt"> 217&#10;</span><span class="lnt"> 218&#10;</span><span class="lnt"> 219&#10;</span><span class="lnt"> 220&#10;</span><span class="lnt"> 221&#10;</span><span class="lnt"> 222&#10;</span><span class="lnt"> 223&#10;</span><span class="lnt"> 224&#10;</span><span class="lnt"> 225&#10;</span><span class="lnt"> 226&#10;</span><span class="lnt"> 227&#10;</span><span class="lnt"> 228&#10;</span><span class="lnt"> 229&#10;</span><span class="lnt"> 230&#10;</span><span class="lnt"> 231&#10;</span><span class="lnt"> 232&#10;</span><span class="lnt"> 233&#10;</span><span class="lnt"> 234&#10;</span><span class="lnt"> 235&#10;</span><span class="lnt"> 236&#10;</span><span class="lnt"> 237&#10;</span><span class="lnt"> 238&#10;</span><span class="lnt"> 239&#10;</span><span class="lnt"> 240&#10;</span><span class="lnt"> 241&#10;</span><span class="lnt"> 242&#10;</span><span class="lnt"> 243&#10;</span><span class="lnt"> 244&#10;</span><span class="lnt"> 245&#10;</span><span class="lnt"> 246&#10;</span><span class="lnt"> 247&#10;</span><span class="lnt"> 248&#10;</span><span class="lnt"> 249&#10;</span><span class="lnt"> 250&#10;</span><span class="lnt"> 251&#10;</span><span class="lnt"> 252&#10;</span><span class="lnt"> 253&#10;</span><span class="lnt"> 254&#10;</span><span class="lnt"> 255&#10;</span><span class="lnt"> 256&#10;</span><span class="lnt"> 257&#10;</span><span class="lnt"> 258&#10;</span><span class="lnt"> 259&#10;</span><span class="lnt"> 260&#10;</span><span class="lnt"> 261&#10;</span><span class="lnt"> 262&#10;</span><span class="lnt"> 263&#10;</span><span class="lnt"> 264&#10;</span><span class="lnt"> 265&#10;</span><span class="lnt"> 266&#10;</span><span class="lnt"> 267&#10;</span><span class="lnt"> 268&#10;</span><span class="lnt"> 269&#10;</span><span class="lnt"> 270&#10;</span><span class="lnt"> 271&#10;</span><span class="lnt"> 272&#10;</span><span class="lnt"> 273&#10;</span><span class="lnt"> 274&#10;</span><span class="lnt"> 275&#10;</span><span class="lnt"> 276&#10;</span><span class="lnt"> 277&#10;</span><span class="lnt"> 278&#10;</span><span class="lnt"> 279&#10;</span><span class="lnt"> 280&#10;</span><span class="lnt"> 281&#10;</span><span class="lnt"> 282&#10;</span><span class="lnt"> 283&#10;</span><span class="lnt"> 284&#10;</span><span class="lnt"> 285&#10;</span><span class="lnt"> 286&#10;</span><span class="lnt"> 287&#10;</span><span class="lnt"> 288&#10;</span><span class="lnt"> 289&#10;</span><span class="lnt"> 290&#10;</span><span class="lnt"> 291&#10;</span><span class="lnt"> 292&#10;</span><span class="lnt"> 293&#10;</span><span class="lnt"> 294&#10;</span><span class="lnt"> 295&#10;</span><span class="lnt"> 296&#10;</span><span class="lnt"> 297&#10;</span><span class="lnt"> 298&#10;</span><span class="lnt"> 299&#10;</span><span class="lnt"> 300&#10;</span><span class="lnt"> 301&#10;</span><span class="lnt"> 302&#10;</span><span class="lnt"> 303&#10;</span><span class="lnt"> 304&#10;</span><span class="lnt"> 305&#10;</span><span class="lnt"> 306&#10;</span><span class="lnt"> 307&#10;</span><span class="lnt"> 308&#10;</span><span class="lnt"> 309&#10;</span><span class="lnt"> 310&#10;</span><span class="lnt"> 311&#10;</span><span class="lnt"> 312&#10;</span><span class="lnt"> 313&#10;</span><span class="lnt"> 314&#10;</span><span class="lnt"> 315&#10;</span><span class="lnt"> 316&#10;</span><span class="lnt"> 317&#10;</span><span class="lnt"> 318&#10;</span><span class="lnt"> 319&#10;</span><span class="lnt"> 320&#10;</span><span class="lnt"> 321&#10;</span><span class="lnt"> 322&#10;</span><span class="lnt"> 323&#10;</span><span class="lnt"> 324&#10;</span><span class="lnt"> 325&#10;</span><span class="lnt"> 326&#10;</span><span class="lnt"> 327&#10;</span><span class="lnt"> 328&#10;</span><span class="lnt"> 329&#10;</span><span class="lnt"> 330&#10;</span><span class="lnt"> 331&#10;</span><span class="lnt"> 332&#10;</span><span class="lnt"> 333&#10;</span><span class="lnt"> 334&#10;</span><span class="lnt"> 335&#10;</span><span class="lnt"> 336&#10;</span><span class="lnt"> 337&#10;</span><span class="lnt"> 338&#10;</span><span class="lnt"> 339&#10;</span><span class="lnt"> 340&#10;</span><span class="lnt"> 341&#10;</span><span class="lnt"> 342&#10;</span><span class="lnt"> 343&#10;</span><span class="lnt"> 344&#10;</span><span class="lnt"> 345&#10;</span><span class="lnt"> 346&#10;</span><span class="lnt"> 347&#10;</span><span class="lnt"> 348&#10;</span><span class="lnt"> 349&#10;</span><span class="lnt"> 350&#10;</span><span class="lnt"> 351&#10;</span><span class="lnt"> 352&#10;</span><span class="lnt"> 353&#10;</span><span class="lnt"> 354&#10;</span><span class="lnt"> 355&#10;</span><span class="lnt"> 356&#10;</span><span class="lnt"> 357&#10;</span><span class="lnt"> 358&#10;</span><span class="lnt"> 359&#10;</span><span class="lnt"> 360&#10;</span><span class="lnt"> 361&#10;</span><span class="lnt"> 362&#10;</span><span class="lnt"> 363&#10;</span><span class="lnt"> 364&#10;</span><span class="lnt"> 365&#10;</span><span class="lnt"> 366&#10;</span><span class="lnt"> 367&#10;</span><span class="lnt"> 368&#10;</span><span class="lnt"> 369&#10;</span><span class="lnt"> 370&#10;</span><span class="lnt"> 371&#10;</span><span class="lnt"> 372&#10;</span><span class="lnt"> 373&#10;</span><span class="lnt"> 374&#10;</span><span class="lnt"> 375&#10;</span><span class="lnt"> 376&#10;</span><span class="lnt"> 377&#10;</span><span class="lnt"> 378&#10;</span><span class="lnt"> 379&#10;</span><span class="lnt"> 380&#10;</span><span class="lnt"> 381&#10;</span><span class="lnt"> 382&#10;</span><span class="lnt"> 383&#10;</span><span class="lnt"> 384&#10;</span><span class="lnt"> 385&#10;</span><span class="lnt"> 386&#10;</span><span class="lnt"> 387&#10;</span><span class="lnt"> 388&#10;</span><span class="lnt"> 389&#10;</span><span class="lnt"> 390&#10;</span><span class="lnt"> 391&#10;</span><span class="lnt"> 392&#10;</span><span class="lnt"> 393&#10;</span><span class="lnt"> 394&#10;</span><span class="lnt"> 395&#10;</span><span class="lnt"> 396&#10;</span><span class="lnt"> 397&#10;</span><span class="lnt"> 398&#10;</span><span class="lnt"> 399&#10;</span><span class="lnt"> 400&#10;</span><span class="lnt"> 401&#10;</span><span class="lnt"> 402&#10;</span><span class="lnt"> 403&#10;</span><span class="lnt"> 404&#10;</span><span class="lnt"> 405&#10;</span><span class="lnt"> 406&#10;</span><span class="lnt"> 407&#10;</span><span class="lnt"> 408&#10;</span><span class="lnt"> 409&#10;</span><span class="lnt"> 410&#10;</span><span class="lnt"> 411&#10;</span><span class="lnt"> 412&#10;</span><span class="lnt"> 413&#10;</span><span class="lnt"> 414&#10;</span><span class="lnt"> 415&#10;</span><span class="lnt"> 416&#10;</span><span class="lnt"> 417&#10;</span><span class="lnt"> 418&#10;</span><span class="lnt"> 419&#10;</span><span class="lnt"> 420&#10;</span><span class="lnt"> 421&#10;</span><span class="lnt"> 422&#10;</span><span class="lnt"> 423&#10;</span><span class="lnt"> 424&#10;</span><span class="lnt"> 425&#10;</span><span class="lnt"> 426&#10;</span><span class="lnt"> 427&#10;</span><span class="lnt"> 428&#10;</span><span class="lnt"> 429&#10;</span><span class="lnt"> 430&#10;</span><span class="lnt"> 431&#10;</span><span class="lnt"> 432&#10;</span><span class="lnt"> 433&#10;</span><span class="lnt"> 434&#10;</span><span class="lnt"> 435&#10;</span><span class="lnt"> 436&#10;</span><span class="lnt"> 437&#10;</span><span class="lnt"> 438&#10;</span><span class="lnt"> 439&#10;</span><span class="lnt"> 440&#10;</span><span class="lnt"> 441&#10;</span><span class="lnt"> 442&#10;</span><span class="lnt"> 443&#10;</span><span class="lnt"> 444&#10;</span><span class="lnt"> 445&#10;</span><span class="lnt"> 446&#10;</span><span class="lnt"> 447&#10;</span><span class="lnt"> 448&#10;</span><span class="lnt"> 449&#10;</span><span class="lnt"> 450&#10;</span><span class="lnt"> 451&#10;</span><span class="lnt"> 452&#10;</span><span class="lnt"> 453&#10;</span><span class="lnt"> 454&#10;</span><span class="lnt"> 455&#10;</span><span class="lnt"> 456&#10;</span><span class="lnt"> 457&#10;</span><span class="lnt"> 458&#10;</span><span class="lnt"> 459&#10;</span><span class="lnt"> 460&#10;</span><span class="lnt"> 461&#10;</span><span class="lnt"> 462&#10;</span><span class="lnt"> 463&#10;</span><span class="lnt"> 464&#10;</span><span class="lnt"> 465&#10;</span><span class="lnt"> 466&#10;</span><span class="lnt"> 467&#10;</span><span class="lnt"> 468&#10;</span><span class="lnt"> 469&#10;</span><span class="lnt"> 470&#10;</span><span class="lnt"> 471&#10;</span><span class="lnt"> 472&#10;</span><span class="lnt"> 473&#10;</span><span class="lnt"> 474&#10;</span><span class="lnt"> 475&#10;</span><span class="lnt"> 476&#10;</span><span class="lnt"> 477&#10;</span><span class="lnt"> 478&#10;</span><span class="lnt"> 479&#10;</span><span class="lnt"> 480&#10;</span><span class="lnt"> 481&#10;</span><span class="lnt"> 482&#10;</span><span class="lnt"> 483&#10;</span><span class="lnt"> 484&#10;</span><span class="lnt"> 485&#10;</span><span class="lnt"> 486&#10;</span><span class="lnt"> 487&#10;</span><span class="lnt"> 488&#10;</span><span class="lnt"> 489&#10;</span><span class="lnt"> 490&#10;</span><span class="lnt"> 491&#10;</span><span class="lnt"> 492&#10;</span><span class="lnt"> 493&#10;</span><span class="lnt"> 494&#10;</span><span class="lnt"> 495&#10;</span><span class="lnt"> 496&#10;</span><span class="lnt"> 497&#10;</span><span class="lnt"> 498&#10;</span><span class="lnt"> 499&#10;</span><span class="lnt"> 500&#10;</span><span class="lnt"> 501&#10;</span><span class="lnt"> 502&#10;</span><span class="lnt"> 503&#10;</span><span class="lnt"> 504&#10;</span><span class="lnt"> 505&#10;</span><span class="lnt"> 506&#10;</span><span class="lnt"> 507&#10;</span><span class="lnt"> 508&#10;</span><span class="lnt"> 509&#10;</span><span class="lnt"> 510&#10;</span><span class="lnt"> 511&#10;</span><span class="lnt"> 512&#10;</span><span class="lnt"> 513&#10;</span><span class="lnt"> 514&#10;</span><span class="lnt"> 515&#10;</span><span class="lnt"> 516&#10;</span><span class="lnt"> 517&#10;</span><span class="lnt"> 518&#10;</span><span class="lnt"> 519&#10;</span><span class="lnt"> 520&#10;</span><span class="lnt"> 521&#10;</span><span class="lnt"> 522&#10;</span><span class="lnt"> 523&#10;</span><span class="lnt"> 524&#10;</span><span class="lnt"> 525&#10;</span><span class="lnt"> 526&#10;</span><span class="lnt"> 527&#10;</span><span class="lnt"> 528&#10;</span><span class="lnt"> 529&#10;</span><span class="lnt"> 530&#10;</span><span class="lnt"> 531&#10;</span><span class="lnt"> 532&#10;</span><span class="lnt"> 533&#10;</span><span class="lnt"> 534&#10;</span><span class="lnt"> 535&#10;</span><span class="lnt"> 536&#10;</span><span class="lnt"> 537&#10;</span><span class="lnt"> 538&#10;</span><span class="lnt"> 539&#10;</span><span class="lnt"> 540&#10;</span><span class="lnt"> 541&#10;</span><span class="lnt"> 542&#10;</span><span class="lnt"> 543&#10;</span><span class="lnt"> 544&#10;</span><span class="lnt"> 545&#10;</span><span class="lnt"> 546&#10;</span><span class="lnt"> 547&#10;</span><span class="lnt"> 548&#10;</span><span class="lnt"> 549&#10;</span><span class="lnt"> 550&#10;</span><span class="lnt"> 551&#10;</span><span class="lnt"> 552&#10;</span><span class="lnt"> 553&#10;</span><span class="lnt"> 554&#10;</span><span class="lnt"> 555&#10;</span><span class="lnt"> 556&#10;</span><span class="lnt"> 557&#10;</span><span class="lnt"> 558&#10;</span><span class="lnt"> 559&#10;</span><span class="lnt"> 560&#10;</span><span class="lnt"> 561&#10;</span><span class="lnt"> 562&#10;</span><span class="lnt"> 563&#10;</span><span class="lnt"> 564&#10;</span><span class="lnt"> 565&#10;</span><span class="lnt"> 566&#10;</span><span class="lnt"> 567&#10;</span><span class="lnt"> 568&#10;</span><span class="lnt"> 569&#10;</span><span class="lnt"> 570&#10;</span><span class="lnt"> 571&#10;</span><span class="lnt"> 572&#10;</span><span class="lnt"> 573&#10;</span><span class="lnt"> 574&#10;</span><span class="lnt"> 575&#10;</span><span class="lnt"> 576&#10;</span><span class="lnt"> 577&#10;</span><span class="lnt"> 578&#10;</span><span class="lnt"> 579&#10;</span><span class="lnt"> 580&#10;</span><span class="lnt"> 581&#10;</span><span class="lnt"> 582&#10;</span><span class="lnt"> 583&#10;</span><span class="lnt"> 584&#10;</span><span class="lnt"> 585&#10;</span><span class="lnt"> 586&#10;</span><span class="lnt"> 587&#10;</span><span class="lnt"> 588&#10;</span><span class="lnt"> 589&#10;</span><span class="lnt"> 590&#10;</span><span class="lnt"> 591&#10;</span><span class="lnt"> 592&#10;</span><span class="lnt"> 593&#10;</span><span class="lnt"> 594&#10;</span><span class="lnt"> 595&#10;</span><span class="lnt"> 596&#10;</span><span class="lnt"> 597&#10;</span><span class="lnt"> 598&#10;</span><span class="lnt"> 599&#10;</span><span class="lnt"> 600&#10;</span><span class="lnt"> 601&#10;</span><span class="lnt"> 602&#10;</span><span class="lnt"> 603&#10;</span><span class="lnt"> 604&#10;</span><span class="lnt"> 605&#10;</span><span class="lnt"> 606&#10;</span><span class="lnt"> 607&#10;</span><span class="lnt"> 608&#10;</span><span class="lnt"> 609&#10;</span><span class="lnt"> 610&#10;</span><span class="lnt"> 611&#10;</span><span class="lnt"> 612&#10;</span><span class="lnt"> 613&#10;</span><span class="lnt"> 614&#10;</span><span class="lnt"> 615&#10;</span><span class="lnt"> 616&#10;</span><span class="lnt"> 617&#10;</span><span class="lnt"> 618&#10;</span><span class="lnt"> 619&#10;</span><span class="lnt"> 620&#10;</span><span class="lnt"> 621&#10;</span><span class="lnt"> 622&#10;</span><span class="lnt"> 623&#10;</span><span class="lnt"> 624&#10;</span><span class="lnt"> 625&#10;</span><span class="lnt"> 626&#10;</span><span class="lnt"> 627&#10;</span><span class="lnt"> 628&#10;</span><span class="lnt"> 629&#10;</span><span class="lnt"> 630&#10;</span><span class="lnt"> 631&#10;</span><span class="lnt"> 632&#10;</span><span class="lnt"> 633&#10;</span><span class="lnt"> 634&#10;</span><span class="lnt"> 635&#10;</span><span class="lnt"> 636&#10;</span><span class="lnt"> 637&#10;</span><span class="lnt"> 638&#10;</span><span class="lnt"> 639&#10;</span><span class="lnt"> 640&#10;</span><span class="lnt"> 641&#10;</span><span class="lnt"> 642&#10;</span><span class="lnt"> 643&#10;</span><span class="lnt"> 644&#10;</span><span class="lnt"> 645&#10;</span><span class="lnt"> 646&#10;</span><span class="lnt"> 647&#10;</span><span class="lnt"> 648&#10;</span><span class="lnt"> 649&#10;</span><span class="lnt"> 650&#10;</span><span class="lnt"> 651&#10;</span><span class="lnt"> 652&#10;</span><span class="lnt"> 653&#10;</span><span class="lnt"> 654&#10;</span><span class="lnt"> 655&#10;</span><span class="lnt"> 656&#10;</span><span class="lnt"> 657&#10;</span><span class="lnt"> 658&#10;</span><span class="lnt"> 659&#10;</span><span class="lnt"> 660&#10;</span><span class="lnt"> 661&#10;</span><span class="lnt"> 662&#10;</span><span class="lnt"> 663&#10;</span><span class="lnt"> 664&#10;</span><span class="lnt"> 665&#10;</span><span class="lnt"> 666&#10;</span><span class="lnt"> 667&#10;</span><span class="lnt"> 668&#10;</span><span class="lnt"> 669&#10;</span><span class="lnt"> 670&#10;</span><span class="lnt"> 671&#10;</span><span class="lnt"> 672&#10;</span><span class="lnt"> 673&#10;</span><span class="lnt"> 674&#10;</span><span class="lnt"> 675&#10;</span><span class="lnt"> 676&#10;</span><span class="lnt"> 677&#10;</span><span class="lnt"> 678&#10;</span><span class="lnt"> 679&#10;</span><span class="lnt"> 680&#10;</span><span class="lnt"> 681&#10;</span><span class="lnt"> 682&#10;</span><span class="lnt"> 683&#10;</span><span class="lnt"> 684&#10;</span><span class="lnt"> 685&#10;</span><span class="lnt"> 686&#10;</span><span class="lnt"> 687&#10;</span><span class="lnt"> 688&#10;</span><span class="lnt"> 689&#10;</span><span class="lnt"> 690&#10;</span><span class="lnt"> 691&#10;</span><span class="lnt"> 692&#10;</span><span class="lnt"> 693&#10;</span><span class="lnt"> 694&#10;</span><span class="lnt"> 695&#10;</span><span class="lnt"> 696&#10;</span><span class="lnt"> 697&#10;</span><span class="lnt"> 698&#10;</span><span class="lnt"> 699&#10;</span><span class="lnt"> 700&#10;</span><span class="lnt"> 701&#10;</span><span class="lnt"> 702&#10;</span><span class="lnt"> 703&#10;</span><span class="lnt"> 704&#10;</span><span class="lnt"> 705&#10;</span><span class="lnt"> 706&#10;</span><span class="lnt"> 707&#10;</span><span class="lnt"> 708&#10;</span><span class="lnt"> 709&#10;</span><span class="lnt"> 710&#10;</span><span class="lnt"> 711&#10;</span><span class="lnt"> 712&#10;</span><span class="lnt"> 713&#10;</span><span class="lnt"> 714&#10;</span><span class="lnt"> 715&#10;</span><span class="lnt"> 716&#10;</span><span class="lnt"> 717&#10;</span><span class="lnt"> 718&#10;</span><span class="lnt"> 719&#10;</span><span class="lnt"> 720&#10;</span><span class="lnt"> 721&#10;</span><span class="lnt"> 722&#10;</span><span class="lnt"> 723&#10;</span><span class="lnt"> 724&#10;</span><span class="lnt"> 725&#10;</span><span class="lnt"> 726&#10;</span><span class="lnt"> 727&#10;</span><span class="lnt"> 728&#10;</span><span class="lnt"> 729&#10;</span><span class="lnt"> 730&#10;</span><span class="lnt"> 731&#10;</span><span class="lnt"> 732&#10;</span><span class="lnt"> 733&#10;</span><span class="lnt"> 734&#10;</span><span class="lnt"> 735&#10;</span><span class="lnt"> 736&#10;</span><span class="lnt"> 737&#10;</span><span class="lnt"> 738&#10;</span><span class="lnt"> 739&#10;</span><span class="lnt"> 740&#10;</span><span class="lnt"> 741&#10;</span><span class="lnt"> 742&#10;</span><span class="lnt"> 743&#10;</span><span class="lnt"> 744&#10;</span><span class="lnt"> 745&#10;</span><span class="lnt"> 746&#10;</span><span class="lnt"> 747&#10;</span><span class="lnt"> 748&#10;</span><span class="lnt"> 749&#10;</span><span class="lnt"> 750&#10;</span><span class="lnt"> 751&#10;</span><span class="lnt"> 752&#10;</span><span class="lnt"> 753&#10;</span><span class="lnt"> 754&#10;</span><span class="lnt"> 755&#10;</span><span class="lnt"> 756&#10;</span><span class="lnt"> 757&#10;</span><span class="lnt"> 758&#10;</span><span class="lnt"> 759&#10;</span><span class="lnt"> 760&#10;</span><span class="lnt"> 761&#10;</span><span class="lnt"> 762&#10;</span><span class="lnt"> 763&#10;</span><span class="lnt"> 764&#10;</span><span class="lnt"> 765&#10;</span><span class="lnt"> 766&#10;</span><span class="lnt"> 767&#10;</span><span class="lnt"> 768&#10;</span><span class="lnt"> 769&#10;</span><span class="lnt"> 770&#10;</span><span class="lnt"> 771&#10;</span><span class="lnt"> 772&#10;</span><span class="lnt"> 773&#10;</span><span class="lnt"> 774&#10;</span><span class="lnt"> 775&#10;</span><span class="lnt"> 776&#10;</span><span class="lnt"> 777&#10;</span><span class="lnt"> 778&#10;</span><span class="lnt"> 779&#10;</span><span class="lnt"> 780&#10;</span><span class="lnt"> 781&#10;</span><span class="lnt"> 782&#10;</span><span class="lnt"> 783&#10;</span><span class="lnt"> 784&#10;</span><span class="lnt"> 785&#10;</span><span class="lnt"> 786&#10;</span><span class="lnt"> 787&#10;</span><span class="lnt"> 788&#10;</span><span class="lnt"> 789&#10;</span><span class="lnt"> 790&#10;</span><span class="lnt"> 791&#10;</span><span class="lnt"> 792&#10;</span><span class="lnt"> 793&#10;</span><span class="lnt"> 794&#10;</span><span class="lnt"> 795&#10;</span><span class="lnt"> 796&#10;</span><span class="lnt"> 797&#10;</span><span class="lnt"> 798&#10;</span><span class="lnt"> 799&#10;</span><span class="lnt"> 800&#10;</span><span class="lnt"> 801&#10;</span><span class="lnt"> 802&#10;</span><span class="lnt"> 803&#10;</span><span class="lnt"> 804&#10;</span><span class="lnt"> 805&#10;</span><span class="lnt"> 806&#10;</span><span class="lnt"> 807&#10;</span><span class="lnt"> 808&#10;</span><span class="lnt"> 809&#10;</span><span class="lnt"> 810&#10;</span><span class="lnt"> 811&#10;</span><span class="lnt"> 812&#10;</span><span class="lnt"> 813&#10;</span><span class="lnt"> 814&#10;</span><span class="lnt"> 815&#10;</span><span class="lnt"> 816&#10;</span><span class="lnt"> 817&#10;</span><span class="lnt"> 818&#10;</span><span class="lnt"> 819&#10;</span><span class="lnt"> 820&#10;</span><span class="lnt"> 821&#10;</span><span class="lnt"> 822&#10;</span><span class="lnt"> 823&#10;</span><span class="lnt"> 824&#10;</span><span class="lnt"> 825&#10;</span><span class="lnt"> 826&#10;</span><span class="lnt"> 827&#10;</span><span class="lnt"> 828&#10;</span><span class="lnt"> 829&#10;</span><span class="lnt"> 830&#10;</span><span class="lnt"> 831&#10;</span><span class="lnt"> 832&#10;</span><span class="lnt"> 833&#10;</span><span class="lnt"> 834&#10;</span><span class="lnt"> 835&#10;</span><span class="lnt"> 836&#10;</span><span class="lnt"> 837&#10;</span><span class="lnt"> 838&#10;</span><span class="lnt"> 839&#10;</span><span class="lnt"> 840&#10;</span><span class="lnt"> 841&#10;</span><span class="lnt"> 842&#10;</span><span class="lnt"> 843&#10;</span><span class="lnt"> 844&#10;</span><span class="lnt"> 845&#10;</span><span class="lnt"> 846&#10;</span><span class="lnt"> 847&#10;</span><span class="lnt"> 848&#10;</span><span class="lnt"> 849&#10;</span><span class="lnt"> 850&#10;</span><span class="lnt"> 851&#10;</span><span class="lnt"> 852&#10;</span><span class="lnt"> 853&#10;</span><span class="lnt"> 854&#10;</span><span class="lnt"> 855&#10;</span><span class="lnt"> 856&#10;</span><span class="lnt"> 857&#10;</span><span class="lnt"> 858&#10;</span><span class="lnt"> 859&#10;</span><span class="lnt"> 860&#10;</span><span class="lnt"> 861&#10;</span><span class="lnt"> 862&#10;</span><span class="lnt"> 863&#10;</span><span class="lnt"> 864&#10;</span><span class="lnt"> 865&#10;</span><span class="lnt"> 866&#10;</span><span class="lnt"> 867&#10;</span><span class="lnt"> 868&#10;</span><span class="lnt"> 869&#10;</span><span class="lnt"> 870&#10;</span><span class="lnt"> 871&#10;</span><span class="lnt"> 872&#10;</span><span class="lnt"> 873&#10;</span><span class="lnt"> 874&#10;</span><span class="lnt"> 875&#10;</span><span class="lnt"> 876&#10;</span><span class="lnt"> 877&#10;</span><span class="lnt"> 878&#10;</span><span class="lnt"> 879&#10;</span><span class="lnt"> 880&#10;</span><span class="lnt"> 881&#10;</span><span class="lnt"> 882&#10;</span><span class="lnt"> 883&#10;</span><span class="lnt"> 884&#10;</span><span class="lnt"> 885&#10;</span><span class="lnt"> 886&#10;</span><span class="lnt"> 887&#10;</span><span class="lnt"> 888&#10;</span><span class="lnt"> 889&#10;</span><span class="lnt"> 890&#10;</span><span class="lnt"> 891&#10;</span><span class="lnt"> 892&#10;</span><span class="lnt"> 893&#10;</span><span class="lnt"> 894&#10;</span><span class="lnt"> 895&#10;</span><span class="lnt"> 896&#10;</span><span class="lnt"> 897&#10;</span><span class="lnt"> 898&#10;</span><span class="lnt"> 899&#10;</span><span class="lnt"> 900&#10;</span><span class="lnt"> 901&#10;</span><span class="lnt"> 902&#10;</span><span class="lnt"> 903&#10;</span><span class="lnt"> 904&#10;</span><span class="lnt"> 905&#10;</span><span class="lnt"> 906&#10;</span><span class="lnt"> 907&#10;</span><span class="lnt"> 908&#10;</span><span class="lnt"> 909&#10;</span><span class="lnt"> 910&#10;</span><span class="lnt"> 911&#10;</span><span class="lnt"> 912&#10;</span><span class="lnt"> 913&#10;</span><span class="lnt"> 914&#10;</span><span class="lnt"> 915&#10;</span><span class="lnt"> 916&#10;</span><span class="lnt"> 917&#10;</span><span class="lnt"> 918&#10;</span><span class="lnt"> 919&#10;</span><span class="lnt"> 920&#10;</span><span class="lnt"> 921&#10;</span><span class="lnt"> 922&#10;</span><span class="lnt"> 923&#10;</span><span class="lnt"> 924&#10;</span><span class="lnt"> 925&#10;</span><span class="lnt"> 926&#10;</span><span class="lnt"> 927&#10;</span><span class="lnt"> 928&#10;</span><span class="lnt"> 929&#10;</span><span class="lnt"> 930&#10;</span><span class="lnt"> 931&#10;</span><span class="lnt"> 932&#10;</span><span class="lnt"> 933&#10;</span><span class="lnt"> 934&#10;</span><span class="lnt"> 935&#10;</span><span class="lnt"> 936&#10;</span><span class="lnt"> 937&#10;</span><span class="lnt"> 938&#10;</span><span class="lnt"> 939&#10;</span><span class="lnt"> 940&#10;</span><span class="lnt"> 941&#10;</span><span class="lnt"> 942&#10;</span><span class="lnt"> 943&#10;</span><span class="lnt"> 944&#10;</span><span class="lnt"> 945&#10;</span><span class="lnt"> 946&#10;</span><span class="lnt"> 947&#10;</span><span class="lnt"> 948&#10;</span><span class="lnt"> 949&#10;</span><span class="lnt"> 950&#10;</span><span class="lnt"> 951&#10;</span><span class="lnt"> 952&#10;</span><span class="lnt"> 953&#10;</span><span class="lnt"> 954&#10;</span><span class="lnt"> 955&#10;</span><span class="lnt"> 956&#10;</span><span class="lnt"> 957&#10;</span><span class="lnt"> 958&#10;</span><span class="lnt"> 959&#10;</span><span class="lnt"> 960&#10;</span><span class="lnt"> 961&#10;</span><span class="lnt"> 962&#10;</span><span class="lnt"> 963&#10;</span><span class="lnt"> 964&#10;</span><span class="lnt"> 965&#10;</span><span class="lnt"> 966&#10;</span><span class="lnt"> 967&#10;</span><span class="lnt"> 968&#10;</span><span class="lnt"> 969&#10;</span><span class="lnt"> 970&#10;</span><span class="lnt"> 971&#10;</span><span class="lnt"> 972&#10;</span><span class="lnt"> 973&#10;</span><span class="lnt"> 974&#10;</span><span class="lnt"> 975&#10;</span><span class="lnt"> 976&#10;</span><span class="lnt"> 977&#10;</span><span class="lnt"> 978&#10;</span><span class="lnt"> 979&#10;</span><span class="lnt"> 980&#10;</span><span class="lnt"> 981&#10;</span><span class="lnt"> 982&#10;</span><span class="lnt"> 983&#10;</span><span class="lnt"> 984&#10;</span><span class="lnt"> 985&#10;</span><span class="lnt"> 986&#10;</span><span class="lnt"> 987&#10;</span><span class="lnt"> 988&#10;</span><span class="lnt"> 989&#10;</span><span class="lnt"> 990&#10;</span><span class="lnt"> 991&#10;</span><span class="lnt"> 992&#10;</span><span class="lnt"> 993&#10;</span><span class="lnt"> 994&#10;</span><span class="lnt"> 995&#10;</span><span class="lnt"> 996&#10;</span><span class="lnt"> 997&#10;</span><span class="lnt"> 998&#10;</span><span class="lnt"> 999&#10;</span><span class="lnt">1000&#10;</span><span class="lnt">1001&#10;</span><span class="lnt">1002&#10;</span><span class="lnt">1003&#10;</span><span class="lnt">1004&#10;</span><span class="lnt">1005&#10;</span><span class="lnt">1006&#10;</span><span class="lnt">1007&#10;</span><span class="lnt">1008&#10;</span><span class="lnt">1009&#10;</span><span class="lnt">1010&#10;</span><span class="lnt">1011&#10;</span><span class="lnt">1012&#10;</span><span class="lnt">1013&#10;</span><span class="lnt">1014&#10;</span><span class="lnt">1015&#10;</span><span class="lnt">1016&#10;</span><span class="lnt">1017&#10;</span><span class="lnt">1018&#10;</span><span class="lnt">1019&#10;</span><span class="lnt">1020&#10;</span><span class="lnt">1021&#10;</span><span class="lnt">1022&#10;</span><span class="lnt">1023&#10;</span><span class="lnt">1024&#10;</span><span class="lnt">1025&#10;</span><span class="lnt">1026&#10;</span><span class="lnt">1027&#10;</span><span class="lnt">1028&#10;</span><span class="lnt">1029&#10;</span><span class="lnt">1030&#10;</span><span class="lnt">1031&#10;</span><span class="lnt">1032&#10;</span><span class="lnt">1033&#10;</span><span class="lnt">1034&#10;</span><span class="lnt">1035&#10;</span><span class="lnt">1036&#10;</span><span class="lnt">1037&#10;</span><span class="lnt">1038&#10;</span><span class="lnt">1039&#10;</span><span class="lnt">1040&#10;</span><span class="lnt">1041&#10;</span><span class="lnt">1042&#10;</span><span class="lnt">1043&#10;</span><span class="lnt">1044&#10;</span><span class="lnt">1045&#10;</span><span class="lnt">1046&#10;</span><span class="lnt">1047&#10;</span><span class="lnt">1048&#10;</span><span class="lnt">1049&#10;</span><span class="lnt">1050&#10;</span><span class="lnt">1051&#10;</span><span class="lnt">1052&#10;</span><span class="lnt">1053&#10;</span><span class="lnt">1054&#10;</span><span class="lnt">1055&#10;</span><span class="lnt">1056&#10;</span><span class="lnt">1057&#10;</span><span class="lnt">1058&#10;</span><span class="lnt">1059&#10;</span><span class="lnt">1060&#10;</span><span class="lnt">1061&#10;</span><span class="lnt">1062&#10;</span><span class="lnt">1063&#10;</span><span class="lnt">1064&#10;</span><span class="lnt">1065&#10;</span><span class="lnt">1066&#10;</span><span class="lnt">1067&#10;</span><span class="lnt">1068&#10;</span><span class="lnt">1069&#10;</span><span class="lnt">1070&#10;</span><span class="lnt">1071&#10;</span><span class="lnt">1072&#10;</span><span class="lnt">1073&#10;</span><span class="lnt">1074&#10;</span><span class="lnt">1075&#10;</span><span class="lnt">1076&#10;</span><span class="lnt">1077&#10;</span><span class="lnt">1078&#10;</span><span class="lnt">1079&#10;</span><span class="lnt">1080&#10;</span><span class="lnt">1081&#10;</span><span class="lnt">1082&#10;</span><span class="lnt">1083&#10;</span><span class="lnt">1084&#10;</span><span class="lnt">1085&#10;</span><span class="lnt">1086&#10;</span><span class="lnt">1087&#10;</span><span class="lnt">1088&#10;</span><span class="lnt">1089&#10;</span><span class="lnt">1090&#10;</span><span class="lnt">1091&#10;</span><span class="lnt">1092&#10;</span><span class="lnt">1093&#10;</span><span class="lnt">1094&#10;</span><span class="lnt">1095&#10;</span><span class="lnt">1096&#10;</span><span class="lnt">1097&#10;</span><span class="lnt">1098&#10;</span><span class="lnt">1099&#10;</span><span class="lnt">1100&#10;</span><span class="lnt">1101&#10;</span><span class="lnt">1102&#10;</span><span class="lnt">1103&#10;</span><span class="lnt">1104&#10;</span><span class="lnt">1105&#10;</span><span class="lnt">1106&#10;</span><span class="lnt">1107&#10;</span><span class="lnt">1108&#10;</span><span class="lnt">1109&#10;</span><span class="lnt">1110&#10;</span><span class="lnt">1111&#10;</span><span class="lnt">1112&#10;</span><span class="lnt">1113&#10;</span><span class="lnt">1114&#10;</span><span class="lnt">1115&#10;</span><span class="lnt">1116&#10;</span><span class="lnt">1117&#10;</span><span class="lnt">1118&#10;</span><span class="lnt">1119&#10;</span><span class="lnt">1120&#10;</span><span class="lnt">1121&#10;</span><span class="lnt">1122&#10;</span><span class="lnt">1123&#10;</span><span class="lnt">1124&#10;</span><span class="lnt">1125&#10;</span><span class="lnt">1126&#10;</span><span class="lnt">1127&#10;</span><span class="lnt">1128&#10;</span><span class="lnt">1129&#10;</span><span class="lnt">1130&#10;</span><span class="lnt">1131&#10;</span><span class="lnt">1132&#10;</span><span class="lnt">1133&#10;</span><span class="lnt">1134&#10;</span><span class="lnt">1135&#10;</span><span class="lnt">1136&#10;</span><span class="lnt">1137&#10;</span><span class="lnt">1138&#10;</span><span class="lnt">1139&#10;</span><span class="lnt">1140&#10;</span><span class="lnt">1141&#10;</span><span class="lnt">1142&#10;</span><span class="lnt">1143&#10;</span><span class="lnt">1144&#10;</span><span class="lnt">1145&#10;</span><span class="lnt">1146&#10;</span><span class="lnt">1147&#10;</span><span class="lnt">1148&#10;</span><span class="lnt">1149&#10;</span><span class="lnt">1150&#10;</span><span class="lnt">1151&#10;</span><span class="lnt">1152&#10;</span><span class="lnt">1153&#10;</span><span class="lnt">1154&#10;</span><span class="lnt">1155&#10;</span><span class="lnt">1156&#10;</span><span class="lnt">1157&#10;</span><span class="lnt">1158&#10;</span><span class="lnt">1159&#10;</span><span class="lnt">1160&#10;</span><span class="lnt">1161&#10;</span><span class="lnt">1162&#10;</span><span class="lnt">1163&#10;</span><span class="lnt">1164&#10;</span><span class="lnt">1165&#10;</span><span class="lnt">1166&#10;</span><span class="lnt">1167&#10;</span><span class="lnt">1168&#10;</span><span class="lnt">1169&#10;</span><span class="lnt">1170&#10;</span><span class="lnt">1171&#10;</span><span class="lnt">1172&#10;</span><span class="lnt">1173&#10;</span><span class="lnt">1174&#10;</span><span class="lnt">1175&#10;</span><span class="lnt">1176&#10;</span><span class="lnt">1177&#10;</span><span class="lnt">1178&#10;</span><span class="lnt">1179&#10;</span><span class="lnt">1180&#10;</span><span class="lnt">1181&#10;</span><span class="lnt">1182&#10;</span><span class="lnt">1183&#10;</span><span class="lnt">1184&#10;</span><span class="lnt">1185&#10;</span><span class="lnt">1186&#10;</span><span class="lnt">1187&#10;</span><span class="lnt">1188&#10;</span><span class="lnt">1189&#10;</span><span class="lnt">1190&#10;</span><span class="lnt">1191&#10;</span><span class="lnt">1192&#10;</span><span class="lnt">1193&#10;</span><span class="lnt">1194&#10;</span><span class="lnt">1195&#10;</span><span class="lnt">1196&#10;</span><span class="lnt">1197&#10;</span><span class="lnt">1198&#10;</span><span class="lnt">1199&#10;</span><span class="lnt">1200&#10;</span><span class="lnt">1201&#10;</span><span class="lnt">1202&#10;</span><span class="lnt">1203&#10;</span><span class="lnt">1204&#10;</span><span class="lnt">1205&#10;</span><span class="lnt">1206&#10;</span><span class="lnt">1207&#10;</span><span class="lnt">1208&#10;</span><span class="lnt">1209&#10;</span><span class="lnt">1210&#10;</span><span class="lnt">1211&#10;</span><span class="lnt">1212&#10;</span><span class="lnt">1213&#10;</span><span class="lnt">1214&#10;</span><span class="lnt">1215&#10;</span><span class="lnt">1216&#10;</span><span class="lnt">1217&#10;</span><span class="lnt">1218&#10;</span><span class="lnt">1219&#10;</span><span class="lnt">1220&#10;</span><span class="lnt">1221&#10;</span><span class="lnt">1222&#10;</span><span class="lnt">1223&#10;</span><span class="lnt">1224&#10;</span><span class="lnt">1225&#10;</span><span class="lnt">1226&#10;</span><span class="lnt">1227&#10;</span><span class="lnt">1228&#10;</span><span class="lnt">1229&#10;</span><span class="lnt">1230&#10;</span><span class="lnt">1231&#10;</span><span class="lnt">1232&#10;</span><span class="lnt">1233&#10;</span><span class="lnt">1234&#10;</span><span class="lnt">1235&#10;</span><span class="lnt">1236&#10;</span><span class="lnt">1237&#10;</span><span class="lnt">1238&#10;</span><span class="lnt">1239&#10;</span><span class="lnt">1240&#10;</span><span class="lnt">1241&#10;</span><span class="lnt">1242&#10;</span><span class="lnt">1243&#10;</span><span class="lnt">1244&#10;</span><span class="lnt">1245&#10;</span><span class="lnt">1246&#10;</span><span class="lnt">1247&#10;</span><span class="lnt">1248&#10;</span><span class="lnt">1249&#10;</span><span class="lnt">1250&#10;</span><span class="lnt">1251&#10;</span><span class="lnt">1252&#10;</span><span class="lnt">1253&#10;</span><span class="lnt">1254&#10;</span><span class="lnt">1255&#10;</span><span class="lnt">1256&#10;</span><span class="lnt">1257&#10;</span><span class="lnt">1258&#10;</span><span class="lnt">1259&#10;</span><span class="lnt">1260&#10;</span><span class="lnt">1261&#10;</span><span class="lnt">1262&#10;</span><span class="lnt">1263&#10;</span><span class="lnt">1264&#10;</span><span class="lnt">1265&#10;</span><span class="lnt">1266&#10;</span><span class="lnt">1267&#10;</span><span class="lnt">1268&#10;</span><span class="lnt">1269&#10;</span><span class="lnt">1270&#10;</span><span class="lnt">1271&#10;</span><span class="lnt">1272&#10;</span><span class="lnt">1273&#10;</span><span class="lnt">1274&#10;</span><span class="lnt">1275&#10;</span><span class="lnt">1276&#10;</span><span class="lnt">1277&#10;</span><span class="lnt">1278&#10;</span><span class="lnt">1279&#10;</span><span class="lnt">1280&#10;</span><span class="lnt">1281&#10;</span><span class="lnt">1282&#10;</span><span class="lnt">1283&#10;</span><span class="lnt">1284&#10;</span><span class="lnt">1285&#10;</span><span class="lnt">1286&#10;</span><span class="lnt">1287&#10;</span><span class="lnt">1288&#10;</span><span class="lnt">1289&#10;</span><span class="lnt">1290&#10;</span><span class="lnt">1291&#10;</span><span class="lnt">1292&#10;</span><span class="lnt">1293&#10;</span><span class="lnt">1294&#10;</span><span class="lnt">1295&#10;</span><span class="lnt">1296&#10;</span><span class="lnt">1297&#10;</span><span class="lnt">1298&#10;</span><span class="lnt">1299&#10;</span><span class="lnt">1300&#10;</span><span class="lnt">1301&#10;</span><span class="lnt">1302&#10;</span><span class="lnt">1303&#10;</span><span class="lnt">1304&#10;</span><span class="lnt">1305&#10;</span><span class="lnt">1306&#10;</span><span class="lnt">1307&#10;</span><span class="lnt">1308&#10;</span><span class="lnt">1309&#10;</span><span class="lnt">1310&#10;</span><span class="lnt">1311&#10;</span><span class="lnt">1312&#10;</span><span class="lnt">1313&#10;</span><span class="lnt">1314&#10;</span><span class="lnt">1315&#10;</span><span class="lnt">1316&#10;</span><span class="lnt">1317&#10;</span><span class="lnt">1318&#10;</span><span class="lnt">1319&#10;</span><span class="lnt">1320&#10;</span><span class="lnt">1321&#10;</span><span class="lnt">1322&#10;</span><span class="lnt">1323&#10;</span><span class="lnt">1324&#10;</span><span class="lnt">1325&#10;</span><span class="lnt">1326&#10;</span><span class="lnt">1327&#10;</span><span class="lnt">1328&#10;</span><span class="lnt">1329&#10;</span><span class="lnt">1330&#10;</span><span class="lnt">1331&#10;</span><span class="lnt">1332&#10;</span><span class="lnt">1333&#10;</span><span class="lnt">1334&#10;</span><span class="lnt">1335&#10;</span><span class="lnt">1336&#10;</span><span class="lnt">1337&#10;</span><span class="lnt">1338&#10;</span><span class="lnt">1339&#10;</span><span class="lnt">1340&#10;</span><span class="lnt">1341&#10;</span><span class="lnt">1342&#10;</span><span class="lnt">1343&#10;</span><span class="lnt">1344&#10;</span><span class="lnt">1345&#10;</span><span class="lnt">1346&#10;</span><span class="lnt">1347&#10;</span><span class="lnt">1348&#10;</span><span class="lnt">1349&#10;</span><span class="lnt">1350&#10;</span><span class="lnt">1351&#10;</span><span class="lnt">1352&#10;</span><span class="lnt">1353&#10;</span><span class="lnt">1354&#10;</span><span class="lnt">1355&#10;</span><span class="lnt">1356&#10;</span><span class="lnt">1357&#10;</span><span class="lnt">1358&#10;</span><span class="lnt">1359&#10;</span><span class="lnt">1360&#10;</span><span class="lnt">1361&#10;</span><span class="lnt">1362&#10;</span><span class="lnt">1363&#10;</span><span class="lnt">1364&#10;</span><span class="lnt">1365&#10;</span><span class="lnt">1366&#10;</span><span class="lnt">1367&#10;</span><span class="lnt">1368&#10;</span><span class="lnt">1369&#10;</span><span class="lnt">1370&#10;</span><span class="lnt">1371&#10;</span><span class="lnt">1372&#10;</span><span class="lnt">1373&#10;</span><span class="lnt">1374&#10;</span><span class="lnt">1375&#10;</span><span class="lnt">1376&#10;</span><span class="lnt">1377&#10;</span><span class="lnt">1378&#10;</span><span class="lnt">1379&#10;</span><span class="lnt">1380&#10;</span><span class="lnt">1381&#10;</span><span class="lnt">1382&#10;</span><span class="lnt">1383&#10;</span><span class="lnt">1384&#10;</span><span class="lnt">1385&#10;</span><span class="lnt">1386&#10;</span><span class="lnt">1387&#10;</span><span class="lnt">1388&#10;</span><span class="lnt">1389&#10;</span><span class="lnt">1390&#10;</span><span class="lnt">1391&#10;</span><span class="lnt">1392&#10;</span><span class="lnt">1393&#10;</span><span class="lnt">1394&#10;</span><span class="lnt">1395&#10;</span><span class="lnt">1396&#10;</span><span class="lnt">1397&#10;</span><span class="lnt">1398&#10;</span><span class="lnt">1399&#10;</span><span class="lnt">1400&#10;</span><span class="lnt">1401&#10;</span><span class="lnt">1402&#10;</span><span class="lnt">1403&#10;</span><span class="lnt">1404&#10;</span><span class="lnt">1405&#10;</span><span class="lnt">1406&#10;</span><span class="lnt">1407&#10;</span><span class="lnt">1408&#10;</span><span class="lnt">1409&#10;</span><span class="lnt">1410&#10;</span><span class="lnt">1411&#10;</span><span class="lnt">1412&#10;</span><span class="lnt">1413&#10;</span><span class="lnt">1414&#10;</span><span class="lnt">1415&#10;</span><span class="lnt">1416&#10;</span><span class="lnt">1417&#10;</span><span class="lnt">1418&#10;</span><span class="lnt">1419&#10;</span><span class="lnt">1420&#10;</span><span class="lnt">1421&#10;</span><span class="lnt">1422&#10;</span><span class="lnt">1423&#10;</span><span class="lnt">1424&#10;</span><span class="lnt">1425&#10;</span><span class="lnt">1426&#10;</span><span class="lnt">1427&#10;</span><span class="lnt">1428&#10;</span><span class="lnt">1429&#10;</span><span class="lnt">1430&#10;</span><span class="lnt">1431&#10;</span><span class="lnt">1432&#10;</span><span class="lnt">1433&#10;</span><span class="lnt">1434&#10;</span><span class="lnt">1435&#10;</span><span class="lnt">1436&#10;</span><span class="lnt">1437&#10;</span><span class="lnt">1438&#10;</span><span class="lnt">1439&#10;</span><span class="lnt">1440&#10;</span><span class="lnt">1441&#10;</span><span class="lnt">1442&#10;</span><span class="lnt">1443&#10;</span><span class="lnt">1444&#10;</span><span class="lnt">1445&#10;</span><span class="lnt">1446&#10;</span><span class="lnt">1447&#10;</span><span class="lnt">1448&#10;</span><span class="lnt">1449&#10;</span><span class="lnt">1450&#10;</span><span class="lnt">1451&#10;</span><span class="lnt">1452&#10;</span><span class="lnt">1453&#10;</span><span class="lnt">1454&#10;</span><span class="lnt">1455&#10;</span><span class="lnt">1456&#10;</span><span class="lnt">1457&#10;</span><span class="lnt">1458&#10;</span><span class="lnt">1459&#10;</span><span class="lnt">1460&#10;</span><span class="lnt">1461&#10;</span><span class="lnt">1462&#10;</span><span class="lnt">1463&#10;</span><span class="lnt">1464&#10;</span><span class="lnt">1465&#10;</span><span class="lnt">1466&#10;</span><span class="lnt">1467&#10;</span><span class="lnt">1468&#10;</span><span class="lnt">1469&#10;</span><span class="lnt">1470&#10;</span><span class="lnt">1471&#10;</span><span class="lnt">1472&#10;</span><span class="lnt">1473&#10;</span><span class="lnt">1474&#10;</span><span class="lnt">1475&#10;</span><span class="lnt">1476&#10;</span><span class="lnt">1477&#10;</span><span class="lnt">1478&#10;</span><span class="lnt">1479&#10;</span><span class="lnt">1480&#10;</span><span class="lnt">1481&#10;</span><span class="lnt">1482&#10;</span><span class="lnt">1483&#10;</span><span class="lnt">1484&#10;</span><span class="lnt">1485&#10;</span><span class="lnt">1486&#10;</span><span class="lnt">1487&#10;</span><span class="lnt">1488&#10;</span><span class="lnt">1489&#10;</span><span class="lnt">1490&#10;</span><span class="lnt">1491&#10;</span><span class="lnt">1492&#10;</span><span class="lnt">1493&#10;</span><span class="lnt">1494&#10;</span><span class="lnt">1495&#10;</span><span class="lnt">1496&#10;</span><span class="lnt">1497&#10;</span><span class="lnt">1498&#10;</span><span class="lnt">1499&#10;</span><span class="lnt">1500&#10;</span><span class="lnt">1501&#10;</span><span class="lnt">1502&#10;</span><span class="lnt">1503&#10;</span><span class="lnt">1504&#10;</span><span class="lnt">1505&#10;</span><span class="lnt">1506&#10;</span><span class="lnt">1507&#10;</span><span class="lnt">1508&#10;</span><span class="lnt">1509&#10;</span><span class="lnt">1510&#10;</span><span class="lnt">1511&#10;</span><span class="lnt">1512&#10;</span><span class="lnt">1513&#10;</span><span class="lnt">1514&#10;</span><span class="lnt">1515&#10;</span><span class="lnt">1516&#10;</span><span class="lnt">1517&#10;</span><span class="lnt">1518&#10;</span><span class="lnt">1519&#10;</span><span class="lnt">1520&#10;</span><span class="lnt">1521&#10;</span><span class="lnt">1522&#10;</span><span class="lnt">1523&#10;</span><span class="lnt">1524&#10;</span><span class="lnt">1525&#10;</span><span class="lnt">1526&#10;</span><span class="lnt">1527&#10;</span><span class="lnt">1528&#10;</span><span class="lnt">1529&#10;</span><span class="lnt">1530&#10;</span><span class="lnt">1531&#10;</span><span class="lnt">1532&#10;</span><span class="lnt">1533&#10;</span><span class="lnt">1534&#10;</span><span class="lnt">1535&#10;</span><span class="lnt">1536&#10;</span><span class="lnt">1537&#10;</span><span class="lnt">1538&#10;</span><span class="lnt">1539&#10;</span><span class="lnt">1540&#10;</span><span class="lnt">1541&#10;</span><span class="lnt">1542&#10;</span><span class="lnt">1543&#10;</span><span class="lnt">1544&#10;</span><span class="lnt">1545&#10;</span><span class="lnt">1546&#10;</span><span class="lnt">1547&#10;</span><span class="lnt">1548&#10;</span><span class="lnt">1549&#10;</span><span class="lnt">1550&#10;</span><span class="lnt">1551&#10;</span><span class="lnt">1552&#10;</span><span class="lnt">1553&#10;</span><span class="lnt">1554&#10;</span><span class="lnt">1555&#10;</span><span class="lnt">1556&#10;</span><span class="lnt">1557&#10;</span><span class="lnt">1558&#10;</span><span class="lnt">1559&#10;</span><span class="lnt">1560&#10;</span><span class="lnt">1561&#10;</span><span class="lnt">1562&#10;</span><span class="lnt">1563&#10;</span><span class="lnt">1564&#10;</span><span class="lnt">1565&#10;</span><span class="lnt">1566&#10;</span><span class="lnt">1567&#10;</span><span class="lnt">1568&#10;</span><span class="lnt">1569&#10;</span><span class="lnt">1570&#10;</span><span class="lnt">1571&#10;</span><span class="lnt">1572&#10;</span><span class="lnt">1573&#10;</span><span class="lnt">1574&#10;</span><span class="lnt">1575&#10;</span><span class="lnt">1576&#10;</span><span class="lnt">1577&#10;</span><span class="lnt">1578&#10;</span><span class="lnt">1579&#10;</span><span class="lnt">1580&#10;</span><span class="lnt">1581&#10;</span><span class="lnt">1582&#10;</span><span class="lnt">1583&#10;</span><span class="lnt">1584&#10;</span><span class="lnt">1585&#10;</span><span class="lnt">1586&#10;</span><span class="lnt">1587&#10;</span><span class="lnt">1588&#10;</span><span class="lnt">1589&#10;</span><span class="lnt">1590&#10;</span><span class="lnt">1591&#10;</span><span class="lnt">1592&#10;</span><span class="lnt">1593&#10;</span><span class="lnt">1594&#10;</span><span class="lnt">1595&#10;</span><span class="lnt">1596&#10;</span><span class="lnt">1597&#10;</span><span class="lnt">1598&#10;</span><span class="lnt">1599&#10;</span><span class="lnt">1600&#10;</span><span class="lnt">1601&#10;</span><span class="lnt">1602&#10;</span><span class="lnt">1603&#10;</span><span class="lnt">1604&#10;</span><span class="lnt">1605&#10;</span><span class="lnt">1606&#10;</span><span class="lnt">1607&#10;</span><span class="lnt">1608&#10;</span><span class="lnt">1609&#10;</span><span class="lnt">1610&#10;</span><span class="lnt">1611&#10;</span><span class="lnt">1612&#10;</span><span class="lnt">1613&#10;</span><span class="lnt">1614&#10;</span><span class="lnt">1615&#10;</span><span class="lnt">1616&#10;</span><span class="lnt">1617&#10;</span><span class="lnt">1618&#10;</span><span class="lnt">1619&#10;</span><span class="lnt">1620&#10;</span><span class="lnt">1621&#10;</span><span class="lnt">1622&#10;</span><span class="lnt">1623&#10;</span><span class="lnt">1624&#10;</span><span class="lnt">1625&#10;</span><span class="lnt">1626&#10;</span><span class="lnt">1627&#10;</span><span class="lnt">1628&#10;</span><span class="lnt">1629&#10;</span><span class="lnt">1630&#10;</span><span class="lnt">1631&#10;</span><span class="lnt">1632&#10;</span><span class="lnt">1633&#10;</span><span class="lnt">1634&#10;</span><span class="lnt">1635&#10;</span><span class="lnt">1636&#10;</span><span class="lnt">1637&#10;</span><span class="lnt">1638&#10;</span><span class="lnt">1639&#10;</span><span class="lnt">1640&#10;</span><span class="lnt">1641&#10;</span><span class="lnt">1642&#10;</span><span class="lnt">1643&#10;</span><span class="lnt">1644&#10;</span><span class="lnt">1645&#10;</span><span class="lnt">1646&#10;</span><span class="lnt">1647&#10;</span><span class="lnt">1648&#10;</span><span class="lnt">1649&#10;</span><span class="lnt">1650&#10;</span><span class="lnt">1651&#10;</span><span class="lnt">1652&#10;</span><span class="lnt">1653&#10;</span><span class="lnt">1654&#10;</span><span class="lnt">1655&#10;</span><span class="lnt">1656&#10;</span><span class="lnt">1657&#10;</span><span class="lnt">1658&#10;</span><span class="lnt">1659&#10;</span><span class="lnt">1660&#10;</span><span class="lnt">1661&#10;</span><span class="lnt">1662&#10;</span><span class="lnt">1663&#10;</span><span class="lnt">1664&#10;</span><span class="lnt">1665&#10;</span><span class="lnt">1666&#10;</span><span class="lnt">1667&#10;</span><span class="lnt">1668&#10;</span><span class="lnt">1669&#10;</span><span class="lnt">1670&#10;</span><span class="lnt">1671&#10;</span><span class="lnt">1672&#10;</span><span class="lnt">1673&#10;</span><span class="lnt">1674&#10;</span><span class="lnt">1675&#10;</span><span class="lnt">1676&#10;</span><span class="lnt">1677&#10;</span><span class="lnt">1678&#10;</span><span class="lnt">1679&#10;</span><span class="lnt">1680&#10;</span><span class="lnt">1681&#10;</span><span class="lnt">1682&#10;</span><span class="lnt">1683&#10;</span><span class="lnt">1684&#10;</span><span class="lnt">1685&#10;</span><span class="lnt">1686&#10;</span><span class="lnt">1687&#10;</span><span class="lnt">1688&#10;</span><span class="lnt">1689&#10;</span><span class="lnt">1690&#10;</span><span class="lnt">1691&#10;</span><span class="lnt">1692&#10;</span><span class="lnt">1693&#10;</span><span class="lnt">1694&#10;</span><span class="lnt">1695&#10;</span><span class="lnt">1696&#10;</span><span class="lnt">1697&#10;</span><span class="lnt">1698&#10;</span><span class="lnt">1699&#10;</span><span class="lnt">1700&#10;</span><span class="lnt">1701&#10;</span><span class="lnt">1702&#10;</span><span class="lnt">1703&#10;</span><span class="lnt">1704&#10;</span><span class="lnt">1705&#10;</span><span class="lnt">1706&#10;</span><span class="lnt">1707&#10;</span><span class="lnt">1708&#10;</span><span class="lnt">1709&#10;</span><span class="lnt">1710&#10;</span><span class="lnt">1711&#10;</span><span class="lnt">1712&#10;</span><span class="lnt">1713&#10;</span><span class="lnt">1714&#10;</span><span class="lnt">1715&#10;</span><span class="lnt">1716&#10;</span><span class="lnt">1717&#10;</span><span class="lnt">1718&#10;</span><span class="lnt">1719&#10;</span><span class="lnt">1720&#10;</span><span class="lnt">1721&#10;</span><span class="lnt">1722&#10;</span><span class="lnt">1723&#10;</span><span class="lnt">1724&#10;</span><span class="lnt">1725&#10;</span><span class="lnt">1726&#10;</span><span class="lnt">1727&#10;</span><span class="lnt">1728&#10;</span><span class="lnt">1729&#10;</span><span class="lnt">1730&#10;</span><span class="lnt">1731&#10;</span><span class="lnt">1732&#10;</span><span class="lnt">1733&#10;</span><span class="lnt">1734&#10;</span><span class="lnt">1735&#10;</span><span class="lnt">1736&#10;</span><span class="lnt">1737&#10;</span><span class="lnt">1738&#10;</span><span class="lnt">1739&#10;</span><span class="lnt">1740&#10;</span><span class="lnt">1741&#10;</span><span class="lnt">1742&#10;</span><span class="lnt">1743&#10;</span><span class="lnt">1744&#10;</span><span class="lnt">1745&#10;</span><span class="lnt">1746&#10;</span><span class="lnt">1747&#10;</span><span class="lnt">1748&#10;</span><span class="lnt">1749&#10;</span><span class="lnt">1750&#10;</span><span class="lnt">1751&#10;</span><span class="lnt">1752&#10;</span><span class="lnt">1753&#10;</span><span class="lnt">1754&#10;</span><span class="lnt">1755&#10;</span><span class="lnt">1756&#10;</span><span class="lnt">1757&#10;</span><span class="lnt">1758&#10;</span><span class="lnt">1759&#10;</span><span class="lnt">1760&#10;</span><span class="lnt">1761&#10;</span><span class="lnt">1762&#10;</span><span class="lnt">1763&#10;</span><span class="lnt">1764&#10;</span><span class="lnt">1765&#10;</span><span class="lnt">1766&#10;</span><span class="lnt">1767&#10;</span><span class="lnt">1768&#10;</span><span class="lnt">1769&#10;</span><span class="lnt">1770&#10;</span><span class="lnt">1771&#10;</span><span class="lnt">1772&#10;</span><span class="lnt">1773&#10;</span><span class="lnt">1774&#10;</span><span class="lnt">1775&#10;</span><span class="lnt">1776&#10;</span><span class="lnt">1777&#10;</span><span class="lnt">1778&#10;</span><span class="lnt">1779&#10;</span><span class="lnt">1780&#10;</span><span class="lnt">1781&#10;</span><span class="lnt">1782&#10;</span><span class="lnt">1783&#10;</span><span class="lnt">1784&#10;</span><span class="lnt">1785&#10;</span><span class="lnt">1786&#10;</span><span class="lnt">1787&#10;</span><span class="lnt">1788&#10;</span><span class="lnt">1789&#10;</span><span class="lnt">1790&#10;</span><span class="lnt">1791&#10;</span><span class="lnt">1792&#10;</span><span class="lnt">1793&#10;</span><span class="lnt">1794&#10;</span><span class="lnt">1795&#10;</span><span class="lnt">1796&#10;</span><span class="lnt">1797&#10;</span><span class="lnt">1798&#10;</span><span class="lnt">1799&#10;</span><span class="lnt">1800&#10;</span><span class="lnt">1801&#10;</span><span class="lnt">1802&#10;</span><span class="lnt">1803&#10;</span><span class="lnt">1804&#10;</span><span class="lnt">1805&#10;</span><span class="lnt">1806&#10;</span><span class="lnt">1807&#10;</span><span class="lnt">1808&#10;</span><span class="lnt">1809&#10;</span><span class="lnt">1810&#10;</span><span class="lnt">1811&#10;</span><span class="lnt">1812&#10;</span><span class="lnt">1813&#10;</span><span class="lnt">1814&#10;</span><span class="lnt">1815&#10;</span><span class="lnt">1816&#10;</span><span class="lnt">1817&#10;</span><span class="lnt">1818&#10;</span><span class="lnt">1819&#10;</span><span class="lnt">1820&#10;</span><span class="lnt">1821&#10;</span><span class="lnt">1822&#10;</span><span class="lnt">1823&#10;</span><span class="lnt">1824&#10;</span><span class="lnt">1825&#10;</span><span class="lnt">1826&#10;</span><span class="lnt">1827&#10;</span><span class="lnt">1828&#10;</span><span class="lnt">1829&#10;</span><span class="lnt">1830&#10;</span><span class="lnt">1831&#10;</span><span class="lnt">1832&#10;</span><span class="lnt">1833&#10;</span><span class="lnt">1834&#10;</span><span class="lnt">1835&#10;</span><span class="lnt">1836&#10;</span><span class="lnt">1837&#10;</span><span class="lnt">1838&#10;</span><span class="lnt">1839&#10;</span><span class="lnt">1840&#10;</span><span class="lnt">1841&#10;</span><span class="lnt">1842&#10;</span><span class="lnt">1843&#10;</span><span class="lnt">1844&#10;</span><span class="lnt">1845&#10;</span><span class="lnt">1846&#10;</span><span class="lnt">1847&#10;</span><span class="lnt">1848&#10;</span><span class="lnt">1849&#10;</span><span class="lnt">1850&#10;</span><span class="lnt">1851&#10;</span><span class="lnt">1852&#10;</span><span class="lnt">1853&#10;</span><span class="lnt">1854&#10;</span><span class="lnt">1855&#10;</span><span class="lnt">1856&#10;</span><span class="lnt">1857&#10;</span><span class="lnt">1858&#10;</span><span class="lnt">1859&#10;</span><span class="lnt">1860&#10;</span><span class="lnt">1861&#10;</span><span class="lnt">1862&#10;</span><span class="lnt">1863&#10;</span><span class="lnt">1864&#10;</span><span class="lnt">1865&#10;</span><span class="lnt">1866&#10;</span><span class="lnt">1867&#10;</span><span class="lnt">1868&#10;</span><span class="lnt">1869&#10;</span><span class="lnt">1870&#10;</span></code></pre></td>&#10;<td class="lntd">&#10;<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/env bash&#10;</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nb">set</span> -e&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Arch Linux Install Script (alis) installs unattended, automated</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># and customized Arch Linux system.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Copyright (C) 2021 picodotdev</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># This program is free software: you can redistribute it and/or modify</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># it under the terms of the GNU General Public License as published by</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># the Free Software Foundation, either version 3 of the License, or</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># (at your option) any later version.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># This program is distributed in the hope that it will be useful,</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># GNU General Public License for more details.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># You should have received a copy of the GNU General Public License</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># This script is hosted at https://github.com/picodotdev/alis. For new features,</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># improvements and bugs fill an issue in GitHub or make a pull request.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Pull Request are welcome!</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># If you test it in real hardware please send me an email to pico.dev@gmail.com with</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># the machine description and tell me if somethig goes wrong or all works fine.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Please, don&#39;t ask for support for this script in Arch Linux forums, first read</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># the Arch Linux wiki [1], the Installation Guide [2] and the General</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Recomendations [3], later compare the commands with those of this script.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># [1] https://wiki.archlinux.org</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># [2] https://wiki.archlinux.org/index.php/Installation_guide</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># [3] https://wiki.archlinux.org/index.php/General_recommendations</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># Usage:</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># # loadkeys es</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># # iwctl --passphrase &#34;[WIFI_KEY]&#34; station [WIFI_INTERFACE] connect &#34;[WIFI_ESSID]&#34;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  # (Optional) Connect to WIFI network. _ip link show_ to know WIFI_INTERFACE.</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># # curl https://raw.githubusercontent.com/picodotdev/alis/master/download.sh | bash, curl https://raw.githubusercontent.com/picodotdev/alis/master/download.sh | bash -s -- -u [github user], or with URL shortener curl -sL https://bit.ly/2F3CATp | bash</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># # vim alis.conf</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1"># # ./alis.sh</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="c1"># global variables (no configuration, don&#39;t edit)</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ASCIINEMA</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">BIOS_TYPE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_BOOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTITION_ROOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_LVM</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LUKS_DEVICE_NAME</span><span class="o">=</span><span class="s2">&#34;cryptroot&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LVM_VOLUME_GROUP</span><span class="o">=</span><span class="s2">&#34;vg&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LVM_VOLUME_LOGICAL</span><span class="o">=</span><span class="s2">&#34;root&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">SWAPFILE</span><span class="o">=</span><span class="s2">&#34;/swapfile&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">BOOT_DIRECTORY</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ESP_DIRECTORY</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#PARTITION_BOOT_NUMBER=0</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">UUID_BOOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">UUID_ROOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTUUID_BOOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">PARTUUID_ROOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_SATA</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_NVME</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">DEVICE_MMC</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">CPU_VENDOR</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">VIRTUALBOX</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">CMDLINE_LINUX_ROOT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="nv">CONF_FILE</span><span class="o">=</span><span class="s2">&#34;alis.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">GLOBALS_FILE</span><span class="o">=</span><span class="s2">&#34;alis-globals.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LOG_FILE</span><span class="o">=</span><span class="s2">&#34;alis.log&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">ASCIINEMA_FILE</span><span class="o">=</span><span class="s2">&#34;alis.asciinema&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="nv">RED</span><span class="o">=</span><span class="s1">&#39;\033[0;31m&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">GREEN</span><span class="o">=</span><span class="s1">&#39;\033[0;32m&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">LIGHT_BLUE</span><span class="o">=</span><span class="s1">&#39;\033[1;34m&#39;</span>&#10;</span></span><span class="line"><span class="cl"><span class="nv">NC</span><span class="o">=</span><span class="s1">&#39;\033[0m&#39;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> configuration_install<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">source</span> <span class="s2">&#34;</span><span class="nv">$CONF_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> sanitize_variables<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$DEVICE</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_MODE</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_CUSTOM_PARTED_UEFI</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOM_PARTED_UEFI</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_CUSTOM_PARTED_BIOS</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOM_PARTED_BIOS</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_CUSTOMMANUAL_BOOT</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOMMANUAL_BOOT</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_CUSTOMMANUAL_ROOT</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOMMANUAL_ROOT</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">FILE_SYSTEM_TYPE</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SWAP_SIZE</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$SWAP_SIZE</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">KERNELS</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$KERNELS</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">KERNELS_COMPRESSION</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SYSTEMD_HOMED_STORAGE</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">BOOTLOADER</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$BOOTLOADER</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CUSTOM_SHELL</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$CUSTOM_SHELL</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DESKTOP_ENVIRONMENT</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$DESKTOP_ENVIRONMENT</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DISPLAY_DRIVER</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DISPLAY_DRIVER_HARDWARE_ACCELERATION_INTEL</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER_HARDWARE_ACCELERATION_INTEL</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SYSTEMD_UNITS</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$SYSTEMD_UNITS</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> sanitize_variable<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VARIABLE</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VARIABLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$VARIABLE</span> <span class="p">|</span> sed <span class="s2">&#34;s/![^ ]*//g&#34;</span><span class="k">)</span> <span class="c1"># remove disabled</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VARIABLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$VARIABLE</span> <span class="p">|</span> sed <span class="s2">&#34;s/ {2,}/ /g&#34;</span><span class="k">)</span> <span class="c1"># remove unnecessary white spaces</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VARIABLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$VARIABLE</span> <span class="p">|</span> sed <span class="s1">&#39;s/^[[:space:]]*//&#39;</span><span class="k">)</span> <span class="c1"># trim leading</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VARIABLE</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$VARIABLE</span> <span class="p">|</span> sed <span class="s1">&#39;s/[[:space:]]*$//&#39;</span><span class="k">)</span> <span class="c1"># trim trailing</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$VARIABLE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;KEYS&#34;</span> <span class="s2">&#34;</span><span class="nv">$KEYS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;LOG&#34;</span> <span class="s2">&#34;</span><span class="nv">$LOG</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;DEVICE&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;DEVICE_TRIM&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_TRIM</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;LVM&#34;</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_equals <span class="s2">&#34;LUKS_PASSWORD&#34;</span> <span class="s2">&#34;LUKS_PASSWORD_RETYPE&#34;</span> <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD_RETYPE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;FILE_SYSTEM_TYPE&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="s2">&#34;ext4 btrfs xfs f2fs reiserfs&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;PARTITION_MODE&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="s2">&#34;auto custom manual&#34;</span> <span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;custom&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;PARTITION_CUSTOM_PARTED_UEFI&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOM_PARTED_UEFI</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;PARTITION_CUSTOM_PARTED_BIOS&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOM_PARTED_BIOS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;custom&#34;</span> -o <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;manual&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;PARTITION_CUSTOMMANUAL_BOOT&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOMMANUAL_BOOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;PARTITION_CUSTOMMANUAL_ROOT&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOMMANUAL_ROOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;PARTITION_MODE&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="s2">&#34;auto&#34;</span> <span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_equals <span class="s2">&#34;WIFI_KEY&#34;</span> <span class="s2">&#34;WIFI_KEY_RETYPE&#34;</span> <span class="s2">&#34;</span><span class="nv">$WIFI_KEY</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$WIFI_KEY_RETYPE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;PING_HOSTNAME&#34;</span> <span class="s2">&#34;</span><span class="nv">$PING_HOSTNAME</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;PACMAN_MIRROR&#34;</span> <span class="s2">&#34;</span><span class="nv">$PACMAN_MIRROR</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;KERNELS&#34;</span> <span class="s2">&#34;</span><span class="nv">$KERNELS</span><span class="s2">&#34;</span> <span class="s2">&#34;linux-lts linux-lts-headers linux-hardened linux-hardened-headers linux-zen linux-zen-headers&#34;</span> <span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;KERNELS_COMPRESSION&#34;</span> <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> <span class="s2">&#34;gzip bzip2 lzma xz lzop lz4 zstd&#34;</span> <span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;DISPLAY_DRIVER&#34;</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> <span class="s2">&#34;intel amdgpu ati nvidia nvidia-lts nvidia-dkms nvidia-390xx nvidia-390xx-lts nvidia-390xx-dkms nouveau&#34;</span> <span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;KMS&#34;</span> <span class="s2">&#34;</span><span class="nv">$KMS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;FASTBOOT&#34;</span> <span class="s2">&#34;</span><span class="nv">$FASTBOOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;FRAMEBUFFER_COMPRESSION&#34;</span> <span class="s2">&#34;</span><span class="nv">$FRAMEBUFFER_COMPRESSION</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;DISPLAY_DRIVER_DDX&#34;</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER_DDX</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;DISPLAY_DRIVER_HARDWARE_ACCELERATION&#34;</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER_HARDWARE_ACCELERATION</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;DISPLAY_DRIVER_HARDWARE_ACCELERATION_INTEL&#34;</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER_HARDWARE_ACCELERATION_INTEL</span><span class="s2">&#34;</span> <span class="s2">&#34;intel-media-driver libva-intel-driver&#34;</span> <span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;TIMEZONE&#34;</span> <span class="s2">&#34;</span><span class="nv">$TIMEZONE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;REFLECTOR&#34;</span> <span class="s2">&#34;</span><span class="nv">$REFLECTOR</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;PACMAN_MIRROR&#34;</span> <span class="s2">&#34;</span><span class="nv">$PACMAN_MIRROR</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;LOCALES&#34;</span> <span class="s2">&#34;</span><span class="nv">$LOCALES</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;LOCALE_CONF&#34;</span> <span class="s2">&#34;</span><span class="nv">$LOCALE_CONF</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;LANG&#34;</span> <span class="s2">&#34;</span><span class="nv">$LANG</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;KEYMAP&#34;</span> <span class="s2">&#34;</span><span class="nv">$KEYMAP</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;HOSTNAME&#34;</span> <span class="s2">&#34;</span><span class="nv">$HOSTNAME</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;USER_NAME&#34;</span> <span class="s2">&#34;</span><span class="nv">$USER_NAME</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;USER_PASSWORD&#34;</span> <span class="s2">&#34;</span><span class="nv">$USER_PASSWORD</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_equals <span class="s2">&#34;ROOT_PASSWORD&#34;</span> <span class="s2">&#34;ROOT_PASSWORD_RETYPE&#34;</span> <span class="s2">&#34;</span><span class="nv">$ROOT_PASSWORD</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$ROOT_PASSWORD_RETYPE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_equals <span class="s2">&#34;USER_PASSWORD&#34;</span> <span class="s2">&#34;USER_PASSWORD_RETYPE&#34;</span> <span class="s2">&#34;</span><span class="nv">$USER_PASSWORD</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$USER_PASSWORD_RETYPE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;SYSTEMD_HOMED&#34;</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;SYSTEMD_HOMED_STORAGE&#34;</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span> <span class="s2">&#34;directory fscrypt luks cifs subvolume&#34;</span> <span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;fscrypt&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;FILE_SYSTEM_TYPE&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="s2">&#34;ext4 f2fs&#34;</span> <span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;cifs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;SYSTEMD_HOMED_CIFS_DOMAIN&#34;</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_CIFS_DOMAIN</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;SYSTEMD_HOMED_CIFS_SERVICE&#34;</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_CIFS_SERVICE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;HOOKS&#34;</span> <span class="s2">&#34;</span><span class="nv">$HOOKS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;BOOTLOADER&#34;</span> <span class="s2">&#34;</span><span class="nv">$BOOTLOADER</span><span class="s2">&#34;</span> <span class="s2">&#34;grub refind systemd&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;CUSTOM_SHELL&#34;</span> <span class="s2">&#34;</span><span class="nv">$CUSTOM_SHELL</span><span class="s2">&#34;</span> <span class="s2">&#34;bash zsh dash fish&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;DESKTOP_ENVIRONMENT&#34;</span> <span class="s2">&#34;</span><span class="nv">$DESKTOP_ENVIRONMENT</span><span class="s2">&#34;</span> <span class="s2">&#34;gnome kde xfce mate cinnamon lxde i3-wm i3-gaps&#34;</span> <span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;PACKAGES_MULTILIB&#34;</span> <span class="s2">&#34;</span><span class="nv">$PACKAGES_MULTILIB</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;PACKAGES_INSTALL&#34;</span> <span class="s2">&#34;</span><span class="nv">$PACKAGES_INSTALL</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;VAGRANT&#34;</span> <span class="s2">&#34;</span><span class="nv">$VAGRANT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_boolean <span class="s2">&#34;REBOOT&#34;</span> <span class="s2">&#34;</span><span class="nv">$REBOOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables_value<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&#34;</span><span class="nv">$VALUE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2"> environment variable must have a value.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables_boolean<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$VALUE</span><span class="s2">&#34;</span> <span class="s2">&#34;true false&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables_list<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUES</span><span class="o">=</span><span class="nv">$3</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">REQUIRED</span><span class="o">=</span><span class="nv">$4</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$REQUIRED</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span> -o <span class="s2">&#34;</span><span class="nv">$REQUIRED</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_value <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$VALUE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VALUE</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;&#34;</span> -a -z <span class="s2">&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$VALUES</span><span class="s2">&#34;</span> <span class="p">|</span> grep -F -w <span class="s2">&#34;</span><span class="nv">$VALUE</span><span class="s2">&#34;</span><span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2"> environment variable value [</span><span class="nv">$VALUE</span><span class="s2">] must be in [</span><span class="nv">$VALUES</span><span class="s2">].&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables_equals<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME1</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME2</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE1</span><span class="o">=</span><span class="nv">$3</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE2</span><span class="o">=</span><span class="nv">$4</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VALUE1</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;</span><span class="nv">$VALUE2</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$NAME1</span><span class="s2"> and </span><span class="nv">$NAME2</span><span class="s2"> must be equal [</span><span class="nv">$VALUE1</span><span class="s2">, </span><span class="nv">$VALUE2</span><span class="s2">].&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_variables_size<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">NAME</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SIZE_EXPECT</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SIZE</span><span class="o">=</span><span class="nv">$3</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SIZE_EXPECT</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;</span><span class="nv">$SIZE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$NAME</span><span class="s2"> array size [</span><span class="nv">$SIZE</span><span class="s2">] must be [</span><span class="nv">$SIZE_EXPECT</span><span class="s2">].&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> warning<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LIGHT_BLUE</span><span class="si">}</span><span class="s2">Welcome to Arch Linux Install Script</span><span class="si">${</span><span class="nv">NC</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="si">${</span><span class="nv">RED</span><span class="si">}</span><span class="s2">Warning&#34;</span><span class="s1">&#39;!&#39;</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">NC</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="si">${</span><span class="nv">RED</span><span class="si">}</span><span class="s2">This script deletes all partitions of the persistent</span><span class="si">${</span><span class="nv">NC</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="si">${</span><span class="nv">RED</span><span class="si">}</span><span class="s2">storage and continuing all your data in it will be lost.</span><span class="si">${</span><span class="nv">NC</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -p <span class="s2">&#34;Do you want to continue? [y/N] &#34;</span> yn&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="nv">$yn</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">[</span>Yy<span class="o">]</span>* <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">[</span>Nn<span class="o">]</span>* <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> init<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;init()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;init_log&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;loadkeys <span class="nv">$KEYS</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> init_log<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LOG</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exec</span> &gt; &gt;<span class="o">(</span>tee -a <span class="nv">$LOG_FILE</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exec</span> 2&gt; &gt;<span class="o">(</span>tee -a <span class="nv">$LOG_FILE</span> &gt;<span class="p">&amp;</span>2<span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">set</span> -o xtrace&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> facts<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;facts()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -d /sys/firmware/efi <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">BIOS_TYPE</span><span class="o">=</span><span class="s2">&#34;uefi&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">BIOS_TYPE</span><span class="o">=</span><span class="s2">&#34;bios&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -f <span class="s2">&#34;</span><span class="nv">$ASCIINEMA_FILE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ASCIINEMA</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ASCIINEMA</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_SATA</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_NVME</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_MMC</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$DEVICE</span> <span class="p">|</span> grep <span class="s2">&#34;^/dev/[a-z]d[a-z]&#34;</span><span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_SATA</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">elif</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$DEVICE</span> <span class="p">|</span> grep <span class="s2">&#34;^/dev/nvme&#34;</span><span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_NVME</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">elif</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$DEVICE</span> <span class="p">|</span> grep <span class="s2">&#34;^/dev/mmc&#34;</span><span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_MMC</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span>lscpu <span class="p">|</span> grep GenuineIntel<span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CPU_VENDOR</span><span class="o">=</span><span class="s2">&#34;intel&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">elif</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span>lscpu <span class="p">|</span> grep AuthenticAMD<span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CPU_VENDOR</span><span class="o">=</span><span class="s2">&#34;amd&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="k">$(</span>lspci <span class="p">|</span> grep -i virtualbox<span class="k">)</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VIRTUALBOX</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> checks<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;checks()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;check_facts&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> check_facts<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;bios&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;check_variables_list <span class="s2">&#34;BOOTLOADER&#34;</span> <span class="s2">&#34;</span><span class="nv">$BOOTLOADER</span><span class="s2">&#34;</span> <span class="s2">&#34;grub&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> prepare<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;prepare()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;configure_reflector&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;configure_time&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;prepare_partition&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;ask_passwords&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;configure_network&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> configure_reflector<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$REFLECTOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;false&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;systemctl stop reflector.service&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> configure_time<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;timedatectl set-ntp <span class="nb">true</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> prepare_partition<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -d /mnt/boot <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;umount /mnt/boot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;umount /mnt&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -e <span class="s2">&#34;/dev/mapper/</span><span class="nv">$LVM_VOLUME_GROUP</span><span class="s2">-</span><span class="nv">$LVM_VOLUME_LOGICAL</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;umount <span class="s2">&#34;/dev/mapper/</span><span class="nv">$LVM_VOLUME_GROUP</span><span class="s2">-</span><span class="nv">$LVM_VOLUME_LOGICAL</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -e <span class="s2">&#34;/dev/mapper/</span><span class="nv">$LUKS_DEVICE_NAME</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cryptsetup close <span class="nv">$LUKS_DEVICE_NAME</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> ask_passwords<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;ask&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">while</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD_TYPED</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Type LUKS password: &#39;</span> LUKS_PASSWORD&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Retype LUKS password: &#39;</span> LUKS_PASSWORD_RETYPE&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD_RETYPE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;LUKS password don&#39;t match. Please, type again.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$WIFI_INTERFACE</span><span class="s2">&#34;</span> -a <span class="s2">&#34;</span><span class="nv">$WIFI_KEY</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;ask&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">while</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD_TYPED</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Type WIFI key: &#39;</span> WIFI_KEY&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Retype WIFI key: &#39;</span> WIFI_KEY_RETYPE&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$WIFI_KEY</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;</span><span class="nv">$WIFI_KEY_RETYPE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;WIFI key don&#39;t match. Please, type again.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$ROOT_PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;ask&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">while</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD_TYPED</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Type root password: &#39;</span> ROOT_PASSWORD&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Retype root password: &#39;</span> ROOT_PASSWORD_RETYPE&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$ROOT_PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;</span><span class="nv">$ROOT_PASSWORD_RETYPE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Root password don&#39;t match. Please, type again.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$USER_PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;ask&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">while</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD_TYPED</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Type user password: &#39;</span> USER_PASSWORD&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s1">&#39;Retype user password: &#39;</span> USER_PASSWORD_RETYPE&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$USER_PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;</span><span class="nv">$USER_PASSWORD_RETYPE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;User password don&#39;t match. Please, type again.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> I in <span class="si">${</span><span class="p">!ADDITIONAL_USERS[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">VALUE</span><span class="o">=</span><span class="si">${</span><span class="nv">ADDITIONAL_USERS</span><span class="p">[</span><span class="si">${</span><span class="nv">I</span><span class="si">}</span><span class="p">]</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">IFS</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nv">S</span><span class="o">=(</span><span class="nv">$VALUE</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">USER</span><span class="o">=</span><span class="si">${</span><span class="nv">S</span><span class="p">[0]</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD</span><span class="o">=</span><span class="si">${</span><span class="nv">S</span><span class="p">[1]</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_RETYPE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;ask&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">while</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD_TYPED</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s2">&#34;Type user (</span><span class="nv">$USER</span><span class="s2">) password: &#34;</span> PASSWORD&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -sp <span class="s2">&#34;Retype user (</span><span class="nv">$USER</span><span class="s2">) password: &#34;</span> PASSWORD_RETYPE&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD_RETYPE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD_TYPED</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ADDITIONAL_USERS<span class="o">[</span><span class="si">${</span><span class="nv">I</span><span class="si">}</span><span class="o">]=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span><span class="s2">=</span><span class="si">${</span><span class="nv">PASSWORD</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;User (</span><span class="nv">$USER</span><span class="s2">) password don&#39;t match. Please, type again.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> configure_network<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$WIFI_INTERFACE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iwctl --passphrase <span class="s2">&#34;</span><span class="nv">$WIFI_KEY</span><span class="s2">&#34;</span> station <span class="nv">$WIFI_INTERFACE</span> connect <span class="s2">&#34;</span><span class="nv">$WIFI_ESSID</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep <span class="m">10</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># only one ping -c 1, ping gets stuck if -c 5</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;ping -c <span class="m">1</span> -i <span class="m">2</span> -W <span class="m">5</span> -w <span class="m">30</span> <span class="nv">$PING_HOSTNAME</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -ne <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Network ping check failed. Cannot continue.&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> partition<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;partition()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;partprobe <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># setup</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;auto&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_PARTED_FILE_SYSTEM_TYPE</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_PARTED_FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;f2fs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_PARTED_FILE_SYSTEM_TYPE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_PARTED_UEFI</span><span class="o">=</span><span class="s2">&#34;mklabel gpt mkpart ESP fat32 1MiB 512MiB mkpart root </span><span class="nv">$PARTITION_PARTED_FILE_SYSTEM_TYPE</span><span class="s2"> 512MiB 100% set 1 esp on&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_PARTED_BIOS</span><span class="o">=</span><span class="s2">&#34;mklabel msdos mkpart primary ext4 4MiB 512MiB mkpart primary </span><span class="nv">$PARTITION_PARTED_FILE_SYSTEM_TYPE</span><span class="s2"> 512MiB 100% set 1 boot on&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;uefi&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_SATA</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_NVME</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_MMC</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;bios&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_SATA</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_NVME</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_MMC</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">DEVICE</span><span class="si">}</span><span class="s2">p2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">elif</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;custom&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_PARTED_UEFI</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOM_PARTED_UEFI</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_PARTED_BIOS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOM_PARTED_BIOS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;custom&#34;</span> -o <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;manual&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOMMANUAL_BOOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_CUSTOMMANUAL_ROOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">PARTITION_ROOT</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_BOOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_ROOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">PARTITION_BOOT_NUMBER</span><span class="p">//</span><span class="se">\/</span><span class="nv">dev</span><span class="se">\/</span><span class="nv">sda</span><span class="p">/</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">PARTITION_BOOT_NUMBER</span><span class="p">//</span><span class="se">\/</span><span class="nv">dev</span><span class="se">\/</span><span class="nv">nvme0n1p</span><span class="p">/</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_BOOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">PARTITION_BOOT_NUMBER</span><span class="p">//</span><span class="se">\/</span><span class="nv">dev</span><span class="se">\/</span><span class="nv">mmcblk0p</span><span class="p">/</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">PARTITION_ROOT_NUMBER</span><span class="p">//</span><span class="se">\/</span><span class="nv">dev</span><span class="se">\/</span><span class="nv">sda</span><span class="p">/</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">PARTITION_ROOT_NUMBER</span><span class="p">//</span><span class="se">\/</span><span class="nv">dev</span><span class="se">\/</span><span class="nv">nvme0n1p</span><span class="p">/</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_ROOT_NUMBER</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">PARTITION_ROOT_NUMBER</span><span class="p">//</span><span class="se">\/</span><span class="nv">dev</span><span class="se">\/</span><span class="nv">mmcblk0p</span><span class="p">/</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># partition</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;auto&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sgdisk --zap-all <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wipefs -a -f <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;partprobe <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;auto&#34;</span> -o <span class="s2">&#34;</span><span class="nv">$PARTITION_MODE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;custom&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;uefi&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parted -s <span class="nv">$DEVICE</span> <span class="nv">$PARTITION_PARTED_UEFI</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sgdisk -t<span class="o">=</span><span class="nv">$PARTITION_ROOT_NUMBER</span>:8309 <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">elif</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sgdisk -t<span class="o">=</span><span class="nv">$PARTITION_ROOT_NUMBER</span>:8e00 <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;bios&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parted -s <span class="nv">$DEVICE</span> <span class="nv">$PARTITION_PARTED_BIOS</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;partprobe <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># luks and lvm</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="p">|</span> cryptsetup --key-size<span class="o">=</span><span class="m">512</span> --key-file<span class="o">=</span>- luksFormat --type luks2 <span class="nv">$PARTITION_ROOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="p">|</span> cryptsetup --key-file<span class="o">=</span>- open <span class="nv">$PARTITION_ROOT</span> <span class="nv">$LUKS_DEVICE_NAME</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep <span class="m">5</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_LVM</span><span class="o">=</span><span class="s2">&#34;/dev/mapper/</span><span class="nv">$LUKS_DEVICE_NAME</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_LVM</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pvcreate <span class="nv">$DEVICE_LVM</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vgcreate <span class="nv">$LVM_VOLUME_GROUP</span> <span class="nv">$DEVICE_LVM</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lvcreate -l 100%FREE -n <span class="nv">$LVM_VOLUME_LOGICAL</span> <span class="nv">$LVM_VOLUME_GROUP</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;/dev/mapper/</span><span class="nv">$LUKS_DEVICE_NAME</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">DEVICE_ROOT</span><span class="o">=</span><span class="s2">&#34;/dev/mapper/</span><span class="nv">$LVM_VOLUME_GROUP</span><span class="s2">-</span><span class="nv">$LVM_VOLUME_LOGICAL</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># format</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;wipefs -a -f <span class="nv">$PARTITION_BOOT</span> <span class="o">||</span> <span class="nb">true</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;wipefs -a -f <span class="nv">$DEVICE_ROOT</span> <span class="o">||</span> <span class="nb">true</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;uefi&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkfs.fat -n ESP -F32 <span class="nv">$PARTITION_BOOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;bios&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkfs.ext4 -L boot <span class="nv">$PARTITION_BOOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;f2fs&#34;</span> -o <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;reiserfs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkfs.<span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> -l root <span class="nv">$DEVICE_ROOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkfs.<span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> -L root <span class="nv">$DEVICE_ROOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># options</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_OPTIONS_BOOT</span><span class="o">=</span><span class="s2">&#34;defaults&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_OPTIONS_ROOT</span><span class="o">=</span><span class="s2">&#34;defaults&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_TRIM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_OPTIONS_BOOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS_BOOT</span><span class="s2">,noatime&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_OPTIONS_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS_ROOT</span><span class="s2">,noatime&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;f2fs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTITION_OPTIONS_ROOT</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS_ROOT</span><span class="s2">,nodiscard&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># mount</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;btrfs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span> /mnt&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;btrfs subvolume create /mnt/root&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;btrfs subvolume create /mnt/home&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;btrfs subvolume create /mnt/var&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;btrfs subvolume create /mnt/snapshots&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;umount /mnt&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;subvol=root,</span><span class="nv">$PARTITION_OPTIONS</span><span class="s2">,compress=zstd&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span> /mnt&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir /mnt/<span class="o">{</span>boot,home,var,snapshots<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS_BOOT</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_BOOT</span><span class="s2">&#34;</span> /mnt/boot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;subvol=home,</span><span class="nv">$PARTITION_OPTIONS_ROOT</span><span class="s2">,compress=zstd&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span> /mnt/home&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;subvol=var,</span><span class="nv">$PARTITION_OPTIONS_ROOT</span><span class="s2">,compress=zstd&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span> /mnt/var&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;subvol=snapshots,</span><span class="nv">$PARTITION_OPTIONS_ROOT</span><span class="s2">,compress=zstd&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span> /mnt/snapshots&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS_ROOT</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span> /mnt&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir /mnt/boot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount -o <span class="s2">&#34;</span><span class="nv">$PARTITION_OPTIONS_BOOT</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$PARTITION_BOOT</span><span class="s2">&#34;</span> /mnt/boot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># swap</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SWAP_SIZE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;btrfs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;truncate -s <span class="m">0</span> /mnt<span class="nv">$SWAPFILE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chattr +C /mnt<span class="nv">$SWAPFILE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;btrfs property <span class="nb">set</span> /mnt<span class="nv">$SWAPFILE</span> compression none&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dd <span class="k">if</span><span class="o">=</span>/dev/zero <span class="nv">of</span><span class="o">=</span>/mnt<span class="nv">$SWAPFILE</span> <span class="nv">bs</span><span class="o">=</span>1M <span class="nv">count</span><span class="o">=</span><span class="nv">$SWAP_SIZE</span> <span class="nv">status</span><span class="o">=</span>progress&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chmod <span class="m">600</span> /mnt<span class="nv">$SWAPFILE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkswap /mnt<span class="nv">$SWAPFILE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># set variables</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">BOOT_DIRECTORY</span><span class="o">=</span>/boot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ESP_DIRECTORY</span><span class="o">=</span>/boot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">UUID_BOOT</span><span class="o">=</span><span class="k">$(</span>blkid -s UUID -o value <span class="nv">$PARTITION_BOOT</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">UUID_ROOT</span><span class="o">=</span><span class="k">$(</span>blkid -s UUID -o value <span class="nv">$PARTITION_ROOT</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTUUID_BOOT</span><span class="o">=</span><span class="k">$(</span>blkid -s PARTUUID -o value <span class="nv">$PARTITION_BOOT</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PARTUUID_ROOT</span><span class="o">=</span><span class="k">$(</span>blkid -s PARTUUID -o value <span class="nv">$PARTITION_ROOT</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> install<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;install()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$PACMAN_MIRROR</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Server = </span><span class="nv">$PACMAN_MIRROR</span><span class="s2">&#34;</span> &gt; /etc/pacman.d/mirrorlist&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$REFLECTOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">COUNTRIES</span><span class="o">=()</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> COUNTRY in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">REFLECTOR_COUNTRIES</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">COUNTRIES</span><span class="o">+=(</span>--country <span class="s2">&#34;</span><span class="si">${</span><span class="nv">COUNTRY</span><span class="si">}</span><span class="s2">&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman -Sy --noconfirm reflector&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reflector <span class="s2">&#34;</span><span class="si">${</span><span class="nv">COUNTRIES</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span> --latest <span class="m">25</span> --age <span class="m">24</span> --protocol https --completion-percent <span class="m">100</span> --sort rate --save /etc/pacman.d/mirrorlist&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s1">&#39;s/#Color/Color/&#39;</span> /etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s1">&#39;s/#ParallelDownloads/ParallelDownloads/&#39;</span> /etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacstrap /mnt base base-devel linux linux-firmware&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s1">&#39;s/#Color/Color/&#39;</span> /mnt/etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s1">&#39;s/#ParallelDownloads/ParallelDownloads/&#39;</span> /mnt/etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PACKAGES_MULTILIB</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span> &gt;&gt; /mnt/etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;[multilib]&#34;</span> &gt;&gt; /mnt/etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Include = /etc/pacman.d/mirrorlist&#34;</span> &gt;&gt; /mnt/etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span> &gt;&gt; /mnt/etc/pacman.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> configuration<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;configuration()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;genfstab -U /mnt &gt;&gt; /mnt/etc/fstab&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SWAP_SIZE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;# swap&#34;</span> &gt;&gt; /mnt/etc/fstab&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$SWAPFILE</span><span class="s2"> none swap defaults 0 0&#34;</span> &gt;&gt; /mnt/etc/fstab&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span> &gt;&gt; /mnt/etc/fstab&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_TRIM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;f2fs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s1">&#39;s/relatime/noatime,nodiscard/&#39;</span> /mnt/etc/fstab&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s1">&#39;s/relatime/noatime/&#39;</span> /mnt/etc/fstab&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> fstrim.timer&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt ln -s -f <span class="nv">$TIMEZONE</span> /etc/localtime&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt hwclock --systohc&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> LOCALE in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LOCALES</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/#</span><span class="nv">$LOCALE</span><span class="s2">/</span><span class="nv">$LOCALE</span><span class="s2">/&#34;</span> /etc/locale.gen&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/#</span><span class="nv">$LOCALE</span><span class="s2">/</span><span class="nv">$LOCALE</span><span class="s2">/&#34;</span> /mnt/etc/locale.gen&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> VARIABLE in <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LOCALE_CONF</span><span class="p">[@]</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">#localectl set-locale &#34;$VARIABLE&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="nv">$VARIABLE</span><span class="s2">&#34;</span> &gt;&gt; /mnt/etc/locale.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;locale-gen&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt locale-gen&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="nv">$KEYMAP</span><span class="s2">\n</span><span class="nv">$FONT</span><span class="s2">\n</span><span class="nv">$FONT_MAP</span><span class="s2">&#34;</span> &gt; /mnt/etc/vconsole.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="nv">$HOSTNAME</span> &gt; /mnt/etc/hostname&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$KEYLAYOUT</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$OPTIONS</span><span class="s2">&#34;</span><span class="s1">$&#39;\n&#39;</span><span class="s2">&#34;&nbsp;&nbsp;&nbsp;&nbsp;Option \&#34;XkbLayout\&#34; \&#34;</span><span class="nv">$KEYLAYOUT</span><span class="s2">\&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$KEYMODEL</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$OPTIONS</span><span class="s2">&#34;</span><span class="s1">$&#39;\n&#39;</span><span class="s2">&#34;&nbsp;&nbsp;&nbsp;&nbsp;Option \&#34;XkbModel\&#34; \&#34;</span><span class="nv">$KEYMODEL</span><span class="s2">\&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$KEYVARIANT</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$OPTIONS</span><span class="s2">&#34;</span><span class="s1">$&#39;\n&#39;</span><span class="s2">&#34;&nbsp;&nbsp;&nbsp;&nbsp;Option \&#34;XkbVariant\&#34; \&#34;</span><span class="nv">$KEYVARIANT</span><span class="s2">\&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$KEYOPTIONS</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$OPTIONS</span><span class="s2">&#34;</span><span class="s1">$&#39;\n&#39;</span><span class="s2">&#34;&nbsp;&nbsp;&nbsp;&nbsp;Option \&#34;XkbOptions\&#34; \&#34;</span><span class="nv">$KEYOPTIONS</span><span class="s2">\&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt mkdir -p <span class="s2">&#34;/etc/X11/xorg.conf.d/&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt; /mnt/etc/X11/xorg.conf.d/00-keyboard.conf&#10;</span></span></span><span class="line"><span class="cl"><span class="s"># Written by systemd-localed(8), read by systemd-localed and Xorg. It&#39;s&#10;</span></span></span><span class="line"><span class="cl"><span class="s"># probably wise not to edit this file manually. Use localectl(1) to&#10;</span></span></span><span class="line"><span class="cl"><span class="s"># instruct systemd-localed to update it.&#10;</span></span></span><span class="line"><span class="cl"><span class="s">Section &#34;InputClass&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;Identifier &#34;system-keyboard&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;MatchIsKeyboard &#34;on&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;$OPTIONS&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EndSection&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SWAP_SIZE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;vm.swappiness=10&#34;</span> &gt; /mnt/etc/sysctl.d/99-sysctl.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">printf</span> <span class="s2">&#34;</span><span class="nv">$ROOT_PASSWORD</span><span class="s2">\n</span><span class="nv">$ROOT_PASSWORD</span><span class="s2">&#34;</span> <span class="p">|</span> arch-chroot /mnt passwd&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> mkinitcpio_configuration<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;mkinitcpio_configuration()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KMS</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">MODULES</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;intel&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">MODULES</span><span class="o">=</span><span class="s2">&#34;i915&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia&#34;</span> <span class="p">|</span> <span class="s2">&#34;nvidia-lts&#34;</span>  <span class="p">|</span> <span class="s2">&#34;nvidia-dkms&#34;</span> <span class="p">|</span> <span class="s2">&#34;nvidia-390xx&#34;</span> <span class="p">|</span> <span class="s2">&#34;nvidia-390xx-lts&#34;</span> <span class="p">|</span> <span class="s2">&#34;nvidia-390xx-dkms&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">MODULES</span><span class="o">=</span><span class="s2">&#34;nvidia nvidia_modeset nvidia_uvm nvidia_drm&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;amdgpu&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">MODULES</span><span class="o">=</span><span class="s2">&#34;amdgpu&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;ati&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">MODULES</span><span class="o">=</span><span class="s2">&#34;radeon&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nouveau&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">MODULES</span><span class="o">=</span><span class="s2">&#34;nouveau&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s2">&#34;s/^MODULES=()/MODULES=(</span><span class="nv">$MODULES</span><span class="s2">)/&#34;</span> /etc/mkinitcpio.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;intel&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FASTBOOT</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$OPTIONS</span><span class="s2"> fastboot=1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FRAMEBUFFER_COMPRESSION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">OPTIONS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$OPTIONS</span><span class="s2"> enable_fbc=1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$OPTIONS</span><span class="s2">&#34;</span><span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options i915 </span><span class="nv">$OPTIONS</span><span class="s2">&#34;</span> &gt; /mnt/etc/modprobe.d/i915.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;lvm2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;btrfs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;btrfs-progs&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;f2fs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;f2fs-tools&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;reiserfs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;reiserfsprogs&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BOOTLOADER</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;systemd&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!systemd/systemd/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!sd-vconsole/sd-vconsole/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!sd-lvm2/sd-lvm2/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!sd-encrypt/sd-encrypt/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!udev/udev/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!usr/usr/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!keymap/keymap/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!consolefont/consolefont/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!lvm2/lvm2/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$HOOKS</span> <span class="p">|</span> sed <span class="s1">&#39;s/!encrypt/encrypt/&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOOKS</span><span class="o">=</span><span class="k">$(</span>sanitize_variable <span class="s2">&#34;</span><span class="nv">$HOOKS</span><span class="s2">&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s2">&#34;s/^HOOKS=(.*)</span>$<span class="s2">/HOOKS=(</span><span class="nv">$HOOKS</span><span class="s2">)/&#34;</span> /etc/mkinitcpio.conf&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s1">&#39;s/^#COMPRESSION=&#34;&#39;</span><span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span><span class="s1">&#39;&#34;/COMPRESSION=&#34;&#39;</span><span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span><span class="s1">&#39;&#34;/&#39;</span> /etc/mkinitcpio.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;bzip2&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;bzip2&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;lzma&#34;</span> -o <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;xz&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;xz&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;lzop&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;lzop&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;lz4&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;lz4&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KERNELS_COMPRESSION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;zstd&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;zstd&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> display_driver<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;display_driver()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DDX</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;intel&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-mesa&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;amdgpu&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-mesa&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;ati&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-mesa&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER</span><span class="o">=</span><span class="s2">&#34;nvidia&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-lts&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER</span><span class="o">=</span><span class="s2">&#34;nvidia-lts&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-dkms&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER</span><span class="o">=</span><span class="s2">&#34;nvidia-dkms&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER</span><span class="o">=</span><span class="s2">&#34;nvidia-390xx&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx-lts&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER</span><span class="o">=</span><span class="s2">&#34;nvidia-390xx-lts&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx-dkms&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER</span><span class="o">=</span><span class="s2">&#34;nvidia-390xx-dkms&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nouveau&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DRIVER_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-mesa&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER_DDX</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;intel&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DDX</span><span class="o">=</span><span class="s2">&#34;xf86-video-intel&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;amdgpu&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DDX</span><span class="o">=</span><span class="s2">&#34;xf86-video-amdgpu&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;ati&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DDX</span><span class="o">=</span><span class="s2">&#34;xf86-video-ati&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nouveau&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_DDX</span><span class="o">=</span><span class="s2">&#34;xf86-video-nouveau&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VULKAN</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;intel&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;vulkan-icd-loader vulkan-intel&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-vulkan-icd-loader lib32-vulkan-intel&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;amdgpu&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;vulkan-radeon&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-vulkan-radeon&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;ati&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;vulkan-radeon&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-vulkan-radeon&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-lts&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-dkms&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx-lts&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx-dkms&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;nvidia-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nouveau&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_VULKAN_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER_HARDWARE_ACCELERATION</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;intel&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER_HARDWARE_ACCELERATION_INTEL</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="nv">$DISPLAY_DRIVER_HARDWARE_ACCELERATION_INTEL</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;amdgpu&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;ati&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;mesa-vdpau&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-mesa-vdpau&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-lts&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-dkms&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx-lts&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia-390xx-dkms&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nouveau&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION</span><span class="o">=</span><span class="s2">&#34;libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="o">=</span><span class="s2">&#34;lib32-libva-mesa-driver&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;mesa </span><span class="nv">$PACKAGES_DRIVER</span><span class="s2"> </span><span class="nv">$PACKAGES_DDX</span><span class="s2"> </span><span class="nv">$PACKAGES_VULKAN</span><span class="s2"> </span><span class="nv">$PACKAGES_HARDWARE_ACCELERATION</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PACKAGES_MULTILIB</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;</span><span class="nv">$PACKAGES_DRIVER_MULTILIB</span><span class="s2"> </span><span class="nv">$PACKAGES_VULKAN_MULTILIB</span><span class="s2"> </span><span class="nv">$PACKAGES_HARDWARE_ACCELERATION_MULTILIB</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> kernels<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;kernels()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;linux-headers&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$KERNELS</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;</span><span class="nv">$KERNELS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> mkinitcpio<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;mkinitcpio()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt mkinitcpio -P&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> network<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;network()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;networkmanager&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> NetworkManager.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> virtualbox<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;virtualbox()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&#34;</span><span class="nv">$KERNELS</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;virtualbox-guest-utils&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;virtualbox-guest-utils virtualbox-guest-dkms&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> users<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;users()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;create_user <span class="s2">&#34;</span><span class="nv">$USER_NAME</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$USER_PASSWORD</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> U in <span class="si">${</span><span class="nv">ADDITIONAL_USERS</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">IFS</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nv">S</span><span class="o">=(</span><span class="si">${</span><span class="nv">U</span><span class="si">}</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">USER</span><span class="o">=</span><span class="si">${</span><span class="nv">S</span><span class="p">[0]</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD</span><span class="o">=</span><span class="si">${</span><span class="nv">S</span><span class="p">[1]</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;create_user <span class="s2">&#34;</span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">PASSWORD</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">	arch-chroot /mnt sed -i <span class="s1">&#39;s/# %wheel ALL=(ALL) ALL/%wheel ALL=(ALL) ALL/&#39;</span> /etc/sudoers&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;xdg-user-dirs&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt; &#34;/mnt/etc/pam.d/nss-auth&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">#%PAM-1.0&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">auth&nbsp;&nbsp;&nbsp;&nbsp; sufficient pam_unix.so try_first_pass nullok&#10;</span></span></span><span class="line"><span class="cl"><span class="s">auth&nbsp;&nbsp;&nbsp;&nbsp; sufficient pam_systemd_home.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">auth&nbsp;&nbsp;&nbsp;&nbsp; required   pam_deny.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">account  sufficient pam_unix.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">account  sufficient pam_systemd_home.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">account  required   pam_deny.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">password sufficient pam_unix.so try_first_pass nullok sha512 shadow&#10;</span></span></span><span class="line"><span class="cl"><span class="s">password sufficient pam_systemd_home.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">password required   pam_deny.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt; &#34;/mnt/etc/pam.d/system-auth&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">#%PAM-1.0&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">auth&nbsp;&nbsp;&nbsp;&nbsp;  substack   nss-auth&#10;</span></span></span><span class="line"><span class="cl"><span class="s">auth&nbsp;&nbsp;&nbsp;&nbsp;  optional   pam_permit.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">auth&nbsp;&nbsp;&nbsp;&nbsp;  required   pam_env.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">account   substack   nss-auth&#10;</span></span></span><span class="line"><span class="cl"><span class="s">account   optional   pam_permit.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">account   required   pam_time.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">password  substack   nss-auth&#10;</span></span></span><span class="line"><span class="cl"><span class="s">password  optional   pam_permit.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">session   required  pam_limits.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">session   optional  pam_systemd_home.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">session   required  pam_unix.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">session   optional  pam_permit.so&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> create_user<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">USER</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> systemd-homed.service&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;create_user_homectl <span class="nv">$USER</span> <span class="nv">$PASSWORD</span>&#10;</span></span><span class="line"><span class="cl"><span class="c1">#&nbsp;&nbsp;&nbsp;&nbsp;   create_user_useradd $USER $PASSWORD</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;create_user_useradd <span class="nv">$USER</span> <span class="nv">$PASSWORD</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> create_user_homectl<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">USER</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STORAGE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CIFS_DOMAIN</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CIFS_USERNAME</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CIFS_SERVICE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">TZ</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="si">${</span><span class="nv">TIMEZONE</span><span class="si">}</span> <span class="p">|</span> sed <span class="s2">&#34;s/\/usr\/share\/zoneinfo\///g&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">L</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="si">${</span><span class="nv">LOCALE_CONF</span><span class="p">[0]</span><span class="si">}</span> <span class="p">|</span> sed <span class="s2">&#34;s/LANG=//g&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">IMAGE_PATH</span><span class="o">=</span><span class="s2">&#34;/home/</span><span class="nv">$USER</span><span class="s2">.homedir&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">HOME_PATH</span><span class="o">=</span><span class="s2">&#34;/home/</span><span class="nv">$USER</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STORAGE</span><span class="o">=</span><span class="s2">&#34;--storage=</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;cifs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CIFS_DOMAIN</span><span class="o">=</span><span class="s2">&#34;--cifs-domain=</span><span class="nv">$SYSTEMD_HOMED_CIFS_DOMAIN</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CIFS_USERNAME</span><span class="o">=</span><span class="s2">&#34;--cifs-user-name=</span><span class="nv">$USER</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CIFS_SERVICE</span><span class="o">=</span><span class="s2">&#34;--cifs-service=</span><span class="nv">$SYSTEMD_HOMED_CIFS_SERVICE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED_STORAGE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;luks&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">IMAGE_PATH</span><span class="o">=</span><span class="s2">&#34;/home/</span><span class="nv">$USER</span><span class="s2">.home&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">### something missing, inside alis this not works, after install the user is in state infixated</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">### after install and reboot this commands work</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;systemctl start systemd-homed.service&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">set</span> +e&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;homectl create <span class="s2">&#34;</span><span class="nv">$USER</span><span class="s2">&#34;</span> --enforce-password-policy<span class="o">=</span>no --timezone<span class="o">=</span><span class="nv">$TZ</span> --language<span class="o">=</span><span class="nv">$L</span> <span class="nv">$STORAGE</span> <span class="nv">$CIFS_DOMAIN</span> <span class="nv">$CIFS_USERNAME</span> <span class="nv">$CIFS_SERVICE</span> -G wheel,storage,optical&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;homectl activate <span class="s2">&#34;</span><span class="nv">$USER</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">set</span> -e&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cp -a <span class="s2">&#34;</span><span class="nv">$IMAGE_PATH</span><span class="s2">/.&#34;</span> <span class="s2">&#34;/mnt</span><span class="nv">$IMAGE_PATH</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cp -a <span class="s2">&#34;</span><span class="nv">$HOME_PATH</span><span class="s2">/.&#34;</span> <span class="s2">&#34;/mnt</span><span class="nv">$HOME_PATH</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cp -a <span class="s2">&#34;/var/lib/systemd/home/.&#34;</span> <span class="s2">&#34;/mnt/var/lib/systemd/home/&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> create_user_useradd<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">USER</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">PASSWORD</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt useradd -m -G wheel,storage,optical -s /bin/bash <span class="nv">$USER</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">printf</span> <span class="s2">&#34;</span><span class="nv">$PASSWORD</span><span class="s2">\n</span><span class="nv">$PASSWORD</span><span class="s2">&#34;</span> <span class="p">|</span> arch-chroot /mnt passwd <span class="nv">$USER</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> bootloader<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;bootloader()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">BOOTLOADER_ALLOW_DISCARDS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$CPU_VENDOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;intel&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;intel-ucode&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$CPU_VENDOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;amd&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;amd-ucode&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$LVM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CMDLINE_LINUX_ROOT</span><span class="o">=</span><span class="s2">&#34;root=</span><span class="nv">$DEVICE_ROOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CMDLINE_LINUX_ROOT</span><span class="o">=</span><span class="s2">&#34;root=PARTUUID=</span><span class="nv">$PARTUUID_ROOT</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$DEVICE_TRIM</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">BOOTLOADER_ALLOW_DISCARDS</span><span class="o">=</span><span class="s2">&#34;:allow-discards&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&#34;cryptdevice=PARTUUID=</span><span class="nv">$PARTUUID_ROOT</span><span class="s2">:</span><span class="nv">$LUKS_DEVICE_NAME$BOOTLOADER_ALLOW_DISCARDS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$FILE_SYSTEM_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;btrfs&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> rootflags=subvol=root&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$KMS</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;nvidia&#34;</span> <span class="p">|</span> <span class="s2">&#34;nvidia-390xx&#34;</span> <span class="p">|</span> <span class="s2">&#34;nvidia-390xx-lts&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> nvidia-drm.modeset=1&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$KERNELS_PARAMETERS</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$KERNELS_PARAMETERS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$BOOTLOADER</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;grub&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bootloader_grub&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;refind&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bootloader_refind&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;systemd&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bootloader_systemd&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl set-default multi-user.target&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> bootloader_grub<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;grub dosfstools&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s1">&#39;s/GRUB_DEFAULT=0/GRUB_DEFAULT=saved/&#39;</span> /etc/default/grub&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s1">&#39;s/#GRUB_SAVEDEFAULT=&#34;true&#34;/GRUB_SAVEDEFAULT=&#34;true&#34;/&#39;</span> /etc/default/grub&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i -E <span class="s1">&#39;s/GRUB_CMDLINE_LINUX_DEFAULT=&#34;(.*) quiet&#34;/GRUB_CMDLINE_LINUX_DEFAULT=&#34;\1&#34;/&#39;</span> /etc/default/grub&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s1">&#39;s/GRUB_CMDLINE_LINUX=&#34;&#34;/GRUB_CMDLINE_LINUX=&#34;&#39;</span><span class="s2">&#34;</span><span class="nv">$CMDLINE_LINUX</span><span class="s2">&#34;</span><span class="s1">&#39;&#34;/&#39;</span> /etc/default/grub&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span> &gt;&gt; /mnt/etc/default/grub&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;# alis&#34;</span> &gt;&gt; /mnt/etc/default/grub&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;GRUB_DISABLE_SUBMENU=y&#34;</span> &gt;&gt; /mnt/etc/default/grub&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;uefi&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;efibootmgr&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt grub-install --target<span class="o">=</span>x86_64-efi --bootloader-id<span class="o">=</span>grub --efi-directory<span class="o">=</span><span class="nv">$ESP_DIRECTORY</span> --recheck&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">#arch-chroot /mnt efibootmgr --create --disk $DEVICE --part $PARTITION_BOOT_NUMBER --loader /EFI/grub/grubx64.efi --label &#34;GRUB Boot Manager&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$BIOS_TYPE</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;bios&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt grub-install --target<span class="o">=</span>i386-pc --recheck <span class="nv">$DEVICE</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt grub-mkconfig -o <span class="s2">&#34;</span><span class="nv">$BOOT_DIRECTORY</span><span class="s2">/grub/grub.cfg&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -n <span class="s2">&#34;\EFI\grub\grubx64.efi&#34;</span> &gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/startup.nsh&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> bootloader_refind<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;refind&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt refind-install&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt rm /boot/refind_linux.conf&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s1">&#39;s/^timeout.*/timeout 5/&#39;</span> <span class="s2">&#34;</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/EFI/refind/refind.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sed -i <span class="s1">&#39;s/^#scan_all_linux_kernels.*/scan_all_linux_kernels false/&#39;</span> <span class="s2">&#34;</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/EFI/refind/refind.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1">#arch-chroot /mnt sed -i &#39;s/^#default_selection &#34;+,bzImage,vmlinuz&#34;/default_selection &#34;+,bzImage,vmlinuz&#34;/&#39; &#34;$ESP_DIRECTORY/EFI/refind/refind.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">REFIND_MICROCODE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$CPU_VENDOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;intel&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">REFIND_MICROCODE</span><span class="o">=</span><span class="s2">&#34;initrd=/intel-ucode.img&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$CPU_VENDOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;amd&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">REFIND_MICROCODE</span><span class="o">=</span><span class="s2">&#34;initrd=/amd-ucode.img&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt;&gt; &#34;/mnt$ESP_DIRECTORY/EFI/refind/refind.conf&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s"># alis&#10;</span></span></span><span class="line"><span class="cl"><span class="s">menuentry &#34;Arch Linux&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;volume   $PARTUUID_BOOT&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;loader   /vmlinuz-linux&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;initrd   /initramfs-linux.img&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;icon&nbsp;&nbsp;&nbsp;&nbsp; /EFI/refind/icons/os_arch.png&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;options  &#34;$REFIND_MICROCODE $CMDLINE_LINUX_ROOT rw $CMDLINE_LINUX&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot using fallback initramfs&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  initrd /initramfs-linux-fallback.img&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot to terminal&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  add_options &#34;systemd.unit=multi-user.target&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="nv">$KERNELS</span> <span class="o">=</span>~ .*linux-lts.* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt;&gt; &#34;/mnt$ESP_DIRECTORY/EFI/refind/refind.conf&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">menuentry &#34;Arch Linux (lts)&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;volume   $PARTUUID_BOOT&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;loader   /vmlinuz-linux-lts&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;initrd   /initramfs-linux-lts.img&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;icon&nbsp;&nbsp;&nbsp;&nbsp; /EFI/refind/icons/os_arch.png&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;options  &#34;$REFIND_MICROCODE $CMDLINE_LINUX_ROOT rw $CMDLINE_LINUX&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot using fallback initramfs&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  initrd /initramfs-linux-lts-fallback.img&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot to terminal&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  add_options &#34;systemd.unit=multi-user.target&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="nv">$KERNELS</span> <span class="o">=</span>~ .*linux-hardened.* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt;&gt; &#34;/mnt$ESP_DIRECTORY/EFI/refind/refind.conf&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">menuentry &#34;Arch Linux (hardened)&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;volume   $PARTUUID_BOOT&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;loader   /vmlinuz-linux-hardened&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;initrd   /initramfs-linux-hardened.img&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;icon&nbsp;&nbsp;&nbsp;&nbsp; /EFI/refind/icons/os_arch.png&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;options  &#34;$REFIND_MICROCODE $CMDLINE_LINUX_ROOT rw $CMDLINE_LINUX&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot using fallback initramfs&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  initrd /initramfs-linux-lts-fallback.img&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot to terminal&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  add_options &#34;systemd.unit=multi-user.target&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="nv">$KERNELS</span> <span class="o">=</span>~ .*linux-zen.* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt;&gt; &#34;/mnt$ESP_DIRECTORY/EFI/refind/refind.conf&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">menuentry &#34;Arch Linux (zen)&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;volume   $PARTUUID_BOOT&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;loader   /vmlinuz-linux-zen&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;initrd   /initramfs-linux-zen.img&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;icon&nbsp;&nbsp;&nbsp;&nbsp; /EFI/refind/icons/os_arch.png&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;options  &#34;$REFIND_MICROCODE $CMDLINE_LINUX_ROOT rw $CMDLINE_LINUX&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot using fallback initramfs&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  initrd /initramfs-linux-lts-fallback.img&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;submenuentry &#34;Boot to terminal&#34; {&#10;</span></span></span><span class="line"><span class="cl"><span class="s">	&nbsp;&nbsp;&nbsp;&nbsp;  add_options &#34;systemd.unit=multi-user.target&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&nbsp;&nbsp;&nbsp;&nbsp;}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">}&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -n <span class="s2">&#34;\EFI\refind\refind_x64.efi&#34;</span> &gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/startup.nsh&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> bootloader_systemd<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemd-machine-id-setup&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt bootctl --path<span class="o">=</span><span class="s2">&#34;</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">&#34;</span> install&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt mkdir -p <span class="s2">&#34;</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt mkdir -p <span class="s2">&#34;</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt; &#34;/mnt$ESP_DIRECTORY/loader/loader.conf&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s"># alis&#10;</span></span></span><span class="line"><span class="cl"><span class="s">timeout 5&#10;</span></span></span><span class="line"><span class="cl"><span class="s">default archlinux&#10;</span></span></span><span class="line"><span class="cl"><span class="s">editor 0&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt mkdir -p <span class="s2">&#34;/etc/pacman.d/hooks/&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt; &#34;/mnt/etc/pacman.d/hooks/systemd-boot.hook&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">[Trigger]&#10;</span></span></span><span class="line"><span class="cl"><span class="s">Type = Package&#10;</span></span></span><span class="line"><span class="cl"><span class="s">Operation = Upgrade&#10;</span></span></span><span class="line"><span class="cl"><span class="s">Target = systemd&#10;</span></span></span><span class="line"><span class="cl"><span class="s">&#10;</span></span></span><span class="line"><span class="cl"><span class="s">[Action]&#10;</span></span></span><span class="line"><span class="cl"><span class="s">Description = Updating systemd-boot&#10;</span></span></span><span class="line"><span class="cl"><span class="s">When = PostTransaction&#10;</span></span></span><span class="line"><span class="cl"><span class="s">Exec = /usr/bin/bootctl update&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SYSTEMD_MICROCODE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SYSTEMD_OPTIONS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$CPU_VENDOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;intel&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SYSTEMD_MICROCODE</span><span class="o">=</span><span class="s2">&#34;/intel-ucode.img&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$CPU_VENDOR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;amd&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SYSTEMD_MICROCODE</span><span class="o">=</span><span class="s2">&#34;/amd-ucode.img&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;   <span class="nv">SYSTEMD_OPTIONS</span><span class="o">=</span><span class="s2">&#34;luks.name=</span><span class="nv">$UUID_ROOT</span><span class="s2">=</span><span class="nv">$LUKS_DEVICE_NAME</span><span class="s2"> luks.options=discard&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (terminal)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> systemd.unit=multi-user.target </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (fallback)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-fallback.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-fallback.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="nv">$KERNELS</span> <span class="o">=</span>~ .*linux-lts.* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (lts)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-lts&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-lts.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-lts.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (lts, terminal)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-lts&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-lts.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-lts.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> systemd.unit=multi-user.target </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (lts-fallback)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-lts&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$CPU_INTEL</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> -a <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> !<span class="o">=</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-lts-fallback.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-lts-fallback.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-lts-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="nv">$KERNELS</span> <span class="o">=</span>~ .*linux-hardened.* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (hardened)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-hardened&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-hardened.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-hardened.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (hardened, terminal)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-hardened&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-hardened.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-hardened.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> systemd.unit=multi-user.target </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (hardened-fallback)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-hardened&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-hardened-fallback.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-hardened-fallback.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-hardened-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="nv">$KERNELS</span> <span class="o">=</span>~ .*linux-zen.* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (zen)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-zen&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-zen.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-zen.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (zen, terminal)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-zen&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-zen.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-zen.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> systemd.unit=multi-user.target </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-terminal.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;title Arch Linux (zen-fallback)&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;efi /vmlinuz-linux-zen&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd </span><span class="nv">$SYSTEMD_MICROCODE</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;initrd /initramfs-linux-zen-fallback.img&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;options initrd=initramfs-linux-zen-fallback.img </span><span class="nv">$CMDLINE_LINUX_ROOT</span><span class="s2"> rw </span><span class="nv">$CMDLINE_LINUX</span><span class="s2"> </span><span class="nv">$SYSTEMD_OPTIONS</span><span class="s2">&#34;</span> &gt;&gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/loader/entries/archlinux-zen-fallback.conf&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -n <span class="s2">&#34;\EFI\systemd\systemd-bootx64.efi&#34;</span> &gt; <span class="s2">&#34;/mnt</span><span class="nv">$ESP_DIRECTORY</span><span class="s2">/startup.nsh&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> custom_shell<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;custom_shell()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CUSTOM_SHELL_PATH</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$CUSTOM_SHELL</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;zsh&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;zsh&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CUSTOM_SHELL_PATH</span><span class="o">=</span><span class="s2">&#34;/usr/bin/zsh&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;dash&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;dash&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CUSTOM_SHELL_PATH</span><span class="o">=</span><span class="s2">&#34;/usr/bin/dash&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;fish&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;fish&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CUSTOM_SHELL_PATH</span><span class="o">=</span><span class="s2">&#34;/usr/bin/fish&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$CUSTOM_SHELL_PATH</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;custom_shell_user <span class="s2">&#34;root&#34;</span> <span class="nv">$CUSTOM_SHELL_PATH</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;custom_shell_user <span class="s2">&#34;</span><span class="nv">$USER_NAME</span><span class="s2">&#34;</span> <span class="nv">$CUSTOM_SHELL_PATH</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> U in <span class="si">${</span><span class="nv">ADDITIONAL_USERS</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">IFS</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nv">S</span><span class="o">=(</span><span class="si">${</span><span class="nv">U</span><span class="si">}</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">USER</span><span class="o">=</span><span class="si">${</span><span class="nv">S</span><span class="p">[0]</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;custom_shell_user <span class="s2">&#34;</span><span class="nv">$USER</span><span class="s2">&#34;</span> <span class="nv">$CUSTOM_SHELL_PATH</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> custom_shell_user<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">USER</span><span class="o">=</span><span class="nv">$1</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">CUSTOM_SHELL_PATH</span><span class="o">=</span><span class="nv">$2</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$SYSTEMD_HOMED</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;homectl update --shell<span class="o">=</span><span class="nv">$CUSTOM_SHELL_PATH</span> <span class="nv">$USER</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt chsh -s <span class="nv">$CUSTOM_SHELL_PATH</span> <span class="nv">$USER</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;print_step <span class="s2">&#34;desktop_environment()&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">case</span> <span class="s2">&#34;</span><span class="nv">$DESKTOP_ENVIRONMENT</span><span class="s2">&#34;</span> in&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;gnome&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_gnome&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;kde&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_kde&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;xfce&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_xfce&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;mate&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_mate&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;cinnamon&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_cinnamon&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;lxde&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_lxde&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;i3-wm&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_i3_wm&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="s2">&#34;i3-gaps&#34;</span> <span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;desktop_environment_i3_gaps&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="p">;;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">esac</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl set-default graphical.target&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_gnome<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;gnome&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> gdm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_kde<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;plasma-meta plasma-wayland-session kde-applications-meta&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> sddm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_xfce<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;xfce4 xfce4-goodies lightdm lightdm-gtk-greeter xorg-server&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> lightdm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_mate<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;mate mate-extra lightdm lightdm-gtk-greeter xorg-server&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> lightdm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_cinnamon<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;cinnamon lightdm lightdm-gtk-greeter xorg-server&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> lightdm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_lxde<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;lxde lxdm&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> lxdm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_i3_wm<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;i3-wm i3blocks i3lock i3status dmenu rxvt-unicode lightdm lightdm-gtk-greeter xorg-server&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> lightdm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> desktop_environment_i3_gaps<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;i3-gaps i3blocks i3lock i3status dmenu rxvt-unicode lightdm lightdm-gtk-greeter xorg-server&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> lightdm.service&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> packages<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$PACKAGES_INSTALL</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="o">(</span><span class="nv">USER_NAME</span><span class="o">=</span><span class="nv">$USER_NAME</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="nv">USER_PASSWORD</span><span class="o">=</span><span class="nv">$USER_PASSWORD</span> <span class="se">\&#10;</span></span></span><span class="line"><span class="cl"><span class="se"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;./alis-packages.sh<span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> vagrant<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;pacman_install <span class="s2">&#34;openssh&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;create_user <span class="s2">&#34;vagrant&#34;</span> <span class="s2">&#34;vagrant&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nb">enable</span> sshd.service&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt ssh-keygen -A&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt sshd -t&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> systemd_units<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">IFS</span><span class="o">=</span><span class="s1">&#39; &#39;</span> <span class="nv">UNITS</span><span class="o">=(</span><span class="nv">$SYSTEMD_UNITS</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> U in <span class="si">${</span><span class="nv">UNITS</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ACTION</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">UNIT</span><span class="o">=</span><span class="si">${</span><span class="nv">U</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="nv">$UNIT</span> <span class="o">==</span> -* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ACTION</span><span class="o">=</span><span class="s2">&#34;disable&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">UNIT</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$UNIT</span> <span class="p">|</span> sed <span class="s2">&#34;s/^-//g&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">elif</span> <span class="o">[[</span> <span class="nv">$UNIT</span> <span class="o">==</span> +* <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ACTION</span><span class="o">=</span><span class="s2">&#34;enable&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">UNIT</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="nv">$UNIT</span> <span class="p">|</span> sed <span class="s2">&#34;s/^+//g&#34;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">elif</span> <span class="o">[[</span> <span class="nv">$UNIT</span> <span class="o">=</span>~ ^<span class="o">[</span>a-zA-Z0-9<span class="o">]</span>+ <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ACTION</span><span class="o">=</span><span class="s2">&#34;enable&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">UNIT</span><span class="o">=</span><span class="nv">$UNIT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ACTION</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt systemctl <span class="nv">$ACTION</span> <span class="nv">$UNIT</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> end<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="si">${</span><span class="nv">GREEN</span><span class="si">}</span><span class="s2">Arch Linux installed successfully&#34;</span><span class="s1">&#39;!&#39;</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">NC</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$REBOOT</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">REBOOT</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">set</span> +e&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> <span class="o">((</span> <span class="nv">i</span> <span class="o">=</span> 15<span class="p">;</span> i &gt;<span class="o">=</span> 1<span class="p">;</span> i-- <span class="o">))</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">read</span> -r -s -n <span class="m">1</span> -t <span class="m">1</span> -p <span class="s2">&#34;Rebooting in </span><span class="nv">$i</span><span class="s2"> seconds... Press any key to abort.&#34;</span><span class="s1">$&#39;\n&#39;</span> KEY&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> -eq <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">REBOOT</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">break</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">set</span> -e&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$REBOOT</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Rebooting...&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;copy_logs&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_reboot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$ASCIINEMA</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Reboot aborted. You will must terminate asciinema recording and do a explicit reboot (exit, ./alis-reboot.sh).&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Reboot aborted. You will must do a explicit reboot (./alis-reboot.sh).&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$ASCIINEMA</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;No reboot. You will must terminate asciinema recording and do a explicit reboot (exit, ./alis-reboot.sh).&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;No reboot. You will must do a explicit reboot (./alis-reboot.sh).&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> pacman_install<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ERROR</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">set</span> +e&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">IFS</span><span class="o">=</span><span class="s1">&#39; &#39;</span> <span class="nv">PACKAGES</span><span class="o">=(</span><span class="nv">$1</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> VARIABLE in <span class="o">{</span>1..5<span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arch-chroot /mnt pacman -Syu --noconfirm --needed <span class="si">${</span><span class="nv">PACKAGES</span><span class="p">[@]</span><span class="si">}</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="nv">$?</span> <span class="o">==</span> <span class="m">0</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ERROR</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">break</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sleep <span class="m">10</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">set</span> -e&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$ERROR</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">exit</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> copy_logs<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ESCAPED_LUKS_PASSWORD</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LUKS_PASSWORD</span><span class="si">}</span><span class="s2">&#34;</span> <span class="p">|</span> sed <span class="s1">&#39;s/[.[\*^$()+?{|]/[\\&amp;]/g&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ESCAPED_ROOT_PASSWORD</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">ROOT_PASSWORD</span><span class="si">}</span><span class="s2">&#34;</span> <span class="p">|</span> sed <span class="s1">&#39;s/[.[\*^$()+?{|]/[\\&amp;]/g&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ESCAPED_USER_PASSWORD</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">USER_PASSWORD</span><span class="si">}</span><span class="s2">&#34;</span> <span class="p">|</span> sed <span class="s1">&#39;s/[.[\*^$()+?{|]/[\\&amp;]/g&#39;</span><span class="k">)</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -f <span class="s2">&#34;</span><span class="nv">$CONF_FILE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SOURCE_FILE</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$CONF_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">FILE</span><span class="o">=</span><span class="s2">&#34;/mnt/var/log/alis/</span><span class="nv">$CONF_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir -p /mnt/var/log/alis&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cp <span class="s2">&#34;</span><span class="nv">$SOURCE_FILE</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chown root:root <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chmod <span class="m">600</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_LUKS_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_ROOT_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_ROOT_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_USER_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_USER_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -f <span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SOURCE_FILE</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">FILE</span><span class="o">=</span><span class="s2">&#34;/mnt/var/log/alis/</span><span class="nv">$LOG_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir -p /mnt/var/log/alis&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cp <span class="s2">&#34;</span><span class="nv">$SOURCE_FILE</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chown root:root <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chmod <span class="m">600</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_LUKS_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_ROOT_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_ROOT_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_USER_PASWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_USER_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -f <span class="s2">&#34;</span><span class="nv">$ASCIINEMA_FILE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">SOURCE_FILE</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$ASCIINEMA_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">FILE</span><span class="o">=</span><span class="s2">&#34;/mnt/var/log/alis/</span><span class="nv">$ASCIINEMA_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mkdir -p /mnt/var/log/alis&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cp <span class="s2">&#34;</span><span class="nv">$SOURCE_FILE</span><span class="s2">&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chown root:root <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chmod <span class="m">600</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_LUKS_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_LUKS_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_ROOT_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_ROOT_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$ESCAPED_USER_PASSWORD</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sed -i <span class="s2">&#34;s/</span><span class="si">${</span><span class="nv">ESCAPED_USER_PASSWORD</span><span class="si">}</span><span class="s2">/******/g&#34;</span> <span class="s2">&#34;</span><span class="nv">$FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> do_reboot<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;umount -R /mnt/boot&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;umount -R /mnt&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;reboot&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> print_step<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STEP</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> -e <span class="s2">&#34;</span><span class="si">${</span><span class="nv">LIGHT_BLUE</span><span class="si">}</span><span class="s2"># </span><span class="si">${</span><span class="nv">STEP</span><span class="si">}</span><span class="s2"> step</span><span class="si">${</span><span class="nv">NC</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> execute_step<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STEP</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STEPS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$2</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[[</span> <span class="s2">&#34; </span><span class="nv">$STEPS</span><span class="s2"> &#34;</span> <span class="o">=</span>~ <span class="s2">&#34; </span><span class="nv">$STEP</span><span class="s2"> &#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">eval</span> <span class="nv">$STEP</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;save_globals&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">else</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Skipping </span><span class="nv">$STEP</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> load_globals<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -f <span class="s2">&#34;</span><span class="nv">$GLOBALS_FILE</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">source</span> <span class="s2">&#34;</span><span class="nv">$GLOBALS_FILE</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> save_globals<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;cat <span class="s">&lt;&lt;EOT &gt; $GLOBALS_FILE&#10;</span></span></span><span class="line"><span class="cl"><span class="s">ASCIINEMA=&#34;$ASCIINEMA&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">BIOS_TYPE=&#34;$BIOS_TYPE&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">PARTITION_BOOT=&#34;$PARTITION_BOOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">PARTITION_ROOT=&#34;$PARTITION_ROOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">PARTITION_BOOT_NUMBER=&#34;$PARTITION_BOOT_NUMBER&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">PARTITION_ROOT_NUMBER=&#34;$PARTITION_ROOT_NUMBER&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">DEVICE_ROOT=&#34;$DEVICE_ROOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">DEVICE_LVM=&#34;$DEVICE_LVM&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">LUKS_DEVICE_NAME=&#34;$LUKS_DEVICE_NAME&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">LVM_VOLUME_GROUP=&#34;$LVM_VOLUME_GROUP&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">LVM_VOLUME_LOGICAL=&#34;$LVM_VOLUME_LOGICAL&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">SWAPFILE=&#34;$SWAPFILE&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">BOOT_DIRECTORY=&#34;$BOOT_DIRECTORY&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">ESP_DIRECTORY=&#34;$ESP_DIRECTORY&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">UUID_BOOT=&#34;$UUID_BOOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">UUID_ROOT=&#34;$UUID_ROOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">PARTUUID_BOOT=&#34;$PARTUUID_BOOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">PARTUUID_ROOT=&#34;$PARTUUID_ROOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">DEVICE_SATA=&#34;$DEVICE_SATA&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">DEVICE_NVME=&#34;$DEVICE_NVME&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">DEVICE_MMC=&#34;$DEVICE_MMC&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">CPU_VENDOR=&#34;$CPU_VENDOR&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">VIRTUALBOX=&#34;$VIRTUALBOX&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">CMDLINE_LINUX_ROOT=&#34;$CMDLINE_LINUX_ROOT&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">CMDLINE_LINUX=&#34;$CMDLINE_LINUX&#34;&#10;</span></span></span><span class="line"><span class="cl"><span class="s">EOT</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl"><span class="k">function</span> main<span class="o">()</span> <span class="o">{</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">ALL_STEPS</span><span class="o">=(</span><span class="s2">&#34;configuration_install&#34;</span> <span class="s2">&#34;sanitize_variables&#34;</span> <span class="s2">&#34;check_variables&#34;</span> <span class="s2">&#34;warning&#34;</span> <span class="s2">&#34;init&#34;</span> <span class="s2">&#34;facts&#34;</span> <span class="s2">&#34;checks&#34;</span> <span class="s2">&#34;prepare&#34;</span> <span class="s2">&#34;partition&#34;</span> <span class="s2">&#34;install&#34;</span> <span class="s2">&#34;configuration&#34;</span> <span class="s2">&#34;mkinitcpio_configuration&#34;</span> <span class="s2">&#34;display_driver&#34;</span> <span class="s2">&#34;kernels&#34;</span> <span class="s2">&#34;mkinitcpio&#34;</span> <span class="s2">&#34;network&#34;</span> <span class="s2">&#34;virtualbox&#34;</span> <span class="s2">&#34;users&#34;</span> <span class="s2">&#34;bootloader&#34;</span> <span class="s2">&#34;custom_shell&#34;</span> <span class="s2">&#34;desktop_environment&#34;</span> <span class="s2">&#34;packages&#34;</span> <span class="s2">&#34;vagrant&#34;</span> <span class="s2">&#34;systemd_units&#34;</span> <span class="s2">&#34;end&#34;</span><span class="o">)</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STEP</span><span class="o">=</span><span class="s2">&#34;configuration_install&#34;</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STEP</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$1</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$STEP</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;steps&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nb">echo</span> <span class="s2">&#34;Steps: </span><span class="nv">$ALL_STEPS</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">return</span> <span class="m">0</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># get step execute from</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">FOUND</span><span class="o">=</span><span class="s2">&#34;false&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STEPS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">for</span> S in <span class="si">${</span><span class="nv">ALL_STEPS</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="nv">$FOUND</span> <span class="o">=</span> <span class="s2">&#34;true&#34;</span> -o <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEP</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">S</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">FOUND</span><span class="o">=</span><span class="s2">&#34;true&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="nv">STEPS</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$STEPS</span><span class="s2"> </span><span class="nv">$S</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">done</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="c1"># execute steps</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;load_globals&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;configuration_install&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;sanitize_variables&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;check_variables&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;warning&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;init&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;facts&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;checks&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;prepare&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;partition&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;install&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;configuration&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;mkinitcpio_configuration&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$DISPLAY_DRIVER</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;display_driver&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;kernels&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;mkinitcpio&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;network&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VIRTUALBOX</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;virtualbox&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;users&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;bootloader&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$CUSTOM_SHELL</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;custom_shell&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> -n <span class="s2">&#34;</span><span class="nv">$DESKTOP_ENVIRONMENT</span><span class="s2">&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;desktop_environment&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;packages&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">if</span> <span class="o">[</span> <span class="s2">&#34;</span><span class="nv">$VAGRANT</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;true&#34;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;vagrant&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;<span class="k">fi</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;systemd_units&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl">&nbsp;&nbsp;&nbsp;&nbsp;execute_step <span class="s2">&#34;end&#34;</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">STEPS</span><span class="si">}</span><span class="s2">&#34;</span>&#10;</span></span><span class="line"><span class="cl"><span class="o">}</span>&#10;</span></span><span class="line"><span class="cl">&#10;</span></span><span class="line"><span class="cl">main <span class="nv">$@</span>&#10;</span></span></code></pre></td></tr></table>&#10;</div>&#10;</div>
    <div class="highlight-meta">
        <span>alis.sh</span>
    </div>
</div>
<div class="alert alert-secondary sourcecode fs-6">
    <amp-img src="/blog-bitix/assets/images/icons/terminal.svg" width="64" height="64" alt="Terminal" title="Terminal" class="lozad sourcecode-icon"></amp-img>
    <p>
            You can download the <a href="https://github.com/picodotdev/alis/tree/master/">example complete source code</a> from the Blog Bitix examples repository hosted on GitHub.</p>
</div>

    </div>

    
      <div class="videoo">
        
      </div>
    

    <p class="information">
      
    </p>

    
  </article>
        <div>
          <hr>
        </div>
        

        
<div class="row">
  <div class="col-md-12">
    <div class="sharethis sharethis-text">
      Share the article:
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <div class="sharethis sharethis-inline-share-buttons"></div>
  </div>
</div>


        
        
    
    

        <div class="row">
          <div class="col-12 adblock-container-billboard mt-3 mb-3 p-0">
            <span id="pageBottom"></span>
            <amp-ad width="100vw" height="280"
    type="adsense"
    data-ad-client="ca-pub-3533636310991304"
    data-ad-slot="4052324337"
    data-auto-format="rspv"
    data-full-width="">
    <div overflow=""></div>
</amp-ad>

          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12">
        <hr>
      </div>
    </div>
    





<footer>
  <div class="row">
    <div class="col-12 col-sm-4">
      <p><strong>Blog Bitix</strong></p>
      <p>Blog sobre al lenguaje de programación Java y la distribución GNU/Linux que uso habitualmente, Arch Linux, lo que aprendo sobre el software libre, la programación web y otros temas relacionados con la tecnología y la informática. El contenido puede contener trazas de asuntos fuera de tema.</p>
      <p>Publicando de uno a tres artículos únicos a la semana desde el año 2010.</p>
    </div>
    <div class="col-12 col-sm-4 text-center menu">
      <ul class="list-unstyled">
        <li><a href="/blog-bitix/tags/java/index-amp.html">Java</a></li>
        <li><a href="/blog-bitix/tags/gnu-linux/index-amp.html">GNU/Linux</a></li>
        <li><a href="/blog-bitix/tags/javascript/index-amp.html">JavaScript</a></li>
        <li><a href="/blog-bitix/tags/tapestry/index-amp.html">Tapestry</a></li>
        <li><a href="/blog-bitix/archive/index-amp.html">Archivo y hemeroteca</a></li>
        <li><a href="/blog-bitix/pages/links/index-amp.html">Enlaces</a></li>
        <li><a href="/blog-bitix/pages/advertising/index-amp.html">Advertising</a></li>
        <li><a href="/blog-bitix/pages/advertising/index-amp.html">Publicidad</a></li>
        <li><a href="/blog-bitix/pages/donate/index-amp.html">Donaciones</a></li>
        <li><a href="/blog-bitix/pages/about/index-amp.html">Acerca de...</a></li>
        
      </ul>
    </div>
    <div class="col-12 col-sm-4 text-center links">
      
        <a href="https://picodotdev.github.io/blog-bitix/index.xml" title="¡Suscríbete a Blog Bitix!"><amp-img src="/blog-bitix/assets/images/rss.svg" width="50" height="50" class="icon" alt="rss"></amp-img></a>
      
      
        <a href="https://twitter.com/picodotdev/" title="¡Sígueme en twitter!"><amp-img src="/blog-bitix/assets/images/twitter.svg" width="50" height="50" class="icon" alt="twitter"></amp-img></a>
      
      
      
        <a href="https://github.com/picodotdev/blog-ejemplos/" title="¡Obtén el código fuente de los ejemplos!"><amp-img src="/blog-bitix/assets/images/github.svg" width="50" height="50" class="icon" alt="github"></amp-img></a>
      
      
      
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      Copyleft <span class="copyleft">&copy;</span> 2022 - <a href="https://creativecommons.org/licenses/by-sa/4.0/" rel="nofollow"><amp-img src="https://licensebuttons.net/l/by-sa/4.0/80x15.png" width="80" height="15" alt="Creative Commons License" title="Creative Commons License"></amp-img></a><br />
      <a href="https://www.planetacodigo.com/" rel="nofollow"><amp-img src="/blog-bitix/assets/images/planeta-codigo.png" width="80" height="15" alt="Planeta código" title="Planeta código"></amp-img></a>
      <br/>
      <a href="https://picodotdev.github.io/blog-bitix/" rel="nofollow">Blog Bitix</a> by <a href="https://picodotdev.github.io/blog-bitix/">pico.dev</a> is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional License</a>.
      <br/>
      <span class="credit">Powered by <a href="https://gohugo.io/" rel="nofollow" title="A fast and modern static website engine">Hugo</a> and <a href="https://pages.github.com/" title="Websites for you and your projects">GitHub Pages</a>.</span>
      <span class="credit">Background patterns from <a href="https://www.toptal.com/designers/subtlepatterns/" rel="nofollow">Subtle Patterns</a>.</span>
    </div>
  </div>
</footer>

  </div>
  <amp-analytics type="gtag" data-credentials="include">
<script type="application/json">
{
    "vars" : {
        "gtag_id": "G-9R8XCRGSMY",
        "config" : {
            "G-9R8XCRGSMY": { "groups": "default" }
        }
    }
}
</script>
</amp-analytics>  
  
</body>
</html>